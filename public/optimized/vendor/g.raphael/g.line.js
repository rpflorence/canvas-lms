Raphael.fn.g.linechart=function(a,b,c,d,e,f,g){function h(a,b){var c=a.length/b,d=0,e=c,f=0,g=[];while(d<a.length)e--,e<0?(f+=a[d]*(1+e),g.push(f/c),f=a[d++]*-e,e+=c):f+=a[d++];return g}function P(g){var h=[];for(var i=0,j=e.length;i<j;i++)h=h.concat(e[i]);h.sort();var k=[],m=[];for(var i=0,j=h.length;i<j;i++)h[i]!=h[i-1]&&k.push(h[i])&&m.push(a+n+(h[i]-l)*o);h=k,j=h.length;var p=g||w.set();for(var i=0;i<j;i++){var r=m[i]-(m[i]-(m[i-1]||a))/2,t=((m[i+1]||a+c)-m[i])/2+(m[i]-(m[i-1]||a))/2,u;g?u={}:p.push(u=w.rect(r-1,b,Math.max(t+1,1),d).attr({stroke:"none",fill:"#000",opacity:0})),u.values=[],u.symbols=w.set(),u.y=[],u.x=m[i],u.axis=h[i];for(var v=0,y=f.length;v<y;v++){k=e[v]||e[0];for(var A=0,B=k.length;A<B;A++)k[A]==h[i]&&(u.values.push(f[v][A]),u.y.push(b+d-n-(f[v][A]-q)*s),u.symbols.push(z.symbols[v][A]))}g&&g.call(u)}!g&&(x=p)}function Q(c){var g=c||w.set(),h;for(var i=0,j=f.length;i<j;i++)for(var k=0,m=f[i].length;k<m;k++){var p=a+n+((e[i]||e[0])[k]-l)*o,r=a+n+((e[i]||e[0])[k?k-1:1]-l)*o,t=b+d-n-(f[i][k]-q)*s;c?h={}:g.push(h=w.circle(p,t,Math.abs(r-p)/2).attr({stroke:"none",fill:"#000",opacity:0})),h.x=p,h.y=t,h.value=f[i][k],h.line=z.lines[i],h.shade=z.shades[i],h.symbol=z.symbols[i][k],h.symbols=z.symbols[i],h.axis=(e[i]||e[0])[k],c&&c.call(h)}!c&&(y=g)}g=g||{},this.raphael.is(e[0],"array")||(e=[e]),this.raphael.is(f[0],"array")||(f=[f]);var i=Array.prototype.concat.apply([],e),j=Array.prototype.concat.apply([],f),k=this.g.snapEnds(Math.min.apply(Math,i),Math.max.apply(Math,i),e[0].length-1),l=k.from,m=k.to,n=g.gutter||10,o=(c-n*2)/(m-l),p=this.g.snapEnds(Math.min.apply(Math,j),Math.max.apply(Math,j),f[0].length-1),q=p.from,r=p.to,s=(d-n*2)/(r-q),t=Math.max(e[0].length,f[0].length),u=g.symbol||"",v=g.colors||Raphael.fn.g.colors,w=this,x=null,y=null,z=this.set(),A=[];for(var B=0,C=f.length;B<C;B++)t=Math.max(t,f[B].length);var D=this.set();for(var B=0,C=f.length;B<C;B++)g.shade&&D.push(this.path().attr({stroke:"none",fill:v[B],opacity:g.nostroke?1:.3})),f[B].length>c-2*n&&(f[B]=h(f[B],c-2*n),t=c-2*n),e[B]&&e[B].length>c-2*n&&(e[B]=h(e[B],c-2*n));var E=this.set();if(g.axis){var F=(g.axis+"").split(/[,\s]+/);+F[0]&&E.push(this.g.axis(a+n,b+n,c-2*n,l,m,g.axisxstep||Math.floor((c-2*n)/20),2)),+F[1]&&E.push(this.g.axis(a+c-n,b+d-n,d-2*n,q,r,g.axisystep||Math.floor((d-2*n)/20),3)),+F[2]&&E.push(this.g.axis(a+n,b+d-n,c-2*n,l,m,g.axisxstep||Math.floor((c-2*n)/20),0)),+F[3]&&E.push(this.g.axis(a+n,b+d-n,d-2*n,q,r,g.axisystep||Math.floor((d-2*n)/20),1))}var G=this.set(),H=this.set(),I;for(var B=0,C=f.length;B<C;B++){g.nostroke||G.push(I=this.path().attr({stroke:v[B],"stroke-width":g.width||2,"stroke-linejoin":"round","stroke-linecap":"round","stroke-dasharray":g.dash||""}));var J=this.raphael.is(u,"array")?u[B]:u,K=this.set();A=[];for(var L=0,M=f[B].length;L<M;L++){var N=a+n+((e[B]||e[0])[L]-l)*o,O=b+d-n-(f[B][L]-q)*s;(Raphael.is(J,"array")?J[L]:J)&&K.push(this.g[Raphael.fn.g.markers[this.raphael.is(J,"array")?J[L]:J]](N,O,(g.width||2)*3).attr({fill:v[B],stroke:"none"})),A=A.concat([L?"L":"M",N,O])}H.push(K),g.shade&&D[B].attr({path:A.concat(["L",N,b+d-n,"L",a+n+((e[B]||e[0])[0]-l)*o,b+d-n,"z"]).join(",")}),!g.nostroke&&I.attr({path:A.join(",")})}return z.push(G,D,H,E,x,y),z.lines=G,z.shades=D,z.symbols=H,z.axis=E,z.hoverColumn=function(a,b){return!x&&P(),x.mouseover(a).mouseout(b),this},z.clickColumn=function(a){return!x&&P(),x.click(a),this},z.hrefColumn=function(a){var b=w.raphael.is(arguments[0],"array")?arguments[0]:arguments;if(!(arguments.length-1)&&typeof a=="object")for(var c in a)for(var d=0,e=x.length;d<e;d++)x[d].axis==c&&x[d].attr("href",a[c]);!x&&P();for(var d=0,e=b.length;d<e;d++)x[d]&&x[d].attr("href",b[d]);return this},z.hover=function(a,b){return!y&&Q(),y.mouseover(a).mouseout(b),this},z.click=function(a){return!y&&Q(),y.click(a),this},z.each=function(a){return Q(a),this},z.eachColumn=function(a){return P(a),this},z}