Raphael.fn.g.dotchart=function(a,b,c,d,e,f,g,h){function i(e){+e[0]&&(e[0]=x.g.axis(a+m,b+m,c-2*m,k,l,h.axisxstep||Math.floor((c-2*m)/20),2,h.axisxlabels||null,h.axisxtype||"t")),+e[1]&&(e[1]=x.g.axis(a+c-m,b+d-m,d-2*m,o,p,h.axisystep||Math.floor((d-2*m)/20),3,h.axisylabels||null,h.axisytype||"t")),+e[2]&&(e[2]=x.g.axis(a+m,b+d-m+B,c-2*m,k,l,h.axisxstep||Math.floor((c-2*m)/20),0,h.axisxlabels||null,h.axisxtype||"t")),+e[3]&&(e[3]=x.g.axis(a+m-B,b+d-m,d-2*m,o,p,h.axisystep||Math.floor((d-2*m)/20),1,h.axisylabels||null,h.axisytype||"t"))}h=h||{};var j=this.g.snapEnds(Math.min.apply(Math,e),Math.max.apply(Math,e),e.length-1),k=j.from,l=j.to,m=h.gutter||10,n=this.g.snapEnds(Math.min.apply(Math,f),Math.max.apply(Math,f),f.length-1),o=n.from,p=n.to,q=Math.max(e.length,f.length,g.length),r=this.g.markers[h.symbol]||"disc",s=this.set(),t=this.set(),u=h.max||100,v=Math.max.apply(Math,g),w=[],x=this,y=Math.sqrt(v/Math.PI)*2/u;for(var z=0;z<q;z++)w[z]=Math.min(Math.sqrt(g[z]/Math.PI)*2/y,u);m=Math.max.apply(Math,w.concat(m));var A=this.set(),B=Math.max.apply(Math,w);if(h.axis){var C=(h.axis+"").split(/[,\s]+/);i(C);var D=[],E=[];for(var z=0,F=C.length;z<F;z++){var G=C[z].all?C[z].all.getBBox()[["height","width"][z%2]]:0;D[z]=G+m,E[z]=G}m=Math.max.apply(Math,D.concat(m));for(var z=0,F=C.length;z<F;z++)C[z].all&&(C[z].remove(),C[z]=1);i(C);for(var z=0,F=C.length;z<F;z++)C[z].all&&A.push(C[z].all);s.axis=A}var H=(c-m*2)/(l-k||1),I=(d-m*2)/(p-o||1);for(var z=0,F=f.length;z<F;z++){var J=this.raphael.is(r,"array")?r[z]:r,K=a+m+(e[z]-k)*H,L=b+d-m-(f[z]-o)*I;J&&w[z]&&t.push(this.g[J](K,L,w[z]).attr({fill:h.heat?this.g.colorValue(w[z],B):Raphael.fn.g.colors[0],"fill-opacity":h.opacity?w[z]/u:1,stroke:"none"}))}var M=this.set();for(var z=0,F=f.length;z<F;z++){var K=a+m+(e[z]-k)*H,L=b+d-m-(f[z]-o)*I;M.push(this.circle(K,L,B).attr(this.g.shim)),h.href&&h.href[z]&&M[z].attr({href:h.href[z]}),M[z].r=+w[z].toFixed(3),M[z].x=+K.toFixed(3),M[z].y=+L.toFixed(3),M[z].X=e[z],M[z].Y=f[z],M[z].value=g[z]||0,M[z].dot=t[z]}return s.covers=M,s.series=t,s.push(t,A,M),s.hover=function(a,b){return M.mouseover(a).mouseout(b),this},s.click=function(a){return M.click(a),this},s.each=function(a){if(!Raphael.is(a,"function"))return this;for(var b=M.length;b--;)a.call(M[b]);return this},s.href=function(a){var b;for(var c=M.length;c--;)b=M[c],b.X==a.x&&b.Y==a.y&&b.value==a.value&&b.attr({href:a.href})},s}