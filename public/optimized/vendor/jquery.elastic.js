define(["jquery"],function(a){a.fn.extend({elastic:function(b){var c=a.extend({},b),d=["paddingTop","paddingRight","paddingBottom","paddingLeft","borderLeftWidth","borderLeftStyle","borderRightWidth","borderRightStyle","fontSize","lineHeight","fontFamily","width","fontWeight"];return this.each(function(){function j(a,c){var d=Math.floor(parseInt(a,10));b.height()!=d&&b.css({height:d+"px",overflow:c})}function k(){var d=b.val().replace(/&/g,"&amp;").replace(/  /g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />"),i=e.html().replace(/<br>/ig,"<br />");if(d+"&nbsp;"!=i){e[0].innerHTML=d+"&nbsp;",e.width(b.width());var k=e.height();if(Math.abs(k+f-b.height())>3){var l=k+f;l<h?l>g?j(l,"hidden"):j(g,"hidden"):j(h,"auto"),a.isFunction(c.callback)&&c.callback()}}}if(this.type!="textarea")return!1;var b=a(this),e=a("<div />").css({position:"absolute",display:"none","word-wrap":"break-word"}).prependTo(b.parent()),f=parseInt(b.css("line-height"),10)||parseInt(b.css("font-size"),"10"),g=parseInt(b.css("height"),10)||f*3,h=parseInt(b.css("max-height"),10)||Number.MAX_VALUE,i=0;h<0&&(h=Number.MAX_VALUE),a.each(d,function(a,c){e.css(c,b.css(c))}),b.css({overflow:"hidden"}).bind("keyup change cut paste",k).bind("input paste",function(a){setTimeout(k,250)}),k()})}})})