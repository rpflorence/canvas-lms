define(["i18n","jquery","jquery.ajaxJSON","vendor/jquery.spin"],function(a,b){a=a.scoped("instructure"),b.fn.disableWhileLoading=function(c,d){return this.each(function(){var e=b.extend(!0,{},b.fn.disableWhileLoading.defaults,d),f=b(this),g="disabled_"+b.guid++,h=f.add(f.next(".ui-dialog-buttonpane")),i=h.find("*").andSelf().filter(":input").not(":disabled").prop("disabled",!0);f.spin(d),h.css("opacity",function(a,c){return b(this).data(g+"opacityBefore",this.style.opacity),e.opacity}),b.each(e.buttons,function(c,d){b.isArray(e.buttons)&&(c=d,d=null),h.find(c).text(function(c,e){return b(this).data(g,e),d||b(this).data("textWhileLoading")||b(this).is(".ui-button-text")&&b(this).closest(".ui-button").data("textWhileLoading")||a.t("loading","Loading...")})}),b.when(c).always(function(){f.spin(!1),h.css("opacity",function(){return b(this).data(g+"opacityBefore")}),i.prop("disabled",!1),b.each(e.buttons,function(){h.find(""+this).text(function(){return b(this).data(g)})})})})},b.fn.disableWhileLoading.defaults={opacity:.5,buttons:['button[type="submit"], .ui-dialog-buttonpane .ui-button .ui-button-text']}})