define(["INST","i18n","jquery","jquery.instructure_jquery_patches"],function(a,b,c){function g(a){a=(a||"").split(":")[0];var b=a.split("."),c=b.length;return(c>1?[b[c-2],b[c-1]]:b).join("")}b=b.scoped("instructure");if(document.body.style.WebkitTransitionProperty!==undefined||document.body.style.MozTransitionProperty!==undefined||document.body.style.OTransitionProperty!==undefined){var d=".use-css-transitions-for-show-hide",e=.5,f="transitionend oTransitionEnd webkitTransitionEnd";c("<style>"+d+" {"+"    -webkit-transition: opacity "+e+"s;"+"    -moz-transition: opacity "+e+"s;"+"    -o-transition: opacity "+e+";"+"    transition: opacity "+e+"s;"+"  }"+"</style>").prependTo("head"),c.each(["show","hide","remove"],function(a,b){var g=c.fn[b];c.fn[b]=function(){return arguments.length?g.apply(this,arguments):this.each(function(){var a=c(this);this.parentNode&&a.is(d)?a.queue(function(){var c=this.style.opacity,d=a.css("opacity"),h=b==="hide"||b==="remove"?0:!d||d=="0"?1:d;b==="show"&&a.is(":hidden")&&(this.style.opacity=0,g.apply(a));var i=function(b){if(!b||b.originalEvent.propertyName==="opacity")g.apply(a),a[0].style.opacity=c,clearTimeout(j),a.unbind(f,i),a.dequeue()},j=setTimeout(i,e*1e3+100);a.bind(f,i),a.css("opacity",h)}):g.apply(a)})}})}var h=g(window.location.hostname);c.expr[":"].external=function(a){var b=c(a).attr("href");return!!(b&&b.length&&!b.match(/^(mailto\:|javascript\:)/)&&a.hostname&&g(a.hostname)!=h)},window.equella={ready:function(a){c(document).triggerHandler("equella_ready",a)},cancel:function(){c(document).triggerHandler("equella_cancel")}},c(document).bind("equella_ready",function(a,b){c("#equella_dialog").triggerHandler("equella_ready",b)}).bind("equella_cancel",function(){c("#equella_dialog").dialog("close")}),window.external_tool={ready:function(a){c("#external_tool_button_dialog:visible").triggerHandler("selection",a),c("#resource_selection_dialog:visible").triggerHandler("selection",a)},cancel:function(){c("#external_tool_button_dialog").dialog("close"),c("#resource_selection_dialog").dialog("close")}},window.jsonFlickrApi=function(a){c("#instructure_image_search").triggerHandler("search_results",a)}})