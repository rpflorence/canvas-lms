(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/EditEventDetailsDialog",["i18n","compiled/calendar/CommonEvent","compiled/calendar/EditCalendarEventDetails","compiled/calendar/EditAssignmentDetails","compiled/calendar/EditAppointmentGroupDetails","jst/calendar/editEvent"],function(b,c,d,e,f,g){var h;return b=b.scoped("calendar"),h=$('<div id="edit_event"><div /></div>').appendTo("body").dialog({autoOpen:!1,width:"auto",resizable:!1,title:b.t("titles.edit_event","Edit Event")}),function(){function b(b){this.event=b,this.show=a(this.show,this),this.closeCB=a(this.closeCB,this),this.contextChange=a(this.contextChange,this),this.setupTabs=a(this.setupTabs,this),this.currentContextInfo=null}return b.prototype.contextInfoForCode=function(a){var b,c,d,e;e=this.event.possibleContexts();for(c=0,d=e.length;c<d;c++){b=e[c];if(b.asset_string===a)return b}return null},b.prototype.setupTabs=function(){var a;return a=h.find("#edit_event_tabs"),a.tabs().bind("tabsselect",function(a,b){return $(b.panel).closest(".tab_holder").data("form-widget").activate()}),this.event.eventType==="calendar_event"?(a.tabs("select",0),a.tabs("remove",1),this.calendarEventForm.activate()):this.event.eventType==="assignment"?(a.tabs("select",1),a.tabs("remove",0),this.assignmentDetailsForm.activate()):this.calendarEventForm.activate()},b.prototype.contextChange=function(a){h.removeClass(h.data("group_class")),h.addClass("group_"+a).data("group_class","group_"+a),this.calendarEventForm&&this.calendarEventForm.setContext(a);if(this.assignmentDetailsForm)return this.assignmentDetailsForm.setContext(a)},b.prototype.closeCB=function(){return h.dialog("close")},b.prototype.show=function(){var a;a=g(),h.children().replaceWith(a);if(this.event.isNewEvent()||this.event.eventType==="calendar_event")this.calendarEventForm=new d(h.find("#edit_calendar_event_form_holder"),this.event,this.contextChange,this.closeCB),h.find("#edit_calendar_event_form_holder").data("form-widget",this.calendarEventForm);if(this.event.isNewEvent()||this.event.eventType==="assignment")this.assignmentDetailsForm=new e(h.find("#edit_assignment_form_holder"),this.event,this.contextChange,this.closeCB),h.find("#edit_assignment_form_holder").data("form-widget",this.assignmentDetailsForm);return this.setupTabs(),h.dialog("open")},b}()})}).call(this)