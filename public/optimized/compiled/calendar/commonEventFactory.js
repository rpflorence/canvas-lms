(function(){define("compiled/calendar/commonEventFactory",["compiled/calendar/CommonEvent","compiled/calendar/CommonEvent.Assignment","compiled/calendar/CommonEvent.CalendarEvent"],function(a,b,c){return function(d,e){var f,g,h,i,j,k,l,m,n;if(d===null)return i=new a,i.allPossibleContexts=e,i;h=d.context_code||((m=d.assignment)!=null?m.context_code:void 0)||((n=d.calendar_event)!=null?n.context_code:void 0),j=null,d.assignment||d.assignment_group_id?j="assignment":j="calendar_event",d=d.assignment||d.calendar_event||d,g=null;for(k=0,l=e.length;k<l;k++){f=e[k];if(f.asset_string===h){g=f;break}}return g===null?null:(j==="assignment"?i=new b(d,g):i=new c(d,g),i.can_edit=!1,i.can_delete=!1,g.can_create_calendar_events&&(i.can_edit=!0,i.can_delete=!0),i.object.workflow_state==="locked"&&(i.can_edit=!1),i.object.appointment_group_id&&(i.can_edit=!1),i)}})}).call(this)