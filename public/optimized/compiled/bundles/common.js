/*!
 * jQuery JavaScript Library v1.6.4
 * http://jquery.com/
 *
 * Copyright 2011, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2011, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Mon Sep 12 18:54:48 2011 -0400
 */
/*!
 * Sizzle CSS Selector Engine
 *  Copyright 2011, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
/**
 * @version: 1.0 Alpha-1
 * @author: Coolite Inc. http://www.coolite.com/
 * @date: 2008-05-13
 * @copyright: Copyright (c) 2006-2008, Coolite Inc. (http://www.coolite.com/). All rights reserved.
 * @license: Licensed under The MIT License. See license.txt and http://www.datejs.com/license/. 
 * @website: http://www.datejs.com/
 */
/*!
 * jQuery UI @VERSION
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
/*!
 * jQuery UI Widget @VERSION
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
/*!
 * jQuery UI Mouse @VERSION
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 *	jquery.ui.widget.js
 */
/*!
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
/*!
 * jQuery hashchange event - v1.3 - 7/21/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
/*!
 * jQuery Tiny Pub/Sub - v0.6 - 1/10/2011
 * http://benalman.com/
 *
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
/*!	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/
/*!
 * Raphael 1.2.1 - JavaScript Vector Library
 *
 * Copyright (c) 2008 - 2009 Dmitry Baranovskiy (http://raphaeljs.com)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 */
/**
 * @license RequireJS order 1.0.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/requirejs for details
 */
(function(a,b){function k(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(j,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNaN(d)?i.test(d)?f.parseJSON(d):d:parseFloat(d)}catch(g){}f.data(a,c,d)}else d=b}return d}function l(a){for(var b in a)if(b!=="toJSON")return!1;return!0}function m(a,c,d){var e=c+"defer",g=c+"queue",h=c+"mark",i=f.data(a,e,b,!0);i&&(d==="queue"||!f.data(a,g,b,!0))&&(d==="mark"||!f.data(a,h,b,!0))&&setTimeout(function(){!f.data(a,g,b,!0)&&!f.data(a,h,b,!0)&&(f.removeData(a,e,!0),i.resolve())},0)}function C(){return!1}function D(){return!0}function J(a,c,d){var e=f.extend({},d[0]);e.type=a,e.originalEvent={},e.liveFired=b,f.event.handle.call(c,e),e.isDefaultPrevented()&&d[0].preventDefault()}function L(a){var b,c,d,e,g,h,i,j,k,l,m,n,o,p=[],q=[],r=f._data(this,"events");if(a.liveFired===this||!r||!r.live||a.target.disabled||a.button&&a.type==="click")return;a.namespace&&(n=new RegExp("(^|\\.)"+a.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")),a.liveFired=this;var s=r.live.slice(0);for(i=0;i<s.length;i++)g=s[i],g.origType.replace(w,"")===a.type?q.push(g.selector):s.splice(i--,1);e=f(a.target).closest(q,a.currentTarget);for(j=0,k=e.length;j<k;j++){m=e[j];for(i=0;i<s.length;i++){g=s[i];if(m.selector===g.selector&&(!n||n.test(g.namespace))&&!m.elem.disabled){h=m.elem,d=null;if(g.preType==="mouseenter"||g.preType==="mouseleave")a.type=g.preType,d=f(a.relatedTarget).closest(g.selector)[0],d&&f.contains(h,d)&&(d=h);(!d||d!==h)&&p.push({elem:h,handleObj:g,level:m.level})}}}for(j=0,k=p.length;j<k;j++){e=p[j];if(c&&e.level>c)break;a.currentTarget=e.elem,a.data=e.handleObj.data,a.handleObj=e.handleObj,o=e.handleObj.origHandler.apply(e.elem,arguments);if(o===!1||a.isPropagationStopped()){c=e.level,o===!1&&(b=!1);if(a.isImmediatePropagationStopped())break}}return b}function M(a,b){return(a&&a!=="*"?a+".":"")+b.replace(y,"`").replace(z,"&")}function U(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function V(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(Q.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function bf(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function bg(a,b){if(b.nodeType!==1||!f.hasData(a))return;var c=f.expando,d=f.data(a),e=f.data(b,d);if(d=d[c]){var g=d.events;e=e[c]=f.extend({},d);if(g){delete e.handle,e.events={};for(var h in g)for(var i=0,j=g[h].length;i<j;i++)f.event.add(b,h+(g[h][i].namespace?".":"")+g[h][i].namespace,g[h][i],g[h][i].data)}}}function bh(a,b){var c;if(b.nodeType!==1)return;b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase();if(c==="object")b.outerHTML=a.outerHTML;else if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option")b.selected=a.defaultSelected;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}else a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value);b.removeAttribute(f.expando)}function bi(a){return"getElementsByTagName"in a?a.getElementsByTagName("*"):"querySelectorAll"in a?a.querySelectorAll("*"):[]}function bj(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function bk(a){f.nodeName(a,"input")?bj(a):"getElementsByTagName"in a&&f.grep(a.getElementsByTagName("input"),bj)}function bl(a,b){b.src?f.ajax({url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bd,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)}function by(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?bt:bu;if(d>0)return c!=="border"&&f.each(e,function(){c||(d-=parseFloat(f.css(a,"padding"+this))||0),c==="margin"?d+=parseFloat(f.css(a,c+this))||0:d-=parseFloat(f.css(a,"border"+this+"Width"))||0}),d+"px";d=bv(a,b,b);if(d<0||d==null)d=a.style[b]||0;return d=parseFloat(d)||0,c&&f.each(e,function(){d+=parseFloat(f.css(a,"padding"+this))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+this+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+this))||0)}),d+"px"}function bV(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bL),e=0,g=d.length,h,i,j;for(;e<g;e++)h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}function bW(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bP,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=bW(a,c,d,e,l,g)));return(k||!l)&&!g["*"]&&(l=bW(a,c,d,e,"*",g)),l}function bX(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d]);e&&f.extend(!0,a,e)}function bY(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bA.test(a)?d(a,e):bY(a+"["+(typeof e=="object"||f.isArray(e)?b:"")+"]",e,c,d)});else if(!c&&b!=null&&typeof b=="object")for(var e in b)bY(a+"["+e+"]",b[e],c,d);else d(a,b)}function bZ(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j)return j!==f[0]&&f.unshift(j),d[j]}function b$(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1)for(h in a.converters)typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h]);l=k,k=d[g];if(k==="*")k=l;else if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}return c}function ce(){try{return new a.XMLHttpRequest}catch(b){}}function cf(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function co(){return setTimeout(cp,0),cn=f.now()}function cp(){cn=b}function cq(a,b){var c={};return f.each(cm.concat.apply([],cm.slice(0,b)),function(){c[this]=a}),c}function cr(a){if(!cg[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){ch||(ch=c.createElement("iframe"),ch.frameBorder=ch.width=ch.height=0),b.appendChild(ch);if(!ci||!ch.createElement)ci=(ch.contentWindow||ch.contentDocument).document,ci.write((c.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),ci.close();d=ci.createElement(a),ci.body.appendChild(d),e=f.css(d,"display"),b.removeChild(ch)}cg[a]=e}return cg[a]}function cu(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}var c=a.document,d=a.navigator,e=a.location,f=function(){function K(){if(e.isReady)return;try{c.documentElement.doScroll("left")}catch(a){setTimeout(K,1);return}e.ready()}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/\d/,n=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,o=/^[\],:{}\s]*$/,p=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,q=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,r=/(?:^|:|,)(?:\s*\[)+/g,s=/(webkit)[ \/]([\w.]+)/,t=/(opera)(?:.*version)?[ \/]([\w.]+)/,u=/(msie) ([\w.]+)/,v=/(mozilla)(?:.*? rv:([\w.]+))?/,w=/-([a-z]|[0-9])/ig,x=/^-ms-/,y=function(a,b){return(b+"").toUpperCase()},z=d.userAgent,A,B,C,D=Object.prototype.toString,E=Object.prototype.hasOwnProperty,F=Array.prototype.push,G=Array.prototype.slice,H=String.prototype.trim,I=Array.prototype.indexOf,J={};return e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(a==="body"&&!d&&c.body)return this.context=c,this[0]=c.body,this.selector=a,this.length=1,this;if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1])return d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=n.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes),e.merge(this,a);h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}return this.context=c,this.selector=a,this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}return e.isFunction(a)?f.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),e.makeArray(a,this))},selector:"",jquery:"1.6.4",length:0,size:function(){return this.length},toArray:function(){return G.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();return e.isArray(a)?F.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d},each:function(a,b){return e.each(this,a,b)},ready:function(a){return e.bindReady(),B.done(a),this},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(G.apply(this,arguments),"slice",G.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:F,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){d=i[c],f=a[c];if(i===f)continue;l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}return i},e.extend({noConflict:function(b){return a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f),e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body)return setTimeout(e.ready,1);e.isReady=!0;if(a!==!0&&--e.readyWait>0)return;B.resolveWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").unbind("ready")}},bindReady:function(){if(B)return;B=e._Deferred();if(c.readyState==="complete")return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener("DOMContentLoaded",C,!1),a.addEventListener("load",e.ready,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",C),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&K()}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a&&typeof a=="object"&&"setInterval"in a},isNaN:function(a){return a==null||!m.test(a)||isNaN(a)},type:function(a){return a==null?String(a):J[D.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a))return!1;try{if(a.constructor&&!E.call(a,"constructor")&&!E.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||E.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw a},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=e.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(o.test(b.replace(p,"@").replace(q,"]").replace(r,"")))return(new Function("return "+b))();e.error("Invalid JSON: "+b)},parseXML:function(c){var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}return(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(x,"ms-").replace(w,y)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g<h;)if(c.apply(a[g++],d)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:H?function(a){return a==null?"":H.call(a)}:function(a){return a==null?"":a.toString().replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?F.call(c,a):e.merge(c,a)}return c},inArray:function(a,b){if(!b)return-1;if(I)return I.call(b,a);for(var c=0,d=b.length;c<d;c++)if(b[c]===a)return c;return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];return a.length=d,a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,d),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,d),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=G.call(arguments,2),g=function(){return a.apply(c,f.concat(G.call(arguments)))};return g.guid=a.guid=a.guid||g.guid||e.guid++,g},access:function(a,c,d,f,g,h){var i=a.length;if(typeof c=="object"){for(var j in c)e.access(a,j,c[j],f,g,d);return a}if(d!==b){f=!h&&f&&e.isFunction(d);for(var k=0;k<i;k++)g(a[k],c,f?d.call(a[k],k,g(a[k],c)):d,h);return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=s.exec(a)||t.exec(a)||u.exec(a)||a.indexOf("compatible")<0&&v.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function d(c,d){return d&&d instanceof e&&!(d instanceof a)&&(d=a(d)),e.fn.init.call(this,c,d,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){J["[object "+b+"]"]=b.toLowerCase()}),A=e.uaMatch(z),A.browser&&(e.browser[A.browser]=!0,e.browser.version=A.version),e.browser.webkit&&(e.browser.safari=!0),j.test("Â ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?C=function(){c.removeEventListener("DOMContentLoaded",C,!1),e.ready()}:c.attachEvent&&(C=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",C),e.ready())}),e}(),g="done fail isResolved isRejected promise then always pipe".split(" "),h=[].slice;f.extend({_Deferred:function(){var a=[],b,c,d,e={done:function(){if(!d){var c=arguments,g,h,i,j,k;b&&(k=b,b=0);for(g=0,h=c.length;g<h;g++)i=c[g],j=f.type(i),j==="array"?e.done.apply(e,i):j==="function"&&a.push(i);k&&e.resolveWith(k[0],k[1])}return this},resolveWith:function(e,f){if(!d&&!b&&!c){f=f||[],c=1;try{while(a[0])a.shift().apply(e,f)}finally{b=[e,f],c=0}}return this},resolve:function(){return e.resolveWith(this,arguments),this},isResolved:function(){return!!c||!!b},cancel:function(){return d=1,a=[],this}};return e},Deferred:function(a){var b=f._Deferred(),c=f._Deferred(),d;return f.extend(b,{then:function(a,c){return b.done(a).fail(c),this},always:function(){return b.done.apply(b,arguments).fail.apply(this,arguments)},fail:c.done,rejectWith:c.resolveWith,reject:c.resolve,isRejected:c.isResolved,pipe:function(a,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[c,"reject"]},function(a,c){var e=c[0],g=c[1],h;f.isFunction(e)?b[a](function(){h=e.apply(this,arguments),h&&f.isFunction(h.promise)?h.promise().then(d.resolve,d.reject):d[g+"With"](this===b?d:this,[h])}):b[a](d[g])})}).promise()},promise:function(a){if(a==null){if(d)return d;d=a={}}var c=g.length;while(c--)a[g[c]]=b[g[c]];return a}}),b.done(c.cancel).fail(b.cancel),delete b.cancel,a&&a.call(b,b),b},when:function(a){function i(a){return function(c){b[a]=arguments.length>1?h.call(arguments,0):c,--e||g.resolveWith(g,h.call(b,0))}}var b=arguments,c=0,d=b.length,e=d,g=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred();if(d>1){for(;c<d;c++)b[c]&&f.isFunction(b[c].promise)?b[c].promise().then(i(c),g.reject):--e;e||g.resolveWith(g,b)}else g!==a&&g.resolveWith(g,d?[a]:[]);return g.promise()}}),f.support=function(){var a=c.createElement("div"),b=c.documentElement,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;a.setAttribute("className","t"),a.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=a.getElementsByTagName("*"),e=a.getElementsByTagName("a")[0];if(!d||!d.length||!e)return{};g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=a.getElementsByTagName("input")[0],k={leadingWhitespace:a.firstChild.nodeType===3,tbody:!a.getElementsByTagName("tbody").length,htmlSerialize:!!a.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55$/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:a.className!=="t",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},i.checked=!0,k.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,k.optDisabled=!h.disabled;try{delete a.test}catch(v){k.deleteExpando=!1}!a.addEventListener&&a.attachEvent&&a.fireEvent&&(a.attachEvent("onclick",function(){k.noCloneEvent=!1}),a.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),k.radioValue=i.value==="t",i.setAttribute("checked","checked"),a.appendChild(i),l=c.createDocumentFragment(),l.appendChild(a.firstChild),k.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,a.innerHTML="",a.style.width=a.style.paddingLeft="1px",m=c.getElementsByTagName("body")[0],o=c.createElement(m?"div":"body"),p={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},m&&f.extend(p,{position:"absolute",left:"-1000px",top:"-1000px"});for(t in p)o.style[t]=p[t];o.appendChild(a),n=m||b,n.insertBefore(o,n.firstChild),k.appendChecked=i.checked,k.boxModel=a.offsetWidth===2,"zoom"in a.style&&(a.style.display="inline",a.style.zoom=1,k.inlineBlockNeedsLayout=a.offsetWidth===2,a.style.display="",a.innerHTML="<div style='width:4px;'></div>",k.shrinkWrapBlocks=a.offsetWidth!==2),a.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",q=a.getElementsByTagName("td"),u=q[0].offsetHeight===0,q[0].style.display="",q[1].style.display="none",k.reliableHiddenOffsets=u&&q[0].offsetHeight===0,a.innerHTML="",c.defaultView&&c.defaultView.getComputedStyle&&(j=c.createElement("div"),j.style.width="0",j.style.marginRight="0",a.appendChild(j),k.reliableMarginRight=(parseInt((c.defaultView.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)===0),o.innerHTML="",n.removeChild(o);if(a.attachEvent)for(t in{submit:1,change:1,focusin:1})s="on"+t,u=s in a,u||(a.setAttribute(s,"return;"),u=typeof a[s]=="function"),k[t+"Bubbles"]=u;return o=l=g=h=m=j=a=i=null,k}(),f.boxModel=f.support.boxModel;var i=/^(?:\{.*\}|\[.*\])$/,j=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?f.cache[a[f.expando]]:a[f.expando],!!a&&!l(a)},data:function(a,c,d,e){if(!f.acceptData(a))return;var g,h,i=f.expando,j=typeof c=="string",k=a.nodeType,l=k?f.cache:a,m=k?a[f.expando]:a[f.expando]&&f.expando;if((!m||e&&m&&l[m]&&!l[m][i])&&j&&d===b)return;m||(k?a[f.expando]=m=++f.uuid:m=f.expando),l[m]||(l[m]={},k||(l[m].toJSON=f.noop));if(typeof c=="object"||typeof c=="function")e?l[m][i]=f.extend(l[m][i],c):l[m]=f.extend(l[m],c);return g=l[m],e&&(g[i]||(g[i]={}),g=g[i]),d!==b&&(g[f.camelCase(c)]=d),c==="events"&&!g[c]?g[i]&&g[i].events:(j?(h=g[c],h==null&&(h=g[f.camelCase(c)])):h=g,h)},removeData:function(a,b,c){if(!f.acceptData(a))return;var d,e=f.expando,g=a.nodeType,h=g?f.cache:a,i=g?a[f.expando]:f.expando;if(!h[i])return;if(b){d=c?h[i][e]:h[i];if(d){d[b]||(b=f.camelCase(b)),delete d[b];if(!l(d))return}}if(c){delete h[i][e];if(!l(h[i]))return}var j=h[i][e];f.support.deleteExpando||!h.setInterval?delete h[i]:h[i]=null,j?(h[i]={},g||(h[i].toJSON=f.noop),h[i][e]=j):g&&(f.support.deleteExpando?delete a[f.expando]:a.removeAttribute?a.removeAttribute(f.expando):a[f.expando]=null)},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),f.fn.extend({data:function(a,c){var d=null;if(typeof a=="undefined"){if(this.length){d=f.data(this[0]);if(this[0].nodeType===1){var e=this[0].attributes,g;for(var h=0,i=e.length;h<i;h++)g=e[h].name,g.indexOf("data-")===0&&(g=f.camelCase(g.substring(5)),k(this[0],g,d[g]))}}return d}if(typeof a=="object")return this.each(function(){f.data(this,a)});var j=a.split(".");return j[1]=j[1]?"."+j[1]:"",c===b?(d=this.triggerHandler("getData"+j[1]+"!",[j[0]]),d===b&&this.length&&(d=f.data(this[0],a),d=k(this[0],a,d)),d===b&&j[1]?this.data(j[0]):d):this.each(function(){var b=f(this),d=[j[0],c];b.triggerHandler("setData"+j[1]+"!",d),f.data(this,a,c),b.triggerHandler("changeData"+j[1]+"!",d)})},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,c){a&&(c=(c||"fx")+"mark",f.data(a,c,(f.data(a,c,b,!0)||0)+1,!0))},_unmark:function(a,c,d){a!==!0&&(d=c,c=a,a=!1);if(c){d=d||"fx";var e=d+"mark",g=a?0:(f.data(c,e,b,!0)||1)-1;g?f.data(c,e,g,!0):(f.removeData(c,e,!0),m(c,d,"mark"))}},queue:function(a,c,d){if(a){c=(c||"fx")+"queue";var e=f.data(a,c,b,!0);return d&&(!e||f.isArray(d)?e=f.data(a,c,f.makeArray(d),!0):e.push(d)),e||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e;d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),d.call(a,function(){f.dequeue(a,b)})),c.length||(f.removeData(a,b+"queue",!0),m(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){return typeof a!="string"&&(c=a,a="fx"),c===b?f.queue(this[0],a):this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){return a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(){var c=this;setTimeout(function(){f.dequeue(c,b)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f._Deferred(),!0))h++,l.done(m);return m(),d.promise()}});var n=/[\n\t\r]/g,o=/\s+/,p=/\r/g,q=/^(?:button|input)$/i,r=/^(?:button|input|object|select|textarea)$/i,s=/^a(?:rea)?$/i,t=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,u,v;f.fn.extend({attr:function(a,b){return f.access(this,a,b,!0,f.attr)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,a,b,!0,f.prop)},removeProp:function(a){return a=f.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(o);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++)~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");e.className=f.trim(g)}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(o);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className)if(a){h=(" "+g.className+" ").replace(n," ");for(i=0,j=c.length;i<j;i++)h=h.replace(" "+c[i]+" "," ");g.className=f.trim(h)}else g.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";return f.isFunction(a)?this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(o);while(e=j[g++])i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ";for(var c=0,d=this.length;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(n," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e=this[0];if(!arguments.length)return e?(c=f.valHooks[e.nodeName.toLowerCase()]||f.valHooks[e.type],c&&"get"in c&&(d=c.get(e,"value"))!==b?d:(d=e.value,typeof d=="string"?d.replace(p,""):d==null?"":d)):b;var g=f.isFunction(a);return this.each(function(d){var e=f(this),h;if(this.nodeType!==1)return;g?h=a.call(this,d,e.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];if(!c||!("set"in c)||c.set(this,h,"value")===b)this.value=h})}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c=a.selectedIndex,d=[],e=a.options,g=a.type==="select-one";if(c<0)return null;for(var h=g?c:0,i=g?c+1:e.length;h<i;h++){var j=e[h];if(j.selected&&(f.support.optDisabled?!j.disabled:j.getAttribute("disabled")===null)&&(!j.parentNode.disabled||!f.nodeName(j.parentNode,"optgroup"))){b=f(j).val();if(g)return b;d.push(b)}}return g&&!d.length&&e.length?f(e[c]).val():d},set:function(a,b){var c=f.makeArray(b);return f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attrFix:{tabindex:"tabIndex"},attr:function(a,c,d,e){var g=a.nodeType;if(!a||g===3||g===8||g===2)return b;if(e&&c in f.attrFn)return f(a)[c](d);if("getAttribute"in a){var h,i,j=g!==1||!f.isXMLDoc(a);return j&&(c=f.attrFix[c]||c,i=f.attrHooks[c],i||(t.test(c)?i=v:u&&(i=u))),d!==b?d===null?(f.removeAttr(a,c),b):i&&"set"in i&&j&&(h=i.set(a,d,c))!==b?h:(a.setAttribute(c,""+d),d):i&&"get"in i&&j&&(h=i.get(a,c))!==null?h:(h=a.getAttribute(c),h===null?b:h)}return f.prop(a,c,d)},removeAttr:function(a,b){var c;a.nodeType===1&&(b=f.attrFix[b]||b,f.attr(a,b,""),a.removeAttribute(b),t.test(b)&&(c=f.propFix[b]||b)in a&&(a[c]=!1))},attrHooks:{type:{set:function(a,b){if(q.test(a.nodeName)&&a.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}},value:{get:function(a,b){return u&&f.nodeName(a,"button")?u.get(a,b):b in a?a.value:null},set:function(a,b,c){if(u&&f.nodeName(a,"button"))return u.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e=a.nodeType;if(!a||e===3||e===8||e===2)return b;var g,h,i=e!==1||!f.isXMLDoc(a);return i&&(c=f.propFix[c]||c,h=f.propHooks[c]),d!==b?h&&"set"in h&&(g=h.set(a,d,c))!==b?g:a[c]=d:h&&"get"in h&&(g=h.get(a,c))!==null?g:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):r.test(a.nodeName)||s.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabIndex=f.propHooks.tabIndex,v={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;return b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},f.support.getSetAttribute||(u=f.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&d.nodeValue!==""?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);return e||(e=c.createAttribute(d),a.setAttributeNode(e)),e.nodeValue=b+""}},f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c==="")return a.setAttribute(b,"auto"),c}})})),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray(f(a).val(),b)>=0}})});var w=/\.(.*)$/,x=/^(?:textarea|input|select)$/i,y=/\./g,z=/ /g,A=/[^\w\s.|`]/g,B=function(a){return a.replace(A,"\\$&")};f.event={add:function(a,c,d,e){if(a.nodeType===3||a.nodeType===8)return;if(d===!1)d=C;else if(!d)return;var g,h;d.handler&&(g=d,d=g.handler),d.guid||(d.guid=f.guid++);var i=f._data(a);if(!i)return;var j=i.events,k=i.handle;j||(i.events=j={}),k||(i.handle=k=function(a){return typeof f=="undefined"||!!a&&f.event.triggered===a.type?b:f.event.handle.apply(k.elem,arguments)}),k.elem=a,c=c.split(" ");var l,m=0,n;while(l=c[m++]){h=g?f.extend({},g):{handler:d,data:e},l.indexOf(".")>-1?(n=l.split("."),l=n.shift(),h.namespace=n.slice(0).sort().join(".")):(n=[],h.namespace=""),h.type=l,h.guid||(h.guid=d.guid);var o=j[l],p=f.event.special[l]||{};if(!o){o=j[l]=[];if(!p.setup||p.setup.call(a,e,n,k)===!1)a.addEventListener?a.addEventListener(l,k,!1):a.attachEvent&&a.attachEvent("on"+l,k)}p.add&&(p.add.call(a,h),h.handler.guid||(h.handler.guid=d.guid)),o.push(h),f.event.global[l]=!0}a=null},global:{},remove:function(a,c,d,e){if(a.nodeType===3||a.nodeType===8)return;d===!1&&(d=C);var g,h,i,j,k=0,l,m,n,o,p,q,r,s=f.hasData(a)&&f._data(a),t=s&&s.events;if(!s||!t)return;c&&c.type&&(d=c.handler,c=c.type);if(!c||typeof c=="string"&&c.charAt(0)==="."){c=c||"";for(h in t)f.event.remove(a,h+c);return}c=c.split(" ");while(h=c[k++]){r=h,q=null,l=h.indexOf(".")<0,m=[],l||(m=h.split("."),h=m.shift(),n=new RegExp("(^|\\.)"+f.map(m.slice(0).sort(),B).join("\\.(?:.*\\.)?")+"(\\.|$)")),p=t[h];if(!p)continue;if(!d){for(j=0;j<p.length;j++){q=p[j];if(l||n.test(q.namespace))f.event.remove(a,r,q.handler,j),p.splice(j--,1)}continue}o=f.event.special[h]||{};for(j=e||0;j<p.length;j++){q=p[j];if(d.guid===q.guid){if(l||n.test(q.namespace))e==null&&p.splice(j--,1),o.remove&&o.remove.call(a,q);if(e!=null)break}}if(p.length===0||e!=null&&p.length===1)(!o.teardown||o.teardown.call(a,m)===!1)&&f.removeEvent(a,h,s.handle),g=null,delete t[h]}if(f.isEmptyObject(t)){var u=s.handle;u&&(u.elem=null),delete s.events,delete s.handle,f.isEmptyObject(s)&&f.removeData(a,b,!0)}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){var h=c.type||c,i=[],j;h.indexOf("!")>=0&&(h=h.slice(0,-1),j=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h])return;c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.exclusive=j,c.namespace=i.join("."),c.namespace_re=new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)");if(g||!e)c.preventDefault(),c.stopPropagation();if(!e){f.each(f.cache,function(){var a=f.expando,b=this[a];b&&b.events&&b.events[h]&&f.event.trigger(c,d,b.handle.elem)});return}if(e.nodeType===3||e.nodeType===8)return;c.result=b,c.target=e,d=d!=null?f.makeArray(d):[],d.unshift(c);var k=e,l=h.indexOf(":")<0?"on"+h:"";do{var m=f._data(k,"handle");c.currentTarget=k,m&&m.apply(k,d),l&&f.acceptData(k)&&k[l]&&k[l].apply(k,d)===!1&&(c.result=!1,c.preventDefault()),k=k.parentNode||k.ownerDocument||k===c.target.ownerDocument&&a}while(k&&!c.isPropagationStopped());if(!c.isDefaultPrevented()){var n,o=f.event.special[h]||{};if((!o._default||o._default.call(e.ownerDocument,c)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)){try{l&&e[h]&&(n=e[l],n&&(e[l]=null),f.event.triggered=h,e[h]())}catch(p){}n&&(e[l]=n),f.event.triggered=b}}return c.result},handle:function(c){c=f.event.fix(c||a.event);var d=((f._data(this,"events")||{})[c.type]||[]).slice(0),e=!c.exclusive&&!c.namespace,g=Array.prototype.slice.call(arguments,0);g[0]=c,c.currentTarget=this;for(var h=0,i=d.length;h<i;h++){var j=d[h];if(e||c.namespace_re.test(j.namespace)){c.handler=j.handler,c.data=j.data,c.handleObj=j;var k=j.handler.apply(this,g);k!==b&&(c.result=k,k===!1&&(c.preventDefault(),c.stopPropagation()));if(c.isImmediatePropagationStopped())break}}return c.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(a){if(a[f.expando])return a;var d=a;a=f.Event(d);for(var e=this.props.length,g;e;)g=this.props[--e],a[g]=d[g];a.target||(a.target=a.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement);if(a.pageX==null&&a.clientX!=null){var h=a.target.ownerDocument||c,i=h.documentElement,j=h.body;a.pageX=a.clientX+(i&&i.scrollLeft||j&&j.scrollLeft||0)-(i&&i.clientLeft||j&&j.clientLeft||0),a.pageY=a.clientY+(i&&i.scrollTop||j&&j.scrollTop||0)-(i&&i.clientTop||j&&j.clientTop||0)}return a.which==null&&(a.charCode!=null||a.keyCode!=null)&&(a.which=a.charCode!=null?a.charCode:a.keyCode),!a.metaKey&&a.ctrlKey&&(a.metaKey=a.ctrlKey),!a.which&&a.button!==b&&(a.which=a.button&1?1:a.button&2?3:a.button&4?2:0),a},guid:1e8,proxy:f.proxy,special:{ready:{setup:f.bindReady,teardown:f.noop},live:{add:function(a){f.event.add(this,M(a.origType,a.selector),f.extend({},a,{handler:L,guid:a.handler.guid}))},remove:function(a){f.event.remove(this,M(a.origType,a.selector),a)}},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}}},f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!this.preventDefault)return new f.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?D:C):this.type=a,b&&f.extend(this,b),this.timeStamp=f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=D;var a=this.originalEvent;if(!a)return;a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=D;var a=this.originalEvent;if(!a)return;a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=D,this.stopPropagation()},isDefaultPrevented:C,isPropagationStopped:C,isImmediatePropagationStopped:C};var E=function(a){var b=a.relatedTarget,c=!1,d=a.type;a.type=a.data,b!==this&&(b&&(c=f.contains(this,b)),c||(f.event.handle.apply(this,arguments),a.type=d))},F=function(a){a.type=a.data,f.event.handle.apply(this,arguments)};f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={setup:function(c){f.event.add(this,b,c&&c.selector?F:E,a)},teardown:function(a){f.event.remove(this,b,a&&a.selector?F:E)}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(a,b){if(!f.nodeName(this,"form"))f.event.add(this,"click.specialSubmit",function(a){var b=a.target,c=f.nodeName(b,"input")||f.nodeName(b,"button")?b.type:"";(c==="submit"||c==="image")&&f(b).closest("form").length&&J("submit",this,arguments)}),f.event.add(this,"keypress.specialSubmit",function(a){var b=a.target,c=f.nodeName(b,"input")||f.nodeName(b,"button")?b.type:"";(c==="text"||c==="password")&&f(b).closest("form").length&&a.keyCode===13&&J("submit",this,arguments)});else return!1},teardown:function(a){f.event.remove(this,".specialSubmit")}});if(!f.support.changeBubbles){var G,H=function(a){var b=f.nodeName(a,"input")?a.type:"",c=a.value;return b==="radio"||b==="checkbox"?c=a.checked:b==="select-multiple"?c=a.selectedIndex>-1?f.map(a.options,function(a){return a.selected}).join("-"):"":f.nodeName(a,"select")&&(c=a.selectedIndex),c},I=function(a){var c=a.target,d,e;if(!x.test(c.nodeName)||c.readOnly)return;d=f._data(c,"_change_data"),e=H(c),(a.type!=="focusout"||c.type!=="radio")&&f._data(c,"_change_data",e);if(d===b||e===d)return;if(d!=null||e)a.type="change",a.liveFired=b,f.event.trigger(a,arguments[1],c)};f.event.special.change={filters:{focusout:I,beforedeactivate:I,click:function(a){var b=a.target,c=f.nodeName(b,"input")?b.type:"";(c==="radio"||c==="checkbox"||f.nodeName(b,"select"))&&I.call(this,a)},keydown:function(a){var b=a.target,c=f.nodeName(b,"input")?b.type:"";(a.keyCode===13&&!f.nodeName(b,"textarea")||a.keyCode===32&&(c==="checkbox"||c==="radio")||c==="select-multiple")&&I.call(this,a)},beforeactivate:function(a){var b=a.target;f._data(b,"_change_data",H(b))}},setup:function(a,b){if(this.type==="file")return!1;for(var c in G)f.event.add(this,c+".specialChange",G[c]);return x.test(this.nodeName)},teardown:function(a){return f.event.remove(this,".specialChange"),x.test(this.nodeName)}},G=f.event.special.change.filters,G.focus=G.beforeactivate}f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){function e(a){var c=f.event.fix(a);c.type=b,c.originalEvent={},f.event.trigger(c,null,c.target),c.isDefaultPrevented()&&a.preventDefault()}var d=0;f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.each(["bind","one"],function(a,c){f.fn[c]=function(a,d,e){var g;if(typeof a=="object"){for(var h in a)this[c](h,d,a[h],e);return this}if(arguments.length===2||d===!1)e=d,d=b;c==="one"?(g=function(a){return f(this).unbind(a,g),e.apply(this,arguments)},g.guid=e.guid||f.guid++):g=e;if(a==="unload"&&c!=="one")this.one(a,d,e);else for(var i=0,j=this.length;i<j;i++)f.event.add(this[i],a,g,d);return this}}),f.fn.extend({unbind:function(a,b){if(typeof a=="object"&&!a.preventDefault)for(var c in a)this.unbind(c,a[c]);else for(var d=0,e=this.length;d<e;d++)f.event.remove(this[d],a,b);return this},delegate:function(a,b,c,d){return this.live(b,c,d,a)},undelegate:function(a,b,c){return arguments.length===0?this.unbind("live"):this.die(b,null,c,a)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f.data(this,"lastToggle"+a.guid)||0)%d;return f.data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var K={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};f.each(["live","die"],function(a,c){f.fn[c]=function(a,d,e,g){var h,i=0,j,k,l,m=g||this.selector,n=g?this:f(this.context);if(typeof a=="object"&&!a.preventDefault){for(var o in a)n[c](o,d,a[o],m);return this}if(c==="die"&&!a&&g&&g.charAt(0)===".")return n.unbind(g),this;if(d===!1||f.isFunction(d))e=d||C,d=b;a=(a||"").split(" ");while((h=a[i++])!=null){j=w.exec(h),k="",j&&(k=j[0],h=h.replace(w,""));if(h==="hover"){a.push("mouseenter"+k,"mouseleave"+k);continue}l=h,K[h]?(a.push(K[h]+k),h+=k):h=(K[h]||h)+k;if(c==="live")for(var p=0,q=n.length;p<q;p++)f.event.add(n[p],"live."+M(h,m),{data:d,selector:m,handler:e,origType:h,origHandler:e,preType:l});else n.unbind("live."+M(h,m),e)}return this}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(a,b){f.fn[b]=function(a,c){return c==null&&(c=a,a=null),arguments.length>0?this.bind(b,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0)}),function(){function t(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){var j=!1;i=i[a];while(i){if(i.sizcache===c){j=d[i.sizset];break}i.nodeType===1&&!f&&(i.sizcache=c,i.sizset=g);if(i.nodeName.toLowerCase()===b){j=i;break}i=i[a]}d[g]=j}}}function u(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){var j=!1;i=i[a];while(i){if(i.sizcache===c){j=d[i.sizset];break}if(i.nodeType===1){f||(i.sizcache=c,i.sizset=g);if(typeof b!="string"){if(i===b){j=!0;break}}else if(k.filter(b,[i]).length>0){j=i;break}}i=i[a]}d[g]=j}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d=0,e=Object.prototype.toString,g=!1,h=!0,i=/\\/g,j=/\W/;[0,0].sort(function(){return h=!1,0});var k=function(b,d,f,g){f=f||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!="string")return f;var i,j,n,o,q,r,s,t,u=!0,w=k.isXML(d),x=[],y=b;do{a.exec(""),i=a.exec(y);if(i){y=i[3],x.push(i[1]);if(i[2]){o=i[3];break}}}while(i);if(x.length>1&&m.exec(b))if(x.length===2&&l.relative[x[0]])j=v(x[0]+x[1],d);else{j=l.relative[x[0]]?[d]:k(x.shift(),d);while(x.length)b=x.shift(),l.relative[b]&&(b+=x.shift()),j=v(b,j)}else{!g&&x.length>1&&d.nodeType===9&&!w&&l.match.ID.test(x[0])&&!l.match.ID.test(x[x.length-1])&&(q=k.find(x.shift(),d,w),d=q.expr?k.filter(q.expr,q.set)[0]:q.set[0]);if(d){q=g?{expr:x.pop(),set:p(g)}:k.find(x.pop(),x.length!==1||x[0]!=="~"&&x[0]!=="+"||!d.parentNode?d:d.parentNode,w),j=q.expr?k.filter(q.expr,q.set):q.set,x.length>0?n=p(j):u=!1;while(x.length)r=x.pop(),s=r,l.relative[r]?s=x.pop():r="",s==null&&(s=d),l.relative[r](n,s,w)}else n=x=[]}n||(n=j),n||k.error(r||b);if(e.call(n)==="[object Array]")if(!u)f.push.apply(f,n);else if(d&&d.nodeType===1)for(t=0;n[t]!=null;t++)n[t]&&(n[t]===!0||n[t].nodeType===1&&k.contains(d,n[t]))&&f.push(j[t]);else for(t=0;n[t]!=null;t++)n[t]&&n[t].nodeType===1&&f.push(j[t]);else p(n,f);return o&&(k(o,h,f,g),k.uniqueSort(f)),f};k.uniqueSort=function(a){if(r){g=h,a.sort(r);if(g)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},k.matches=function(a,b){return k(a,null,null,b)},k.matchesSelector=function(a,b){return k(b,null,null,[a]).length>0},k.find=function(a,b,c){var d;if(!a)return[];for(var e=0,f=l.order.length;e<f;e++){var g,h=l.order[e];if(g=l.leftMatch[h].exec(a)){var j=g[1];g.splice(1,1);if(j.substr(j.length-1)!=="\\"){g[1]=(g[1]||"").replace(i,""),d=l.find[h](g,b,c);if(d!=null){a=a.replace(l.match[h],"");break}}}}return d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]),{set:d,expr:a}},k.filter=function(a,c,d,e){var f,g,h=a,i=[],j=c,m=c&&c[0]&&k.isXML(c[0]);while(a&&c.length){for(var n in l.filter)if((f=l.leftMatch[n].exec(a))!=null&&f[2]){var o,p,q=l.filter[n],r=f[1];g=!1,f.splice(1,1);if(r.substr(r.length-1)==="\\")continue;j===i&&(i=[]);if(l.preFilter[n]){f=l.preFilter[n](f,j,d,i,e,m);if(!f)g=o=!0;else if(f===!0)continue}if(f)for(var s=0;(p=j[s])!=null;s++)if(p){o=q(p,f,s,j);var t=e^!!o;d&&o!=null?t?g=!0:j[s]=!1:t&&(i.push(p),g=!0)}if(o!==b){d||(j=i),a=a.replace(l.match[n],"");if(!g)return[];break}}if(a===h)if(g==null)k.error(a);else break;h=a}return j},k.error=function(a){throw"Syntax error, unrecognized expression: "+a};var l=k.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!j.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&k.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!j.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&k.filter(b,a,!0)}},"":function(a,b,c){var e,f=d++,g=u;typeof b=="string"&&!j.test(b)&&(b=b.toLowerCase(),e=b,g=t),g("parentNode",b,f,a,e,c)},"~":function(a,b,c){var e,f=d++,g=u;typeof b=="string"&&!j.test(b)&&(b=b.toLowerCase(),e=b,g=t),g("previousSibling",b,f,a,e,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(i,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(i,"")},TAG:function(a,b){return a[1].replace(i,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||k.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&k.error(a[0]);return a[0]=d++,a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(i,"");return!f&&l.attrMap[g]&&(a[1]=l.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(i,""),a[2]==="~="&&(a[4]=" "+a[4]+" "),a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not")if((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))b[3]=k(b[3],null,null,c);else{var g=k.filter(b[3],c,d,!0^f);return d||e.push.apply(e,g),!1}else if(l.match.POS.test(b[0])||l.match.CHILD.test(b[0]))return!0;return b},POS:function(a){return a.unshift(!0),a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!k(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=l.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||k.getText([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}k.error(e)},CHILD:function(a,b){var c=b[1],d=a;switch(c){case"only":case"first":while(d=d.previousSibling)if(d.nodeType===1)return!1;if(c==="first")return!0;d=a;case"last":while(d=d.nextSibling)if(d.nodeType===1)return!1;return!0;case"nth":var e=b[2],f=b[3];if(e===1&&f===0)return!0;var g=b[0],h=a.parentNode;if(h&&(h.sizcache!==g||!a.nodeIndex)){var i=0;for(d=h.firstChild;d;d=d.nextSibling)d.nodeType===1&&(d.nodeIndex=++i);h.sizcache=g}var j=a.nodeIndex-f;return e===0?j===0:j%e===0&&j/e>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=l.attrHandle[c]?l.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=l.setFilters[e];if(f)return f(a,c,b,d)}}},m=l.match.POS,n=function(a,b){return"\\"+(b-0+1)};for(var o in l.match)l.match[o]=new RegExp(l.match[o].source+/(?![^\[]*\])(?![^\(]*\))/.source),l.leftMatch[o]=new RegExp(/(^(?:.|\r|\n)*?)/.source+l.match[o].source.replace(/\\(\d+)/g,n));var p=function(a,b){return a=Array.prototype.slice.call(a,0),b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(q){p=function(a,b){var c=0,d=b||[];if(e.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var f=a.length;c<f;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var r,s;c.documentElement.compareDocumentPosition?r=function(a,b){return a===b?(g=!0,0):!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition?-1:1:a.compareDocumentPosition(b)&4?-1:1}:(r=function(a,b){if(a===b)return g=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],h=a.parentNode,i=b.parentNode,j=h;if(h===i)return s(a,b);if(!h)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return s(e[k],f[k]);return k===c?s(a,f[k],-1):s(e[k],b,1)},s=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),k.getText=function(a){var b="",c;for(var d=0;a[d];d++)c=a[d],c.nodeType===3||c.nodeType===4?b+=c.nodeValue:c.nodeType!==8&&(b+=k.getText(c.childNodes));return b},function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(l.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},l.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(l.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(l.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=k,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(b.querySelectorAll&&b.querySelectorAll(".TEST").length===0)return;k=function(b,e,f,g){e=e||c;if(!g&&!k.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1])return p(e.getElementsByTagName(b),f);if(h[2]&&l.find.CLASS&&e.getElementsByClassName)return p(e.getElementsByClassName(h[2]),f)}if(e.nodeType===9){if(b==="body"&&e.body)return p([e.body],f);if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return p([],f);if(i.id===h[3])return p([i],f)}try{return p(e.querySelectorAll(b),f)}catch(j){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var m=e,n=e.getAttribute("id"),o=n||d,q=e.parentNode,r=/^\s*[+~]/.test(b);n?o=o.replace(/'/g,"\\$&"):e.setAttribute("id",o),r&&q&&(e=e.parentNode);try{if(!r||q)return p(e.querySelectorAll("[id='"+o+"'] "+b),f)}catch(s){}finally{n||m.removeAttribute("id")}}}return a(b,e,f,g)};for(var e in a)k[e]=a[e];b=null}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}k.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!k.isXML(a))try{if(e||!l.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11)return f}}catch(g){}return k(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!a.getElementsByClassName||a.getElementsByClassName("e").length===0)return;a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;l.order.splice(1,0,"CLASS"),l.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}(),c.documentElement.contains?k.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?k.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:k.contains=function(){return!1},k.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var v=function(a,b){var c,d=[],e="",f=b.nodeType?[b]:b;while(c=l.match.PSEUDO.exec(a))e+=c[0],a=a.replace(l.match.PSEUDO,"");a=l.relative[a]?a+"*":a;for(var g=0,h=f.length;g<h;g++)k(a,f[g],d);return k.filter(e,d)};f.find=k,f.expr=k.selectors,f.expr[":"]=f.expr.filters,f.unique=k.uniqueSort,f.text=k.getText,f.isXMLDoc=k.isXML,f.contains=k.contains}();var N=/Until$/,O=/^(?:parents|prevUntil|prevAll)/,P=/,/,Q=/^.[^:#\[\.,]*$/,R=Array.prototype.slice,S=f.expr.match.POS,T={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return f(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(f.contains(b[c],this))return!0});var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0)for(h=g;h<e.length;h++)for(i=0;i<g;i++)if(e[i]===e[h]){e.splice(h--,1);break}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(f.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(V(this,a,!1),"not",a)},filter:function(a){return this.pushStack(V(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h,i,j={},k=1;if(g&&a.length){for(d=0,e=a.length;d<e;d++)i=a[d],j[i]||(j[i]=S.test(i)?f(i,b||this.context):i);while(g&&g.ownerDocument&&g!==b){for(i in j)h=j[i],(h.jquery?h.index(g)>-1:f(g).is(h))&&c.push({selector:i,elem:g,level:k});g=g.parentNode,k++}}return c}var l=S.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(l?l.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11)break}}return c=c.length>1?f.unique(c):c,this.pushStack(c,"closest",a)},index:function(a){return a?typeof a=="string"?f.inArray(this[0],f(a)):f.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(U(c[0])||U(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling(a.parentNode.firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c),g=R.call(arguments);return N.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!T[a]?f.unique(e):e,(this.length>1||P.test(d))&&O.test(a)&&(e=e.reverse()),this.pushStack(e,a,g.join(","))}}),f.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d)))g.nodeType===1&&e.push(g),g=g[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|object|embed|option|style)/i,bb=/checked\s*(?:[^=]|=\s*.checked.)/i,bc=/\/(java|ecma)script/i,bd=/^\s*<!(?:\[CDATA\[|\-\-)/,be={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};be.optgroup=be.option,be.tbody=be.tfoot=be.colgroup=be.caption=be.thead,be.th=be.td,f.support.htmlSerialize||(be._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){return f.isFunction(a)?this.each(function(b){var c=f(this);c.text(a.call(this,b,c.text()))}):typeof a!="object"&&a!==b?this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a)):f.text(this)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return f.isFunction(a)?this.each(function(b){f(this).wrapInner(a.call(this,b))}):this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){return this.each(function(){f(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=f(arguments[0]);return a.push.apply(a,this.toArray()),this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);return a.push.apply(a,f(arguments[0]).toArray()),a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||f.filter(a,[d]).length)!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){return a=a==null?!1:a,b=b==null?a:b,this.map(function(){return f.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(W,""):null;if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!be[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++)this[c].nodeType===1&&(f.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}else f.isFunction(a)?this.each(function(b){var c=f(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);return this},replaceWith:function(a){return this[0]&&this[0].parentNode?f.isFunction(a)?this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))}):(typeof a!="string"&&(a=f(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})):this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bb.test(j))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(j))return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)});if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++)d.call(c?bf(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}k.length&&f.each(k,bl)}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i;return b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof a[0]=="string"&&a[0].length<512&&i===c&&a[0].charAt(0)==="<"&&!ba.test(a[0])&&(f.support.checkClone||!bb.test(a[0]))&&(g=!0,h=f.fragments[a[0]],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[a[0]]=h?e:1),{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1)return e[b](this[0]),this;for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d=a.cloneNode(!0),e,g,h;if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bh(a,d),e=bi(a),g=bi(d);for(h=0;e[h];++h)g[h]&&bh(e[h],g[h])}if(b){bg(a,d);if(c){e=bi(a),g=bi(d);for(h=0;e[h];++h)bg(e[h],g[h])}}return e=g=null,d},clean:function(a,b,d,e){var g;b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);var h=[],i;for(var j=0,k;(k=a[j])!=null;j++){typeof k=="number"&&(k+="");if(!k)continue;if(typeof k=="string")if(!_.test(k))k=b.createTextNode(k);else{k=k.replace(Y,"<$1></$2>");var l=(Z.exec(k)||["",""])[1].toLowerCase(),m=be[l]||be._default,n=m[0],o=b.createElement("div");o.innerHTML=m[1]+k+m[2];while(n--)o=o.lastChild;if(!f.support.tbody){var p=$.test(k),q=l==="table"&&!p?o.firstChild&&o.firstChild.childNodes:m[1]==="<table>"&&!p?o.childNodes:[];for(i=q.length-1;i>=0;--i)f.nodeName(q[i],"tbody")&&!q[i].childNodes.length&&q[i].parentNode.removeChild(q[i])}!f.support.leadingWhitespace&&X.test(k)&&o.insertBefore(b.createTextNode(X.exec(k)[0]),o.firstChild),k=o.childNodes}var r;if(!f.support.appendChecked)if(k[0]&&typeof (r=k.length)=="number")for(i=0;i<r;i++)bk(k[i]);else bk(k);k.nodeType?h.push(k):h=f.merge(h,k)}if(d){g=function(a){return!a.type||bc.test(a.type)};for(j=0;h[j];j++)if(e&&f.nodeName(h[j],"script")&&(!h[j].type||h[j].type.toLowerCase()==="text/javascript"))e.push(h[j].parentNode?h[j].parentNode.removeChild(h[j]):h[j]);else{if(h[j].nodeType===1){var s=f.grep(h[j].getElementsByTagName("script"),g);h.splice.apply(h,[j+1,0].concat(s))}d.appendChild(h[j])}}return h},cleanData:function(a){var b,c,d=f.cache,e=f.expando,g=f.event.special,h=f.support.deleteExpando;for(var i=0,j;(j=a[i])!=null;i++){if(j.nodeName&&f.noData[j.nodeName.toLowerCase()])continue;c=j[f.expando];if(c){b=d[c]&&d[c][e];if(b&&b.events){for(var k in b.events)g[k]?f.event.remove(j,k):f.removeEvent(j,k,b.handle);b.handle&&(b.handle.elem=null)}h?delete j[f.expando]:j.removeAttribute&&j.removeAttribute(f.expando),delete d[c]}}}});var bm=/alpha\([^)]*\)/i,bn=/opacity=([^)]*)/,bo=/([A-Z]|^ms)/g,bp=/^-?\d+(?:px)?$/i,bq=/^-?\d/,br=/^([\-+])=([\-+.\de]+)/,bs={position:"absolute",visibility:"hidden",display:"block"},bt=["Left","Right"],bu=["Top","Bottom"],bv,bw,bx;f.fn.css=function(a,c){return arguments.length===2&&c===b?this:f.access(this,a,c,!0,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)})},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bv(a,"opacity","opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!a||a.nodeType===3||a.nodeType===8||!a.style)return;var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b)return k&&"get"in k&&(g=k.get(a,!1,e))!==b?g:j[c];h=typeof d,h==="string"&&(g=br.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d))return;h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set"in k)||(d=k.set(a,d))!==b)try{j[c]=d}catch(l){}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get"in g&&(e=g.get(a,!0,d))!==b)return e;if(bv)return bv(a,c)},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]}}),f.curCSS=f.css,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){var e;if(c)return a.offsetWidth!==0?by(a,b,d):(f.swap(a,bs,function(){e=by(a,b,d)}),e)},set:function(a,b){if(!bp.test(b))return b;b=parseFloat(b);if(b>=0)return b+"px"}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return bn.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNaN(b)?"":"alpha(opacity="+b*100+")",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bm,""))===""){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bm.test(g)?g.replace(bm,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){var c;return f.swap(a,{display:"inline-block"},function(){b?c=bv(a,"margin-right","marginRight"):c=a.style.marginRight}),c}})}),c.defaultView&&c.defaultView.getComputedStyle&&(bw=function(a,c){var d,e,g;c=c.replace(bo,"-$1").toLowerCase();if(!(e=a.ownerDocument.defaultView))return b;if(g=e.getComputedStyle(a,null))d=g.getPropertyValue(c),d===""&&!f.contains(a.ownerDocument.documentElement,a)&&(d=f.style(a,c));return d}),c.documentElement.currentStyle&&(bx=function(a,b){var c,d=a.currentStyle&&a.currentStyle[b],e=a.runtimeStyle&&a.runtimeStyle[b],f=a.style;return!bp.test(d)&&bq.test(d)&&(c=f.left,e&&(a.runtimeStyle.left=a.currentStyle.left),f.left=b==="fontSize"?"1em":d||0,d=f.pixelLeft+"px",f.left=c,e&&(a.runtimeStyle.left=e)),d===""?"auto":d}),bv=bw||bx,f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)});var bz=/%20/g,bA=/\[\]$/,bB=/\r?\n/g,bC=/#.*$/,bD=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bE=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bF=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bG=/^(?:GET|HEAD)$/,bH=/^\/\//,bI=/\?/,bJ=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bK=/^(?:select|textarea)/i,bL=/\s+/,bM=/([?&])_=[^&]*/,bN=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bO=f.fn.load,bP={},bQ={},bR,bS,bT=["*/"]+["*"];try{bR=e.href}catch(bU){bR=c.createElement("a"),bR.href="",bR=bR.href}bS=bN.exec(bR.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bO)return bO.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;return f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bJ,"")).find(g):c)),d&&i.each(d,[c,b,a])}}),this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bK.test(this.nodeName)||bE.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bB,"\r\n")}}):{name:b.name,value:c.replace(bB,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.bind(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){return f.isFunction(d)&&(g=g||e,e=d,d=b),f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){return b?bX(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),bX(a,b),a},ajaxSettings:{url:bR,isLocal:bF.test(bS[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bT},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bV(bP),ajaxTransport:bV(bQ),ajax:function(a,c){function w(a,c,l,m){if(s===2)return;s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?bZ(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified"))f.lastModified[k]=y;if(z=v.getResponseHeader("Etag"))f.etag[k]=z}if(a===304)w="notmodified",o=!0;else try{r=b$(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}else{u=w;if(!w||a)w="error",a<0&&(a=0)}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.resolveWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f._Deferred(),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bD.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return s||(d.mimeType=a),this},abort:function(a){return a=a||"abort",p&&p.abort(a),w(0,a),this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.done,v.statusCode=function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this},d.url=((a||d.url)+"").replace(bC,"").replace(bH,bS[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bL),d.crossDomain==null&&(r=bN.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bS[1]&&r[2]==bS[2]&&(r[3]||(r[1]==="http:"?80:443))==(bS[3]||(bS[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),bW(bP,d,c,v);if(s===2)return!1;t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bG.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bI.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bM,"$1_="+x);d.url=y+(y===d.url?(bI.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bT+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)v.setRequestHeader(u,d.headers[u]);if(!d.beforeSend||d.beforeSend.call(e,v,d)!==!1&&s!==2){for(u in{success:1,error:1,complete:1})v[u](d[u]);p=bW(bQ,d,c,v);if(!p)w(-1,"No Transport");else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){s<2?w(-1,z):f.error(z)}}return v}return v.abort(),!1},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(var g in a)bY(g,a[g],c,e);return d.join("&").replace(bz,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var b_=f.now(),ca=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+b_++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(ca.test(b.url)||e&&ca.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";return b.jsonp!==!1&&(j=j.replace(ca,l),b.url===j&&(e&&(k=k.replace(ca,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){return g||f.error(h+" was not called"),g[0]},b.dataTypes[0]="json","script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return f.globalEval(a),a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var cb=a.ActiveXObject?function(){for(var a in cd)cd[a](0,1)}:!1,cc=0,cd;f.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&ce()||cf()}:ce,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e)h.setRequestHeader(j,e[j])}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,cb&&delete cd[i]);if(e)h.readyState!==4&&h.abort();else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n),m.text=h.responseText;try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cc,cb&&(cd||(cd={},f(a).unload(cb)),cd[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var cg={},ch,ci,cj=/^(?:toggle|show|hide)$/,ck=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cl,cm=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cn;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0)return this.animate(cq("show",3),a,b,c);for(var g=0,h=this.length;g<h;g++)d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),e===""&&f.css(d,"display")==="none"&&f._data(d,"olddisplay",cr(d.nodeName)));for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none")d.style.display=f._data(d,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(cq("hide",3),a,b,c);for(var d=0,e=this.length;d<e;d++)if(this[d].style){var g=f.css(this[d],"display");g!=="none"&&!f._data(this[d],"olddisplay")&&f._data(this[d],"olddisplay",g)}for(d=0;d<e;d++)this[d].style&&(this[d].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";return f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(cq("toggle",3),a,b,c),this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=f.speed(b,c,d);return f.isEmptyObject(a)?this.each(e.complete,[!1]):(a=f.extend({},a),this[e.queue===!1?"each":"queue"](function(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]),h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d)return b.complete.call(this);c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(f.support.inlineBlockNeedsLayout?(j=cr(this.nodeName),j==="inline"?this.style.display="inline-block":(this.style.display="inline",this.style.zoom=1)):this.style.display="inline-block"))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)k=new f.fx(this,b,i),h=a[i],cj.test(h)?k[h==="toggle"?d?"show":"hide":h]():(l=ck.exec(h),m=k.cur(),l?(n=parseFloat(l[2]),o=l[3]||(f.cssNumber[i]?"":"px"),o!=="px"&&(f.style(this,i,(n||1)+o),m=(n||1)/k.cur()*m,f.style(this,i,m+o)),l[1]&&(n=(l[1]==="-="?-1:1)*n+m),k.custom(m,n,o)):k.custom(m,h,""));return!0}))},stop:function(a,b){return a&&this.queue([]),this.each(function(){var a=f.timers,c=a.length;b||f._unmark(!0,this);while(c--)a[c].elem===this&&(b&&a[c](!0),a.splice(c,1))}),b||this.dequeue(),this}}),f.each({slideDown:cq("show",1),slideUp:cq("hide",1),slideToggle:cq("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};return d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default,d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue!==!1?f.dequeue(this):a!==!1&&f._unmark(this)},d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]==null||!!this.elem.style&&this.elem.style[this.prop]!=null){var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a}return this.elem[this.prop]},custom:function(a,b,c){function g(a){return d.step(a)}var d=this,e=f.fx;this.startTime=cn||co(),this.start=a,this.end=b,this.unit=c||this.unit||(f.cssNumber[this.prop]?"":"px"),this.now=this.start,this.pos=this.state=0,g.elem=this.elem,g()&&f.timers.push(g)&&!cl&&(cl=setInterval(e.tick,e.interval))},show:function(){this.options.orig[this.prop]=f.style(this.elem,this.prop),this.options.show=!0,this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b=cn||co(),c=!0,d=this.elem,e=this.options,g,h;if(a||b>=e.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),e.animatedProperties[this.prop]=!0;for(g in e.animatedProperties)e.animatedProperties[g]!==!0&&(c=!1);if(c){e.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){d.style["overflow"+b]=e.overflow[a]}),e.hide&&f(d).hide();if(e.hide||e.show)for(var i in e.animatedProperties)f.style(d,i,e.orig[i]);e.complete.call(d)}return!1}return e.duration==Infinity?this.now=b:(h=b-this.startTime,this.state=h/e.duration,this.pos=f.easing[e.animatedProperties[this.prop]](this.state,h,0,1,e.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},f.extend(f.fx,{tick:function(){for(var a=f.timers,b=0;b<a.length;++b)a[b]()||a.splice(b--,1);a.length||f.fx.stop()},interval:13,stop:function(){clearInterval(cl),cl=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit:a.elem[a.prop]=a.now}}}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cs=/^t(?:able|d|h)$/i,ct=/^(?:body|html)$/i;"getBoundingClientRect"in c.documentElement?f.fn.offset=function(a){var b=this[0],c;if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);try{c=b.getBoundingClientRect()}catch(d){}var e=b.ownerDocument,g=e.documentElement;if(!c||!f.contains(g,b))return c?{top:c.top,left:c.left}:{top:0,left:0};var h=e.body,i=cu(e),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||f.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||f.support.boxModel&&g.scrollLeft||h.scrollLeft,n=c.top+l-j,o=c.left+m-k;return{top:n,left:o}}:f.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);f.offset.initialize();var c,d=b.offsetParent,e=b,g=b.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;while((b=b.parentNode)&&b!==i&&b!==h){if(f.offset.supportsFixedPosition&&k.position==="fixed")break;c=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&&(l+=b.offsetTop,m+=b.offsetLeft,f.offset.doesNotAddBorder&&(!f.offset.doesAddBorderForTableAndCells||!cs.test(b.nodeName))&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),f.offset.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),k=c}if(k.position==="relative"||k.position==="static")l+=i.offsetTop,m+=i.offsetLeft;return f.offset.supportsFixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft)),{top:l,left:m}},f.offset={initialize:function(){var a=c.body,b=c.createElement("div"),d,e,g,h,i=parseFloat(f.css(a,"marginTop"))||0,j="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";f.extend(b.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"}),b.innerHTML=j,a.insertBefore(b,a.firstChild),d=b.firstChild,e=d.firstChild,h=d.nextSibling.firstChild.firstChild,this.doesNotAddBorder=e.offsetTop!==5,this.doesAddBorderForTableAndCells=h.offsetTop===5,e.style.position="fixed",e.style.top="20px",this.supportsFixedPosition=e.offsetTop===20||e.offsetTop===15,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",this.subtractsBorderForOverflowNotVisible=e.offsetTop===-5,this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==i,a.removeChild(b),f.offset.initialize=f.noop},bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return f.offset.initialize(),f.offset.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using"in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=ct.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!ct.test(a.nodeName)&&f.css(a,"position")==="static")a=a.offsetParent;return a})}}),f.each(["Left","Top"],function(a,c){var d="scroll"+c;f.fn[d]=function(c){var e,g;return c===b?(e=this[0],e?(g=cu(e),g?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:f.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:e[d]):null):this.each(function(){g=cu(this),g?g.scrollTo(a?f(g).scrollLeft():c,a?c:f(g).scrollTop()):this[d]=c})}}),f.each(["Height","Width"],function(a,c){var d=c.toLowerCase();f.fn["inner"+c]=function(){var a=this[0];return a&&a.style?parseFloat(f.css(a,d,"padding")):null},f.fn["outer"+c]=function(a){var b=this[0];return b&&b.style?parseFloat(f.css(b,d,a?"margin":"border")):null},f.fn[d]=function(a){var e=this[0];if(!e)return a==null?null:this;if(f.isFunction(a))return this.each(function(b){var c=f(this);c[d](a.call(this,b,c[d]()))});if(f.isWindow(e)){var g=e.document.documentElement["client"+c],h=e.document.body;return e.document.compatMode==="CSS1Compat"&&g||h&&h["client"+c]||g}if(e.nodeType===9)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);if(a===b){var i=f.css(e,d),j=parseFloat(i);return f.isNaN(j)?i:j}return this.css(d,typeof a=="string"?a:a+"px")}}),a.jQuery=a.$=f,define("jquery",[],function(){return f})})(window),function(){define("compiled/util/objectCollection",[],function(){return function(a){return a.indexOf=function(b){var c,d,e;for(c=0,e=a.length;c<e;c++){d=a[c];if(d===b)return c}},-1,a.findBy=function(b,c){var d,e,f;for(d=0,f=a.length;d<f;d++){e=a[d];if(e[b]===c)return e}return!1},a.eraseBy=function(b,c){var d;return d=a.findBy(b,c),a.erase(d)},a.insert=function(b,c){return c==null&&(c=0),a.splice(c,0,b)},a.erase=function(b){var c,d,e,f;f=[];for(c=0,e=a.length;c<e;c++)d=a[c],f.push(d===b?a.splice(c,1):void 0);return f},a.sortBy=function(){var b;return b={string:function(a,b){return a<b?-1:a>b?1:0},number:function(a,b){return a-b}},function(c){var d;return d=typeof a[0][c]||"string",a.sort(function(a,e){return b[d](a[c],e[c])})}}(),a}})}.call(this);var Handlebars={};Handlebars.VERSION="1.0.beta.2",Handlebars.helpers={},Handlebars.partials={},Handlebars.registerHelper=function(a,b,c){c&&(b.not=c),this.helpers[a]=b},Handlebars.registerPartial=function(a,b){this.partials[a]=b},Handlebars.registerHelper("helperMissing",function(a){if(arguments.length===2)return undefined;throw new Error("Could not find property '"+a+"'")}),Handlebars.registerHelper("blockHelperMissing",function(a,b){var c=b.inverse||function(){},d=b.fn,e="",f=Object.prototype.toString.call(a);f==="[object Function]"&&(a=a());if(a===!0)return d(this);if(a===!1||a==null)return c(this);if(f==="[object Array]"){if(a.length>0)for(var g=0,h=a.length;g<h;g++)e+=d(a[g]);else e=c(this);return e}return d(a)}),Handlebars.registerHelper("each",function(a,b){var c=b.fn,d=b.inverse,e="";if(a&&a.length>0)for(var f=0,g=a.length;f<g;f++)e+=c(a[f]);else e=d(this);return e}),Handlebars.registerHelper("if",function(a,b){return!a||Handlebars.Utils.isEmpty(a)?b.inverse(this):b.fn(this)}),Handlebars.registerHelper("unless",function(a,b){var c=b.fn,d=b.inverse;return b.fn=d,b.inverse=c,Handlebars.helpers["if"].call(this,a,b)}),Handlebars.registerHelper("with",function(a,b){return b.fn(a)}),Handlebars.Exception=function(a){var b=Error.prototype.constructor.apply(this,arguments);for(var c in b)b.hasOwnProperty(c)&&(this[c]=b[c])},Handlebars.Exception.prototype=new Error,Handlebars.SafeString=function(a){this.string=a},Handlebars.SafeString.prototype.toString=function(){return this.string.toString()},function(){var a={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},b=/&(?!\w+;)|[<>"'`]/g,c=/[&<>"'`]/,d=function(b){return a[b]||"&amp;"};Handlebars.Utils={escapeExpression:function(a){return a instanceof Handlebars.SafeString?a.toString():a==null||a===!1?"":c.test(a)?a.replace(b,d):a},isEmpty:function(a){return typeof a=="undefined"?!0:a===null?!0:a===!1?!0:Object.prototype.toString.call(a)==="[object Array]"&&a.length===0?!0:!1}}}(),Handlebars.VM={template:function(a){var b={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(a,b,c){var d=this.programs[a];return c?Handlebars.VM.program(b,c):d?d:(d=this.programs[a]=Handlebars.VM.program(b),d)},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop};return function(c,d){return d=d||{},a.call(b,Handlebars,c,d.helpers,d.partials,d.data)}},programWithDepth:function(a,b,c){var d=Array.prototype.slice.call(arguments,2);return function(c,e){return e=e||{},a.apply(this,[c,e.data||b].concat(d))}},program:function(a,b){return function(c,d){return d=d||{},a(c,d.data||b)}},noop:function(){return""},invokePartial:function(a,b,c,d,e){if(a===undefined)throw new Handlebars.Exception("The partial "+b+" could not be found");if(a instanceof Function)return a(c,{helpers:d,partials:e});if(!Handlebars.compile)throw new Handlebars.Exception("The partial "+b+" could not be compiled when running in vm mode");return e[b]=Handlebars.compile(a),e[b](c,{helpers:d,partials:e})}},Handlebars.template=Handlebars.VM.template,define("vendor/handlebars.vm",[],function(){return Handlebars}),define("str/pluralize",["jquery"],function(a){var b=["equipment","information","rice","money","species","series","fish","sheep","jeans"],c=[[/person$/i,"people"],[/man$/i,"men"],[/child$/i,"children"],[/sex$/i,"sexes"],[/move$/i,"moves"],[/(quiz)$/i,"$1zes"],[/^(ox)$/i,"$1en"],[/([m|l])ouse$/i,"$1ice"],[/(matr|vert|ind)(?:ix|ex)$/i,"$1ices"],[/(x|ch|ss|sh)$/i,"$1es"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/(hive)$/i,"$1s"],[/(?:([^f])fe|([lr])f)$/i,"$1$2ves"],[/sis$/i,"ses"],[/([ti])um$/i,"$1a"],[/(buffal|tomat)o$/i,"$1oes"],[/(bu)s$/i,"$1ses"],[/(alias|status)$/i,"$1es"],[/(octop|vir)us$/i,"$1i"],[/(ax|test)is$/i,"$1es"],[/s$/i,"s"]],d=function(d){d=d||"";if(a.inArray(d,b)>0)return d;for(var e=0;e<c.length;e++){var f=c[e];if(d.match(f[0]))return d.replace(f[0],f[1])}return d+"s"};return d.withCount=function(a,b){return""+a+" "+(a==1?b:d(b))},d}),define("str/escapeRegex",[],function(){return function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}}),define("vendor/date",[],function(){Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]},function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=function(a,b){return b||(b=2),("000"+a).slice(b*-1)};b.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},b.setTimeToNow=function(){var a=new Date;return this.setHours(a.getHours()),this.setMinutes(a.getMinutes()),this.setSeconds(a.getSeconds()),this.setMilliseconds(a.getMilliseconds()),this},a.today=function(){return(new Date).clearTime()},a.compare=function(a,b){if(isNaN(a)||isNaN(b))throw new Error(a+" - "+b);if(a instanceof Date&&b instanceof Date)return a<b?-1:a>b?1:0;throw new TypeError(a+" - "+b)},a.equals=function(a,b){return a.compareTo(b)===0},a.getDayNumberFromName=function(a){var b=c.dayNames,d=c.abbreviatedDayNames,e=c.shortestDayNames,f=a.toLowerCase();for(var g=0;g<b.length;g++)if(b[g].toLowerCase()==f||d[g].toLowerCase()==f||e[g].toLowerCase()==f)return g;return-1},a.getMonthNumberFromName=function(a){var b=c.monthNames,d=c.abbreviatedMonthNames,e=a.toLowerCase();for(var f=0;f<b.length;f++)if(b[f].toLowerCase()==e||d[f].toLowerCase()==e)return f;return-1},a.isLeapYear=function(a){return a%4===0&&a%100!==0||a%400===0},a.getDaysInMonth=function(b,c){return[31,a.isLeapYear(b)?29:28,31,30,31,30,31,31,30,31,30,31][c]},a.getTimezoneAbbreviation=function(a){var b=c.timezones,d;for(var e=0;e<b.length;e++)if(b[e].offset===a)return b[e].name;return null},a.getTimezoneOffset=function(a){var b=c.timezones,d;for(var e=0;e<b.length;e++)if(b[e].name===a.toUpperCase())return b[e].offset;return null},b.clone=function(){return new Date(this.getTime())},b.compareTo=function(a){return Date.compare(this,a)},b.equals=function(a){return Date.equals(this,a||new Date)},b.between=function(a,b){return this.getTime()>=a.getTime()&&this.getTime()<=b.getTime()},b.isAfter=function(a){return this.compareTo(a||new Date)===1},b.isBefore=function(a){return this.compareTo(a||new Date)===-1},b.isToday=function(){return this.isSameDay(new Date)},b.isSameDay=function(a){return this.clone().clearTime().equals(a.clone().clearTime())},b.addMilliseconds=function(a){return this.setMilliseconds(this.getMilliseconds()+a),this},b.addSeconds=function(a){return this.addMilliseconds(a*1e3)},b.addMinutes=function(a){return this.addMilliseconds(a*6e4)},b.addHours=function(a){return this.addMilliseconds(a*36e5)},b.addDays=function(a){return this.setDate(this.getDate()+a),this},b.addWeeks=function(a){return this.addDays(a*7)},b.addMonths=function(b){var c=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+b),this.setDate(Math.min(c,a.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},b.addYears=function(a){return this.addMonths(a*12)},b.add=function(a){if(typeof a=="number")return this._orient=a,this;var b=a;return b.milliseconds&&this.addMilliseconds(b.milliseconds),b.seconds&&this.addSeconds(b.seconds),b.minutes&&this.addMinutes(b.minutes),b.hours&&this.addHours(b.hours),b.weeks&&this.addWeeks(b.weeks),b.months&&this.addMonths(b.months),b.years&&this.addYears(b.years),b.days&&this.addDays(b.days),this};var e,f,g;b.getWeek=function(){var a,b,c,d,h,i,j,k,l,m;return e=e?e:this.getFullYear(),f=f?f:this.getMonth()+1,g=g?g:this.getDate(),f>2?(a=e,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),l=b-c,h=l+1,i=g+(153*(f-3)+2)/5+58+l):(a=e-1,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),l=b-c,h=0,i=g-1+31*(f-1)),j=(a+b)%7,d=(i+j-h)%7,k=i+3-d|0,k<0?m=53-((j-l)/5|0):k>364+l?m=1:m=(k/7|0)+1,e=f=g=null,m},b.getISOWeek=function(){return e=this.getUTCFullYear(),f=this.getUTCMonth()+1,g=this.getUTCDate(),d(this.getWeek())},b.setWeek=function(a){return this.moveToDayOfWeek(1).addWeeks(a-this.getWeek())},a._validate=function(a,b,c,d){if(typeof a=="undefined")return!1;if(typeof a!="number")throw new TypeError(a+" is not a Number.");if(a<b||a>c)throw new RangeError(a+" is not a valid value for "+d+".");return!0},a.validateMillisecond=function(b){return a._validate(b,0,999,"millisecond")},a.validateSecond=function(b){return a._validate(b,0,59,"second")},a.validateMinute=function(b){return a._validate(b,0,59,"minute")},a.validateHour=function(b){return a._validate(b,0,23,"hour")},a.validateDay=function(b,c,d){return a._validate(b,1,a.getDaysInMonth(c,d),"day")},a.validateMonth=function(b){return a._validate(b,0,11,"month")},a.validateYear=function(b){return a._validate(b,0,9999,"year")},b.set=function(b){return a.validateMillisecond(b.millisecond)&&this.addMilliseconds(b.millisecond-this.getMilliseconds()),a.validateSecond(b.second)&&this.addSeconds(b.second-this.getSeconds()),a.validateMinute(b.minute)&&this.addMinutes(b.minute-this.getMinutes()),a.validateHour(b.hour)&&this.addHours(b.hour-this.getHours()),a.validateMonth(b.month)&&this.addMonths(b.month-this.getMonth()),a.validateYear(b.year)&&this.addYears(b.year-this.getFullYear()),a.validateDay(b.day,this.getFullYear(),this.getMonth())&&this.addDays(b.day-this.getDate()),b.timezone&&this.setTimezone(b.timezone),b.timezoneOffset&&this.setTimezoneOffset(b.timezoneOffset),b.week&&a._validate(b.week,0,53,"week")&&this.setWeek(b.week),this},b.moveToFirstDayOfMonth=function(){return this.set({day:1})},b.moveToLastDayOfMonth=function(){return this.set({day:a.getDaysInMonth(this.getFullYear(),this.getMonth())})},b.moveToNthOccurrence=function(a,b){var c=0;if(b>0)c=b-1;else if(b===-1)return this.moveToLastDayOfMonth(),this.getDay()!==a&&this.moveToDayOfWeek(a,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(a,1).addWeeks(c)},b.moveToDayOfWeek=function(a,b){var c=(a-this.getDay()+7*(b||1))%7;return this.addDays(c===0?c+=7*(b||1):c)},b.moveToMonth=function(a,b){var c=(a-this.getMonth()+12*(b||1))%12;return this.addMonths(c===0?c+=12*(b||1):c)},b.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},b.getTimezone=function(){return a.getTimezoneAbbreviation(this.getUTCOffset())},b.setTimezoneOffset=function(a){var b=this.getTimezoneOffset(),c=Number(a)*-6/10;return this.addMinutes(c-b)},b.setTimezone=function(b){return this.setTimezoneOffset(a.getTimezoneOffset(b))},b.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},b.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new Date).getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset()},b.getUTCOffset=function(){var a=this.getTimezoneOffset()*-10/6,b;return a<0?(b=(a-1e4).toString(),b.charAt(0)+b.substr(2)):(b=(a+1e4).toString(),"+"+b.substr(1))},b.getElapsed=function(a){return(a||new Date)-this},b.toISOString||(b.toISOString=function(){function a(a){return a<10?"0"+a:a}return'"'+this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+'Z"'}),b._toString=b.toString,b.toString=function(a){var b=this;if(a&&a.length==1){var e=c.formatPatterns;b.t=b.toString;switch(a){case"d":return b.t(e.shortDate);case"D":return b.t(e.longDate);case"F":return b.t(e.fullDateTime);case"m":return b.t(e.monthDay);case"r":return b.t(e.rfc1123);case"s":return b.t(e.sortableDateTime);case"t":return b.t(e.shortTime);case"T":return b.t(e.longTime);case"u":return b.t(e.universalSortableDateTime);case"y":return b.t(e.yearMonth)}}var f=function(a){switch(a*1){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return a?a.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(a){if(a.charAt(0)==="\\")return a.replace("\\","");b.h=b.getHours;switch(a){case"hh":return d(b.h()<13?b.h()===0?12:b.h():b.h()-12);case"h":return b.h()<13?b.h()===0?12:b.h():b.h()-12;case"HH":return d(b.h());case"H":return b.h();case"mm":return d(b.getMinutes());case"m":return b.getMinutes();case"ss":return d(b.getSeconds());case"s":return b.getSeconds();case"yyyy":return d(b.getFullYear(),4);case"yy":return d(b.getFullYear());case"dddd":return c.dayNames[b.getDay()];case"ddd":return c.abbreviatedDayNames[b.getDay()];case"dd":return d(b.getDate());case"d":return b.getDate();case"MMMM":return c.monthNames[b.getMonth()];case"MMM":return c.abbreviatedMonthNames[b.getMonth()];case"MM":return d(b.getMonth()+1);case"M":return b.getMonth()+1;case"t":return b.h()<12?c.amDesignator.substring(0,1):c.pmDesignator.substring(0,1);case"tt":return b.h()<12?c.amDesignator:c.pmDesignator;case"S":return f(b.getDate());default:return a}}):this._toString()}}(),function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=Number.prototype;b._orient=1,b._nth=null,b._is=!1,b._same=!1,b._isSecond=!1,d._dateElement="day",b.next=function(){return this._orient=1,this},a.next=function(){return a.today().next()},b.last=b.prev=b.previous=function(){return this._orient=-1,this},a.last=a.prev=a.previous=function(){return a.today().last()},b.is=function(){return this._is=!0,this},b.same=function(){return this._same=!0,this._isSecond=!1,this},b.today=function(){return this.same().day()},b.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1},b.at=function(b){return typeof b=="string"?a.parse(this.toString("d")+" "+b):this.set(b)},d.fromNow=d.after=function(a){var b={};return b[this._dateElement]=this,(a?a.clone():new Date).add(b)},d.ago=d.before=function(a){var b={};return b[this._dateElement]=this*-1,(a?a.clone():new Date).add(b)};var e="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),f="january february march april may june july august september october november december".split(/\s/),g="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),h="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),i="final first second third fourth fifth".split(/\s/),j;b.toObject=function(){var a={};for(var b=0;b<g.length;b++)a[g[b].toLowerCase()]=this["get"+h[b]]();return a},a.fromObject=function(a){return a.week=null,Date.today().set(a)};var k=function(b){return function(){if(this._is)return this._is=!1,this.getDay()==b;if(this._nth!==null){this._isSecond&&this.addSeconds(this._orient*-1),this._isSecond=!1;var c=this._nth;this._nth=null;var d=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(b,c);if(this>d)throw new RangeError(a.getDayName(b)+" does not occur "+c+" times in the month of "+a.getMonthName(d.getMonth())+" "+d.getFullYear()+".");return this}return this.moveToDayOfWeek(b,this._orient)}},l=function(b){return function(){var d=a.today(),e=b-d.getDay();return b===0&&c.firstDayOfWeek===1&&d.getDay()!==0&&(e+=7),d.addDays(e)}};for(var m=0;m<e.length;m++)a[e[m].toUpperCase()]=a[e[m].toUpperCase().substring(0,3)]=m,a[e[m]]=a[e[m].substring(0,3)]=l(m),b[e[m]]=b[e[m].substring(0,3)]=k(m);var n=function(a){return function(){return this._is?(this._is=!1,this.getMonth()===a):this.moveToMonth(a,this._orient)}},o=function(b){return function(){return a.today().set({month:b,day:1})}};for(var p=0;p<f.length;p++)a[f[p].toUpperCase()]=a[f[p].toUpperCase().substring(0,3)]=p,a[f[p]]=a[f[p].substring(0,3)]=o(p),b[f[p]]=b[f[p].substring(0,3)]=n(p);var q=function(a){return function(){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;var b=this.toObject(),c=(arguments[0]||new Date).toObject(),d="",e=a.toLowerCase();for(var f=g.length-1;f>-1;f--){d=g[f].toLowerCase();if(b[d]!=c[d])return!1;if(e==d)break}return!0}return a.substring(a.length-1)!="s"&&(a+="s"),this["add"+a](this._orient)}},r=function(a){return function(){return this._dateElement=a,this}};for(var s=0;s<g.length;s++)j=g[s].toLowerCase(),b[j]=b[j+"s"]=q(g[s]),d[j]=d[j+"s"]=r(j);b._ss=q("Second");var t=function(a){return function(b){return this._same?this._ss(arguments[0]):b||b===0?this.moveToNthOccurrence(b,a):(this._nth=a,a!==2||b!==undefined&&b!==null?this:(this._isSecond=!0,this.addSeconds(this._orient)))}};for(var u=0;u<i.length;u++)b[i[u]]=u===0?t(-1):t(u)}(),function(){Date.Parsing={Exception:function(a){this.message="Parse error at '"+a.substring(0,10)+" ...'"}};var a=Date.Parsing,b=a.Operators={rtoken:function(b){return function(c){var d=c.match(b);if(d)return[d[0],c.substring(d[0].length)];throw new a.Exception(c)}},token:function(a){return function(a){return b.rtoken(new RegExp("^s*"+a+"s*"))(a)}},stoken:function(a){return b.rtoken(new RegExp("^"+a))},until:function(a){return function(b){var c=[],d=null;while(b.length){try{d=a.call(this,b)}catch(e){c.push(d[0]),b=d[1];continue}break}return[c,b]}},many:function(a){return function(b){var c=[],d=null;while(b.length){try{d=a.call(this,b)}catch(e){return[c,b]}c.push(d[0]),b=d[1]}return[c,b]}},optional:function(a){return function(b){var c=null;try{c=a.call(this,b)}catch(d){return[null,b]}return[c[0],c[1]]}},not:function(b){return function(c){try{b.call(this,c)}catch(d){return[null,c]}throw new a.Exception(c)}},ignore:function(a){return a?function(b){var c=null;return c=a.call(this,b),[null,c[1]]}:null},product:function(){var a=arguments[0],c=Array.prototype.slice.call(arguments,1),d=[];for(var e=0;e<a.length;e++)d.push(b.each(a[e],c));return d},cache:function(b){var c={},d=null;return function(e){try{d=c[e]=c[e]||b.call(this,e)}catch(f){d=c[e]=f}if(d instanceof a.Exception)throw d;return d}},any:function(){var b=arguments;return function(c){var d=null;for(var e=0;e<b.length;e++){if(b[e]==null)continue;try{d=b[e].call(this,c)}catch(f){d=null}if(d)return d}throw new a.Exception(c)}},each:function(){var b=arguments;return function(c){var d=[],e=null;for(var f=0;f<b.length;f++){if(b[f]==null)continue;try{e=b[f].call(this,c)}catch(g){throw new a.Exception(c)}d.push(e[0]),c=e[1]}return[d,c]}},all:function(){var a=arguments,b=b;return b.each(b.optional(a))},sequence:function(c,d,e){return d=d||b.rtoken(/^\s*/),e=e||null,c.length==1?c[0]:function(b){var f=null,g=null,h=[];for(var i=0;i<c.length;i++){try{f=c[i].call(this,b)}catch(j){break}h.push(f[0]);try{g=d.call(this,f[1])}catch(k){g=null;break}b=g[1]}if(!f)throw new a.Exception(b);if(g)throw new a.Exception(g[1]);if(e)try{f=e.call(this,f[1])}catch(l){throw new a.Exception(f[1])}return[h,f?f[1]:b]}},between:function(a,c,d){d=d||a;var e=b.each(b.ignore(a),c,b.ignore(d));return function(a){var b=e.call(this,a);return[[b[0][0],r[0][2]],b[1]]}},list:function(a,c,d){return c=c||b.rtoken(/^\s*/),d=d||null,a instanceof Array?b.each(b.product(a.slice(0,-1),b.ignore(c)),a.slice(-1),b.ignore(d)):b.each(b.many(b.each(a,b.ignore(c))),px,b.ignore(d))},set:function(c,d,e){return d=d||b.rtoken(/^\s*/),e=e||null,function(f){var g=null,h=null,i=null,j=null,k=[[],f],l=!1;for(var m=0;m<c.length;m++){i=null,h=null,g=null,l=c.length==1;try{g=c[m].call(this,f)}catch(n){continue}j=[[g[0]],g[1]];if(g[1].length>0&&!l)try{i=d.call(this,g[1])}catch(o){l=!0}else l=!0;!l&&i[1].length===0&&(l=!0);if(!l){var p=[];for(var q=0;q<c.length;q++)m!=q&&p.push(c[q]);h=b.set(p,d).call(this,i[1]),h[0].length>0&&(j[0]=j[0].concat(h[0]),j[1]=h[1])}j[1].length<k[1].length&&(k=j);if(k[1].length===0)break}if(k[0].length===0)return k;if(e){try{i=e.call(this,k[1])}catch(r){throw new a.Exception(k[1])}k[1]=i[1]}return k}},forward:function(a,b){return function(c){return a[b].call(this,c)}},replace:function(a,b){return function(c){var d=a.call(this,c);return[b,d[1]]}},process:function(a,b){return function(c){var d=a.call(this,c);return[b.call(this,d[0]),d[1]]}},min:function(b,c){return function(d){var e=c.call(this,d);if(e[0].length<b)throw new a.Exception(d);return e}}},c=function(a){return function(){var b=null,c=[];arguments.length>1?b=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(b=arguments[0]);if(!b)return a.apply(null,arguments);for(var d=0,e=b.shift();d<e.length;d++)return b.unshift(e[d]),c.push(a.apply(null,b)),b.shift(),c}},d="optional not ignore cache".split(/\s/);for(var e=0;e<d.length;e++)b[d[e]]=c(b[d[e]]);var f=function(a){return function(){return arguments[0]instanceof Array?a.apply(null,arguments[0]):a.apply(null,arguments)}},g="each any all".split(/\s/);for(var h=0;h<g.length;h++)b[g[h]]=f(b[g[h]])}(),function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=function(a){var b=[];for(var c=0;c<a.length;c++)a[c]instanceof Array?b=b.concat(d(a[c])):a[c]&&b.push(a[c]);return b};a.Grammar={},a.Translator={hour:function(a){return function(){this.hour=Number(a)}},minute:function(a){return function(){this.minute=Number(a)}},second:function(a){return function(){this.second=Number(a)}},meridian:function(a){return function(){this.meridian=a.slice(0,1).toLowerCase()}},timezone:function(a){return function(){var b=a.replace(/[^\d\+\-]/g,"");b.length?this.timezoneOffset=Number(b):this.timezone=a.toLowerCase()}},day:function(a){var b=a[0];return function(){this.day=Number(b.match(/\d+/)[0])}},month:function(a){return function(){this.month=a.length==3?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(a)/4:Number(a)-1}},year:function(a){return function(){var b=Number(a);this.year=a.length>2?b:b+(b+2e3<c.twoDigitYearMax?2e3:1900)}},rday:function(a){return function(){switch(a){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(b){b=b instanceof Array?b:[b];for(var c=0;c<b.length;c++)b[c]&&b[c].call(this);var d=new Date;(this.hour||this.minute)&&!this.month&&!this.year&&!this.day&&(this.day=d.getDate()),this.year||(this.year=d.getFullYear()),!this.month&&this.month!==0&&(this.month=d.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.meridian&&this.hour&&(this.meridian=="p"&&this.hour<12?this.hour=this.hour+12:this.meridian=="a"&&this.hour==12&&(this.hour=0));if(this.day>a.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?e.set({timezone:this.timezone}):this.timezoneOffset&&e.set({timezoneOffset:this.timezoneOffset}),e},finish:function(b){b=b instanceof Array?d(b):[b];if(b.length===0)return null;for(var c=0;c<b.length;c++)typeof b[c]=="function"&&b[c].call(this);var e=a.today();if(this.now&&!this.unit&&!this.operator)return new Date;this.now&&(e=new Date);var f=!!(this.days&&this.days!==null||this.orient||this.operator),g,h,i;i=this.orient=="past"||this.operator=="subtract"?-1:1,!this.now&&"hour minute second".indexOf(this.unit)!=-1&&e.setTimeToNow(),(this.month||this.month===0)&&"year day hour minute second".indexOf(this.unit)!=-1&&(this.value=this.month+1,this.month=null,f=!0);if(!f&&this.weekday&&!this.day&&!this.days){var j=Date[this.weekday]();this.day=j.getDate(),this.month||(this.month=j.getMonth()),this.year=j.getFullYear()}f&&this.weekday&&this.unit!="month"&&(this.unit="day",g=a.getDayNumberFromName(this.weekday)-e.getDay(),h=7,this.days=g?(g+i*h)%h:i*h),this.month&&this.unit=="day"&&this.operator&&(this.value=this.month+1,this.month=null),this.value!=null&&this.month!=null&&this.year!=null&&(this.day=this.value*1),this.month&&!this.day&&this.value&&(e.set({day:this.value*1}),f||(this.day=this.value*1)),!this.month&&this.value&&this.unit=="month"&&!this.now&&(this.month=this.value,f=!0),f&&(this.month||this.month===0)&&this.unit!="year"&&(this.unit="month",g=this.month-e.getMonth(),h=12,this.months=g?(g+i*h)%h:i*h,this.month=null),this.unit||(this.unit="day");if(!this.value&&this.operator&&this.operator!==null&&this[this.unit+"s"]&&this[this.unit+"s"]!==null)this[this.unit+"s"]=this[this.unit+"s"]+(this.operator=="add"?1:-1)+(this.value||0)*i;else if(this[this.unit+"s"]==null||this.operator!=null)this.value||(this.value=1),this[this.unit+"s"]=this.value*i;this.meridian&&this.hour&&(this.meridian=="p"&&this.hour<12?this.hour=this.hour+12:this.meridian=="a"&&this.hour==12&&(this.hour=0));if(this.weekday&&!this.day&&!this.days){var j=Date[this.weekday]();this.day=j.getDate(),j.getMonth()!==e.getMonth()&&(this.month=j.getMonth())}return(this.month||this.month===0)&&!this.day&&(this.day=1),!this.orient&&!this.operator&&this.unit=="week"&&this.value&&!this.day&&!this.month?Date.today().setWeek(this.value):(f&&this.timezone&&this.day&&this.days&&(this.day=this.days),f?e.add(this):e.set(this))}};var e=a.Parsing.Operators,f=a.Grammar,g=a.Translator,h;f.datePartDelimiter=e.rtoken(/^([\s\-\.\,\/\x27]+)/),f.timePartDelimiter=e.stoken(":"),f.whiteSpace=e.rtoken(/^\s*/),f.generalDelimiter=e.rtoken(/^(([\s\,]|at|@|on)+)/);var i={};f.ctoken=function(a){var b=i[a];if(!b){var d=c.regexPatterns,f=a.split(/\s+/),g=[];for(var h=0;h<f.length;h++)g.push(e.replace(e.rtoken(d[f[h]]),f[h]));b=i[a]=e.any.apply(null,g)}return b},f.ctoken2=function(a){return e.rtoken(c.regexPatterns[a])},f.h=e.cache(e.process(e.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),g.hour)),f.hh=e.cache(e.process(e.rtoken(/^(0[0-9]|1[0-2])/),g.hour)),f.H=e.cache(e.process(e.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),g.hour)),f.HH=e.cache(e.process(e.rtoken(/^([0-1][0-9]|2[0-3])/),g.hour)),f.m=e.cache(e.process(e.rtoken(/^([0-5][0-9]|[0-9])/),g.minute)),f.mm=e.cache(e.process(e.rtoken(/^[0-5][0-9]/),g.minute)),f.s=e.cache(e.process(e.rtoken(/^([0-5][0-9]|[0-9])/),g.second)),f.ss=e.cache(e.process(e.rtoken(/^[0-5][0-9]/),g.second)),f.hms=e.cache(e.sequence([f.H,f.m,f.s],f.timePartDelimiter)),f.t=e.cache(e.process(f.ctoken2("shortMeridian"),g.meridian)),f.tt=e.cache(e.process(f.ctoken2("longMeridian"),g.meridian)),f.z=e.cache(e.process(e.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),g.timezone)),f.zz=e.cache(e.process(e.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),g.timezone)),f.zzz=e.cache(e.process(f.ctoken2("timezone"),g.timezone)),f.timeSuffix=e.each(e.ignore(f.whiteSpace),e.set([f.tt,f.zzz])),f.time=e.each(e.optional(e.ignore(e.stoken("T"))),f.hms,f.timeSuffix),f.d=e.cache(e.process(e.each(e.rtoken(/^([0-2]\d|3[0-1]|\d)/),e.optional(f.ctoken2("ordinalSuffix"))),g.day)),f.dd=e.cache(e.process(e.each(e.rtoken(/^([0-2]\d|3[0-1])/),e.optional(f.ctoken2("ordinalSuffix"))),g.day)),f.ddd=f.dddd=e.cache(e.process(f.ctoken("sun mon tue wed thu fri sat"),function(a){return function(){this.weekday=a}})),f.M=e.cache(e.process(e.rtoken(/^(1[0-2]|0\d|\d)/),g.month)),f.MM=e.cache(e.process(e.rtoken(/^(1[0-2]|0\d)/),g.month)),f.MMM=f.MMMM=e.cache(e.process(f.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),g.month)),f.y=e.cache(e.process(e.rtoken(/^(\d\d?)/),g.year)),f.yy=e.cache(e.process(e.rtoken(/^(\d\d)/),g.year)),f.yyy=e.cache(e.process(e.rtoken(/^(\d\d?\d?\d?)/),g.year)),f.yyyy=e.cache(e.process(e.rtoken(/^(\d\d\d\d)/),g.year)),h=function(){return e.each(e.any.apply(null,arguments),e.not(f.ctoken2("timeContext")))},f.day=h(f.d,f.dd),f.month=h(f.M,f.MMM),f.year=h(f.yyyy,f.yy),f.orientation=e.process(f.ctoken("past future"),function(a){return function(){this.orient=a}}),f.operator=e.process(f.ctoken("add subtract"),function(a){return function(){this.operator=a}}),f.rday=e.process(f.ctoken("yesterday tomorrow today now"),g.rday),f.unit=e.process(f.ctoken("second minute hour day week month year"),function(a){return function(){this.unit=a}}),f.value=e.process(e.rtoken(/^\d\d?(st|nd|rd|th)?/),function(a){return function(){this.value=a.replace(/\D/g,"")}}),f.expression=e.set([f.rday,f.operator,f.value,f.unit,f.orientation,f.ddd,f.MMM]),h=function(){return e.set(arguments,f.datePartDelimiter)},f.mdy=h(f.ddd,f.month,f.day,f.year),f.ymd=h(f.ddd,f.year,f.month,f.day),f.dmy=h(f.ddd,f.day,f.month,f.year),f.date=function(a){return(f[c.dateElementOrder]||f.mdy).call(this,a)},f.format=e.process(e.many(e.any(e.process(e.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(b){if(f[b])return f[b];throw a.Parsing.Exception(b)}),e.process(e.rtoken(/^[^dMyhHmstz]+/),function(a){return e.ignore(e.stoken(a))}))),function(a){return e.process(e.each.apply(null,a),g.finishExact)});var j={},k=function(a){return j[a]=j[a]||f.format(a)[0]};f.formats=function(a){if(a instanceof Array){var b=[];for(var c=0;c<a.length;c++)b.push(k(a[c]));return e.any.apply(null,b)}return k(a)},f._formats=f.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]),f._start=e.process(e.set([f.date,f.time,f.expression],f.generalDelimiter,f.whiteSpace),g.finish),f.start=function(a){try{var b=f._formats.call({},a);if(b[1].length===0)return b}catch(c){}return f._start.call({},a)},a._parse=a.parse,a.parse=function(b){var c=null;if(!b)return null;if(b instanceof Date)return b;try{c=a.Grammar.start.call({},b.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(d){return null}return c[1].length===0?c[0]:null},a.getParseFunction=function(b){var c=a.Grammar.formats(b);return function(a){var b=null;try{b=c.call({},a)}catch(d){return null}return b[1].length===0?b[0]:null}},a.parseExact=function(b,c){return a.getParseFunction(c)(b)}}()}),define("str/htmlEscape",["jquery"],function(a){var b=a("<div/>"),c=function(a){return a&&a.htmlSafe?a.toString():b.text(a).html()};return function(a){if(typeof a=="string")return c(a);var b,d;for(b in a)d=a[b],typeof d=="string"&&(a[b]=c(d));return a}}),define("i18n",["jquery","str/htmlEscape","str/pluralize","str/escapeRegex","vendor/date"],function(a,b,c,d){var e={};return e.defaultLocale="en",e.defaultSeparator=".",e.locale=document.documentElement.getAttribute("lang"),e.PLACEHOLDER=/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,e.isValidNode=function(a,b){var c=b.split(".");for(var d=0;d<c.length;d++)if(c[d]in a)a=a[c[d]];else return!1;return!0},e.lookup=function(a,b){var c=this.prepareOptions(e.translations),d=c[e.currentLocale()];b=this.prepareOptions(b);if(!d)return;typeof a=="object"&&(a=a.join(this.defaultSeparator)),b.scope&&(a=b.scope.toString()+this.defaultSeparator+a),a=a.split(this.defaultSeparator);while(a.length>0){var f=a.shift();d=d[f];if(!d)break}return!d&&this.isValidNode(b,"defaultValue")&&(d=b.defaultValue),d},e.prepareOptions=function(){var a={},b,c=arguments.length;for(var d=0;d<c;d++){b=arguments[d];if(!b)continue;for(var e in b)this.isValidNode(a,e)||(a[e]=b[e])}return a},e.interpolate=function(a,c){var d,e,f,g,h=!1;c=this.prepareOptions(c),c.wrapper&&(h=!0,a=this.applyWrappers(a,c.wrapper)),g=a.match(this.PLACEHOLDER)||[];for(var i=0;d=g[i];i++){f=d.replace(this.PLACEHOLDER,"$1");var j=f.split(".");e=c;for(var k=0;k<j.length;k++)e=e[j[k]];this.isValidNode(c,f)||(e="[missing "+d+" value]"),h?e.htmlSafe||(e=b(e)):e.htmlSafe&&(h=!0,a=b(a)),regex=new RegExp(d.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}")),a=a.replace(regex,e)}return a},e.wrapperRegexes={},e.applyWrappers=function(a,c){var e=[],f;a=b(a),typeof c=="string"&&(c={"*":c});for(f in c)e.push(f);e.sort().reverse();for(var g in e){f=e[g];if(!this.wrapperRegexes[f]){var h=d(f);this.wrapperRegexes[f]=new RegExp(h+"([^"+h+"]*)"+h,"g")}a=a.replace(this.wrapperRegexes[f],c[f])}return a},e.translate=function(a,b){b=this.prepareOptions(b);var c=this.lookup(a,b);try{return typeof c=="object"?typeof b.count=="number"?this.pluralize(b.count,a,b):c:this.interpolate(c,b)}catch(d){return this.missingTranslation(a)}},e.localize=function(a,b){switch(a){case"currency":return this.toCurrency(b);case"number":return a=this.lookup("number.format"),this.toNumber(b,a);case"percentage":return this.toPercentage(b);default:return a.match(/^(date|time)/)?this.toTime(a,b).replace(/\s{2,}/," "):b.toString()}},e.parseDate=function(a){var b,c;b=a.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ |T](\d{2}):(\d{2}):(\d{2}))?(Z)?/);if(b){for(var d=1;d<=6;d++)b[d]=parseInt(b[d],10)||0;b[2]-=1,b[7]?c=new Date(Date.UTC(b[1],b[2],b[3],b[4],b[5],b[6])):c=new Date(b[1],b[2],b[3],b[4],b[5],b[6])}else typeof a=="number"?(c=new Date,c.setTime(a)):(c=new Date,c.setTime(Date.parse(a)));return c},e.toTime=function(a,b){var c=this.parseDate(b),d=this.lookup(a);return c.toString().match(/invalid/i)?c.toString():d?this.strftime(c,d):c.toString()},e.strftime=function(a,b){var c=this.lookup("date");if(!c)return a.toString();c.meridian=c.meridian||["AM","PM"];var d=a.getDay(),e=a.getDate(),f=a.getFullYear(),g=a.getMonth()+1,h=1+Math.round((new Date(f,g-1,e)-new Date(f,0,1))/864e5),i=a.getHours(),j=i,k=i>11?1:0,l=a.getSeconds(),m=a.getMilliseconds(),n=a.getMinutes(),o=a.getTimezoneOffset(),p=Math.floor(a.getTime()/1e3),q=Math.floor(Math.abs(o/60)),r=Math.abs(o)-q*60,s=(o>0?"-":"+")+(q.toString().length<2?"0"+q:q)+(r.toString().length<2?"0"+r:r);j>12?j-=12:j===0&&(j=12);var t=function(a,b,c){typeof b=="undefined"&&(b="00"),typeof c=="undefined"&&(c=2);var d=b+a.toString();return d.substr(d.length-c)},u=b.replace(/%([DFrRTv])/g,function(a,b){return{D:"%m/%d/%y",F:"%Y-%m-%d",r:"%I:%M:%S %p",R:"%H:%M",T:"%H:%M:%S",v:"%e-%b-%Y"}[b]}).replace(/%(%|\-?[a-zA-Z]|3N)/g,function(a,b){switch(b){case"a":return c.abbr_day_names[d];case"A":return c.day_names[d];case"b":return c.abbr_month_names[g];case"B":return c.month_names[g];case"d":return t(e);case"-d":return e;case"e":return t(e," ");case"h":return c.abbr_month_names[g];case"H":return t(i);case"-H":return i;case"I":return t(j);case"-I":return j;case"j":return t(h,"00",3);case"k":return t(i," ");case"l":return t(j," ");case"L":return t(m,"00",3);case"m":return t(g);case"-m":return g;case"M":return t(n);case"-M":return n;case"n":return"\n";case"3N":return t(m,"00",3);case"p":return c.meridian[k];case"P":return c.meridian[k].toLowerCase();case"s":return p;case"S":return t(l);case"-S":return l;case"t":return"\t";case"u":return d||d+7;case"w":return d;case"y":return t(f);case"-y":return t(f).replace(/^0+/,"");case"Y":return f;case"z":return s;case"%":return"%";default:return a}});return u},e.toNumber=function(a,b){b=this.prepareOptions(b,this.lookup("number.format"),{precision:3,separator:".",delimiter:",",strip_insignificant_zeros:!1});var c=a<0,d=Math.abs(a).toFixed(b.precision).toString(),e=d.split(".");a=e[0];var f=e[1],g=[];while(a.length>0)g.unshift(a.substr(Math.max(0,a.length-3),3)),a=a.substr(0,a.length-3);var h=g.join(b.delimiter);b.precision>0&&(h+=b.separator+e[1]),c&&(h="-"+h);if(b.strip_insignificant_zeros){var i={separator:new RegExp(b.separator.replace(/\./,"\\.")+"$"),zeros:/0+$/};h=h.replace(i.zeros,"").replace(i.separator,"")}return h},e.toCurrency=function(a,b){return b=this.prepareOptions(b,this.lookup("number.currency.format"),this.lookup("number.format"),{unit:"$",precision:2,format:"%u%n",delimiter:",",separator:"."}),a=this.toNumber(a,b),a=b.format.replace("%u",b.unit).replace("%n",a),a},e.toHumanSize=function(a,b){var c=1024,d=a,e=0,f,g;while(d>=c&&e<4)d/=c,e+=1;return e===0?(f=this.t("number.human.storage_units.units.byte",{count:d}),g=0):(f=this.t("number.human.storage_units.units."+[null,"kb","mb","gb","tb"][e]),g=d-Math.floor(d)===0?0:1),b=this.prepareOptions(b,{precision:g,format:"%n%u",delimiter:""}),a=this.toNumber(d,b),a=b.format.replace("%u",f).replace("%n",a),a},e.toPercentage=function(a,b){return b=this.prepareOptions(b,this.lookup("number.percentage.format"),this.lookup("number.format"),{precision:3,separator:".",delimiter:""}),a=this.toNumber(a,b),a+"%"},e.pluralize=function(a,b,c){var d;try{d=this.lookup(b,c)}catch(e){}if(!d)return this.missingTranslation(b);var f;c=this.prepareOptions(c),c.count=a.toString();switch(Math.abs(a)){case 0:f=this.isValidNode(d,"zero")?d.zero:this.isValidNode(d,"none")?d.none:this.isValidNode(d,"other")?d.other:this.missingTranslation(b,"zero");break;case 1:f=this.isValidNode(d,"one")?d.one:this.missingTranslation(b,"one");break;default:f=this.isValidNode(d,"other")?d.other:this.missingTranslation(b,"other")}return this.interpolate(f,c)},e.missingTranslation=function(){var a='[missing "'+this.currentLocale(),b=arguments.length;for(var c=0;c<b;c++)a+="."+arguments[c];return a+='" translation]',a},e.currentLocale=function(){return e.locale||e.defaultLocale},e.t=e.translate,e.l=e.localize,e.p=e.pluralize,e.scoped=function(a,b){var c=new e.scope(a);return b&&b(c),c},e.scope=function(a){this.scope=a},e.scope.prototype={resolveScope:function(a){return typeof a=="object"&&(a=a.join(e.defaultSeparator)),a[0]=="#"?a.replace(/^#/,""):this.scope+e.defaultSeparator+a},translate:function(a,b,d){return d=d||{},typeof d.count!="undefined"&&typeof b=="string"&&b.match(/^[\w\-]+$/)&&(b=c.withCount(d.count,b)),d.defaultValue=b,e.translate(this.resolveScope(a),d)},localize:function(a,b){return e.localize(this.resolveScope(a),b)},pluralize:function(a,b,c){return e.pluralize(a,this.resolveScope(b),c)},beforeLabel:function(a,b){return typeof b!="undefined"&&(a=this.t("labels."+a,b)),this.t("#before_label_wrapper","%{text}:",{text:a})},toTime:function(a,b){return e.toTime(a,b)},toNumber:function(a,b){return e.toNumber(a,b)},toCurrency:function(a,b){return e.toCurrency(a,b)},toHumanSize:function(a,b){return e.toHumanSize(a,b)},toPercentage:function(a,b){return e.toPercentage(a,b)}},e.scope.prototype.t=e.scope.prototype.translate,e.scope.prototype.l=e.scope.prototype.localize,e.scope.prototype.p=e.scope.prototype.pluralize,e.translations?a.extend(!0,e.translations,{en:{}}):e.translations={en:{}},e}),define("jqueryui/core",["jquery"],function(a,b){function c(b,c){var e=b.nodeName.toLowerCase();if("area"===e){var f=b.parentNode,g=f.name,h;return!b.href||!g||f.nodeName.toLowerCase()!=="map"?!1:(h=a("img[usemap=#"+g+"]")[0],!!h&&d(h))}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(a.ui.version)return;a.extend(a.ui,{version:"@VERSION",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return typeof b=="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?b=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):b=this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length){var d=a(this[0]),e,f;while(d.length&&d[0]!==document){e=d.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){f=parseInt(d.css("zIndex"),10);if(!isNaN(f)&&f!==0)return f}d=d.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(c,d){function h(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),f&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var e=d==="Width"?["Left","Right"]:["Top","Bottom"],f=d.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?g["inner"+d].call(this):this.each(function(){a(this).css(f,h(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return typeof b!="number"?g["outer"+d].call(this,b):this.each(function(){a(this).css(f,h(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=c.offsetHeight===100,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(!d||!a.element[0].parentNode)return;for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return!1;var d=c&&c==="left"?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}})}),define("jqueryui/position",["jquery"],function(a,b){a.ui=a.ui||{};var c=/left|center|right/,d=/top|center|bottom/,e="center",f=a.fn.position,g=a.fn.offset;a.fn.position=function(b){if(!b||!b.of)return f.apply(this,arguments);b=a.extend({},b);var g=a(b.of),h=g[0],i=(b.collision||"flip").split(" "),j=b.offset?b.offset.split(" "):[0,0],k,l,m;return h.nodeType===9?(k=g.width(),l=g.height(),m={top:0,left:0}):h.setTimeout?(k=g.width(),l=g.height(),m={top:g.scrollTop(),left:g.scrollLeft()}):h.preventDefault?(b.at="left top",k=l=0,m={top:b.of.pageY,left:b.of.pageX}):(k=g.outerWidth(),l=g.outerHeight(),m=g.offset()),a.each(["my","at"],function(){var a=(b[this]||"").split(" ");a.length===1&&(a=c.test(a[0])?a.concat([e]):d.test(a[0])?[e].concat(a):[e,e]),a[0]=c.test(a[0])?a[0]:e,a[1]=d.test(a[1])?a[1]:e,b[this]=a}),i.length===1&&(i[1]=i[0]),j[0]=parseInt(j[0],10)||0,j.length===1&&(j[1]=j[0]),j[1]=parseInt(j[1],10)||0,b.at[0]==="right"?m.left+=k:b.at[0]===e&&(m.left+=k/2),b.at[1]==="bottom"?m.top+=l:b.at[1]===e&&(m.top+=l/2),m.left+=j[0],m.top+=j[1],this.each(function(){var c=a(this),d=c.outerWidth(),f=c.outerHeight(),g=parseInt(a.curCSS(this,"marginLeft",!0))||0,h=parseInt(a.curCSS(this,"marginTop",!0))||0,n=d+g+(parseInt(a.curCSS(this,"marginRight",!0))||0),o=f+h+(parseInt(a.curCSS(this,"marginBottom",!0))||0),p=a.extend({},m),q;b.my[0]==="right"?p.left-=d:b.my[0]===e&&(p.left-=d/2),b.my[1]==="bottom"?p.top-=f:b.my[1]===e&&(p.top-=f/2),p.left=Math.round(p.left),p.top=Math.round(p.top),q={left:p.left-g,top:p.top-h},a.each(["left","top"],function(c,e){a.ui.position[i[c]]&&a.ui.position[i[c]][e](p,{targetWidth:k,targetHeight:l,elemWidth:d,elemHeight:f,collisionPosition:q,collisionWidth:n,collisionHeight:o,offset:j,my:b.my,at:b.at})}),a.fn.bgiframe&&c.bgiframe(),c.offset(a.extend(p,{using:b.using}))})},a.ui.position={fit:{left:function(b,c){var d=a(window),e=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window),e=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]===e)return;var d=a(window),f=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft(),g=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,h=c.at[0]==="left"?c.targetWidth:-c.targetWidth,i=-2*c.offset[0];b.left+=c.collisionPosition.left<0?g+h+i:f>0?g+h+i:0},top:function(b,c){if(c.at[1]===e)return;var d=a(window),f=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop(),g=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,h=c.at[1]==="top"?c.targetHeight:-c.targetHeight,i=-2*c.offset[1];b.top+=c.collisionPosition.top<0?g+h+i:f>0?g+h+i:0}}},a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",!0),10)||0,g=parseInt(a.curCSS(b,"left",!0),10)||0,h={top:c.top-e.top+f,left:c.left-e.left+g};"using"in c?c.using.call(b,h):d.css(h)},a.fn.offset=function(b){var c=this[0];return!c||!c.ownerDocument?null:b?this.each(function(){a.offset.setOffset(this,b)}):g.call(this)})}),define("jqueryui/widget",["jquery"],function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d=0,e;(e=b[d])!=null;d++)try{a(e).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){return c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}}),d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e=b.split(".")[0],f;b=b.split(".")[1],f=e+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][f]=function(c){return!!a.data(c,b)},a[e]=a[e]||{},a[e][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[e][b].prototype=a.extend(!0,g,{namespace:e,widgetName:b,widgetEventPrefix:a[e][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},d),a.widget.bridge(b,a[e][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f=typeof e=="string",g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e,f&&e.charAt(0)==="_"?h:(f?this.each(function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;if(f!==d&&f!==b)return h=f,!1}):this.each(function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))}),h)}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(arguments.length===0)return a.extend({},this.options);if(typeof c=="string"){if(d===b)return this.options[c];e={},e[c]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e=this.options[b];c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),d=d||{};if(c.originalEvent)for(var f=a.event.props.length,g;f;)g=a.event.props[--f],c[g]=c.originalEvent[g];return this.element.trigger(c,d),!(a.isFunction(e)&&e.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}}),define("jqueryui/mouse",["jquery","jqueryui/widget"],function(a,b,c){var d=!1;a(document).mouseup(function(a){d=!1}),a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent"))return a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(b){if(d)return;this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var c=this,e=b.which==1,f=typeof this.options.cancel=="string"&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;if(!e||f||!this._mouseCapture(b))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){this._mouseStarted=this._mouseStart(b)!==!1;if(!this._mouseStarted)return b.preventDefault(),!0}return!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return c._mouseMove(a)},this._mouseUpDelegate=function(a){return c._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),d=!0,!0},_mouseMove:function(b){return a.browser.msie&&document.documentMode<9&&!b.button?this._mouseUp(b):this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(a){return this.mouseDelayMet},_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return!0}})}),define("INST",["jquery"],function(a){typeof INST=="undefined"&&(INST={}),INST.browser={},a.each([7,8,9],function(b,c){a("html").hasClass("ie"+c)&&(INST.browser["ie"+c]=INST.browser.ie=!0,INST.browser.version=c)}),window.devicePixelRatio&&(INST.browser.webkit=!0,INST.browser[escape(navigator.javaEnabled.toString())=="function%20javaEnabled%28%29%20%7B%20%5Bnative%20code%5D%20%7D"?"chrome":"safari"]=!0),INST.browser.ff=a.browser.mozilla;var b=a.map(INST.browser,function(a,b){if(a===!0)return b}).join(" ");return a(function(){a("body").addClass(b)}),INST}),define("vendor/jquery.ba-throttle-debounce",["jquery"],function(a){var b;a.throttle=b=function(b,c,d,e){function h(){function j(){g=+(new Date),d.apply(a,i)}function k(){f=undefined}var a=this,h=+(new Date)-g,i=arguments;e&&!f&&j(),f&&clearTimeout(f),e===undefined&&h>b?j():c!==!0&&(f=setTimeout(e?k:j,e===undefined?b-h:b))}var f,g=0;return typeof c!="boolean"&&(e=d,d=c,c=undefined),a.guid&&(h.guid=d.guid=d.guid||a.guid++),h},a.debounce=function(a,c,d){return d===undefined?b(a,c,!1):b(a,d,c!==!1)}}),define("vendor/jquery.store",["jquery"],function(a){a.store=function(){var a={},b=window,c=b.document,d="localStorage",e="globalStorage",f,g=/(\s|\/)/g;a.set=function(a,b){},a.get=function(a){},a.remove=function(a){},a.clear=function(){},a.transact=function(b,c){var d=a.get(b);typeof d=="undefined"&&(d={}),c(d),a.set(b,d)},a.serialize=function(a){return JSON.stringify(a)},a.deserialize=function(a){return typeof a!="string"?undefined:JSON.parse(a)};if(d in b&&b[d])f=b[d],a.set=function(b,c){f.setItem(b,a.serialize(c))},a.get=function(b){return a.deserialize(f.getItem(b))},a.remove=function(a){f.removeItem(a)},a.clear=function(){f.clear()};else if(e in b&&b[e])f=b[e][b.location.hostname],a.set=function(b,c){f[b]=a.serialize(c)},a.get=function(b){return a.deserialize(f[b]&&f[b].value)},a.remove=function(a){delete f[a]},a.clear=function(){for(var a in f)delete f[a]};else if(c.documentElement.addBehavior){var f=c.createElement("div");function h(b){return function(){var e=Array.prototype.slice.call(arguments,0);e.unshift(f),e[1]&&e[1].match&&e[1].match(g)&&(e[1]=e[1].replace(g,"")),c.body.appendChild(f),f.addBehavior("#default#userData"),f.load(d);var h=b.apply(a,e);return c.body.removeChild(f),h}}a.set=h(function(b,c,e){b.setAttribute(c,a.serialize(e)),b.save(d)}),a.get=h(function(b,c){return a.deserialize(b.getAttribute(c))}),a.remove=h(function(a,b){a.removeAttribute(b),a.save(d)}),a.clear=h(function(a){var b=a.XMLDocument.documentElement.attributes;a.load(d);for(var c=0,e;e=b[c];c++)a.removeAttribute(e.name);a.save(d)})}return a}()}),define("vendor/jquery.ba-hashchange",["jquery"],function(a){function h(a){return a=a||location.href,"#"+a.replace(/^[^#]*#?(.*)$/,"$1")}"$:nomunge";var b="hashchange",c=document,d,e=a.event.special,f=c.documentMode,g="on"+b in window&&(f===undefined||f>7);a.fn[b]=function(a){return a?this.bind(b,a):this.trigger(b)},a.fn[b].delay=50,e[b]=a.extend(e[b],{setup:function(){if(g)return!1;a(d.start)},teardown:function(){if(g)return!1;a(d.stop)}}),d=function(){function l(){var c=h(),d=k(f);c!==f?(j(f=c,d),a(window).trigger(b)):d!==f&&(location.href=location.href.replace(/#.*/,"")+d),e=setTimeout(l,a.fn[b].delay)}var d={},e,f=h(),i=function(a){return a},j=i,k=i;return d.start=function(){e||l()},d.stop=function(){e&&clearTimeout(e),e=undefined},a.browser.msie&&!g&&function(){var e,f;d.start=function(){e||(f=a.fn[b].src,f=f&&f+h(),e=a('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){f||j(h()),l()}).attr("src",f||"javascript:0").insertAfter("body")[0].contentWindow,c.onpropertychange=function(){try{event.propertyName==="title"&&(e.document.title=c.title)}catch(a){}})},d.stop=i,k=function(){return h(e.location.href)},j=function(d,f){var g=e.document,h=a.fn[b].domain;d!==f&&(g.title=c.title,g.open(),h&&g.write('<script>document.domain="'+h+'"</script>'),g.close(),e.location.hash=d)}}(),d}()}),define("vendor/jquery.ba-tinypubsub",["jquery"],function(a){var b=a({});a.subscribe=function(c,d){function e(){return d.apply(this,Array.prototype.slice.call(arguments,1))}e.guid=d.guid=d.guid||a.guid++,b.bind(c,e)},a.unsubscribe=function(){b.unbind.apply(b,arguments)},a.publish=function(){b.trigger.apply(b,arguments)}}),define("vendor/spin",[],function(){function d(a,b){var c=document.createElement(a||"div"),d;for(d in b)c[d]=b[d];return c}function e(a,b,c){return c&&!c.parentNode&&e(a,c),a.insertBefore(b,c||null),a}function g(c,d,e,g){var h=["opacity",d,~~(c*100),e,g].join("-"),i=.01+e/g*100,j=Math.max(1-(1-c)/d*(100-i),c),k,l;if(!b[h]){for(l=0;l<a.length;l++){k=a[l]&&"-"+a[l].toLowerCase()+"-"||"";try{f.insertRule("@"+k+"keyframes "+h+"{"+"0%{opacity:"+j+"}"+i+"%{opacity:"+c+"}"+(i+.01)+"%{opacity:1}"+(i+d)%100+"%{opacity:"+c+"}"+"100%{opacity:"+j+"}"+"}",0)}catch(m){}}b[h]=1}return h}function h(b,c){var d=b.style,e,f;if(d[c]!==undefined)return c;c=c.charAt(0).toUpperCase()+c.slice(1);for(f=0;f<a.length;f++){e=a[f]+c;if(d[e]!==undefined)return e}}function i(a,b){for(var c in b)a.style[h(a,c)||c]=b[c];return a}function j(a,b){for(var c in b)a[c]===undefined&&(a[c]=b[c]);return a}function k(a){var b={x:a.offsetLeft,y:a.offsetTop};while(a=a.offsetParent)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}var a=["webkit","Moz","ms","O"],b={},c;e(document.getElementsByTagName("head")[0],d("style"));var f=document.styleSheets[document.styleSheets.length-1],l=function(a){this.opts=j(a||{},{lines:12,length:7,width:5,radius:10,color:"#000",speed:1,trail:100,opacity:.25})},m=l.prototype={spin:function(a){var b=this,f=b.el=i(d(),{position:"absolute"}),g,h;a&&(h=k(e(a,f,a.firstChild)),g=k(f),i(f,{left:(a.offsetWidth>>1)-g.x+h.x+"px",top:(a.offsetHeight>>1)-g.y+h.y+"px"})),b.lines(f,b.opts);if(!c){var j=b.opts,l=0,m=20/j.speed,n=(1-j.opacity)/(m*j.trail/100),o=m/j.lines;(function p(){l++;for(var a=j.lines;a;a--){var c=Math.max(1-(l+a*o)%m*n,j.opacity);b.opacity(f,j.lines-a,c,j)}b.timeout=b.el&&setTimeout(p,50)})()}return b},stop:function(){var a=this,b=a.el;return clearTimeout(a.timeout),b&&b.parentNode&&b.parentNode.removeChild(b),a.el=undefined,a}};return m.lines=function(a,b){function h(a,e){return i(d(),{position:"absolute",width:b.length+b.width+"px",height:b.width+"px",background:a,boxShadow:e,transformOrigin:"left",transform:"rotate("+~~(360/b.lines*c)+"deg) translate("+b.radius+"px"+",0)",borderRadius:"100em"})}var c=0,f;for(;c<b.lines;c++)f=i(d(),{position:"absolute",top:1+~(b.width/2)+"px",transform:"translate3d(0,0,0)",opacity:b.opacity,animation:g(b.opacity,b.trail,c,b.lines)+" "+1/b.speed+"s linear infinite"}),b.shadow&&e(f,i(h("#000","0 0 4px #000"),{top:"2px"})),e(a,e(f,h(b.color,"0 0 1px rgba(0,0,0,.1)")));return a},m.opacity=function(a,b,c){a.childNodes[b].style.opacity=c},function(){var a=i(d("group"),{behavior:"url(#default#VML)"}),b;if(!h(a,"transform")&&a.adj){for(b=4;b--;)f.addRule(["group","roundrect","fill","stroke"][b],"behavior:url(#default#VML)");m.lines=function(a,b){function g(){return i(d("group",{coordsize:f+" "+f,coordorigin:-c+" "+ -c}),{width:f,height:f})}function l(a,f,j){e(h,e(i(g(),{rotation:360/b.lines*a+"deg",left:~~f}),e(i(d("roundrect",{arcsize:1}),{width:c,height:b.width,left:b.radius,top:-b.width>>1,filter:j}),d("fill",{color:b.color,opacity:b.opacity}),d("stroke",{opacity:0}))))}var c=b.length+b.width,f=2*c,h=g(),j=~(b.length+b.radius+b.width)+"px",k;if(b.shadow)for(k=1;k<=b.lines;k++)l(k,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(k=1;k<=b.lines;k++)l(k);return e(i(a,{margin:j+" 0 0 "+j}),h)},m.opacity=function(a,b,c,d){d=d.shadow&&d.lines||0,a.firstChild.childNodes[b+d].firstChild.firstChild.opacity=c}}else c=h(a,"animation")}(),window.Spinner=l,l}),define("vendor/jquery.spin",["jquery","vendor/spin"],function(a,b){a.fn.spin=function(c){return this.each(function(){var d=a(this),e=d.data();e.spinner&&(e.spinner.stop(),delete e.spinner);if(c!==!1){var f=a.css(this,"display");d.show(),e.spinner=(new b(a.extend({color:d.css("color")},c))).spin(this),d.css("display",f)}})}}),require(["i18n","jquery"],function(a,b){b.extend(!0,a,{translations:{en:{support:{select:{prompt:"Please select"},array:{two_words_connector:" and ",or:{two_words_connector:" or ",last_word_connector:", or "},last_word_connector:", and ",words_connector:", "}},date:{formats:{weekday:"%A","long":"%B %d, %Y","short":"%b %e","default":"%Y-%m-%d",medium:"%b %e, %Y"},abbr_day_names:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],day_names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbr_month_names:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:{yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",today_lower:"today"},month_names:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],order:["year","month","day"]},time:{formats:{"long":"%B %d, %Y %H:%M","short":"%d %b %H:%M",tiny:"%l:%M%P","default":"%a, %d %b %Y %H:%M:%S %z",tiny_on_the_hour:"%l%P"},due_date:"%{date} by %{time}",event:"%{date} at %{time}",am:"am",ranges:{same_day:"%{date} from %{start_time} to %{end_time}",different_days:"%{start_date_and_time} to %{end_date_and_time}",times:"%{start_time} to %{end_time}"},less_than_a_minute_ago:"less than a minute ago",unknown_date:"Unknown date",count_hours_ago:{other:"%{count} hours ago",one:"1 hour ago"},with_ago:"%{time} ago",count_minutes_ago:{other:"%{count} minutes ago",one:"1 minute ago"},pm:"pm"},datetime:{distance_in_words:{half_a_minute:"half a minute",about_x_hours:{other:"about %{count} hours",one:"about 1 hour"},about_x_years:{other:"about %{count} years",one:"about 1 year"},x_days:{other:"%{count} days",one:"1 day"},less_than_x_minutes:{other:"less than %{count} minutes",one:"less than a minute"},over_x_years:{other:"over %{count} years",one:"over 1 year"},about_x_months:{other:"about %{count} months",one:"about 1 month"},almost_x_years:{other:"almost %{count} years",one:"almost 1 year"},x_minutes:{other:"%{count} minutes",one:"1 minute"},x_months:{other:"%{count} months",one:"1 month"},less_than_x_seconds:{other:"less than %{count} seconds",one:"less than 1 second"},x_seconds:{other:"%{count} seconds",one:"1 second"}},prompts:{hour:"Hour",second:"Seconds",minute:"Minute",day:"Day",month:"Month",year:"Year"}},number:{percentage:{format:{delimiter:""}},currency:{format:{format:"%u%n",unit:"$",separator:".",delimiter:",",precision:2}},format:{separator:".",delimiter:",",precision:3},human:{format:{delimiter:"",precision:1},storage_units:{units:{tb:"TB","byte":{other:"Bytes",one:"Byte"},kb:"KB",mb:"MB",gb:"GB"},format:"%n %u"}},precision:{format:{delimiter:""}}}}}})}),define("translations/_core_en",function(){}),define("vendor/firebugx",[],function(){if(!("console"in window)){var a=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];window.console={};for(var b=0;b<a.length;b++)window.console[a[b]]=function(){}}}),require(["INST","jquery"],function(a,b){var c=window._gaq=window._gaq||[],d=document.createElement("script");d.type="text/javascript",d.async=!0,d.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var e=document.getElementsByTagName("script")[0];return e.parentNode.insertBefore(d,e),b.trackPage=function(a,d){if(!asyncScriptInserted){asyncScriptInserted=!0;var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var f=document.getElementsByTagName("script")[0];f.parentNode.insertBefore(e,f)}d=b.extend({status_code:200},d),c.push(["_setAccount",a]),d.domain&&c.push(["_setDomainName",d.domain]),c.push(["_trackPageview"]),c.push(["_trackPageLoadTime"]),d.status_code!=200&&c.push(["_trackEvent","Errors",d.status_code,"page: "+document.location.pathname+document.location.search+" ref: "+document.referrer,d.error_id])},b.setTrackingVar=function(){var a=Array.prototype.slice.call(arguments,0);a.unshift("_setCustomVar"),c.push.apply(c,a)},b.trackEvent=function(a,b,d,e){c.push(["_trackEvent",a,b,d,e])},b.trackPageview=function(a){c.push(["_trackPageview",a])},a&&a.googleAnalyticsAccount&&b.trackPage(a.googleAnalyticsAccount,{status_code:a.http_status,error_id:a.error_id,domainName:document.location.hostname}),{trackPage:b.trackPage,setTrackingVar:b.setTrackingVar,trackEvent:b.trackEvent,trackPageView:b.trackPageView}}),define("jquery.google-analytics",function(){}),define("vendor/swfobject/swfobject",[],function(){function z(){if(t)return;try{var a=i.getElementsByTagName("body")[0].appendChild(P("span"));a.parentNode.removeChild(a)}catch(b){return}t=!0;var c=l.length;for(var d=0;d<c;d++)l[d]()}function A(a){t?a():l[l.length]=a}function B(b){if(typeof h.addEventListener!=a)h.addEventListener("load",b,!1);else if(typeof i.addEventListener!=a)i.addEventListener("load",b,!1);else if(typeof h.attachEvent!=a)Q(h,"onload",b);else if(typeof h.onload=="function"){var c=h.onload;h.onload=function(){c(),b()}}else h.onload=b}function C(){k?D():E()}function D(){if(y){storedVersion=localStorage.getItem("flashversion");if(storedVersion){ua.pv=JSON.parse(storedVersion),E();return}}var c=i.getElementsByTagName("body")[0],d=P(b);d.setAttribute("type",e);var f=c.appendChild(d);if(f){var g=0;(function(){if(typeof f.GetVariable!=a){var b=f.GetVariable("$version");b&&(b=b.split(" ")[1].split(","),ua.pv=[parseInt(b[0],10),parseInt(b[1],10),parseInt(b[2],10)],y&&localStorage.setItem("flashversion",JSON.stringify(ua.pv)))}else if(g<10){g++,setTimeout(arguments.callee,10);return}c.removeChild(d),f=null,E()})()}else E()}function E(){var b=m.length;if(b>0)for(var c=0;c<b;c++){var d=m[c].id,e=m[c].callbackFn,f={success:!1,id:d};if(ua.pv[0]>0){var g=O(d);if(g)if(!R(m[c].swfVersion)||!!ua.wk&&ua.wk<312)if(m[c].expressInstall&&G()){var h={};h.data=m[c].expressInstall,h.width=g.getAttribute("width")||"0",h.height=g.getAttribute("height")||"0",g.getAttribute("class")&&(h.styleclass=g.getAttribute("class")),g.getAttribute("align")&&(h.align=g.getAttribute("align"));var i={},j=g.getElementsByTagName("param"),k=j.length;for(var l=0;l<k;l++)j[l].getAttribute("name").toLowerCase()!="movie"&&(i[j[l].getAttribute("name")]=j[l].getAttribute("value"));H(h,i,d,e)}else I(g),e&&e(f);else T(d,!0),e&&(f.success=!0,f.ref=F(d),e(f))}else{T(d,!0);if(e){var n=F(d);n&&typeof n.SetVariable!=a&&(f.success=!0,f.ref=n),e(f)}}}}function F(c){var d=null,e=O(c);if(e&&e.nodeName=="OBJECT")if(typeof e.SetVariable!=a)d=e;else{var f=e.getElementsByTagName(b)[0];f&&(d=f)}return d}function G(){return!u&&R("6.0.65")&&(ua.win||ua.mac)&&(!ua.wk||ua.wk>=312)}function H(b,c,d,e){u=!0,r=e||null,s={success:!1,id:d};var g=O(d);if(g){g.nodeName=="OBJECT"?(p=J(g),q=null):(p=g,q=d),b.id=f;if(typeof b.width==a||!/%$/.test(b.width)&&parseInt(b.width,10)<310)b.width="310";if(typeof b.height==a||!/%$/.test(b.height)&&parseInt(b.height,10)<137)b.height="137";i.title=i.title.slice(0,47)+" - Flash Player Installation";var j=ua.ie&&ua.win?"ActiveX":"PlugIn",k="MMredirectURL="+h.location.toString().replace(/&/g,"%26")+"&MMplayerType="+j+"&MMdoctitle="+i.title;typeof c.flashvars!=a?c.flashvars+="&"+k:c.flashvars=k;if(ua.ie&&ua.win&&g.readyState!=4){var l=P("div");d+="SWFObjectNew",l.setAttribute("id",d),g.parentNode.insertBefore(l,g),g.style.display="none",function(){g.readyState==4?g.parentNode.removeChild(g):setTimeout(arguments.callee,10)}()}K(b,c,d)}}function I(a){if(ua.ie&&ua.win&&a.readyState!=4){var b=P("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(J(a),b),a.style.display="none",function(){a.readyState==4?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(J(a),a)}function J(a){var c=P("div");if(ua.win&&ua.ie)c.innerHTML=a.innerHTML;else{var d=a.getElementsByTagName(b)[0];if(d){var e=d.childNodes;if(e){var f=e.length;for(var g=0;g<f;g++)(e[g].nodeType!=1||e[g].nodeName!="PARAM")&&e[g].nodeType!=8&&c.appendChild(e[g].cloneNode(!0))}}}return c}function K(c,d,f){var g,h=O(f);if(ua.wk&&ua.wk<312)return g;if(h){typeof c.id==a&&(c.id=f);if(ua.ie&&ua.win){var i="";for(var j in c)c[j]!=Object.prototype[j]&&(j.toLowerCase()=="data"?d.movie=c[j]:j.toLowerCase()=="styleclass"?i+=' class="'+c[j]+'"':j.toLowerCase()!="classid"&&(i+=" "+j+'="'+c[j]+'"'));var k="";for(var l in d)d[l]!=Object.prototype[l]&&(k+='<param name="'+l+'" value="'+d[l]+'" />');h.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+i+">"+k+"</object>",n[n.length]=c.id,g=O(c.id)}else{var m=P(b);m.setAttribute("type",e);for(var o in c)c[o]!=Object.prototype[o]&&(o.toLowerCase()=="styleclass"?m.setAttribute("class",c[o]):o.toLowerCase()!="classid"&&m.setAttribute(o,c[o]));for(var p in d)d[p]!=Object.prototype[p]&&p.toLowerCase()!="movie"&&L(m,p,d[p]);h.parentNode.replaceChild(m,h),g=m}}return g}function L(a,b,c){var d=P("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function M(a){var b=O(a);b&&b.nodeName=="OBJECT"&&(ua.ie&&ua.win?(b.style.display="none",function(){b.readyState==4?N(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function N(a){var b=O(a);if(b){for(var c in b)typeof b[c]=="function"&&(b[c]=null);b.parentNode.removeChild(b)}}function O(a){var b=null;try{b=i.getElementById(a)}catch(c){}return b}function P(a){return i.createElement(a)}function Q(a,b,c){a.attachEvent(b,c),o[o.length]=[a,b,c]}function R(a){var b=ua.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function S(c,d,e,f){if(ua.ie&&ua.mac)return;var g=i.getElementsByTagName("head")[0];if(!g)return;var h=e&&typeof e=="string"?e:"screen";f&&(v=null,w=null);if(!v||w!=h){var j=P("style");j.setAttribute("type","text/css"),j.setAttribute("media",h),v=g.appendChild(j),ua.ie&&ua.win&&typeof i.styleSheets!=a&&i.styleSheets.length>0&&(v=i.styleSheets[i.styleSheets.length-1]),w=h}ua.ie&&ua.win?v&&typeof v.addRule==b&&v.addRule(c,d):v&&typeof i.createTextNode!=a&&v.appendChild(i.createTextNode(c+" {"+d+"}"))}function T(a,b){if(!x)return;var c=b?"visible":"hidden";t&&O(a)?O(a).style.visibility=c:S("#"+a,"visibility:"+c)}function U(b){var c=/[\\\"<>\.;]/,d=c.exec(b)!=null;return d&&typeof encodeURIComponent!=a?encodeURIComponent(b):b}var a="undefined",b="object",c="Shockwave Flash",d="ShockwaveFlash.ShockwaveFlash",e="application/x-shockwave-flash",f="SWFObjectExprInst",g="onreadystatechange",h=window,i=document,j=navigator,k=!1,l=[C],m=[],n=[],o=[],p,q,r,s,t=!1,u=!1,v,w,x=!0,y=!!window.localStorage;ua=function(){var f=typeof i.getElementById!=a&&typeof i.getElementsByTagName!=a&&typeof i.createElement!=a,g=j.userAgent.toLowerCase(),l=j.platform.toLowerCase(),m=l?/win/.test(l):/win/.test(g),n=l?/mac/.test(l):/mac/.test(g),o=/webkit/.test(g)?parseFloat(g.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,p=!1,q=[0,0,0],r=null;if(typeof j.plugins!=a&&typeof j.plugins[c]==b)r=j.plugins[c].description,r&&(typeof j.mimeTypes==a||!j.mimeTypes[e]||!!j.mimeTypes[e].enabledPlugin)&&(k=!0,p=!1,r=r.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),q[0]=parseInt(r.replace(/^(.*)\..*$/,"$1"),10),q[1]=parseInt(r.replace(/^.*\.(.*)\s.*$/,"$1"),10),q[2]=/[a-zA-Z]/.test(r)?parseInt(r.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof h.ActiveXObject!=a)try{var s=new ActiveXObject(d);s&&(r=s.GetVariable("$version"),r&&(p=!0,r=r.split(" ")[1].split(","),q=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)]))}catch(t){}return{w3:f,pv:q,wk:o,ie:p,win:m,mac:n}}(),onDomLoad=function(){if(!ua.w3)return;(typeof i.readyState!=a&&i.readyState=="complete"||typeof i.readyState==a&&(i.getElementsByTagName("body")[0]||i.body))&&z(),t||(typeof i.addEventListener!=a&&i.addEventListener("DOMContentLoaded",z,!1),ua.ie&&ua.win&&(i.attachEvent(g,function(){i.readyState=="complete"&&(i.detachEvent(g,arguments.callee),z())}),h==top&&function(){if(t)return;try{i.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}z()}()),ua.wk&&function(){if(t)return;if(!/loaded|complete/.test(i.readyState)){setTimeout(arguments.callee,0);return}z()}(),B(z))}();var V=function(){ua.ie&&ua.win&&window.attachEvent("onunload",function(){var a=o.length;for(var b=0;b<a;b++)o[b][0].detachEvent(o[b][1],o[b][2]);var c=n.length;for(var d=0;d<c;d++)M(n[d]);for(var e in ua)ua[e]=null;ua=null;for(var f in W)W[f]=null;W=null})}(),W={registerObject:function(a,b,c,d){if(ua.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,m[m.length]=e,T(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(ua.w3)return F(a)},embedSWF:function(c,d,e,f,g,h,i,j,k,l){var m={success:!1,id:d};ua.w3&&(!ua.wk||ua.wk>=312)&&c&&d&&e&&f&&g?(T(d,!1),A(function(){e+="",f+="";var n={};if(k&&typeof k===b)for(var o in k)n[o]=k[o];n.data=c,n.width=e,n.height=f;var p={};if(j&&typeof j===b)for(var q in j)p[q]=j[q];if(i&&typeof i===b)for(var r in i)typeof p.flashvars!=a?p.flashvars+="&"+r+"="+i[r]:p.flashvars=r+"="+i[r];if(R(g)){var s=K(n,p,d);n.id==d&&T(d,!0),m.success=!0,m.ref=s}else{if(h&&G()){n.data=h,H(n,p,d,l);return}T(d,!0)}l&&l(m)})):l&&l(m)},switchOffAutoHideShow:function(){x=!1},ua:ua,getFlashPlayerVersion:function(){return{major:ua.pv[0],minor:ua.pv[1],release:ua.pv[2]}},hasFlashPlayerVersion:R,createSWF:function(a,b,c){return ua.w3?K(a,b,c):undefined},showExpressInstall:function(a,b,c,d){ua.w3&&G()&&H(a,b,c,d)},removeSWF:function(a){ua.w3&&M(a)},createCSS:function(a,b,c,d){ua.w3&&S(a,b,c,d)},addDomLoadEvent:A,addLoadEvent:B,getQueryParamValue:function(a){var b=i.location.search||i.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(a==null)return U(b);var c=b.split("&");for(var d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return U(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(u){var a=O(f);a&&p&&(a.parentNode.replaceChild(p,a),q&&(T(q,!0),ua.ie&&ua.win&&(p.style.display="block")),r&&r(s)),u=!1}}};return window.swfobject=W,W}),define("jquery.rails_flash_notifications",["jquery"],function(a){var b=!1;a._flashBox=function(c,d,e){b||(b=!0,a("#flash_message_holder .close-link").live("click",function(a){a.preventDefault()})),a("#flash_"+c+"_message").stop(!0,!0).empty().append("<a href='' class='close-link'>#</a>").append(d).hide().css("opacity",1).show("drop",{direction:"up"}).slideDown("normal").delay(e||7e3).hide("drop",{direction:"up"},2e3,function(){a(this).empty().hide()})},a.flashMessage=function(b,c){a._flashBox("notice",b,c)},a.flashError=function(b,c){a._flashBox("error",b,c)}}),define("vendor/scribd.view",["INST","i18n"],function(a,b){if(typeof c=="undefined"){var c=new Object;c.Document=function(){this.__params=[],this.__callQueue=[],this.__listenerLookup={};if(arguments.length==2)return this.document_id=arguments[0],this.access_key=arguments[1],this;if(c.Document.caller!=c.Document.getDoc&&c.Document.caller!=c.Document.getDocFromUrl&&c.Document.caller!=c.Document.getDocFromUrlForExtension&&c.Document.caller!=undefined)throw new Error("There is no public constructor for scribd.Document.")},c.Document.getDoc=function(a,b){return scribd_doc=new c.Document,scribd_doc.document_id=a,scribd_doc.access_key=b,scribd_doc},c.Document.getDocFromUrl=function(a,b){return scribd_doc=new c.Document,scribd_doc.url=a,scribd_doc.publisher_id=b,scribd_doc},c.Document.getDocFromUrlForExtension=function(a,b){return scribd_doc=new c.Document,scribd_doc.url=a,scribd_doc.extension_id=b,scribd_doc.addParam("should_redirect",!0),scribd_doc},c.Document.prototype={__handleEvent:function(a){var b=this.__listenerLookup[a]||[];for(var c=0;c<b.length;c++)b[c]()},__addRoutedListener:function(a,b){if(this.__listenerExists(a,b))return;this.__listenerLookup[a]?this.__listenerLookup[a].push(b):this.__listenerLookup[a]=new Array(b)},__removeRoutedListener:function(a,b){var c=this.__listenerLookup[a];for(var d=0;d<c.length;d++)c[d]==b&&c.splice(d,1)},__listenerExists:function(a,b){var c=this.__listenerLookup[a]||[];for(var d=0;d<c.length;d++)if(c[d]==b)return!0;return!1},addEventListener:function(a,b,c){this.api?window.addEventListener?this.api.parentNode.addEventListener(a,b,!1):this.__addRoutedListener(a,b):this.__callQueue.push(["addEventListener",a,b,!1])},removeEventListener:function(a,b){this.api?window.addEventListener?this.api.removeEventListener(a,b,!1):this.__removeRoutedListener(a,b):this.__callQueue.push(["removeEventListener",a,b])},getElement:function(){return document.getElementsByName(this.__embedName)[0]},addParam:function(a,b){this.__params[a]=b},grantAccess:function(a,b,c){this.__params.user_identifier=a,this.__params.secure_session_id=b,this.__params.signature=c},write:function(a){var c=document.getElementById(a);quickswitch=this.__params["quickswitch"]==1;if(quickswitch){var d=document.createElement("div");d.style.width="100%",d.style.height="100%",document.body.appendChild(d)}var e=c.offsetWidth,f="",g="";this.__params.width&&this.__params["width"]!="parent"&&(e=this.__params.width),this.__params.mode&&(f=this.__params.mode,g+="&viewMode="+escape(this.__params.mode));if(this.__params["height"]!="parent"){var h=Math.round(e*11/8.5);f=="slideshow"&&(h=35+Math.round(e*3/4));var j=window.innerHeight!=null?window.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:document.body!=null?document.body.clientHeight:0;j-=25,h<200&&(h=200),h>j&&(h=j);var k=h+"px"}else var k="100%";var m="100%",n=a+"_embed"+Math.round(Math.random()*9e9);this.__embedName=n;var o="ScribdViewer";this.__params["auto_size"]!=1&&(g+="&auto_size=false"),this.__params.height&&this.__params["height"]!="parent"&&(k=this.__params.height+"px"),this.__params.width&&this.__params["width"]!="parent"&&(m=this.__params.width+"px"),this.__params.swf_name&&(o=this.__params.swf_name),this.__params.disable_related_docs&&(g+="&disable_related_docs="+this.__params.disable_related_docs),this.__params.page&&(g+="&page="+this.__params.page),this.__params.extension&&(g+="&extension="+this.__params.extension),this.__params.title&&(g+="&title="+escape(this.__params.title)),this.__params.my_user_id&&(g+="&my_user_id="+this.__params.my_user_id),this.__params.api_url&&(g+="&api_url="+this.__params.api_url),this.__params.doctype&&(g+="&doctype="+this.__params.doctype),this.__params.current_user_id&&(g+="&current_user_id="+this.__params.current_user_id),this.__params.search_query&&(g+="&search_query="+escape(this.__params.search_query)),this.__params.search_keywords&&(g+="&search_keywords="+escape(this.__params.search_keywords)),this.__params["transferCookie"]==1&&(g+="&cookie="+escape(document.cookie)),this.__params.should_redirect&&(g+="&should_redirect="+this.__params.should_redirect),this.__params.secret_password&&(g+="&secret_password="+this.__params.secret_password),this.__params["public"]==1?g+="&privacy=0":g+="&privacy=1",this.__params.user_identifier&&(g+="&user_identifier="+escape(this.__params.user_identifier)),this.__params.secure_session_id&&(g+="&secure_session_id="+escape(this.__params.secure_session_id)),this.__params.signature&&(g+="&signature="+this.__params.signature),this.__params.docinfo&&(g+="&docinfo="+encodeURIComponent(this.__params.docinfo)),this.__params.useIntegratedUi&&(g+="&useIntegratedUi="+this.__params.useIntegratedUi),this.document_id&&(g+="&document_id="+this.document_id),this.access_key&&(g+="&access_key="+this.access_key),this.extension_id&&(g+="&extension_id="+this.extension_id),this.url&&(g+="&url="+escape(this.url)),this.publisher_id&&(g+="&publisher_id="+escape(this.publisher_id));var p="http://d1.scribdassets.com/",q="http://";this.__params["use_ssl"]==1&&(p="https://s3.amazonaws.com/documents.scribd.com/",g+="&use_ssl=true",q="https://"),this.__params.src_path&&(p=this.__params.src_path),this.__params.hide_sample_banner&&(g+="&hide_sample_banner="+this.__params.hide_sample_banner),this.__params["disable_resume_reading"]==1&&(g+="&disable_resume_reading=true"),this.__params["hide_full_screen_button"]==1&&(g+="&hide_full_screen_button=true"),this.__params["hide_disabled_buttons"]==1&&(g+="&hide_disabled_buttons=true"),this.__params.full_screen_type&&(g+="&full_screen_type="+this.__params.full_screen_type),this.__params.custom_logo_image_url&&(g+="&custom_logo_image_url="+escape(this.__params.custom_logo_image_url)),this.__params.custom_logo_click_url&&(g+="&custom_logo_click_url="+escape(this.__params.custom_logo_click_url));var r=l("codebase",q+"download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0","width",m,"height",k,"flashvars",g,"src",p+o,"quality","high","pluginspage",q+"www.macromedia.com/go/getflashplayer","align","middle","play","true","loop","true","scale","showall","wmode","opaque","devicefont","false","id",n,"bgcolor","#ffffff","name",n,"menu","true","allowFullScreen","true","allowScriptAccess","always","movie",p+o,"salign",""),s=i(9,0,0);s||b.scoped("scribd",function(a){r='<span style="display:block;font-size:16px;width:300px;border:1px solid #dddddd;padding:3px">'+a.t("upgrade_flash","Hello, you have an old version of Adobe Flash Player. To use iPaper (and lots of other stuff on the web) you need to %{link_tag}get the latest Flash player%{end_link}.",{link_tag:'<a href="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash">',end_link:"</a>"})+"  </span>"});if(quickswitch){d.innerHTML=r;if(c.hasChildNodes())while(c.childNodes.length>=1)c.removeChild(c.firstChild);c.appendChild(d)}else c.innerHTML=r;var t=this;window["_scribd_event_handler_"+n]=function(a){t.__handleEvent(a)};var u=function(a){var a=a||{},b=a.srcElement||document.getElementsByName(n)[0];if(b.getAttribute("name")==n){t.api=b;var c,d,e,f=[];for(var c=0;c<t.__callQueue.length;c++)e=t.__callQueue[c],e[0]=="addEventListener"?(d=e.shift(),t[d].apply(t,e)):f.push(e);t.__callQueue=f}},v=function(a){var a=a||{},b=a.srcElement||document.getElementsByName(n)[0];if(b.getAttribute("name")==n){t.onReady&&t.onReady();var c,d,e,f=[];for(c=0;c<t.__callQueue.length;c++)e=t.__callQueue.pop(),e[0]!="addEventListener"?(d=e.shift(),typeof d!="function"&&alert(typeof d),t[d].apply(t,e)):f.push(e);t.__callQueue=f}};window.addEventListener?(window.addEventListener("iPaperReady",v,!0),window.addEventListener("setupJsApi",u,!0)):(this.__addRoutedListener("iPaperReady",v),this.__addRoutedListener("setupJsApi",u))}};var d=navigator.appVersion.indexOf("MSIE")!=-1?!0:!1,e=navigator.appVersion.toLowerCase().indexOf("win")!=-1?!0:!1,f=navigator.userAgent.indexOf("Opera")!=-1?!0:!1;function g(){var a,b,c;try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),a=b.GetVariable("$version")}catch(c){}if(!a)try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),a="WIN 6,0,21,0",b.AllowScriptAccess="always",a=b.GetVariable("$version")}catch(c){}if(!a)try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3"),a=b.GetVariable("$version")}catch(c){}if(!a)try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3"),a="WIN 3,0,18,0"}catch(c){}if(!a)try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),a="WIN 2,0,0,11"}catch(c){a=-1}return a}function h(){var a=-1;if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var b=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"",c=navigator.plugins["Shockwave Flash"+b].description,h=c.split(" "),i=h[2].split("."),j=i[0],k=i[1],l=h[3];l==""&&(l=h[4]),l[0]=="d"?l=l.substring(1):l[0]=="r"&&(l=l.substring(1),l.indexOf("d")>0&&(l=l.substring(0,l.indexOf("d"))));var a=j+"."+k+"."+l}}else navigator.userAgent.toLowerCase().indexOf("webtv/2.6")!=-1?a=4:navigator.userAgent.toLowerCase().indexOf("webtv/2.5")!=-1?a=3:navigator.userAgent.toLowerCase().indexOf("webtv")!=-1?a=2:d&&e&&!f&&(a=g());return a}function i(a,b,c){versionStr=h();if(versionStr==-1)return!1;if(versionStr!=0){d&&e&&!f?(tempArray=versionStr.split(" "),tempString=tempArray[1],versionArray=tempString.split(",")):versionArray=versionStr.split(".");var g=versionArray[0],i=versionArray[1],j=versionArray[2];if(g>parseFloat(a))return!0;if(g==parseFloat(a)){if(i>parseFloat(b))return!0;if(i==parseFloat(b)&&j>=parseFloat(c))return!0}return!1}}function j(a,b){return a.indexOf("?")!=-1?a.replace(/\?/,b+"?"):a+b}function k(a,b,c){var g="";if(d&&e&&!f){g+="<object ";for(var h in a)g+=h+'="'+a[h]+'" ';g+=">";for(var h in b)g+='<param name="'+h+'" value="'+b[h]+'" /> ';g+="</object>"}else{g+="<embed ";for(var h in c)g+=h+'="'+c[h]+'" ';g+="> </embed>"}return g}function l(){var a=n(arguments,".swf","movie","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000","application/x-shockwave-flash");return k(a.objAttrs,a.params,a.embedAttrs)}function m(){var a=n(arguments,".dcr","src","clsid:166B1BCA-3F9C-11CF-8075-444553540000",null);return k(a.objAttrs,a.params,a.embedAttrs)}function n(a,b,c,d,e){var f=new Object;f.embedAttrs=new Object,f.params=new Object,f.objAttrs=new Object;for(var g=0;g<a.length;g+=2){var h=a[g].toLowerCase();switch(h){case"classid":break;case"pluginspage":f.embedAttrs[a[g]]=a[g+1];break;case"src":case"movie":a[g+1]=j(a[g+1],b),f.embedAttrs.src=a[g+1],f.params[c]=a[g+1];break;case"onafterupdate":case"onbeforeupdate":case"onblur":case"oncellchange":case"onclick":case"ondblclick":case"ondrag":case"ondragend":case"ondragenter":case"ondragleave":case"ondragover":case"ondrop":case"onfinish":case"onfocus":case"onhelp":case"onmousedown":case"onmouseup":case"onmouseover":case"onmousemove":case"onmouseout":case"onkeypress":case"onkeydown":case"onkeyup":case"onload":case"onlosecapture":case"onpropertychange":case"onreadystatechange":case"onrowsdelete":case"onrowenter":case"onrowexit":case"onrowsinserted":case"onstart":case"onscroll":case"onbeforeeditfocus":case"onactivate":case"onbeforedeactivate":case"ondeactivate":case"type":case"codebase":case"id":f.objAttrs[a[g]]=a[g+1];break;case"width":case"height":case"align":case"vspace":case"hspace":case"class":case"title":case"accesskey":case"name":case"tabindex":f.embedAttrs[a[g]]=f.objAttrs[a[g]]=a[g+1];break;default:f.embedAttrs[a[g]]=f.params[a[g]]=a[g+1]}}return f.objAttrs.classid=d,e&&(f.embedAttrs.type=e),f}typeof scribd_view_callback!="undefined"&&scribd_view_callback()}return c}),define("jquery.dropdownList",["jquery"],function(a){a.fn.dropdownList=function(b){if(this.length){var c=a("#instructure_dropdown_list");if(b=="hide"||b=="remove"||c.data("current_dropdown_initiator")==this[0]){c.remove().data("current_dropdown_initiator",null);return}var b=a.extend({},a.fn.dropdownList.defaults,b),d=c.children("div.list");d.length||(c=a("<div id='instructure_dropdown_list'><div class='list ui-widget-content'></div></div>").appendTo("body"),a(document).mousedown(function(b){c.data("current_dropdown_initiator")&&!a(b.target).closest("#instructure_dropdown_list").length&&c.hide().data("current_dropdown_initiator",null)}).mouseup(function(b){c.data("current_dropdown_initiator")&&!a(b.target).closest("#instructure_dropdown_list").length&&(c.hide(),setTimeout(function(){c.data("current_dropdown_initiator",null)},100))}).add(this).add(c).keydown(function(a){if(c.data("current_dropdown_initiator")){var b=c.find(".ui-state-hover,.ui-state-active");if(a.keyCode==38)return b.length&&b.prev().length?b.removeClass("ui-state-hover ui-state-active").addClass("minimal").prev().addClass("ui-state-hover").removeClass("minimal").find("span").focus():$item.focus(),!1;if(a.keyCode==40)return b.length?b.next().length&&b.removeClass("ui-state-hover ui-state-active").addClass("minimal").next().addClass("ui-state-hover").removeClass("minimal").find("span").focus():c.find(".option:first").addClass("ui-state-hover").removeClass("minimal").find("span").focus(),!1;if(a.keyCode==13&&b.length)return b.click(),!1;c.hide().data("current_dropdown_initiator",null)}}),c.find(".option").removeClass("ui-state-hover ui-state-active").addClass("minimal"),c.click(function(a){c.hide().data("current_dropdown_initiator",null)}),d=c.children("div.list")),c.data("current_dropdown_initiator",this[0]),b.width&&c.width(b.width),b.height&&c.find(".list").css("maxHeight",b.height),d.empty(),a.each(b.options,function(b,c){var e=a("<div class='option minimal' style='cursor: pointer; padding: 2px 5px; overflow: hidden; white-space: nowrap;'>  <span tabindex='-1'>"+b+"</span>"+"</div>").appendTo(d);if(a.isFunction(c)){function f(){e.parent().find("div.option").removeClass("ui-state-hover ui-state-active").addClass("minimal")}e.addClass("ui-state-default").bind({mouseenter:function(){f(),e.addClass("ui-state-hover").removeClass("minimal")},mouseleave:f,mousedown:function(a){a.preventDefault(),f(),e.addClass("ui-state-active").removeClass("minimal")},mouseup:f,click:c})}else e.addClass("ui-state-disabled").bind({mousedown:function(a){a.preventDefault()}})});var e=this.offset(),f=this.outerHeight(),g=this.outerWidth();c.css({whiteSpace:"nowrap",position:"absolute",top:e.top+f,left:e.left+5,right:""}).hide().show(),c.offset().left+c.width()>a(window).width()&&c.css({left:"",right:0})}return this},a.fn.dropdownList.defaults={height:250,width:"auto"}}),define("jquery.loadingImg",["jquery"],function(a){a.fn.loadingImg=function(b){if(!this||this.length===0)return this;var c=this.filter(":first"),d;if(b=="hide"||b=="remove"){c.children(".loading_image").remove(),d=c.data("loading_images")||[];for(var e in d)d[e]&&d[e].remove();return c.data("loading_images",null),this}if(b=="remove_once"){c.children(".loading_image").remove(),d=c.data("loading_images")||[];var f=d.pop();return f&&f.remove(),c.data("loading_images",d),this}b=="register_image"&&arguments.length==3&&(a.fn.loadingImg.image_files[arguments[1]]=arguments[2]),b=a.extend({},a.fn.loadingImg.defaults,b);var g=a.fn.loadingImg.image_files.normal;b.image_size&&a.fn.loadingImg.image_files[b.image_size]&&(g=a.fn.loadingImg.image_files[b.image_size]),b.paddingTop&&(b.vertical=b.paddingTop);var h=0;b.vertical&&b.vertical!="top"&&(b.vertical=="bottom"?h=c.outerHeight():b.vertical=="middle"?h=c.outerHeight()/2-g.height/2:(h=parseInt(b.vertical,10),isNaN(h)&&(h=0)));var i=0;b.horizontal&&b.horizontal!="left"&&(b.horizontal=="right"?i=c.outerWidth()-g.width:b.horizontal=="middle"?i=c.outerWidth()/2-g.width/2:(i=parseInt(b.horizontal,10),isNaN(i)&&(i=0)));var j=c.zIndex()+1,k=a(document.createElement("div")).addClass("loading_image_holder"),l=a(document.createElement("img")).attr("src",g.url);k.append(l),d=c.data("loading_images")||[],d.push(k),c.data("loading_images",d);if(!c.css("position")||c.css("position")=="static"){var m=c.offset(),n=m.top,o=m.left;b.vertical&&(n+=h),b.horizontal&&(o+=i),k.css({zIndex:j,position:"absolute",top:n,left:o}),a("body").append(k)}else k.css({zIndex:j,position:"absolute",top:h,left:i}),c.append(k);return a(this)},a.fn.loadingImg.defaults={paddingTop:0,image_size:"normal",vertical:0,horizontal:0},a.fn.loadingImg.image_files={normal:{url:"/images/ajax-loader.gif",width:32,height:32},small:{url:"/images/ajax-loader-small.gif",width:16,height:16}},a.fn.loadingImage=a.fn.loadingImg}),define("jqueryui/effects.core",["jquery"],function(a,b){function c(b){var c;return b&&b.constructor==Array&&b.length==3?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[parseFloat(c[1])*2.55,parseFloat(c[2])*2.55,parseFloat(c[3])*2.55]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:(c=/rgba\(0, 0, 0, 0\)/.exec(b))?e.transparent:e[a.trim(b).toLowerCase()]}function d(b,d){var e;do{e=a.curCSS(b,d);if(e!=""&&e!="transparent"||a.nodeName(b,"body"))break;d="backgroundColor"}while(b=b.parentNode);return c(e)}function h(){var a=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,b={},c,d;if(a&&a.length&&a[0]&&a[a[0]]){var e=a.length;while(e--)c=a[e],typeof a[c]=="string"&&(d=c.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),b[d]=a[c])}else for(c in a)typeof a[c]=="string"&&(b[c]=a[c]);return b}function i(b){var c,d;for(c in b)d=b[c],(d==null||a.isFunction(d)||c in g||/scrollbar/.test(c)||!/color/i.test(c)&&isNaN(parseFloat(d)))&&delete b[c];return b}function j(a,b){var c={_:0},d;for(d in b)a[d]!=b[d]&&(c[d]=b[d]);return c}function k(b,c,d,e){typeof b=="object"&&(e=c,d=null,c=b,b=c.effect),a.isFunction(c)&&(e=c,d=null,c={});if(typeof c=="number"||a.fx.speeds[c])e=d,d=c,c={};return a.isFunction(d)&&(e=d,d=null),c=c||{},d=d||c.duration,d=a.fx.off?0:typeof d=="number"?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,e=e||c.complete,[b,c,d,e]}function l(b){return!b||typeof b=="number"||a.fx.speeds[b]?!0:typeof b=="string"&&!a.effects[b]?!0:!1}if(a.effects)return;a.effects={},a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(b,e){a.fx.step[e]=function(a){a.colorInit||(a.start=d(a.elem,e),a.end=c(a.end),a.colorInit=!0),a.elem.style[e]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var e={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},f=["add","remove","toggle"],g={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(b,c,d,e){return a.isFunction(d)&&(e=d,d=null),this.queue(function(){var g=a(this),k=g.attr("style")||" ",l=i(h.call(this)),m,n=g.attr("class");a.each(f,function(a,c){b[c]&&g[c+"Class"](b[c])}),m=i(h.call(this)),g.attr("class",n),g.animate(j(l,m),{queue:!1,duration:c,easing:d,complete:function(){a.each(f,function(a,c){b[c]&&g[c+"Class"](b[c])}),typeof g.attr("style")=="object"?(g.attr("style").cssText="",g.attr("style").cssText=k):g.attr("style",k),e&&e.apply(this,arguments),a.dequeue(this)}})})},a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{add:b},c,d,e]):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,e]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,d,e,f,g){return typeof d=="boolean"||d===b?e?a.effects.animateClass.apply(this,[d?{add:c}:{remove:c},e,f,g]):this._toggleClass(c,d):a.effects.animateClass.apply(this,[{toggle:c},d,e,f])},switchClass:function(b,c,d,e,f){return a.effects.animateClass.apply(this,[{add:c,remove:b},d,e,f])}}),a.extend(a.effects,{version:"@VERSION",save:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){return b=="toggle"&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;return b.wrap(d),(b[0]===e||a.contains(b[0],e))&&a(e).focus(),d=b.parent(),b.css("position")=="static"?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),d.css(c).show()},removeWrapper:function(b){var c,d=document.activeElement;return b.parent().is(".ui-effects-wrapper")?(c=b.parent().replaceWith(b),(b[0]===d||a.contains(b[0],d))&&a(d).focus(),c):b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){unit=b.cssUnit(c),unit[0]>0&&(e[c]=unit[0]*d+unit[1])}),e}}),a.fn.extend({effect:function(b,c,d,e){var f=k.apply(this,arguments),g={options:f[1],duration:f[2],callback:f[3]},h=g.options.mode,i=a.effects[b];return a.fx.off||!i?h?this[h](g.duration,g.callback):this.each(function(){g.callback&&g.callback.call(this)}):i.call(this,g)},_show:a.fn.show,show:function(a){if(l(a))return this._show.apply(this,arguments);var b=k.apply(this,arguments);return b[1].mode="show",this.effect.apply(this,b)},_hide:a.fn.hide,hide:function(a){if(l(a))return this._hide.apply(this,arguments);var b=k.apply(this,arguments);return b[1].mode="hide",this.effect.apply(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(l(b)||typeof b=="boolean"||a.isFunction(b))return this.__toggle.apply(this,arguments);var c=k.apply(this,arguments);return c[1].mode="toggle",this.effect.apply(this,c)},cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}}),a.easing.jswing=a.easing.swing,a.extend(a.easing,{def:"easeOutQuad",swing:function(b,c,d,e,f){return a.easing[a.easing.def](b,c,d,e,f)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return b==0?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return b==0?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e)==1)return c+d;g||(g=e*.3);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e)==1)return c+d;g||(g=e*.3);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin((b*e-f)*2*Math.PI/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e/2)==2)return c+d;g||(g=e*.3*1.5);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return b<1?-0.5*h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)+c:h*Math.pow(2,-10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)*.5+d+c},easeInBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),e*(c/=f)*c*((g+1)*c-g)+d},easeOutBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),e*((c=c/f-1)*c*((g+1)*c+g)+1)+d},easeInOutBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),(c/=f/2)<1?e/2*c*c*(((g*=1.525)+1)*c-g)+d:e/2*((c-=2)*c*(((g*=1.525)+1)*c+g)+2)+d},easeInBounce:function(b,c,d,e,f){return e-a.easing.easeOutBounce(b,f-c,0,e,f)+d},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?d*7.5625*b*b+c:b<2/2.75?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:b<2.5/2.75?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(b,c,d,e,f){return c<f/2?a.easing.easeInBounce(b,c*2,0,e,f)*.5+d:a.easing.easeOutBounce(b,c*2-f,0,e,f)*.5+e*.5+d}})}),define("jqueryui/effects/core",function(){}),define("jqueryui/effects/drop",["jquery","jqueryui/effects/core"],function(a,b,c){a.effects.drop=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","opacity"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"left";a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var g=f=="up"||f=="down"?"top":"left",h=f=="up"||f=="left"?"pos":"neg",i=b.options.distance||(g=="top"?c.outerHeight({margin:!0})/2:c.outerWidth({margin:!0})/2);e=="show"&&c.css("opacity",0).css(g,h=="pos"?-i:i);var j={opacity:e=="show"?1:0};j[g]=(e=="show"?h=="pos"?"+=":"-=":h=="pos"?"-=":"+=")+i,c.animate(j,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){e=="hide"&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}),define("vendor/slickgrid-googlecode/slick.editors",["jquery"],function(a){window.requiredFieldValidator=function(b){return b==null||b==undefined||!a.trim(b+"").length?{valid:!1,msg:"This is a required field"}:{valid:!0,msg:null}},window.TextCellEditor=function(b,c,d,e){var f,g=d,h=this;this.init=function(){f=a("<INPUT type=text class='editor-text' />"),d!=null&&(f[0].defaultValue=d,f.val(g)),f.appendTo(b),f.focus().select()},this.destroy=function(){f.remove()},this.focus=function(){f.focus()},this.setValue=function(a){f.val(a),g=a},this.getValue=function(){return f.val()},this.isValueChanged=function(){return(f.val()!=""||g!=null)&&f.val()!=g},this.validate=function(){if(c.validator){var a=c.validator(h.getValue());if(!a.valid)return a}return{valid:!0,msg:null}},this.init()},window.GradeCellEditor=function(b,c,d,e){if(e.active){d=d||{};var f,g=d.grade,h=this;this.init=function(){switch(c._uploaded.grading_type){case"letter_grade":var e=[{text:"--",value:""},{text:"A",value:"A"},{text:"A-",value:"A-"},{text:"B+",value:"B+"},{text:"B",value:"B"},{text:"B-",value:"B-"},{text:"C+",value:"C+"},{text:"C-",value:"C-"},{text:"D+",value:"D+"},{text:"D",value:"D"},{text:"D-",value:"D-"},{text:"F",value:"F"}],h="";a.each(e,function(){h+='<option value="'+this.value+'" '+(this.value==d.grade?"selected":"")+">"+this.text+"</option>"}),f=a("<select>"+h+"</select>");break;default:f=a("<INPUT type=text class='editor-text' />")}typeof d.grade!="undefined"&&d.grade+""!=""&&(f[0].defaultValue=d.grade,f.val(g)),f.appendTo(b),f.focus().select();var i={originalScore:d._original&&d._original.grade||"--",uploadedScore:d._uploaded&&d._uploaded.grade||"--"},j='<div class="grade-helper-wrapper"><span class="ui-icon ui-icon-triangle-1-w"/><div class="grade-helper-inner ui-widget-content ui-corner-all">  <table><tr><th>Original Score</th><th>Uploaded Score</th></tr><tr><td>#{originalScore}</td><td>#{uploadedScore}</td></tr></table></div> </div>';a(a.template(j,i)).appendTo(b)},this.destroy=function(){f.remove()},this.focus=function(){f.focus()},this.setValue=function(a){f.val(a.grade),g=a.grade},this.getValue=function(){return f.val()},this.isValueChanged=function(){return(f.val()!=""||g!=null)&&f.val()!=g},this.validate=function(){if(c.validator){var a=c.validator(h.getValue());if(!a.valid)return a}return{valid:!0,msg:null}},this.init()}else{var f;this.init=function(){var a=d?d.grade:"";b.removeClass("selected editable").html(a)},this.destroy=function(){},this.focus=function(){},this.setValue=function(a){},this.getValue=function(){return d},this.isValueChanged=function(){return!1},this.validate=function(){return{valid:!0,msg:null}},this.init()}},window.StudentNameEditor=function(a,b,c,d){var e;this.init=function(){var b=c?c.name:"";a.removeClass("selected editable").html(b)},this.destroy=function(){},this.focus=function(){},this.setValue=function(a){},this.getValue=function(){return c},this.isValueChanged=function(){return!1},this.validate=function(){return{valid:!0,msg:null}},this.init()},window.StudentNameFormatter=function(a,b,c,d,e){return c?c.name:""},window.NullEditor=function(a,b,c,d){var e,f=c,g=this;this.init=function(){a.removeClass("selected editable").html(c)},this.destroy=function(){},this.focus=function(){},this.setValue=function(a){},this.getValue=function(){return c},this.isValueChanged=function(){return!1},this.validate=function(){return{valid:!0,msg:null}},this.init()},window.NullGradeEditor=function(a,b,c,d){var e;this.init=function(){var b=c?c.grade:"";a.removeClass("selected editable").html(b)},this.destroy=function(){},this.focus=function(){},this.setValue=function(a){},this.getValue=function(){return c},this.isValueChanged=function(){return!1},this.validate=function(){return{valid:!0,msg:null}},this.init()},window.simpleGradeCellFormatter=function(a,b,c,d,e){return c?c.grade:""},window.PassFailCellFormatter=function(a,b,c,d,e){c=c||{};switch(c.grade){case"pass":return"<span class='pass_fail pass' />";case"fail":return"<span class='pass_fail fail' />";default:return""}},window.PassFailSelectCellEditor=function(b,c,d,e){d=d||{};var f,g=d,h=this;this.init=function(){f=a("<SELECT tabIndex='0' class='editor-yesno'><OPTION value=''>---</OPTION><OPTION value='pass'>Pass</OPTION><OPTION value='fail'>Fail</OPTION></SELECT>"),f.val(g.grade),f.appendTo(b),f.focus(),f.change(function(){d.grade=a(this).val()});var c='<div class="grade-helper-wrapper"><span class="ui-icon ui-icon-triangle-1-w"/><div class="grade-helper-inner ui-widget-content ui-corner-all"><table><tr><th>Original Score</th><th>Uploaded Score</th></tr><tr><td>#{originalScore}</td><td>#{uploadedScore}</td></tr></tbody></table></div> </div>';a(a.template(c,{originalScore:10,uploadedScore:15})).appendTo(b)},this.destroy=function(){f.remove()},this.focus=function(){f.focus()},this.setValue=function(a){f.val(a.grade),g=a},this.getValue=function(){return d},this.isValueChanged=function(){return f.val()!=g},this.validate=function(){return{valid:!0,msg:null}},this.init()}}),define("vendor/underscore",[],function(){var a=this,b=a._,c=function(a){this._wrapped=a},d=typeof StopIteration!="undefined"?StopIteration:"__break__",e=a._=function(a){return new c(a)};typeof exports!="undefined"&&(exports._=e);var f=Array.prototype.slice,g=Array.prototype.unshift,h=Object.prototype.toString,i=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;e.VERSION="0.5.1",e.each=function(a,b,c){var f=0;try{if(a.forEach)a.forEach(b,c);else if(e.isArray(a)||e.isArguments(a))for(var g=0,h=a.length;g<h;g++)b.call(c,a[g],g,a);else{var i=e.keys(a),h=i.length;for(var g=0;g<h;g++)b.call(c,a[i[g]],i[g],a)}}catch(j){if(j!=d)throw j}return a},e.map=function(a,b,c){if(a&&e.isFunction(a.map))return a.map(b,c);var d=[];return e.each(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d},e.reduce=function(a,b,c,d){return a&&e.isFunction(a.reduce)?a.reduce(e.bind(c,d),b):(e.each(a,function(a,e,f){b=c.call(d,b,a,e,f)}),b)},e.reduceRight=function(a,b,c,d){if(a&&e.isFunction(a.reduceRight))return a.reduceRight(e.bind(c,d),b);var f=e.clone(e.toArray(a)).reverse();return e.each(f,function(e,f){b=c.call(d,b,e,f,a)}),b},e.detect=function(a,b,c){var d;return e.each(a,function(a,f,g){b.call(c,a,f,g)&&(d=a,e.breakLoop())}),d},e.select=function(a,b,c){if(a&&e.isFunction(a.filter))return a.filter(b,c);var d=[];return e.each(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d},e.reject=function(a,b,c){var d=[];return e.each(a,function(a,e,f){!b.call(c,a,e,f)&&d.push(a)}),d},e.all=function(a,b,c){b=b||e.identity;if(a&&e.isFunction(a.every))return a.every(b,c);var d=!0;return e.each(a,function(a,f,g){(d=d&&b.call(c,a,f,g))||e.breakLoop()}),d},e.any=function(a,b,c){b=b||e.identity;if(a&&e.isFunction(a.some))return a.some(b,c);var d=!1;return e.each(a,function(a,f,g){(d=b.call(c,a,f,g))&&e.breakLoop()}),d},e.include=function(a,b){if(e.isArray(a))return e.indexOf(a,b)!=-1;var c=!1;return e.each(a,function(a){(c=a===b)&&e.breakLoop()}),c},e.invoke=function(a,b){var c=e.rest(arguments,2);return e.map(a,function(a){return(b?a[b]:a).apply(a,c)})},e.pluck=function(a,b){return e.map(a,function(a){return a[b]})},e.max=function(a,b,c){if(!b&&e.isArray(a))return Math.max.apply(Math,a);var d={computed:-Infinity};return e.each(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},e.min=function(a,b,c){if(!b&&e.isArray(a))return Math.min.apply(Math,a);var d={computed:Infinity};return e.each(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},e.sortBy=function(a,b,c){return e.pluck(e.map(a,function(a,d,e){return{value:a,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}),"value")},e.sortedIndex=function(a,b,c){c=c||e.identity;var d=0,f=a.length;while(d<f){var g=d+f>>1;c(a[g])<c(b)?d=g+1:f=g}return d},e.toArray=function(a){return a?a.toArray?a.toArray():e.isArray(a)?a:e.isArguments(a)?f.call(a):e.map(a,function(a){return a}):[]},e.size=function(a){return e.toArray(a).length},e.first=function(a,b,c){return b&&!c?f.call(a,0,b):a[0]},e.rest=function(a,b,c){return f.call(a,e.isUndefined(b)||c?1:b)},e.last=function(a){return a[a.length-1]},e.compact=function(a){return e.select(a,function(a){return!!a})},e.flatten=function(a){return e.reduce(a,[],function(a,b){return e.isArray(b)?a.concat(e.flatten(b)):(a.push(b),a)})},e.without=function(a){var b=e.rest(arguments);return e.select(a,function(a){return!e.include(b,a)})},e.uniq=function(a,b){return e.reduce(a,[],function(a,c,d){return(0==d||(b===!0?e.last(a)!=c:!e.include(a,c)))&&a.push(c),a})},e.intersect=function(a){var b=e.rest(arguments);return e.select(e.uniq(a),function(a){return e.all(b,function(b){return e.indexOf(b,a)>=0})})},e.zip=function(){var a=e.toArray(arguments),b=e.max(e.pluck(a,"length")),c=new Array(b);for(var d=0;d<b;d++)c[d]=e.pluck(a,String(d));return c},e.indexOf=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},e.lastIndexOf=function(a,b){if(a.lastIndexOf)return a.lastIndexOf(b);var c=a.length;while(c--)if(a[c]===b)return c;return-1},e.range=function(a,b,c){var d=e.toArray(arguments),f=d.length<=1,a=f?0:d[0],b=f?d[0]:d[1],c=d[2]||1,g=Math.ceil((b-a)/c);if(g<=0)return[];var h=new Array(g);for(var i=a,j=0;!0;i+=c)if((c>0?i-b:b-i)<0)h[j++]=i;else return h},e.bind=function(b,c){var d=e.rest(arguments,2);return function(){return b.apply(c||a,d.concat(e.toArray(arguments)))}},e.bindAll=function(a){var b=e.rest(arguments);return b.length==0&&(b=e.functions(a)),e.each(b,function(b){a[b]=e.bind(a[b],a)}),a},e.delay=function(a,b){var c=e.rest(arguments,2);return setTimeout(function(){return a.apply(a,c)},b)},e.defer=function(a){return e.delay.apply(e,[a,1].concat(e.rest(arguments)))},e.wrap=function(a,b){return function(){var c=[a].concat(e.toArray(arguments));return b.apply(b,c)}},e.compose=function(){var a=e.toArray(arguments);return function(){var b=e.toArray(arguments);for(var c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},e.keys=function(a){if(e.isArray(a))return e.range(0,a.length);var b=[];for(var c in a)i.call(a,c)&&b.push(c);return b},e.values=function(a){return e.map(a,e.identity)},e.functions=function(a){return e.select(e.keys(a),function(b){return e.isFunction(a[b])}).sort()},e.extend=function(a,b){for(var c in b)a[c]=b[c];return a},e.clone=function(a){return e.isArray(a)?a.slice(0):e.extend({},a)},e.isEqual=function(a,b){if(a===b)return!0;var c=typeof a,d=typeof b;if(c!=d)return!1;if(a==b)return!0;if(!a&&b||a&&!b)return!1;if(a.isEqual)return a.isEqual(b);if(e.isDate(a)&&e.isDate(b))return a.getTime()===b.getTime();if(e.isNaN(a)&&e.isNaN(b))return!0;if(e.isRegExp(a)&&e.isRegExp(b))return a.source===b.source&&a.global===b.global&&a.ignoreCase===b.ignoreCase&&a.multiline===b.multiline;if(c!=="object")return!1;if(a.length&&a.length!==b.length)return!1;var f=e.keys(a),g=e.keys(b);if(f.length!=g.length)return!1;for(var h in a)if(!e.isEqual(a[h],b[h]))return!1;return!0},e.isEmpty=function(a){return e.keys(a).length==0},e.isElement=function(a){return!!a&&a.nodeType==1},e.isArguments=function(a){return a&&e.isNumber(a.length)&&!e.isArray(a)&&!j.call(a,"length")},e.isNaN=function(a){return e.isNumber(a)&&isNaN(a)},e.isNull=function(a){return a===null},e.isUndefined=function(a){return typeof a=="undefined"};var k=["Array","Date","Function","Number","RegExp","String"];for(var l=0,m=k.length;l<m;l++)(function(){var a="[object "+k[l]+"]";e["is"+k[l]]=function(b){return h.call(b)==a}})();e.noConflict=function(){return a._=b,this},e.identity=function(a){return a},e.breakLoop=function(){throw d};var n=0;e.uniqueId=function(a){var b=n++;return a?a+b:b},e.template=function(a,b){var c=new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return b?c(b):c},e.forEach=e.each,e.foldl=e.inject=e.reduce,e.foldr=e.reduceRight,e.filter=e.select,e.every=e.all,e.some=e.any,e.head=e.first,e.tail=e.rest,e.methods=e.functions;var o=function(a,b){return b?e(a).chain():a};return e.each(e.functions(e),function(a){var b=e[a];c.prototype[a]=function(){return g.call(arguments,this._wrapped),o(b.apply(e,arguments),this._chain)}}),e.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=Array.prototype[a];c.prototype[a]=function(){return b.apply(this._wrapped,arguments),o(this._wrapped,this._chain)}}),e.each(["concat","join","slice"],function(a){var b=Array.prototype[a];c.prototype[a]=function(){return o(b.apply(this._wrapped,arguments),this._chain)}}),c.prototype.chain=function(){return this._chain=!0,this},c.prototype.value=function(){return this._wrapped},e}),define("jquery.fancyplaceholder",["jquery"],function(a){a.fn.fancyPlaceholder=function(){function d(){a.each(c,function(a,b){b[1][b[0].val()?"hide":"show"]()})}var b,c=[];return this.each(function(){var e=a(this),f=a("label[for="+e.attr("id")+"]");f.addClass("placeholder").wrapInner("<span/>").css({"font-family":e.css("font-family"),"font-size":e.css("font-size")}),e.focus(function(){f.addClass("focus",300)}).blur(function(){f.removeClass("focus",300)}).bind("keyup",d);try{a("input:focus").get(0)==this&&e.triggerHandler("focus")}catch(g){}c.push([e,f]),b||window.setInterval(d,100)})}}),define("jqueryui/progressbar",["jquery","jqueryui/core","jqueryui/widget"],function(a,b,c,d){a.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),a.Widget.prototype.destroy.apply(this,arguments)},value:function(a){return a===d?this._value():(this._setOption("value",a),this)},_setOption:function(b,c){b==="value"&&(this.options.value=c,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),a.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var a=this.options.value;return typeof a!="number"&&(a=0),Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var a=this.value(),b=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change")),this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(b.toFixed(0)+"%"),this.element.attr("aria-valuenow",a)}}),a.extend(a.ui.progressbar,{version:"@VERSION"})}),window.Raphael=function(){function G(a,b,c){function d(){var e=Array[k].splice.call(arguments,0,arguments[o]),f=e[p]("âº"),g=d.cache=d.cache||{},h=d.count=d.count||[];return g[j](f)?c?c(g[f]):g[f]:(h[o]>=1e3&&delete g[h.shift()],h[s](f),g[f]=a[n](b,e),c?c(g[f]):g[f])}return d}var a=/[, ]+/,b=document,c=window,d={was:"Raphael"in c,is:c.Raphael},e=function(){if(e.is(arguments[0],"array")){var a=arguments[0],b=bh[n](e,a.splice(0,3+e.is(a[0],A))),c=b.set();for(var d=0,f=a[o];d<f;d++){var g=a[d]||{};(({circle:1,rect:1,path:1,ellipse:1,text:1,image:1}))[j](g.type)&&c[s](b[g.type]().attr(g))}return c}return bh[n](e,arguments)},f={},g=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup"],h="",i=" ",j="hasOwnProperty",k="prototype",l="setAttribute",m="appendChild",n="apply",o="length",p="join",q="split",r="concat",s="push",t=parseFloat,u=parseInt,v=Math.pow,w=Math.min,x=Math.max,y=Math.round,z=/^(?=[\da-f]$)/,A="number",B="toString",C={"clip-rect":"0 0 10e9 10e9",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},D={"clip-rect":"csv",cx:A,cy:A,fill:"colour","fill-opacity":A,"font-size":A,height:A,opacity:A,path:"path",r:A,rotation:"csv",rx:A,ry:A,scale:"csv",stroke:"colour","stroke-opacity":A,"stroke-width":A,translation:"csv",width:A,x:A,y:A},E="replace";e.version="1.2.1",e.type=c.SVGAngle||b.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML",e.svg=!(e.vml=e.type=="VML"),e._id=0,e._oid=0,e.fn={},e.is=function(a,b){return b=(b+h).toLowerCase(),(b=="object"||b=="undefined")&&typeof a==b||a==null&&b=="null"||Object[k][B].call(a)[E](/^\[object\s+|\]$/gi,h).toLowerCase()==b},e.setWindow=function(a){c=a,b=c.document};var F=function(a){if(e.vml)F=G(function(a){var b;try{var c=new ActiveXObject("htmlfile");c.write("<body>"),c.close(),b=c.body}catch(d){b=createPopup().document.body}var e=b.createTextRange();b.style.color=a;var f=e.queryCommandValue("ForeColor");return f=(f&255)<<16|f&65280|(f&16711680)>>>16,"#"+("000000"+f[B](16)).slice(-6)});else{var c=b.createElement("i");c.className="RaphaÃ«l colour picker",c.style.cssText="display:none",b.body[m](c),F=G(function(a){return c.style.color=a,b.defaultView.getComputedStyle(c,h).getPropertyValue("color")})}return F(a)};e.hsb2rgb=G(function(a,b,c){e.is(a,"object")&&"h"in a&&"s"in a&&"b"in a&&(c=a.b,b=a.s,a=a.h);var d,f,g;if(c==0)return{r:0,g:0,b:0,hex:"#000"};if(a>1||b>1||c>1)a/=255,b/=255,c/=255;var h=~~(a*6),i=a*6-h,j=c*(1-b),k=c*(1-b*i),l=c*(1-b*(1-i));d=[c,k,j,j,l,c,c][h],f=[l,c,c,k,j,j,l][h],g=[j,j,l,c,c,k,j][h],d*=255,f*=255,g*=255;var m={r:d,g:f,b:g},n=(~~d)[B](16),o=(~~f)[B](16),p=(~~g)[B](16);return n=n[E](z,"0"),o=o[E](z,"0"),p=p[E](z,"0"),m.hex="#"+n+o+p,m},e),e.rgb2hsb=G(function(a,b,c){e.is(a,"object")&&"r"in a&&"g"in a&&"b"in a&&(c=a.b,b=a.g,a=a.r);if(e.is(a,"string")){var d=e.getRGB(a);a=d.r,b=d.g,c=d.b}if(a>1||b>1||c>1)a/=255,b/=255,c/=255;var f=x(a,b,c),g=w(a,b,c),h,i,j=f;if(g==f)return{h:0,s:0,b:f};var k=f-g;return i=k/f,a==f?h=(b-c)/k:b==f?h=2+(c-a)/k:h=4+(a-b)/k,h/=6,h<0&&h++,h>1&&h--,{h:h,s:i,b:j}},e),e._path2string=function(){var a=h,b;for(var c=0,d=this[o];c<d;c++){for(var e=0,f=this[c][o];e<f;e++)a+=this[c][e],e&&e!=f-1&&(a+=",");c!=d-1&&(a+=i)}return a[E](/,(?=-)/g,h)},e.getRGB=G(function(a){if(!a||!!((a+h).indexOf("-")+1))return{r:-1,g:-1,b:-1,hex:"none",error:1};a+=h;if(a=="none")return{r:-1,g:-1,b:-1,hex:"none"};!{hs:1,rg:1}[j](a.substring(0,2))&&(a=F(a));var b,c,d,f,g=a.match(/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgb\(\s*([\d\.]+\s*,\s*[\d\.]+\s*,\s*[\d\.]+)\s*\)|rgb\(\s*([\d\.]+%\s*,\s*[\d\.]+%\s*,\s*[\d\.]+%)\s*\)|hs[bl]\(\s*([\d\.]+\s*,\s*[\d\.]+\s*,\s*[\d\.]+)\s*\)|hs[bl]\(\s*([\d\.]+%\s*,\s*[\d\.]+%\s*,\s*[\d\.]+%)\s*\))\s*$/i);if(g){g[2]&&(f=u(g[2].substring(5),16),d=u(g[2].substring(3,5),16),c=u(g[2].substring(1,3),16)),g[3]&&(f=u(g[3].substring(3)+g[3].substring(3),16),d=u(g[3].substring(2,3)+g[3].substring(2,3),16),c=u(g[3].substring(1,2)+g[3].substring(1,2),16)),g[4]&&(g=g[4][q](/\s*,\s*/),c=t(g[0]),d=t(g[1]),f=t(g[2])),g[5]&&(g=g[5][q](/\s*,\s*/),c=t(g[0])*2.55,d=t(g[1])*2.55,f=t(g[2])*2.55);if(g[6])return g=g[6][q](/\s*,\s*/),c=t(g[0]),d=t(g[1]),f=t(g[2]),e.hsb2rgb(c,d,f);if(g[7])return g=g[7][q](/\s*,\s*/),c=t(g[0])*2.55,d=t(g[1])*2.55,f=t(g[2])*2.55,e.hsb2rgb(c,d,f);g={r:c,g:d,b:f};var i=(~~c)[B](16),k=(~~d)[B](16),l=(~~f)[B](16);return i=i[E](z,"0"),k=k[E](z,"0"),l=l[E](z,"0"),g.hex="#"+i+k+l,g}return{r:-1,g:-1,b:-1,hex:"none",error:1}},e),e.getColor=function(a){var b=this.getColor.start=this.getColor.start||{h:0,s:1,b:a||.75},c=this.hsb2rgb(b.h,b.s,b.b);return b.h+=.075,b.h>1&&(b.h=0,b.s-=.2,b.s<=0&&(this.getColor.start={h:0,s:1,b:b.b})),c.hex},e.getColor.reset=function(){delete this.start},e.parsePathString=G(function(a){if(!a)return null;var b={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},c=[];return e.is(a,"array")&&e.is(a[0],"array")&&(c=I(a)),c[o]||(a+h)[E](/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,function(a,d,e){var f=[],g=d.toLowerCase();e[E](/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,function(a,b){b&&f[s](+b)});while(f[o]>=b[g]){c[s]([d][r](f.splice(0,b[g])));if(!b[g])break}}),c[B]=e._path2string,c});var H=G(function(a){if(!a)return{x:0,y:0,width:0,height:0};a=Q(a);var b=0,c=0,d=[],e=[];for(var f=0,g=a[o];f<g;f++)if(a[f][0]=="M")b=a[f][1],c=a[f][2],d[s](b),e[s](c);else{var h=P(b,c,a[f][1],a[f][2],a[f][3],a[f][4],a[f][5],a[f][6]);d=d[r](h.min.x,h.max.x),e=e[r](h.min.y,h.max.y)}var i=w[n](0,d),j=w[n](0,e);return{x:i,y:j,width:x[n](0,d)-i,height:x[n](0,e)-j}}),I=function(a){var b=[];if(!e.is(a,"array")||!e.is(a&&a[0],"array"))a=e.parsePathString(a);for(var c=0,d=a[o];c<d;c++){b[c]=[];for(var f=0,g=a[c][o];f<g;f++)b[c][f]=a[c][f]}return b[B]=e._path2string,b},J=G(function(a){if(!e.is(a,"array")||!e.is(a&&a[0],"array"))a=e.parsePathString(a);var b=[],c=0,d=0,f=0,g=0,h=0;a[0][0]=="M"&&(c=a[0][1],d=a[0][2],f=c,g=d,h++,b[s](["M",c,d]));for(var i=h,j=a[o];i<j;i++){var k=b[i]=[],l=a[i];if(l[0]!=l[0].toLowerCase()){k[0]=l[0].toLowerCase();switch(k[0]){case"a":k[1]=l[1],k[2]=l[2],k[3]=l[3],k[4]=l[4],k[5]=l[5],k[6]=+(l[6]-c).toFixed(3),k[7]=+(l[7]-d).toFixed(3);break;case"v":k[1]=+(l[1]-d).toFixed(3);break;case"m":f=l[1],g=l[2];default:for(var m=1,n=l[o];m<n;m++)k[m]=+(l[m]-(m%2?c:d)).toFixed(3)}}else{k=b[i]=[],l[0]=="m"&&(f=l[1]+c,g=l[2]+d);for(var p=0,q=l[o];p<q;p++)b[i][p]=l[p]}var r=b[i][o];switch(b[i][0]){case"z":c=f,d=g;break;case"h":c+=+b[i][r-1];break;case"v":d+=+b[i][r-1];break;default:c+=+b[i][r-2],d+=+b[i][r-1]}}return b[B]=e._path2string,b},0,I),K=G(function(a){if(!e.is(a,"array")||!e.is(a&&a[0],"array"))a=e.parsePathString(a);var b=[],c=0,d=0,f=0,g=0,i=0;a[0][0]=="M"&&(c=+a[0][1],d=+a[0][2],f=c,g=d,i++,b[0]=["M",c,d]);for(var j=i,k=a[o];j<k;j++){var l=b[j]=[],m=a[j];if(m[0]!=(m[0]+h).toUpperCase()){l[0]=(m[0]+h).toUpperCase();switch(l[0]){case"A":l[1]=m[1],l[2]=m[2],l[3]=m[3],l[4]=m[4],l[5]=m[5],l[6]=+(m[6]+c),l[7]=+(m[7]+d);break;case"V":l[1]=+m[1]+d;break;case"H":l[1]=+m[1]+c;break;case"M":f=+m[1]+c,g=+m[2]+d;default:for(var n=1,p=m[o];n<p;n++)l[n]=+m[n]+(n%2?c:d)}}else for(var q=0,r=m[o];q<r;q++)b[j][q]=m[q];switch(l[0]){case"Z":c=f,d=g;break;case"H":c=l[1];break;case"V":d=l[1];break;default:c=b[j][b[j][o]-2],d=b[j][b[j][o]-1]}}return b[B]=e._path2string,b},null,I),L=function(a,b,c,d){return[a,b,c,d,c,d]},M=function(a,b,c,d,e,f){var g=1/3,h=2/3;return[g*a+h*c,g*b+h*d,g*e+h*c,g*f+h*d,e,f]},N=function(a,b,c,d,e,f,g,h,i,j){var k=Math.PI,l=k*120/180,m=k/180*(+e||0),n=[],s,t=G(function(a,b,c){var d=a*Math.cos(c)-b*Math.sin(c),e=a*Math.sin(c)+b*Math.cos(c);return{x:d,y:e}});if(!j){s=t(a,b,-m),a=s.x,b=s.y,s=t(h,i,-m),h=s.x,i=s.y;var u=Math.cos(k/180*e),v=Math.sin(k/180*e),w=(a-h)/2,y=(b-i)/2;c=x(c,Math.abs(w)),d=x(d,Math.abs(y));var z=c*c,A=d*d,B=(f==g?-1:1)*Math.sqrt(Math.abs((z*A-z*y*y-A*w*w)/(z*y*y+A*w*w))),C=B*c*y/d+(a+h)/2,D=B*-d*w/c+(b+i)/2,E=Math.asin((b-D)/d),F=Math.asin((i-D)/d);E=a<C?k-E:E,F=h<C?k-F:F,E<0&&(E=k*2+E),F<0&&(F=k*2+F),g&&E>F&&(E-=k*2),!g&&F>E&&(F-=k*2)}else E=j[0],F=j[1],C=j[2],D=j[3];var H=F-E;if(Math.abs(H)>l){var I=F,J=h,K=i;F=E+l*(g&&F>E?1:-1),h=C+c*Math.cos(F),i=D+d*Math.sin(F),n=N(h,i,c,d,e,0,g,J,K,[F,I,C,D])}H=F-E;var L=Math.cos(E),M=Math.sin(E),O=Math.cos(F),P=Math.sin(F),Q=Math.tan(H/4),R=4/3*c*Q,S=4/3*d*Q,T=[a,b],U=[a+R*M,b-S*L],V=[h+R*P,i-S*O],W=[h,i];U[0]=2*T[0]-U[0],U[1]=2*T[1]-U[1];if(j)return[U,V,W][r](n);n=[U,V,W][r](n)[p](",")[q](",");var X=[];for(var Y=0,Z=n[o];Y<Z;Y++)X[Y]=Y%2?t(n[Y-1],n[Y],m).y:t(n[Y],n[Y+1],m).x;return X},O=G(function(a,b,c,d,e,f,g,h,i){var j=v(1-i,3)*a+v(1-i,2)*3*i*c+(1-i)*3*i*i*e+v(i,3)*g,k=v(1-i,3)*b+v(1-i,2)*3*i*d+(1-i)*3*i*i*f+v(i,3)*h,l=a+2*i*(c-a)+i*i*(e-2*c+a),m=b+2*i*(d-b)+i*i*(f-2*d+b),n=c+2*i*(e-c)+i*i*(g-2*e+c),o=d+2*i*(f-d)+i*i*(h-2*f+d),p=(1-i)*a+i*c,q=(1-i)*b+i*d,r=(1-i)*e+i*g,s=(1-i)*f+i*h;return{x:j,y:k,m:{x:l,y:m},n:{x:n,y:o},start:{x:p,y:q},end:{x:r,y:s}}}),P=G(function(a,b,c,d,e,f,g,h){var i=e-2*c+a-(g-2*e+c),j=2*(c-a)-2*(e-c),k=a-c,l=(-j+Math.sqrt(j*j-4*i*k))/2/i,m=(-j-Math.sqrt(j*j-4*i*k))/2/i,o=[b,h],p=[a,g],q=O(a,b,c,d,e,f,g,h,l>0&&l<1?l:0),s=O(a,b,c,d,e,f,g,h,m>0&&m<1?m:0);return p=p[r](q.x,s.x),o=o[r](q.y,s.y),i=f-2*d+b-(h-2*f+d),j=2*(d-b)-2*(f-d),k=b-d,l=(-j+Math.sqrt(j*j-4*i*k))/2/i,m=(-j-Math.sqrt(j*j-4*i*k))/2/i,q=O(a,b,c,d,e,f,g,h,l>0&&l<1?l:0),s=O(a,b,c,d,e,f,g,h,m>0&&m<1?m:0),p=p[r](q.x,s.x),o=o[r](q.y,s.y),{min:{x:w[n](0,p),y:w[n](0,o)},max:{x:x[n](0,p),y:x[n](0,o)}}}),Q=G(function(a,b){var c=K(a),d=b&&K(b),e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},f={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},g=function(a,b){var c,d;if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];!(a[0]in{T:1,Q:1})&&(b.qx=b.qy=null);switch(a[0]){case"M":b.X=a[1],b.Y=a[2];break;case"A":a=["C"][r](N[n](0,[b.x,b.y][r](a.slice(1))));break;case"S":c=b.x+(b.x-(b.bx||b.x)),d=b.y+(b.y-(b.by||b.y)),a=["C",c,d][r](a.slice(1));break;case"T":b.qx=b.x+(b.x-(b.qx||b.x)),b.qy=b.y+(b.y-(b.qy||b.y)),a=["C"][r](M(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case"Q":b.qx=a[1],b.qy=a[2],a=["C"][r](M(b.x,b.y,a[1],a[2],a[3],a[4]));break;case"L":a=["C"][r](L(b.x,b.y,a[1],a[2]));break;case"H":a=["C"][r](L(b.x,b.y,a[1],b.y));break;case"V":a=["C"][r](L(b.x,b.y,b.x,a[1]));break;case"Z":a=["C"][r](L(b.x,b.y,b.X,b.Y))}return a},h=function(a,b){if(a[b][o]>7){a[b].shift();var e=a[b];while(e[o])a.splice(b++,0,["C"][r](e.splice(0,6)));a.splice(b,1),k=x(c[o],d&&d[o]||0)}},i=function(a,b,e,f,g){a&&b&&a[g][0]=="M"&&b[g][0]!="M"&&(b.splice(g,0,["M",f.x,f.y]),e.bx=0,e.by=0,e.x=a[g][1],e.y=a[g][2],k=x(c[o],d&&d[o]||0))};for(var j=0,k=x(c[o],d&&d[o]||0);j<k;j++){c[j]=g(c[j],e),h(c,j),d&&(d[j]=g(d[j],f)),d&&h(d,j),i(c,d,e,f,j),i(d,c,f,e,j);var l=c[j],m=d&&d[j],p=l[o],q=d&&m[o];e.x=l[p-2],e.y=l[p-1],e.bx=t(l[p-4])||e.x,e.by=t(l[p-3])||e.y,f.bx=d&&(t(m[q-4])||f.x),f.by=d&&(t(m[q-3])||f.y),f.x=d&&m[q-2],f.y=d&&m[q-1]}return d?[c,d]:c},null,I),R=G(function(a){var b=[];for(var c=0,d=a[o];c<d;c++){var f={},g=a[c].match(/^([^:]*):?([\d\.]*)/);f.color=e.getRGB(g[1]);if(f.color.error)return null;f.color=f.color.hex,g[2]&&(f.offset=g[2]+"%"),b[s](f)}for(var c=1,d=b[o]-1;c<d;c++)if(!b[c].offset){var h=t(b[c-1].offset||0),i=0;for(var j=c+1;j<d;j++)if(b[j].offset){i=b[j].offset;break}i||(i=100,j=d),i=t(i);var k=(i-h)/(j-c+1);for(;c<j;c++)h+=k,b[c].offset=h+"%"}return b}),S=function(){var a,c,d,f,g;if(e.is(arguments[0],"string")||e.is(arguments[0],"object")){e.is(arguments[0],"string")?a=b.getElementById(arguments[0]):a=arguments[0];if(a.tagName)return arguments[1]==null?{container:a,width:a.style.pixelWidth||a.offsetWidth,height:a.style.pixelHeight||a.offsetHeight}:{container:a,width:arguments[1],height:arguments[2]}}else if(e.is(arguments[0],A)&&arguments[o]>3)return{container:1,x:arguments[0],y:arguments[1],width:arguments[2],height:arguments[3]}},T=function(a,b){var c=this;for(var d in b)if(b[j](d)&&!(d in a))switch(typeof b[d]){case"function":(function(b){a[d]=a===c?b:function(){return b[n](c,arguments)}})(b[d]);break;case"object":a[d]=a[d]||{},T.call(this,a[d],b[d]);break;default:a[d]=b[d]}};if(e.svg){f.svgns="http://www.w3.org/2000/svg",f.xlink="http://www.w3.org/1999/xlink";var y=function(a){return+a+(~~a===a)*.5},U=function(a){for(var b=0,c=a[o];b<c;b++)if(a[b][0].toLowerCase()!="a")for(var d=1,e=a[b][o];d<e;d++)a[b][d]=y(a[b][d]);else a[b][6]=y(a[b][6]),a[b][7]=y(a[b][7]);return a},V=function(a,c){if(!c)return b.createElementNS(f.svgns,a);for(var d in c)c[j](d)&&a[l](d,c[d])};e[B]=function(){return"Your browser supports SVG.\nYou are running RaphaÃ«l "+this.version};var W=function(a,b){var c=V("path");b.canvas&&b.canvas[m](c);var d=new ba(c,b);return d.type="path",Z(d,{fill:"none",stroke:"#000",path:a}),d},X=function(a,b,c){var d="linear",f=.5,g=.5,i=a.style;b=(b+h)[E](/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,function(a,b,c){return d="radial",b&&c&&(f=t(b),g=t(c),v(f-.5,2)+v(g-.5,2)>.25&&(g=Math.sqrt(.25-v(f-.5,2))+.5)),h}),b=b[q](/\s*\-\s*/);if(d=="linear"){var j=b.shift();j=-t(j);if(isNaN(j))return null;var k=[0,0,Math.cos(j*Math.PI/180),Math.sin(j*Math.PI/180)],l=1/(x(Math.abs(k[2]),Math.abs(k[3]))||1);k[2]*=l,k[3]*=l,k[2]<0&&(k[0]=-k[2],k[2]=0),k[3]<0&&(k[1]=-k[3],k[3]=0)}var n=R(b);if(!n)return null;var p=V(d+"Gradient");p.id="r"+(e._id++)[B](36),d=="radial"?V(p,{fx:f,fy:g}):V(p,{x1:k[0],y1:k[1],x2:k[2],y2:k[3]}),c.defs[m](p);for(var r=0,s=n[o];r<s;r++){var u=V("stop");V(u,{offset:n[r].offset?n[r].offset:r?"100%":"0%","stop-color":n[r].color||"#fff"}),p[m](u)}return V(a,{fill:"url(#"+p.id+")",opacity:1,"fill-opacity":1}),i.fill=h,i.opacity=1,i.fillOpacity=1,1},Y=function(a){var b=a.getBBox();V(a.pattern,{patternTransform:e.format("translate({0},{1})",b.x,b.y)})},Z=function(c,d){var g={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},i=c.node,k=c.attrs,n=c.rotate(),r=function(a,b){b=g[(b+h).toLowerCase()];if(b){var c=a.attrs["stroke-width"]||"1",e={round:c,square:c,butt:0}[a.attrs["stroke-linecap"]||d["stroke-linecap"]]||0,f=[],j=b[o];while(j--)f[j]=b[j]*c+(j%2?1:-1)*e;V(i,{"stroke-dasharray":f[p](",")})}};t(n)&&c.rotate(0,!0);for(var s in d)if(d[j](s)){if(!(s in C))continue;var v=d[s];k[s]=v;switch(s){case"href":case"title":case"target":var w=i.parentNode;if(w.tagName.toLowerCase()!="a"){var x=V("a");w.insertBefore(x,i),x[m](i),w=x}w.setAttributeNS(c.paper.xlink,s,v);break;case"clip-rect":var z=(v+h)[q](a);if(z[o]==4){c.clip&&c.clip.parentNode.parentNode.removeChild(c.clip.parentNode);var A=V("clipPath"),D=V("rect");A.id="r"+(e._id++)[B](36),V(D,{x:z[0],y:z[1],width:z[2],height:z[3]}),A[m](D),c.paper.defs[m](A),V(i,{"clip-path":"url(#"+A.id+")"}),c.clip=D}if(!v){var F=b.getElementById(i.getAttribute("clip-path")[E](/(^url\(#|\)$)/g,h));F&&F.parentNode.removeChild(F),V(i,{"clip-path":h}),delete c.clip}break;case"path":v&&c.type=="path"&&(k.path=U(K(v)),V(i,{d:k.path}));break;case"width":i[l](s,v);if(k.fx)s="x",v=k.x;else break;case"x":k.fx&&(v=-k.x-(k.width||0));case"rx":if(s=="rx"&&c.type=="rect")break;case"cx":i[l](s,y(v)),c.pattern&&Y(c);break;case"height":i[l](s,v);if(k.fy)s="y",v=k.y;else break;case"y":k.fy&&(v=-k.y-(k.height||0));case"ry":if(s=="ry"&&c.type=="rect")break;case"cy":i[l](s,y(v)),c.pattern&&Y(c);break;case"r":c.type=="rect"?V(i,{rx:v,ry:v}):i[l](s,v);break;case"src":c.type=="image"&&i.setAttributeNS(c.paper.xlink,"href",v);break;case"stroke-width":i.style.strokeWidth=v,i[l](s,v),k["stroke-dasharray"]&&r(c,k["stroke-dasharray"]);break;case"stroke-dasharray":r(c,v);break;case"rotation":n=v,c.rotate(v,!0);break;case"translation":var G=(v+h)[q](a);c.translate((+G[0]+1||2)-1,(+G[1]+1||2)-1);break;case"scale":var G=(v+h)[q](a);c.scale(+G[0]||1,+G[1]||+G[0]||1,+G[2]||null,+G[3]||null);break;case"fill":var H=(v+h).match(/^url\(['"]?([^\)]+)['"]?\)$/i);if(H){var A=V("pattern"),I=V("image");A.id="r"+(e._id++)[B](36),V(A,{x:0,y:0,patternUnits:"userSpaceOnUse"}),V(I,{x:0,y:0}),I.setAttributeNS(c.paper.xlink,"href",H[1]),A[m](I);var J=b.createElement("img");J.style.cssText="position:absolute;left:-9999em;top-9999em",J.onload=function(){V(A,{width:this.offsetWidth,height:this.offsetHeight}),V(I,{width:this.offsetWidth,height:this.offsetHeight}),b.body.removeChild(this),f.safari()},b.body[m](J),J.src=H[1],c.paper.defs[m](A),i.style.fill="url(#"+A.id+")",V(i,{fill:"url(#"+A.id+")"}),c.pattern=A,c.pattern&&Y(c);break}if(!e.getRGB(v).error)delete d.gradient,delete k.gradient,!e.is(k.opacity,"undefined")&&e.is(d.opacity,"undefined")&&(i.style.opacity=k.opacity,V(i,{opacity:k.opacity})),!e.is(k["fill-opacity"],"undefined")&&e.is(d["fill-opacity"],"undefined")&&(i.style.fillOpacity=k["fill-opacity"],V(i,{"fill-opacity":k["fill-opacity"]}));else if((c.type in{circle:1,ellipse:1}||(v+h).charAt(0)!="r")&&X(i,v,c.paper)){k.gradient=v,k.fill="none";break};case"stroke":i.style[s]=e.getRGB(v).hex,i[l](s,e.getRGB(v).hex);break;case"gradient":(c.type in{circle:1,ellipse:1}||(v+h).charAt(0)!="r")&&X(i,v,c.paper);break;case"opacity":case"fill-opacity":if(k.gradient){var L=b.getElementById(i.getAttribute("fill")[E](/^url\(#|\)$/g,h));if(L){var M=L.getElementsByTagName("stop");M[M[o]-1][l]("stop-opacity",v)}break};default:s=="font-size"&&(v=u(v,10)+"px");var N=s[E](/(\-.)/g,function(a){return a.substring(1).toUpperCase()});i.style[N]=v,i[l](s,v)}}_(c,d),t(n)&&c.rotate(n,!0)},$=1.2,_=function(a,c){if(a.type!="text"||!("text"in c||"font"in c||"font-size"in c||"x"in c||"y"in c))return;var d=a.attrs,e=a.node,f=e.firstChild?u(b.defaultView.getComputedStyle(e.firstChild,h).getPropertyValue("font-size"),10):10;if("text"in c){while(e.firstChild)e.removeChild(e.firstChild);var g=(c.text+h)[q]("\n");for(var i=0,j=g[o];i<j;i++){var k=V("tspan");i&&V(k,{dy:f*$,x:d.x}),k[m](b.createTextNode(g[i])),e[m](k)}}else{var g=e.getElementsByTagName("tspan");for(var i=0,j=g[o];i<j;i++)i&&V(g[i],{dy:f*$,x:d.x})}V(e,{y:d.y});var l=a.getBBox(),n=d.y-(l.y+l.height/2);n&&isFinite(n)&&V(e,{y:d.y+n})},ba=function(a,b){var c=0,d=0;this[0]=a,this.id=e._oid++,this.node=a,a.raphael=this,this.paper=b,this.attrs=this.attrs||{},this.transformations=[],this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1}};ba[k].rotate=function(b,c,d){if(this.removed)return this;if(b==null)return this._.rt.cx?[this._.rt.deg,this._.rt.cx,this._.rt.cy][p](i):this._.rt.deg;var f=this.getBBox();return b=(b+h)[q](a),b[o]-1&&(c=t(b[1]),d=t(b[2])),b=t(b[0]),c!=null?this._.rt.deg=b:this._.rt.deg+=b,d==null&&(c=null),this._.rt.cx=c,this._.rt.cy=d,c=c==null?f.x+f.width/2:c,d=d==null?f.y+f.height/2:d,this._.rt.deg?(this.transformations[0]=e.format("rotate({0} {1} {2})",this._.rt.deg,c,d),this.clip&&V(this.clip,{transform:e.format("rotate({0} {1} {2})",-this._.rt.deg,c,d)})):(this.transformations[0]=h,this.clip&&V(this.clip,{transform:h})),V(this.node,{transform:this.transformations[p](i)}),this},ba[k].hide=function(){return!this.removed&&(this.node.style.display="none"),this},ba[k].show=function(){return!this.removed&&(this.node.style.display=""),this},ba[k].remove=function(){this.node.parentNode.removeChild(this.node);for(var a in this)delete this[a];this.removed=!0},ba[k].getBBox=function(){if(this.removed)return this;if(this.type=="path")return H(this.attrs.path);if(this.node.style.display=="none"){this.show();var a=!0}var b={};try{b=this.node.getBBox()}catch(c){}finally{b=b||{}}if(this.type=="text"){b={x:b.x,y:Infinity,width:0,height:0};for(var d=0,e=this.node.getNumberOfChars();d<e;d++){var f=this.node.getExtentOfChar(d);f.y<b.y&&(b.y=f.y),f.y+f.height-b.y>b.height&&(b.height=f.y+f.height-b.y),f.x+f.width-b.x>b.width&&(b.width=f.x+f.width-b.x)}}return a&&this.hide(),b},ba[k].attr=function(){if(this.removed)return this;if(arguments[o]==1&&e.is(arguments[0],"string"))return arguments[0]=="translation"?this.translate():arguments[0]=="rotation"?this.rotate():arguments[0]=="scale"?this.scale():this.attrs[arguments[0]];if(arguments[o]==1&&e.is(arguments[0],"array")){var a={};for(var b in arguments[0])arguments[0][j](b)&&(a[arguments[0][b]]=this.attrs[arguments[0][b]]);return a}if(arguments[o]==2){var c={};c[arguments[0]]=arguments[1],Z(this,c)}else arguments[o]==1&&e.is(arguments[0],"object")&&Z(this,arguments[0]);return this},ba[k].toFront=function(){return!this.removed&&this.node.parentNode[m](this.node),this},ba[k].toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),this)},ba[k].insertAfter=function(a){return this.removed?this:(a.node.nextSibling?a.node.parentNode.insertBefore(this.node,a.node.nextSibling):a.node.parentNode[m](this.node),this)},ba[k].insertBefore=function(a){if(this.removed)return this;var b=a.node;return b.parentNode.insertBefore(this.node,b),this};var bb=function(a,b,c,d){b=y(b),c=y(c);var e=V("circle");a.canvas&&a.canvas[m](e);var f=new ba(e,a);return f.attrs={cx:b,cy:c,r:d,fill:"none",stroke:"#000"},f.type="circle",V(e,f.attrs),f},bc=function(a,b,c,d,e,f){b=y(b),c=y(c);var g=V("rect");a.canvas&&a.canvas[m](g);var h=new ba(g,a);return h.attrs={x:b,y:c,width:d,height:e,r:f||0,rx:f||0,ry:f||0,fill:"none",stroke:"#000"},h.type="rect",V(g,h.attrs),h},bd=function(a,b,c,d,e){b=y(b),c=y(c);var f=V("ellipse");a.canvas&&a.canvas[m](f);var g=new ba(f,a);return g.attrs={cx:b,cy:c,rx:d,ry:e,fill:"none",stroke:"#000"},g.type="ellipse",V(f,g.attrs),g},be=function(a,b,c,d,e,f){var g=V("image");V(g,{x:c,y:d,width:e,height:f,preserveAspectRatio:"none"}),g.setAttributeNS(a.xlink,"href",b),a.canvas&&a.canvas[m](g);var h=new ba(g,a);return h.attrs={x:c,y:d,width:e,height:f,src:b},h.type="image",h},bf=function(a,b,c,d){var e=V("text");V(e,{x:b,y:c,"text-anchor":"middle"}),a.canvas&&a.canvas[m](e);var f=new ba(e,a);return f.attrs={x:b,y:c,"text-anchor":"middle",text:d,font:C.font,stroke:"none",fill:"#000"},f.type="text",Z(f,f.attrs),f},bg=function(a,b){return this.width=a||this.width,this.height=b||this.height,this.canvas[l]("width",this.width),this.canvas[l]("height",this.height),this},bh=function(){var a=S[n](null,arguments),c=a&&a.container,d=a.x,g=a.y,h=a.width,i=a.height;if(!c)throw new Error("SVG container not found.");f.canvas=V("svg");var k=f.canvas;f.width=h||512,f.height=i||342,k[l]("width",f.width),k[l]("height",f.height),c==1?(k.style.cssText="position:absolute;left:"+d+"px;top:"+g+"px",b.body[m](k)):c.firstChild?c.insertBefore(k,c.firstChild):c[m](k),c={canvas:k};for(var o in f)f[j](o)&&(c[o]=f[o]);return T.call(c,c,e.fn),c.clear(),c.raphael=e,c};f.clear=function(){var a=this.canvas;while(a.firstChild)a.removeChild(a.firstChild);(this.desc=V("desc"))[m](b.createTextNode("Created with RaphaÃ«l")),a[m](this.desc),a[m](this.defs=V("defs"))},f.remove=function(){this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var a in this)delete this[a]}}if(e.vml){var bi=function(a){var b=/[ahqtv]/ig,c=K;(a+h).match(b)&&(c=Q),b=/[clmz]/g;if(c==K&&!(a+h).match(b)){var d={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},e=/([clmz]),?([^clmz]*)/gi,f=/-?[^,\s-]+/g,g=(a+h)[E](e,function(a,b,c){var e=[];return c[E](f,function(a){e[s](y(a))}),d[b]+e});return g}var j=c(a),k,g=[],l;for(var m=0,n=j[o];m<n;m++){k=j[m],l=(j[m][0]+h).toLowerCase(),l=="z"&&(l="x");for(var q=1,r=k[o];q<r;q++)l+=y(k[q])+(q!=r-1?",":h);g[s](l)}return g[p](i)};e[B]=function(){return"Your browser doesnât support SVG. Falling down to VML.\nYou are running RaphaÃ«l "+this.version};var W=function(a,b){var c=bj("group");c.style.cssText="position:absolute;left:0;top:0;width:"+b.width+"px;height:"+b.height+"px",c.coordsize=b.coordsize,c.coordorigin=b.coordorigin;var d=bj("shape"),e=d.style;e.width=b.width+"px",e.height=b.height+"px",d.coordsize=this.coordsize,d.coordorigin=this.coordorigin,c[m](d);var f=new ba(d,c,b);return f.isAbsolute=!0,f.type="path",f.path=[],f.Path=h,a&&Z(f,{fill:"none",stroke:"#000",path:a}),b.canvas[m](c),f},Z=function(c,d){c.attrs=c.attrs||{};var f=c.node,g=c.attrs,i=f.style,k,l=c;for(var n in d)d[j](n)&&(g[n]=d[n]);d.href&&(f.href=d.href),d.title&&(f.title=d.title),d.target&&(f.target=d.target),d.path&&c.type=="path"&&(g.path=d.path,f.path=bi(g.path)),d.rotation!=null&&c.rotate(d.rotation,!0),d.translation&&(k=(d.translation+h)[q](a),c.translate(k[0],k[1])),d.scale&&(k=(d.scale+h)[q](a),c.scale(+k[0]||1,+k[1]||+k[0]||1,+k[2]||null,+k[3]||null));if("clip-rect"in d){var p=(d["clip-rect"]+h)[q](a);if(p[o]==4){p[2]=+p[2]+ +p[0],p[3]=+p[3]+ +p[1];var r=f.clipRect||b.createElement("div"),s=r.style,u=f.parentNode;s.clip=e.format("rect({1}px {2}px {3}px {0}px)",p),f.clipRect||(s.position="absolute",s.top=0,s.left=0,s.width=c.paper.width+"px",s.height=c.paper.height+"px",u.parentNode.insertBefore(r,u),r[m](u),f.clipRect=r)}d["clip-rect"]||f.clipRect&&(f.clipRect.style.clip=h)}c.type=="image"&&d.src&&(f.src=d.src),c.type=="image"&&d.opacity&&(f.filterOpacity=" progid:DXImageTransform.Microsoft.Alpha(opacity="+d.opacity*100+")",i.filter=(f.filterMatrix||h)+(f.filterOpacity||h)),d.font&&(i.font=d.font),d["font-family"]&&(i.fontFamily='"'+d["font-family"][q](",")[0][E](/^['"]+|['"]+$/g,h)+'"'),d["font-size"]&&(i.fontSize=d["font-size"]),d["font-weight"]&&(i.fontWeight=d["font-weight"]),d["font-style"]&&(i.fontStyle=d["font-style"]);if(d.opacity!=null||d["stroke-width"]!=null||d.fill!=null||d.stroke!=null||d["stroke-width"]!=null||d["stroke-opacity"]!=null||d["fill-opacity"]!=null||d["stroke-dasharray"]!=null||d["stroke-miterlimit"]!=null||d["stroke-linejoin"]!=null||d["stroke-linecap"]!=null){f=c.shape||f;var v=f.getElementsByTagName("fill")&&f.getElementsByTagName("fill")[0],w=!1;!v&&(w=v=bj("fill"));if("fill-opacity"in d||"opacity"in d){var x=((+g["fill-opacity"]+1||2)-1)*((+g.opacity+1||2)-1);x<0&&(x=0),x>1&&(x=1),v.opacity=x}d.fill&&(v.on=!0);if(v.on==null||d.fill=="none")v.on=!1;if(v.on&&d.fill){var z=d.fill.match(/^url\(([^\)]+)\)$/i);z?(v.src=z[1],v.type="tile"):(v.color=e.getRGB(d.fill).hex,v.src=h,v.type="solid",e.getRGB(d.fill).error&&(l.type in{circle:1,ellipse:1}||(d.fill+h).charAt(0)!="r")&&X(l,d.fill)&&(g.fill="none",g.gradient=d.fill))}w&&f[m](v);var A=f.getElementsByTagName("stroke")&&f.getElementsByTagName("stroke")[0],B=!1;!A&&(B=A=bj("stroke"));if(d.stroke&&d.stroke!="none"||d["stroke-width"]||d["stroke-opacity"]!=null||d["stroke-dasharray"]||d["stroke-miterlimit"]||d["stroke-linejoin"]||d["stroke-linecap"])A.on=!0;(d.stroke=="none"||A.on==null||d.stroke==0||d["stroke-width"]==0)&&(A.on=!1),A.on&&d.stroke&&(A.color=e.getRGB(d.stroke).hex);var x=((+g["stroke-opacity"]+1||2)-1)*((+g.opacity+1||2)-1);x<0&&(x=0),x>1&&(x=1),A.opacity=x,d["stroke-linejoin"]&&(A.joinstyle=d["stroke-linejoin"]||"miter"),A.miterlimit=d["stroke-miterlimit"]||8,d["stroke-linecap"]&&(A.endcap={butt:"flat",square:"square",round:"round"}[d["stroke-linecap"]]||"miter"),d["stroke-width"]&&(A.weight=(t(d["stroke-width"])||1)*12/16);if(d["stroke-dasharray"]){var C={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};A.dashstyle=C[d["stroke-dasharray"]]||h}B&&f[m](A)}if(l.type=="text"){var i=l.paper.span.style;g.font&&(i.font=g.font),g["font-family"]&&(i.fontFamily=g["font-family"]),g["font-size"]&&(i.fontSize=g["font-size"]),g["font-weight"]&&(i.fontWeight=g["font-weight"]),g["font-style"]&&(i.fontStyle=g["font-style"]),l.node.string&&(l.paper.span.innerHTML=(l.node.string+h)[E](/</g,"&#60;")[E](/&/g,"&#38;")[E](/\n/g,"<br>")),l.W=g.w=l.paper.span.offsetWidth,l.H=g.h=l.paper.span.offsetHeight,l.X=g.x,l.Y=g.y+y(l.H/2);switch(g["text-anchor"]){case"start":l.node.style["v-text-align"]="left",l.bbx=y(l.W/2);break;case"end":l.node.style["v-text-align"]="right",l.bbx=-y(l.W/2);break;default:l.node.style["v-text-align"]="center"}}},X=function(a,b){a.attrs=a.attrs||{};var c=a.attrs,d=a.node.getElementsByTagName("fill"),e="linear",f=".5 .5";a.attrs.gradient=b,b=(b+h)[E](/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,function(a,b,c){return e="radial",b&&c&&(b=t(b),c=t(c),v(b-.5,2)+v(c-.5,2)>.25&&(c=Math.sqrt(.25-v(b-.5,2))+.5),f=b+i+c),h}),b=b[q](/\s*\-\s*/);if(e=="linear"){var g=b.shift();g=-t(g);if(isNaN(g))return null}var j=R(b);if(!j)return null;a=a.shape||a.node,d=d[0]||bj("fill");if(j[o]){d.on=!0,d.method="none",d.type=e=="radial"?"gradientradial":"gradient",d.color=j[0].color,d.color2=j[j[o]-1].color;var k=[];for(var l=0,m=j[o];l<m;l++)j[l].offset&&k[s](j[l].offset+i+j[l].color);d.colors.value=k[o]?k[p](","):"0% "+d.color,e=="radial"?(d.focus="100%",d.focussize=f,d.focusposition=f):d.angle=(270-g)%360}return 1},ba=function(a,b,c){var d=0,f=0,g=0,h=1;this[0]=a,this.id=e._oid++,this.node=a,a.raphael=this,this.X=0,this.Y=0,this.attrs={},this.Group=b,this.paper=c,this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1}};ba[k].rotate=function(b,c,d){return this.removed?this:b==null?this._.rt.cx?[this._.rt.deg,this._.rt.cx,this._.rt.cy][p](i):this._.rt.deg:(b=(b+h)[q](a),b[o]-1&&(c=t(b[1]),d=t(b[2])),b=t(b[0]),c!=null?this._.rt.deg=b:this._.rt.deg+=b,d==null&&(c=null),this._.rt.cx=c,this._.rt.cy=d,this.setBox(this.attrs,c,d),this.Group.style.rotation=this._.rt.deg,this)},ba[k].setBox=function(a,b,c){if(this.removed)return this;var d=this.Group.style,e=this.shape&&this.shape.style||this.node.style;a=a||{};for(var f in a)a[j](f)&&(this.attrs[f]=a[f]);b=b||this._.rt.cx,c=c||this._.rt.cy;var g=this.attrs,i,k,l,n;switch(this.type){case"circle":i=g.cx-g.r,k=g.cy-g.r,l=n=g.r*2;break;case"ellipse":i=g.cx-g.rx,k=g.cy-g.ry,l=g.rx*2,n=g.ry*2;break;case"rect":case"image":i=+g.x,k=+g.y,l=g.width||0,n=g.height||0;break;case"text":this.textpath.v=["m",y(g.x),", ",y(g.y-2),"l",y(g.x)+1,", ",y(g.y-2)][p](h),i=g.x-y(this.W/2),k=g.y-this.H/2,l=this.W,n=this.H;break;case"path":if(!this.attrs.path)i=0,k=0,l=this.paper.width,n=this.paper.height;else{var o=H(this.attrs.path);i=o.x,k=o.y,l=o.width,n=o.height}break;default:i=0,k=0,l=this.paper.width,n=this.paper.height}b=b==null?i+l/2:b,c=c==null?k+n/2:c;var q=b-this.paper.width/2,r=c-this.paper.height/2;if(this.type=="path"||this.type=="text")d.left!=q+"px"&&(d.left=q+"px"),d.top!=r+"px"&&(d.top=r+"px"),this.X=this.type=="text"?i:-q,this.Y=this.type=="text"?k:-r,this.W=l,this.H=n,e.left!=-q+"px"&&(e.left=-q+"px"),e.top!=-r+"px"&&(e.top=-r+"px");else{d.left!=q+"px"&&(d.left=q+"px"),d.top!=r+"px"&&(d.top=r+"px"),this.X=i,this.Y=k,this.W=l,this.H=n,d.width!=this.paper.width+"px"&&(d.width=this.paper.width+"px"),d.height!=this.paper.height+"px"&&(d.height=this.paper.height+"px"),e.left!=i-q+"px"&&(e.left=i-q+"px"),e.top!=k-r+"px"&&(e.top=k-r+"px"),e.width!=l+"px"&&(e.width=l+"px"),e.height!=n+"px"&&(e.height=n+"px");var s=(+a.r||0)/w(l,n);if(this.type=="rect"&&this.arcsize!=s&&(s||this.arcsize)){var t=bj(s?"roundrect":"rect");t.arcsize=s,this.Group[m](t),this.node.parentNode.removeChild(this.node),this.node=t,this.arcsize=s,this.attr(this.attrs)}}},ba[k].hide=function(){return!this.removed&&(this.Group.style.display="none"),this},ba[k].show=function(){return!this.removed&&(this.Group.style.display="block"),this},ba[k].getBBox=function(){return this.removed?this:this.type=="path"?H(this.attrs.path):{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}},ba[k].remove=function(){this.node.parentNode.removeChild(this[0]),this.Group.parentNode.removeChild(this.Group),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var a in this)delete this[a];this.removed=!0},ba[k].attr=function(){if(this.removed)return this;if(arguments[o]==1&&e.is(arguments[0],"string"))return arguments[0]=="translation"?this.translate():arguments[0]=="rotation"?this.rotate():arguments[0]=="scale"?this.scale():this.attrs[arguments[0]];if(this.attrs&&arguments[o]==1&&e.is(arguments[0],"array")){var a={};for(var b=0,c=arguments[0][o];b<c;b++)a[arguments[0][b]]=this.attrs[arguments[0][b]];return a}var d;return arguments[o]==2&&(d={},d[arguments[0]]=arguments[1]),arguments[o]==1&&e.is(arguments[0],"object")&&(d=arguments[0]),d&&(d.text&&this.type=="text"&&(this.node.string=d.text),Z(this,d),d.gradient&&({circle:1,ellipse:1}[j](this.type)||(d.gradient+h).charAt(0)!="r")&&X(this,d.gradient),this.setBox(this.attrs)),this},ba[k].toFront=function(){return!this.removed&&this.Group.parentNode[m](this.Group),this},ba[k].toBack=function(){return this.removed?this:(this.Group.parentNode.firstChild!=this.Group&&this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild),this)},ba[k].insertAfter=function(a){return this.removed?this:(a.Group.nextSibling?a.Group.parentNode.insertBefore(this.Group,a.Group.nextSibling):a.Group.parentNode[m](this.Group),this)},ba[k].insertBefore=function(a){return!this.removed&&a.Group.parentNode.insertBefore(this.Group,a.Group),this};var bb=function(a,b,c,d){var e=bj("group"),f=bj("oval"),g=f.style;e.style.cssText="position:absolute;left:0;top:0;width:"+a.width+"px;height:"+a.height+"px",e.coordsize=a.coordsize,e.coordorigin=a.coordorigin,e[m](f);var h=new ba(f,e,a);return h.type="circle",Z(h,{stroke:"#000",fill:"none"}),h.attrs.cx=b,h.attrs.cy=c,h.attrs.r=d,h.setBox({x:b-d,y:c-d,width:d*2,height:d*2}),a.canvas[m](e),h},bc=function(a,b,c,d,e,f){var g=bj("group"),h=bj(f?"roundrect":"rect"),i=(+f||0)/w(d,e);h.arcsize=i,g.style.cssText="position:absolute;left:0;top:0;width:"+a.width+"px;height:"+a.height+"px",g.coordsize=a.coordsize,g.coordorigin=a.coordorigin,g[m](h);var j=new ba(h,g,a);return j.type="rect",Z(j,{stroke:"#000"}),j.arcsize=i,j.setBox({x:b,y:c,width:d,height:e,r:+f}),a.canvas[m](g),j},bd=function(a,b,c,d,e){var f=bj("group"),g=bj("oval"),h=g.style;f.style.cssText="position:absolute;left:0;top:0;width:"+a.width+"px;height:"+a.height+"px",f.coordsize=a.coordsize,f.coordorigin=a.coordorigin,f[m](g);var i=new ba(g,f,a);return i.type="ellipse",Z(i,{stroke:"#000"}),i.attrs.cx=b,i.attrs.cy=c,i.attrs.rx=d,i.attrs.ry=e,i.setBox({x:b-d,y:c-e,width:d*2,height:e*2}),a.canvas[m](f),i},be=function(a,b,c,d,e,f){var g=bj("group"),h=bj("image"),i=h.style;g.style.cssText="position:absolute;left:0;top:0;width:"+a.width+"px;height:"+a.height+"px",g.coordsize=a.coordsize,g.coordorigin=a.coordorigin,h.src=b,g[m](h);var j=new ba(h,g,a);return j.type="image",j.attrs.src=b,j.attrs.x=c,j.attrs.y=d,j.attrs.w=e,j.attrs.h=f,j.setBox({x:c,y:d,width:e,height:f}),a.canvas[m](g),j},bf=function(a,b,c,d){var f=bj("group"),g=bj("shape"),i=g.style,j=bj("path"),k=j.style,l=bj("textpath");f.style.cssText="position:absolute;left:0;top:0;width:"+a.width+"px;height:"+a.height+"px",f.coordsize=a.coordsize,f.coordorigin=a.coordorigin,j.v=e.format("m{0},{1}l{2},{1}",y(b),y(c),y(b)+1),j.textpathok=!0,i.width=a.width,i.height=a.height,l.string=d+h,l.on=!0,g[m](l),g[m](j),f[m](g);var n=new ba(l,f,a);return n.shape=g,n.textpath=j,n.type="text",n.attrs.text=d,n.attrs.x=b,n.attrs.y=c,n.attrs.w=1,n.attrs.h=1,Z(n,{font:C.font,stroke:"none",fill:"#000"}),n.setBox(),a.canvas[m](f),n},bg=function(a,b){var c=this.canvas.style;return this.width=t(a||this.width),this.height=t(b||this.height),c.width=this.width+"px",c.height=this.height+"px",c.clip="rect(0 "+this.width+"px "+this.height+"px 0)",this.coordsize=this.width+i+this.height,this};b.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!b.namespaces.rvml&&b.namespaces.add("rvml","urn:schemas-microsoft-com:vml");var bj=function(a){return b.createElement("<rvml:"+a+' class="rvml">')}}catch(bk){var bj=function(a){return b.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}var bh=function(){var a=S[n](null,arguments),c=a.container,d=a.height,g,k=a.width,l=a.x,o=a.y;if(!c)throw new Error("VML container not found.");var p={},q=p.canvas=b.createElement("div"),r=q.style;k=t(k)||512,d=t(d)||342,p.width=k,p.height=d,p.coordsize=k+i+d,p.coordorigin="0 0",p.span=b.createElement("span"),p.span.style.cssText="position:absolute;left:-9999px;top:-9999px;padding:0;margin:0;line-height:1;display:inline;",q[m](p.span),r.cssText=e.format("width:{0}px;height:{1}px;position:absolute;clip:rect(0 {0}px {1}px 0)",k,d),c==1?(b.body[m](q),r.left=l+"px",r.top=o+"px",c={style:{width:k,height:d}}):(c.style.width=k,c.style.height=d,c.firstChild?c.insertBefore(q,c.firstChild):c[m](q));for(var s in f)f[j](s)&&(p[s]=f[s]);return T.call(p,p,e.fn),p.clear=function(){q.innerHTML=h},p.raphael=e,p};f.remove=function(){this.canvas.parentNode.removeChild(this.canvas);for(var a in this)delete this[a]}}(({"Apple Computer, Inc.":1,"Google Inc.":1}))[navigator.vendor]?f.safari=function(){var a=this.rect(-99,-99,this.width+99,this.height+99);setTimeout(function(){a.remove()})}:f.safari=function(){};var bl=function(){if(b.addEventListener)return function(a,b,c,d){var e=function(a){return c.call(d,a)};return a.addEventListener(b,e,!1),function(){return a.removeEventListener(b,e,!1),!0}};if(b.attachEvent)return function(a,b,d,e){var f=function(a){return d.call(e,a||c.event)};a.attachEvent("on"+b,f);var g=function(){return a.detachEvent("on"+b,f),!0};return b=="mouseover"?(a.attachEvent("onmouseenter",f),function(){return a.detachEvent("onmouseenter",f),g()}):b=="mouseout"?(a.attachEvent("onmouseleave",f),function(){return a.detachEvent("onmouseleave",f),g()}):g}}();for(var bm=g[o];bm--;)(function(a){ba[k][a]=function(b){return e.is(b,"function")&&(this.events=this.events||{},this.events[a]=this.events[a]||{},this.events[a][b]=this.events[a][b]||[],this.events[a][b][s](bl(this.shape||this.node,a,b,this))),this},ba[k]["un"+a]=function(b){var c=this.events;return c&&c[a]&&c[a][b]&&c[a][b][o]&&c[a][b].shift()()&&!c[a][b][o]&&delete c[a][b],this}})(g[bm]);ba[k].hover=function(a,b){return this.mouseover(a).mouseout(b)},f.circle=function(a,b,c){return bb(this,a||0,b||0,c||0)},f.rect=function(a,b,c,d,e){return bc(this,a||0,b||0,c||0,d||0,e||0)},f.ellipse=function(a,b,c,d){return bd(this,a||0,b||0,c||0,d||0)},f.path=function(a){return a&&!e.is(a,"string")&&!e.is(a[0],"array")&&(a+=h),W(e.format[n](e,arguments),this)},f.image=function(a,b,c,d,e){return be(this,a||"about:blank",b||0,c||0,d||0,e||0)},f.text=function(a,b,c){return bf(this,a||0,b||0,c||h)},f.set=function(a){return arguments[o]>1&&(a=Array[k].splice.call(arguments,0,arguments[o])),new bq(a)},f.setSize=bg,ba[k].scale=function(a,b,c,d){if(a==null&&b==null)return{x:this._.sx,y:this._.sy,toString:function(){return this.x+i+this.y}};b=b||a,!+b&&(b=a);var f,g,j,k,m=this.attrs;if(a!=0){var n=this.getBBox(),q=n.x+n.width/2,s=n.y+n.height/2,t=a/this._.sx,u=b/this._.sy;c=+c||c==0?c:q,d=+d||d==0?d:s;var v=~~(a/Math.abs(a)),x=~~(b/Math.abs(b)),y=this.node.style,z=c+(q-c)*v*t,A=d+(s-d)*x*u;switch(this.type){case"rect":case"image":var B=m.width*v*t,C=m.height*x*u,D=m.r*w(t,u),E=z-B/2,F=A-C/2;this.attr({width:B,height:C,x:E,y:F,r:D});break;case"circle":case"ellipse":this.attr({rx:m.rx*t,ry:m.ry*u,r:m.r*w(t,u),cx:z,cy:A});break;case"path":var G=J(m.path),I=!0;for(var K=0,L=G[o];K<L;K++){var M=G[K];if(M[0].toUpperCase()=="M"&&I)continue;I=!1;if(e.svg&&M[0].toUpperCase()=="A")M[G[K][o]-2]*=t,M[G[K][o]-1]*=u,M[1]*=t,M[2]*=u,M[5]=+(v+x?!!+M[5]:!+M[5]);else for(var N=1,O=M[o];N<O;N++)M[N]*=N%2?t:u}var P=H(G),f=z-P.x-P.width/2,g=A-P.y-P.height/2;G[0][1]+=f,G[0][2]+=g,this.attr({path:G})}this.type in{text:1,image:1}&&(v!=1||x!=1)?this.transformations?(this.transformations[2]="scale("[r](v,",",x,")"),this.node[l]("transform",this.transformations[p](i)),f=v==-1?-m.x-(B||0):m.x,g=x==-1?-m.y-(C||0):m.y,this.attr({x:f,y:g}),m.fx=v-1,m.fy=x-1):(this.node.filterMatrix=" progid:DXImageTransform.Microsoft.Matrix(M11="[r](v,", M12=0, M21=0, M22=",x,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')"),y.filter=(this.node.filterMatrix||h)+(this.node.filterOpacity||h)):this.transformations?(this.transformations[2]=h,this.node[l]("transform",this.transformations[p](i)),m.fx=0,m.fy=0):(this.node.filterMatrix=h,y.filter=(this.node.filterMatrix||h)+(this.node.filterOpacity||h)),m.scale=[a,b,c,d][p](i),this._.sx=a,this._.sy=b}return this},e.easing_formulas={linear:function(a){return a},"<":function(a){return v(a,3)},">":function(a){return v(a-1,3)+1},"<>":function(a){return a*=2,a<1?v(a,3)/2:(a-=2,(v(a,3)+2)/2)},backIn:function(a){var b=1.70158;return a*a*((b+1)*a-b)},backOut:function(a){a-=1;var b=1.70158;return a*a*((b+1)*a+b)+1},elastic:function(a){if(a==0||a==1)return a;var b=.3,c=b/4;return v(2,-10*a)*Math.sin((a-c)*2*Math.PI/b)+1},bounce:function(a){var b=7.5625,c=2.75,d;return a<1/c?d=b*a*a:a<2/c?(a-=1.5/c,d=b*a*a+.75):a<2.5/c?(a-=2.25/c,d=b*a*a+.9375):(a-=2.625/c,d=b*a*a+.984375),d}};var bn={length:0},bo=function(){var a=+(new Date);for(var b in bn)if(b!="length"&&bn[j](b)){var c=bn[b];if(c.stop){delete bn[b],bn[o]--;continue}var d=a-c.start,g=c.ms,k=c.easing,l=c.from,m=c.diff,n=c.to,q=c.t,r=c.prev||0,s=c.el,t=c.callback,u={},v;if(d<g){var w=e.easing_formulas[k]?e.easing_formulas[k](d/g):d/g;for(var x in l)if(l[j](x)){switch(D[x]){case"number":v=+l[x]+w*g*m[x];break;case"colour":v="rgb("+[bp(y(l[x].r+w*g*m[x].r)),bp(y(l[x].g+w*g*m[x].g)),bp(y(l[x].b+w*g*m[x].b))][p](",")+")";break;case"path":v=[];for(var z=0,A=l[x][o];z<A;z++){v[z]=[l[x][z][0]];for(var B=1,C=l[x][z][o];B<C;B++)v[z][B]=+l[x][z][B]+w*g*m[x][z][B];v[z]=v[z][p](i)}v=v[p](i);break;case"csv":switch(x){case"translation":var E=m[x][0]*(d-r),F=m[x][1]*(d-r);q.x+=E,q.y+=F,v=E+i+F;break;case"rotation":v=+l[x][0]+w*g*m[x][0],l[x][1]&&(v+=","+l[x][1]+","+l[x][2]);break;case"scale":v=[+l[x][0]+w*g*m[x][0],+l[x][1]+w*g*m[x][1],2 in n[x]?n[x][2]:h,3 in n[x]?n[x][3]:h][p](i);break;case"clip-rect":v=[];var z=4;while(z--)v[z]=+l[x][z]+w*g*m[x][z]}}u[x]=v}s.attr(u),s._run&&s._run.call(s)}else(q.x||q.y)&&s.translate(-q.x,-q.y),n.scale&&(n.scale=n.scale+h),s.attr(n),e.is(t,"function")&&t.call(s),delete bn[b],bn[o]--,s.in_animation=null;c.prev=d}e.svg&&f.safari(),bn[o]&&setTimeout(bo)},bp=function(a){return a>255?255:a<0?0:a};ba[k].animateWith=function(a,b,c,d,e){return bn[a.id]&&(b.start=bn[a.id].start),this.animate(b,c,d,e)},ba[k].onAnimation=function(a){return this._run=a||null,this},ba[k].animate=function(b,c,d,f){if(e.is(d,"function")||!d)f=d||null;var g={},i={},k={};for(var l in b)if(b[j](l)&&D[j](l)){g[l]=this.attr(l),g[l]==null&&(g[l]=C[l]),i[l]=b[l];switch(D[l]){case"number":k[l]=(i[l]-g[l])/c;break;case"colour":g[l]=e.getRGB(g[l]);var m=e.getRGB(i[l]);k[l]={r:(m.r-g[l].r)/c,g:(m.g-g[l].g)/c,b:(m.b-g[l].b)/c};break;case"path":var n=Q(g[l],i[l]);g[l]=n[0],i[l]=n[1],k[l]=[];for(var p=0,r=g[l][o];p<r;p++){k[l][p]=[0];for(var s=1,t=g[l][p][o];s<t;s++)k[l][p][s]=(i[l][p][s]-g[l][p][s])/c}break;case"csv":var u=(b[l]+h)[q](a),v=(g[l]+h)[q](a);switch(l){case"translation":g[l]=[0,0],k[l]=[u[0]/c,u[1]/c];break;case"rotation":g[l]=v[1]==u[1]&&v[2]==u[2]?v:[0,u[1],u[2]],k[l]=[(u[0]-g[l][0])/c,0,0];break;case"scale":b[l]=u,g[l]=(g[l]+h)[q](a),k[l]=[(u[0]-g[l][0])/c,(u[1]-g[l][1])/c,0,0];break;case"clip-rect":g[l]=(g[l]+h)[q](a),k[l]=[];var p=4;while(p--)k[l][p]=(u[p]-g[l][p])/c}i[l]=u}}return this.stop(),this.in_animation=1,bn[this.id]={start:b.start||+(new Date),ms:c,easing:d,from:g,diff:k,to:i,el:this,callback:f,t:{x:0,y:0}},++bn[o]==1&&bo(),this},ba[k].stop=function(){return delete bn[this.id],delete this.in_animation,this},ba[k].translate=function(a,b){if(a==null)return{x:this._.tx,y:this._.ty};this._.tx+=+a,this._.ty+=+b;switch(this.type){case"circle":case"ellipse":this.attr({cx:+a+this.attrs.cx,cy:+b+this.attrs.cy});break;case"rect":case"image":case"text":this.attr({x:+a+this.attrs.x,y:+b+this.attrs.y});break;case"path":var c=J(this.attrs.path);c[0][1]+=+a,c[0][2]+=+b,this.attr({path:c})}return this},ba[k][B]=function(){return"RaphaÃ«lâs object"},e.ae=bn;var bq=function(a){this.items=[],this[o]=0;if(a)for(var b=0,c=a[o];b<c;b++)a[b]&&(a[b].constructor==ba||a[b].constructor==bq)&&(this[this.items[o]]=this.items[this.items[o]]=a[b],this[o]++)};bq[k][s]=function(){var a,b;for(var c=0,d=arguments[o];c<d;c++)a=arguments[c],a&&(a.constructor==ba||a.constructor==bq)&&(b=this.items[o],this[b]=this.items[b]=a,this[o]++);return this},bq[k].pop=function(){return delete this[this[o]--],this.items.pop()};for(var br in ba[k])ba[k][j](br)&&(bq[k][br]=function(a){return function(){for(var b=0,c=this.items[o];b<c;b++)this.items[b][a][n](this.items[b],arguments);return this}}(br));return bq[k].attr=function(a,b){if(a&&e.is(a,"array")&&e.is(a[0],"object"))for(var c=0,d=a[o];c<d;c++)this.items[c].attr(a[c]);else for(var f=0,g=this.items[o];f<g;f++)this.items[f].attr[n](this.items[f],arguments);return this},bq[k].animate=function(a,b,c,d){(e.is(c,"function")||!c)&&(d=c||null);var f=this.items[o],g=f,h=this,i;d&&(i=function(){!--f&&d.call(h)}),this.items[--g].animate(a,b,c||i,i);while(g--)this.items[g].animateWith(this.items[f-1],a,b,c||i,i);return this},bq[k].insertAfter=function(a){var b=this.items[o];while(b--)this.items[b].insertAfter(a)},bq[k].getBBox=function(){var a=[],b=[],c=[],d=[];for(var e=this.items[o];e--;){var f=this.items[e].getBBox();a[s](f.x),b[s](f.y),c[s](f.x+f.width),d[s](f.y+f.height)}return a=w[n](0,a),b=w[n](0,b),{x:a,y:b,width:x[n](0,c)-a,height:x[n](0,d)-b}},e.registerFont=function(a){if(!a.face)return a;this.fonts=this.fonts||{};var b={w:a.w,face:{},glyphs:{}},c=a.face["font-family"];for(var d in a.face)a.face[j](d)&&(b.face[d]=a.face[d]);this.fonts[c]?this.fonts[c][s](b):this.fonts[c]=[b];if(!a.svg){b.face["units-per-em"]=u(a.face["units-per-em"],10);for(var e in a.glyphs)if(a.glyphs[j](e)){var f=a.glyphs[e];b.glyphs[e]={w:f.w,k:{},d:f.d&&"M"+f.d[E](/[mlcxtrv]/g,function(a){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[a]||"M"})+"z"};if(f.k)for(var g in f.k)f[j](g)&&(b.glyphs[e].k[g]=f.k[g])}}return a},f.getFont=function(a,b,c,d){d=d||"normal",c=c||"normal",b=+b||{normal:400,bold:700,lighter:300,bolder:800}[b]||400;var f=e.fonts[a];if(!f){var g=new RegExp("(^|\\s)"+a[E](/[^\w\d\s+!~.:_-]/g,h)+"(\\s|$)","i");for(var i in e.fonts)if(e.fonts[j](i)&&g.test(i)){f=e.fonts[i];break}}var k;if(f)for(var l=0,m=f[o];l<m;l++){k=f[l];if(k.face["font-weight"]==b&&(k.face["font-style"]==c||!k.face["font-style"])&&k.face["font-stretch"]==d)break}return k},f.print=function(a,b,c,d,f){var g=this.set(),i=(c+h)[q](h),j=0,k=h,l;e.is(d,"string")&&(d=this.getFont(d));if(d){l=(f||16)/d.face["units-per-em"];for(var m=0,n=i[o];m<n;m++){var p=m&&d.glyphs[i[m-1]]||{},r=d.glyphs[i[m]];j+=m?(p.w||d.w)+(p.k&&p.k[i[m]]||0):0,r&&r.d&&g[s](this.path(r.d).attr({fill:"#000",stroke:"none",translation:[j,0]}))}g.scale(l,l,0,b).translate(a,(f||16)/2)}return g},e.format=function(a){var b=e.is(arguments[1],"array")?[0][r](arguments[1]):arguments,c=/\{(\d+)\}/g;return a&&e.is(a,"string")&&b[o]-1&&(a=a[E](c,function(a,c){return b[++c]==null?h:b[c]})),a||h},e.ninja=function(){var a=c.Raphael,b;if(d.was)c.Raphael=d.is;else try{delete c.Raphael}catch(e){c.Raphael=b}return a},e.el=ba[k],e}(),define("vendor/raphael",function(){}),function(){function i(a){var b=a.currentTarget||a.srcElement,c,g,h;if(a.type==="load"||d.test(b.readyState)){g=b.getAttribute("data-requiremodule"),f[g]=!0;for(c=0;h=e[c];c++)if(f[h.name])h.req([h.name],h.onLoad);else break;c>0&&e.splice(0,c),setTimeout(function(){b.parentNode.removeChild(b)},15)}}function j(a){var b,c,d;a.setAttribute("data-orderloaded","loaded");for(b=0;d=h[b];b++){c=g[d];if(c&&c.getAttribute("data-orderloaded")==="loaded")delete g[d],require.addScriptToDom(c);else break}b>0&&h.splice(0,b)}var a=typeof document!="undefined"&&typeof window!="undefined"&&document.createElement("script"),b=a&&(a.async||window.opera&&Object.prototype.toString.call(window.opera)==="[object Opera]"||"MozAppearance"in document.documentElement.style),c=a&&a.readyState==="uninitialized",d=/^(complete|loaded)$/,e=[],f={},g={},h=[];a=null,define("order",{version:"1.0.0",load:function(a,d,f,k){var l=d.nameToUrl(a,null),m,n;require.s.skipAsync[l]=!0,b||k.isBuild?d([a],f):c?(n=require.s.contexts._,!n.urlFetched[l]&&!n.loaded[a]&&(n.urlFetched[l]=!0,require.resourcesReady(!1),n.scriptCount+=1,m=require.attach(l,n,a,null,null,j),g[a]=m,h.push(a)),d([a],f)):d.specified(a)?d([a],f):(e.push({name:a,req:d,onLoad:f}),require.attach(l,null,a,i,"script/cache"))}})}(),function(){Raphael.fn.g=Raphael.fn.g||{},Raphael.fn.g.markers={disc:"disc",o:"disc",flower:"flower",f:"flower",diamond:"diamond",d:"diamond",square:"square",s:"square",triangle:"triangle",t:"triangle",star:"star","*":"star",cross:"cross",x:"cross",plus:"plus","+":"plus",arrow:"arrow","->":"arrow"},Raphael.fn.g.shim={stroke:"none",fill:"#000","fill-opacity":0},Raphael.fn.g.txtattr={font:"12px Arial, sans-serif"},Raphael.fn.g.colors=[];var a=[.6,.2,.05,.1333,.75,0];for(var b=0;b<10;b++)b<a.length?Raphael.fn.g.colors.push("hsb("+a[b]+", .75, .75)"):Raphael.fn.g.colors.push("hsb("+a[b-a.length]+", 1, .5)");Raphael.fn.g.text=function(a,b,c){return this.text(a,b,c).attr(this.g.txtattr)},Raphael.fn.g.labelise=function(a,b,c){return a?(a+"").replace(/(##+(?:\.#+)?)|(%%+(?:\.%+)?)/g,function(a,d,e){if(d)return(+b).toFixed(d.replace(/^#+\.?/g,"").length);if(e)return(b*100/c).toFixed(e.replace(/^%+\.?/g,"").length)+"%"}):(+b).toFixed(0)},Raphael.fn.g.finger=function(a,b,c,d,e,f,g){if(e&&!d||!e&&!c)return g?"":this.path();f={square:"square",sharp:"sharp",soft:"soft"}[f]||"round";var h;d=Math.round(d),c=Math.round(c),a=Math.round(a),b=Math.round(b);switch(f){case"round":if(!e){var i=Math.floor(d/2);c<i?(i=c,h=["M",a+.5,b+.5-Math.floor(d/2),"l",0,0,"a",i,Math.floor(d/2),0,0,1,0,d,"l",0,0,"z"]):h=["M",a+.5,b+.5-i,"l",c-i,0,"a",i,i,0,1,1,0,d,"l",i-c,0,"z"]}else{var i=Math.floor(c/2);d<i?(i=d,h=["M",a-Math.floor(c/2),b,"l",0,0,"a",Math.floor(c/2),i,0,0,1,c,0,"l",0,0,"z"]):h=["M",a-i,b,"l",0,i-d,"a",i,i,0,1,1,c,0,"l",0,d-i,"z"]}break;case"sharp":if(!e){var j=Math.floor(d/2);h=["M",a,b+j,"l",0,-d,Math.max(c-j,0),0,Math.min(j,c),j,-Math.min(j,c),j+(j*2<d),"z"]}else{var j=Math.floor(c/2);h=["M",a+j,b,"l",-c,0,0,-Math.max(d-j,0),j,-Math.min(j,d),j,Math.min(j,d),j,"z"]}break;case"square":e?h=["M",a+Math.floor(c/2),b,"l",1-c,0,0,-d,c-1,0,"z"]:h=["M",a,b+Math.floor(d/2),"l",0,-d,c,0,0,d,"z"];break;case"soft":var i;e?(i=Math.min(Math.round(c/5),d),h=["M",a-Math.floor(c/2),b,"l",0,i-d,"a",i,i,0,0,1,i,-i,"l",c-2*i,0,"a",i,i,0,0,1,i,i,"l",0,d-i,"z"]):(i=Math.min(c,Math.round(d/5)),h=["M",a+.5,b+.5-Math.floor(d/2),"l",c-i,0,"a",i,i,0,0,1,i,i,"l",0,d-i*2,"a",i,i,0,0,1,-i,i,"l",i-c,0,"z"])}return g?h.join(","):this.path(h)},Raphael.fn.g.disc=function(a,b,c){return this.circle(a,b,c)},Raphael.fn.g.line=function(a,b,c){return this.rect(a-c,b-c/5,2*c,2*c/5)},Raphael.fn.g.square=function(a,b,c){return c*=.7,this.rect(a-c,b-c,2*c,2*c)},Raphael.fn.g.triangle=function(a,b,c){return c*=1.75,this.path("M".concat(a,",",b,"m0-",c*.58,"l",c*.5,",",c*.87,"-",c,",0z"))},Raphael.fn.g.diamond=function(a,b,c){return this.path(["M",a,b-c,"l",c,c,-c,c,-c,-c,c,-c,"z"])},Raphael.fn.g.flower=function(a,b,c,d){c*=1.25;var e=c,f=e*.5;d=+d<3||!d?5:d;var g=["M",a,b+f,"Q"],h;for(var i=1;i<d*2+1;i++)h=i%2?e:f,g=g.concat([+(a+h*Math.sin(i*Math.PI/d)).toFixed(3),+(b+h*Math.cos(i*Math.PI/d)).toFixed(3)]);return g.push("z"),this.path(g.join(","))},Raphael.fn.g.star=function(a,b,c,d){d=d||c*.5;var e=["M",a,b+d,"L"],f;for(var g=1;g<10;g++)f=g%2?c:d,e=e.concat([(a+f*Math.sin(g*Math.PI*.2)).toFixed(3),(b+f*Math.cos(g*Math.PI*.2)).toFixed(3)]);return e.push("z"),this.path(e.join(","))},Raphael.fn.g.cross=function(a,b,c){return c/=2.5,this.path("M".concat(a-c,",",b,"l",[-c,-c,c,-c,c,c,c,-c,c,c,-c,c,c,c,-c,c,-c,-c,-c,c,-c,-c,"z"]))},Raphael.fn.g.plus=function(a,b,c){return c/=2,this.path("M".concat(a-c/2,",",b-c/2,"l",[0,-c,c,0,0,c,c,0,0,c,-c,0,0,c,-c,0,0,-c,-c,0,0,-c,"z"]))},Raphael.fn.g.arrow=function(a,b,c){return this.path("M".concat(a-c*.7,",",b-c*.4,"l",[c*.6,0,0,-c*.4,c,c*.8,-c,c*.8,0,-c*.4,-c*.6,0],"z"))},Raphael.fn.g.tag=function(a,b,c,d,e){d=d||0,e=e==null?5:e,c=c==null?"$9.99":c;var f=.5522*e,g=this.set(),h=3;return g.push(this.path().attr({fill:"#000",stroke:"none"})),g.push(this.text(a,b,c).attr(this.g.txtattr).attr({fill:"#fff"})),g.update=function(){this.rotate(0,a,b);var c=this[1].getBBox();if(c.height<e*2){var g=Math.sqrt(Math.pow(e+h,2)-Math.pow(c.height/2+h,2));this[0].attr({path:["M",a,b+e,"c",-f,0,-e,f-e,-e,-e,0,-f,e-f,-e,e,-e,f,0,e,e-f,e,e,0,f,f-e,e,-e,e,"M",a+g,b-c.height/2-h,"a",e+h,e+h,0,1,0,0,c.height+2*h,"l",e+h-g+c.width+2*h,0,0,-c.height-2*h,"L",a+g,b-c.height/2-h].join(",")})}else this[0].attr({path:["M",a,b+e,"a",e,e,0,1,1,0,-e*2,e,e,0,1,1,0,e*2,"m",0,-e*2-h,"a",e+h,e+h,0,1,0,0,(e+h)*2,"L",a+e+h,b+c.height/2+h,"l",c.width+2*h,0,0,-c.height-2*h,-c.width-2*h,0,"L",a,b-e-h].join(",")});return this[1].attr({x:a+e+h+c.width/2,y:b}),d=(360-d)%360,this.rotate(d,a,b),d>90&&d<270&&this[1].attr({x:a-e-h-c.width/2,y:b,rotation:[180+d,a,b]}),this},g.update(),g},Raphael.fn.g.popupit=function(a,b,c,d,e){d=d==null?2:d,e=e||5,a=Math.round(a)+.5,b=Math.round(b)+.5;var f=c.getBBox(),g=Math.round(f.width/2),h=Math.round(f.height/2),i=[0,g+e*2,0,-g-e*2],j=[-h*2-e*3,-h-e,0,-h-e],k=["M",a-i[d],b-j[d],"l",-e,(d==2)*-e,-Math.max(g-e,0),0,"a",e,e,0,0,1,-e,-e,"l",0,-Math.max(h-e,0),(d==3)*-e,-e,(d==3)*e,-e,0,-Math.max(h-e,0),"a",e,e,0,0,1,e,-e,"l",Math.max(g-e,0),0,e,!d*-e,e,!d*e,Math.max(g-e,0),0,"a",e,e,0,0,1,e,e,"l",0,Math.max(h-e,0),(d==1)*e,e,(d==1)*-e,e,0,Math.max(h-e,0),"a",e,e,0,0,1,-e,e,"l",-Math.max(g-e,0),0,"z"].join(","),l=[{x:a,y:b+e*2+h},{x:a-e*2-g,y:b},{x:a,y:b-e*2-h},{x:a+e*2+g,y:b}][d];return c.translate(l.x-g-f.x,l.y-h-f.y),this.path(k).attr({fill:"#000",stroke:"none"}).insertBefore(c.node?c:c[0])},Raphael.fn.g.popup=function(a,b,c,d,e){d=d==null?2:d,e=e||5,c=c||"$9.99";var f=this.set(),g=3;return f.push(this.path().attr({fill:"#000",stroke:"none"})),f.push(this.text(a,b,c).attr(this.g.txtattr).attr({fill:"#fff"})),f.update=function(c,f,g){c=c||a,f=f||b;var h=this[1].getBBox(),i=h.width/2,j=h.height/2,k=[0,i+e*2,0,-i-e*2],l=[-j*2-e*3,-j-e,0,-j-e],m=["M",c-k[d],f-l[d],"l",-e,(d==2)*-e,-Math.max(i-e,0),0,"a",e,e,0,0,1,-e,-e,"l",0,-Math.max(j-e,0),(d==3)*-e,-e,(d==3)*e,-e,0,-Math.max(j-e,0),"a",e,e,0,0,1,e,-e,"l",Math.max(i-e,0),0,e,!d*-e,e,!d*e,Math.max(i-e,0),0,"a",e,e,0,0,1,e,e,"l",0,Math.max(j-e,0),(d==1)*e,e,(d==1)*-e,e,0,Math.max(j-e,0),"a",e,e,0,0,1,-e,e,"l",-Math.max(i-e,0),0,"z"].join(","),n=[{x:c,y:f+e*2+j},{x:c-e*2-i,y:f},{x:c,y:f-e*2-j},{x:c+e*2+i,y:f}][d];return g?(this[0].animate({path:m},500,">"),this[1].animate(n,500,">")):(this[0].attr({path:m}),this[1].attr(n)),this},f.update(a,b)},Raphael.fn.g.flag=function(a,b,c,d){d=d||0,c=c||"$9.99";var e=this.set(),f=3;return e.push(this.path().attr({fill:"#000",stroke:"none"})),e.push(this.text(a,b,c).attr(this.g.txtattr).attr({fill:"#fff"})),e.update=function(a,b){this.rotate(0,a,b);var c=this[1].getBBox(),e=c.height/2;return this[0].attr({path:["M",a,b,"l",e+f,-e-f,c.width+2*f,0,0,c.height+2*f,-c.width-2*f,0,"z"].join(",")}),this[1].attr({x:a+e+f+c.width/2,y:b}),d=360-d,this.rotate(d,a,b),d>90&&d<270&&this[1].attr({x:a-r-f-c.width/2,y:b,rotation:[180+d,a,b]}),this},e.update(a,b)},Raphael.fn.g.label=function(a,b,c){var d=this.set();return d.push(this.rect(a,b,10,10).attr({stroke:"none",fill:"#000"})),d.push(this.text(a,b,c).attr(this.g.txtattr).attr({fill:"#fff"})),d.update=function(){var a=this[1].getBBox(),b=Math.min(a.width+10,a.height+10)/2;this[0].attr({x:a.x-b/2,y:a.y-b/2,width:a.width+b,height:a.height+b,r:b})},d.update(),d},Raphael.fn.g.labelit=function(a){var b=a.getBBox(),c=Math.min(20,b.width+10,b.height+10)/2;return this.rect(b.x-c/2,b.y-c/2,b.width+c,b.height+c,c).attr({stroke:"none",fill:"#000"}).insertBefore(a[0])},Raphael.fn.g.drop=function(a,b,c,d,e){d=d||30,e=e||0;var f=this.set();return f.push(this.path(["M",a,b,"l",d,0,"A",d*.4,d*.4,0,1,0,a+d*.7,b-d*.7,"z"]).attr({fill:"#000",stroke:"none",rotation:[22.5-e,a,b]})),e=(e+90)*Math.PI/180,f.push(this.text(a+d*Math.sin(e),b+d*Math.cos(e),c).attr(this.g.txtattr).attr({"font-size":d*12/30,fill:"#fff"})),f.drop=f[0],f.text=f[1],f},Raphael.fn.g.blob=function(a,b,c,d,e){d=(+d+1?d:45)+90,e=e||12;var f=Math.PI/180,g=e*12/12,h=this.set();return h.push(this.path().attr({fill:"#000",stroke:"none"})),h.push(this.text(a+e*Math.sin(d*f),b+e*Math.cos(d*f)-g/2,c).attr(this.g.txtattr).attr({"font-size":g,fill:"#fff"})),h.update=function(c,h,i){c=c||a,h=h||b;var j=this[1].getBBox(),k=Math.max(j.width+g,e*25/12),l=Math.max(j.height+g,e*25/12),m=c+e*Math.sin((d-22.5)*f),n=h+e*Math.cos((d-22.5)*f),o=c+e*Math.sin((d+22.5)*f),p=h+e*Math.cos((d+22.5)*f),q=(o-m)/2,r=(p-n)/2,s=k/2,t=l/2,u=-Math.sqrt(Math.abs(s*s*t*t-s*s*r*r-t*t*q*q)/(s*s*r*r+t*t*q*q)),v=u*s*r/t+(o+m)/2,w=u*-t*q/s+(p+n)/2;return i?this.animate({x:v,y:w,path:["M",a,b,"L",o,p,"A",s,t,0,1,1,m,n,"z"].join(",")},500,">"):this.attr({x:v,y:w,path:["M",a,b,"L",o,p,"A",s,t,0,1,1,m,n,"z"].join(",")}),this},h.update(a,b),h},Raphael.fn.g.colorValue=function(a,b,c,d){return"hsb("+[Math.min((1-a/b)*.4,1),c||.75,d||.75]+")"},Raphael.fn.g.snapEnds=function(a,b,c){function f(a){return Math.abs(a-.5)<.25?Math.floor(a)+.5:Math.round(a)}var d=a,e=b;if(d==e)return{from:d,to:e,power:0};var g=(e-d)/c,h=Math.floor(g),i=h,j=0;if(h){while(i)j--,i=Math.floor(g*Math.pow(10,j))/Math.pow(10,j);j++}else{while(!h)j=j||1,h=Math.floor(g*Math.pow(10,j))/Math.pow(10,j),j++;j&&j--}var e=f(b*Math.pow(10,j))/Math.pow(10,j);e<b&&(e=f((b+.5)*Math.pow(10,j))/Math.pow(10,j));var d=f((a-(j>0?0:.5))*Math.pow(10,j))/Math.pow(10,j);return{from:d,to:e,power:j}},Raphael.fn.g.axis=function(a,b,c,e,f,g,h,i,j,k){k=k==null?2:k,j=j||"t",g=g||10;var l=j=="|"||j==" "?["M",a+.5,b,"l",0,.001]:h==1||h==3?["M",a+.5,b,"l",0,-c]:["M",a,b+.5,"l",c,0],m=this.g.snapEnds(e,f,g),n=m.from,o=m.to,p=m.power,q=0,r=this.set();d=(o-n)/g;var s=n,t=p>0?p:0;x=c/g;if(+h==1||+h==3){var u=b,v=(h-1?1:-1)*(k+3+!!(h-1));while(u>=b-c)j!="-"&&j!=" "&&(l=l.concat(["M",a-(j=="+"||j=="|"?k:!(h-1)*k*2),u+.5,"l",k*2+1,0])),r.push(this.text(a+v,u,i&&i[q++]||(Math.round(s)==s?s:+s.toFixed(t))).attr(this.g.txtattr).attr({"text-anchor":h-1?"start":"end"})),s+=d,u-=x;Math.round(u+x-(b-c))&&(j!="-"&&j!=" "&&(l=l.concat(["M",a-(j=="+"||j=="|"?k:!(h-1)*k*2),b-c+.5,"l",k*2+1,0])),r.push(this.text(a+v,b-c,i&&i[q]||(Math.round(s)==s?s:+s.toFixed(t))).attr(this.g.txtattr).attr({"text-anchor":h-1?"start":"end"})))}else{var w=a,s=n,t=p>0?p:0,v=(h?-1:1)*(k+9+!h),x=c/g,y=0,z=0;while(w<=a+c){j!="-"&&j!=" "&&(l=l.concat(["M",w+.5,b-(j=="+"?k:!!h*k*2),"l",0,k*2+1])),r.push(y=this.text(w,b+v,i&&i[q++]||(Math.round(s)==s?s:+s.toFixed(t))).attr(this.g.txtattr));var A=y.getBBox();z<A.x-5?z=A.x+A.width:r.pop(r.length-1).remove(),s+=d,w+=x}Math.round(w-x-a-c)&&(j!="-"&&j!=" "&&(l=l.concat(["M",a+c+.5,b-(j=="+"?k:!!h*k*2),"l",0,k*2+1])),r.push(this.text(a+c,b+v,i&&i[q]||(Math.round(s)==s?s:+s.toFixed(t))).attr(this.g.txtattr)))}var B=this.path(l);return B.text=r,B.all=this.set([B,r]),B.remove=function(){this.text.remove(),this.constructor.prototype.remove.call(this)},B},Raphael.el.lighter=function(a){a=a||2;var b=[this.attrs.fill,this.attrs.stroke];this.fs=this.fs||[b[0],b[1]],b[0]=Raphael.rgb2hsb(Raphael.getRGB(b[0]).hex),b[1]=Raphael.rgb2hsb(Raphael.getRGB(b[1]).hex),b[0].b=Math.min(b[0].b*a,1),b[0].s=b[0].s/a,b[1].b=Math.min(b[1].b*a,1),b[1].s=b[1].s/a,this.attr({fill:"hsb("+[b[0].h,b[0].s,b[0].b]+")",stroke:"hsb("+[b[1].h,b[1].s,b[1].b]+")"})},Raphael.el.darker=function(a){a=a||2;var b=[this.attrs.fill,this.attrs.stroke];this.fs=this.fs||[b[0],b[1]],b[0]=Raphael.rgb2hsb(Raphael.getRGB(b[0]).hex),b[1]=Raphael.rgb2hsb(Raphael.getRGB(b[1]).hex),b[0].s=Math.min(b[0].s*a,1),b[0].b=b[0].b/a,b[1].s=Math.min(b[1].s*a,1),b[1].b=b[1].b/a,this.attr({fill:"hsb("+[b[0].h,b[0].s,b[0].b]+")",stroke:"hsb("+[b[1].h,b[1].s,b[1].b]+")"})},Raphael.el.original=function(){this.fs&&(this.attr({fill:this.fs[0],stroke:this.fs[1]}),delete this.fs)}}(),define("vendor/g.raphael/g.raphael",function(){}),Raphael.fn.g.piechart=function(a,b,c,d,e){e=e||{};var f=this,g=[],h=this.set(),i=this.set(),j=this.set(),k=[],l=d.length,m=0,n=0,o=0,p=9,q=!0;i.covers=h;if(l==1)j.push(this.circle(a,b,c).attr({fill:this.g.colors[0],stroke:e.stroke||"#fff","stroke-width":e.strokewidth==null?1:e.strokewidth})),h.push(this.circle(a,b,c).attr(this.g.shim)),n=d[0],d[0]={value:d[0],order:0,valueOf:function(){return this.value}},j[0].middle={x:a,y:b},j[0].mangle=180;else{function r(a,b,c,d,e,f){var g=Math.PI/180,h=a+c*Math.cos(-d*g),i=a+c*Math.cos(-e*g),j=a+c/2*Math.cos(-(d+(e-d)/2)*g),k=b+c*Math.sin(-d*g),l=b+c*Math.sin(-e*g),m=b+c/2*Math.sin(-(d+(e-d)/2)*g),n=["M",a,b,"L",h,k,"A",c,c,0,+(Math.abs(e-d)>180),1,i,l,"z"];return n.middle={x:j,y:m},n}for(var s=0;s<l;s++)n+=d[s],d[s]={value:d[s],order:s,valueOf:function(){return this.value}};d.sort(function(a,b){return b.value-a.value});for(var s=0;s<l;s++)q&&d[s]*360/n<=1.5&&(p=s,q=!1),s>p&&(q=!1,d[p].value+=d[s],d[p].others=!0,o=d[p].value);l=Math.min(p+1,d.length),o&&d.splice(l)&&(d[p].others=!0);for(var s=0;s<l;s++){var t=m-360*d[s]/n/2;s||(m=90-t,t=m-360*d[s]/n/2);if(e.init)var u=r(a,b,1,m,m-360*d[s]/n).join(",");var v=r(a,b,c,m,m-=360*d[s]/n),w=this.path(e.init?u:v).attr({fill:e.colors&&e.colors[s]||this.g.colors[s]||"#666",stroke:e.stroke||"#fff","stroke-width":e.strokewidth==null?1:e.strokewidth,"stroke-linejoin":"round"});w.value=d[s],w.middle=v.middle,w.mangle=t,g.push(w),j.push(w),e.init&&w.animate({path:v.join(",")},+e.init-1||1e3,">")}for(var s=0;s<l;s++){var w=f.path(g[s].attr("path")).attr(this.g.shim);e.href&&e.href[s]&&w.attr({href:e.href[s]}),w.attr=function(){},h.push(w),j.push(w)}}i.hover=function(e,f){f=f||function(){};var g=this;for(var i=0;i<l;i++)(function(h,i,j){var k={sector:h,cover:i,cx:a,cy:b,mx:h.middle.x,my:h.middle.y,mangle:h.mangle,r:c,value:d[j],total:n,label:g.labels&&g.labels[j]};i.mouseover(function(){e.call(k)}).mouseout(function(){f.call(k)})})(j[i],h[i],i);return this},i.each=function(e){var f=this;for(var g=0;g<l;g++)(function(g,h,i){var j={sector:g,cover:h,cx:a,cy:b,x:g.middle.x,y:g.middle.y,mangle:g.mangle,r:c,value:d[i],total:n,label:f.labels&&f.labels[i]};e.call(j)})(j[g],h[g],g);return this},i.click=function(e){var f=this;for(var g=0;g<l;g++)(function(g,h,i){var j={sector:g,cover:h,cx:a,cy:b,mx:g.middle.x,my:g.middle.y,mangle:g.mangle,r:c,value:d[i],total:n,label:f.labels&&f.labels[i]};h.click(function(){e.call(j)})})(j[g],h[g],g);return this},i.inject=function(a){a.insertBefore(h[0])};var x=function(g,k,m,o){var p=a+c+c/5,q=b,r=q+10;g=g||[],o=o&&o.toLowerCase&&o.toLowerCase()||"east",m=f.g.markers[m&&m.toLowerCase()]||"disc",i.labels=f.set();for(var s=0;s<l;s++){var t=j[s].attr("fill"),u=d[s].order,v;d[s].others&&(g[u]=k||"Others"),g[u]=f.g.labelise(g[u],d[s],n),i.labels.push(f.set()),i.labels[s].push(f.g[m](p+5,r,5).attr({fill:t,stroke:"none"})),i.labels[s].push(v=f.text(p+20,r,g[u]||d[u]).attr(f.g.txtattr).attr({fill:e.legendcolor||"#000","text-anchor":"start"})),h[s].label=i.labels[s],r+=v.getBBox().height*1.2}var w=i.labels.getBBox(),x={east:[0,-w.height/2],west:[-w.width-2*c-20,-w.height/2],north:[-c-w.width/2,-c-w.height-10],south:[-c-w.width/2,c+10]}[o];i.labels.translate.apply(i.labels,x),i.push(i.labels)};return e.legend&&x(e.legend,e.legendothers,e.legendmark,e.legendpos),i.push(j,h),i.series=j,i.covers=h,i},define("vendor/g.raphael/g.pie",function(){}),Raphael.fn.g.barchart=function(a,b,c,d,e,f){f=f||{};var g={round:"round",sharp:"sharp",soft:"soft"}[f.type]||"square",h=parseFloat(f.gutter||"20%"),i=this.set(),j=this.set(),k=this.set(),l=this.set(),m=Math.max.apply(Math,e),n=[],o=this,p=0,q=f.colors||this.g.colors,r=e.length;if(this.raphael.is(e[0],"array")){m=[],p=r,r=0;for(var s=e.length;s--;)j.push(this.set()),m.push(Math.max.apply(Math,e[s])),r=Math.max(r,e[s].length);if(f.stacked)for(var s=r;s--;){var t=0;for(var u=e.length;u--;)t+=+e[u][s]||0;n.push(t)}for(var s=e.length;s--;)if(e[s].length<r)for(var u=r;u--;)e[s].push(0);m=Math.max.apply(Math,f.stacked?n:m)}m=f.to||m;var v=c/(r*(100+h)+h)*100,w=v*h/100,x=f.vgutter==null?20:f.vgutter,y=[],z=a+w,A=(d-2*x)/m;f.stretch||(w=Math.round(w),v=Math.floor(v)),!f.stacked&&(v/=p||1);for(var s=0;s<r;s++){y=[];for(var u=0;u<(p||1);u++){var B=Math.round((p?e[u][s]:e[s])*A),C=b+d-x-B,D=this.g.finger(Math.round(z+v/2),C+B,v,B,!0,g).attr({stroke:q[p?u:s],fill:q[p?u:s]});p?j[u].push(D):j.push(D),D.y=C,D.x=Math.round(z+v/2),D.w=v,D.h=B,D.value=p?e[u][s]:e[s],f.stacked?y.push(D):z+=v}if(f.stacked){var E;l.push(E=this.rect(y[0].x-y[0].w/2,b,v,d).attr(this.g.shim)),E.bars=this.set();var F=0;for(var G=y.length;G--;)y[G].toFront();for(var G=0,H=y.length;G<H;G++){var D=y[G],I,B=(F+D.value)*A,J=this.g.finger(D.x,b+d-x-!!F*.5,v,B,!0,g,1);E.bars.push(D),F&&D.attr({path:J}),D.h=B,D.y=b+d-x-!!F*.5-B,k.push(I=this.rect(D.x-D.w/2,D.y,v,D.value*A).attr(this.g.shim)),I.bar=D,I.value=D.value,F+=D.value}z+=v}z+=w}l.toFront(),z=a+w;if(!f.stacked)for(var s=0;s<r;s++){for(var u=0;u<(p||1);u++){var I;k.push(I=this.rect(Math.round(z),b+x,v,d-x).attr(this.g.shim)),I.bar=p?j[u][s]:j[s],I.value=I.bar.value,z+=v}z+=w}return i.label=function(a,c){a=a||[],this.labels=o.set();var g,h=-Infinity;if(f.stacked)for(var i=0;i<r;i++){var l=0;for(var n=0;n<(p||1);n++){l+=p?e[n][i]:e[i];if(n==p-1){var q=o.g.labelise(a[i],l,m);g=o.g.text(j[i*(p||1)+n].x,b+d-x/2,q).insertBefore(k[i*(p||1)+n]);var s=g.getBBox();s.x-7<h?g.remove():(this.labels.push(g),h=s.x+s.width)}}}else for(var i=0;i<r;i++)for(var n=0;n<(p||1);n++){var q=o.g.labelise(p?a[n]&&a[n][i]:a[i],p?e[n][i]:e[i],m);g=o.g.text(j[i*(p||1)+n].x,c?b+d-x/2:j[i*(p||1)+n].y-10,q).insertBefore(k[i*(p||1)+n]);var s=g.getBBox();s.x-7<h?g.remove():(this.labels.push(g),h=s.x+s.width)}return this},i.hover=function(a,b){return l.hide(),k.show(),k.mouseover(a).mouseout(b),this},i.hoverColumn=function(a,b){return k.hide(),l.show(),b=b||function(){},l.mouseover(a).mouseout(b),this},i.click=function(a){return l.hide(),k.show(),k.click(a),this},i.each=function(a){if(!Raphael.is(a,"function"))return this;for(var b=k.length;b--;)a.call(k[b]);return this},i.eachColumn=function(a){if(!Raphael.is(a,"function"))return this;for(var b=l.length;b--;)a.call(l[b]);return this},i.clickColumn=function(a){return k.hide(),l.show(),l.click(a),this},i.push(j,k,l),i.bars=j,i.covers=k,i},Raphael.fn.g.hbarchart=function(a,b,c,d,e,f){f=f||{};var g={round:"round",sharp:"sharp",soft:"soft"}[f.type]||"square",h=parseFloat(f.gutter||"20%"),i=this.set(),j=this.set(),k=this.set(),l=this.set(),m=Math.max.apply(Math,e),n=[],o=this,p=0,q=f.colors||this.g.colors,r=e.length;if(this.raphael.is(e[0],"array")){m=[],p=r,r=0;for(var s=e.length;s--;)j.push(this.set()),m.push(Math.max.apply(Math,e[s])),r=Math.max(r,e[s].length);if(f.stacked)for(var s=r;s--;){var t=0;for(var u=e.length;u--;)t+=+e[u][s]||0;n.push(t)}for(var s=e.length;s--;)if(e[s].length<r)for(var u=r;u--;)e[s].push(0);m=Math.max.apply(Math,f.stacked?n:m)}m=f.to||m;var v=Math.floor(d/(r*(100+h)+h)*100),w=Math.floor(v*h/100),x=[],y=b+w,z=(c-1)/m;!f.stacked&&(v/=p||1);for(var s=0;s<r;s++){x=[];for(var u=0;u<(p||1);u++){var A=p?e[u][s]:e[s],B=this.g.finger(a,y+v/2,Math.round(A*z),v-1,!1,g).attr({stroke:q[p?u:s],fill:q[p?u:s]});p?j[u].push(B):j.push(B),B.x=a+Math.round(A*z),B.y=y+v/2,B.w=Math.round(A*z),B.h=v,B.value=+A,f.stacked?x.push(B):y+=v}if(f.stacked){var C=this.rect(a,x[0].y-x[0].h/2,c,v).attr(this.g.shim);l.push(C),C.bars=this.set();var D=0;for(var E=x.length;E--;)x[E].toFront();for(var E=0,F=x.length;E<F;E++){var B=x[E],G,A=Math.round((D+B.value)*z),H=this.g.finger(a,B.y,A,v-1,!1,g,1);C.bars.push(B),D&&B.attr({path:H}),B.w=A,B.x=a+A,k.push(G=this.rect(a+D*z,B.y-B.h/2,B.value*z,v).attr(this.g.shim)),G.bar=B,D+=B.value}y+=v}y+=w}l.toFront(),y=b+w;if(!f.stacked)for(var s=0;s<r;s++){for(var u=0;u<p;u++){var G=this.rect(a,y,c,v).attr(this.g.shim);k.push(G),G.bar=j[u][s],y+=v}y+=w}return i.label=function(b,c){b=b||[],this.labels=o.set();for(var d=0;d<r;d++)for(var f=0;f<p;f++){var g=o.g.labelise(p?b[f]&&b[f][d]:b[d],p?e[f][d]:e[d],m),h=c?j[d*(p||1)+f].x-v/2+3:a+5,i=c?"end":"start",l;this.labels.push(l=o.g.text(h,j[d*(p||1)+f].y,g).attr({"text-anchor":i}).insertBefore(k[0])),l.getBBox().x<a+5?l.attr({x:a+5,"text-anchor":"start"}):j[d*(p||1)+f].label=l}return this},i.hover=function(a,b){return l.hide(),k.show(),b=b||function(){},k.mouseover(a).mouseout(b),this},i.hoverColumn=function(a,b){return k.hide(),l.show(),b=b||function(){},l.mouseover(a).mouseout(b),this},i.each=function(a){if(!Raphael.is(a,"function"))return this;for(var b=k.length;b--;)a.call(k[b]);return this},i.eachColumn=function(a){if(!Raphael.is(a,"function"))return this;for(var b=l.length;b--;)a.call(l[b]);return this},i.click=function(a){return l.hide(),k.show(),k.click(a),this},i.clickColumn=function(a){return k.hide(),l.show(),l.click(a),this},i.push(j,k,l),i.bars=j,i.covers=k,i},define("vendor/g.raphael/g.bar",function(){}),Raphael.fn.g.dotchart=function(a,b,c,d,e,f,g,h){function i(e){+e[0]&&(e[0]=x.g.axis(a+m,b+m,c-2*m,k,l,h.axisxstep||Math.floor((c-2*m)/20),2,h.axisxlabels||null,h.axisxtype||"t")),+e[1]&&(e[1]=x.g.axis(a+c-m,b+d-m,d-2*m,o,p,h.axisystep||Math.floor((d-2*m)/20),3,h.axisylabels||null,h.axisytype||"t")),+e[2]&&(e[2]=x.g.axis(a+m,b+d-m+B,c-2*m,k,l,h.axisxstep||Math.floor((c-2*m)/20),0,h.axisxlabels||null,h.axisxtype||"t")),+e[3]&&(e[3]=x.g.axis(a+m-B,b+d-m,d-2*m,o,p,h.axisystep||Math.floor((d-2*m)/20),1,h.axisylabels||null,h.axisytype||"t"))}h=h||{};var j=this.g.snapEnds(Math.min.apply(Math,e),Math.max.apply(Math,e),e.length-1),k=j.from,l=j.to,m=h.gutter||10,n=this.g.snapEnds(Math.min.apply(Math,f),Math.max.apply(Math,f),f.length-1),o=n.from,p=n.to,q=Math.max(e.length,f.length,g.length),r=this.g.markers[h.symbol]||"disc",s=this.set(),t=this.set(),u=h.max||100,v=Math.max.apply(Math,g),w=[],x=this,y=Math.sqrt(v/Math.PI)*2/u;for(var z=0;z<q;z++)w[z]=Math.min(Math.sqrt(g[z]/Math.PI)*2/y,u);m=Math.max.apply(Math,w.concat(m));var A=this.set(),B=Math.max.apply(Math,w);if(h.axis){var C=(h.axis+"").split(/[,\s]+/);i(C);var D=[],E=[];for(var z=0,F=C.length;z<F;z++){var G=C[z].all?C[z].all.getBBox()[["height","width"][z%2]]:0;D[z]=G+m,E[z]=G}m=Math.max.apply(Math,D.concat(m));for(var z=0,F=C.length;z<F;z++)C[z].all&&(C[z].remove(),C[z]=1);i(C);for(var z=0,F=C.length;z<F;z++)C[z].all&&A.push(C[z].all);s.axis=A}var H=(c-m*2)/(l-k||1),I=(d-m*2)/(p-o||1);for(var z=0,F=f.length;z<F;z++){var J=this.raphael.is(r,"array")?r[z]:r,K=a+m+(e[z]-k)*H,L=b+d-m-(f[z]-o)*I;J&&w[z]&&t.push(this.g[J](K,L,w[z]).attr({fill:h.heat?this.g.colorValue(w[z],B):Raphael.fn.g.colors[0],"fill-opacity":h.opacity?w[z]/u:1,stroke:"none"}))}var M=this.set();for(var z=0,F=f.length;z<F;z++){var K=a+m+(e[z]-k)*H,L=b+d-m-(f[z]-o)*I;M.push(this.circle(K,L,B).attr(this.g.shim)),h.href&&h.href[z]&&M[z].attr({href:h.href[z]}),M[z].r=+w[z].toFixed(3),M[z].x=+K.toFixed(3),M[z].y=+L.toFixed(3),M[z].X=e[z],M[z].Y=f[z],M[z].value=g[z]||0,M[z].dot=t[z]}return s.covers=M,s.series=t,s.push(t,A,M),s.hover=function(a,b){return M.mouseover(a).mouseout(b),this},s.click=function(a){return M.click(a),this},s.each=function(a){if(!Raphael.is(a,"function"))return this;for(var b=M.length;b--;)a.call(M[b]);return this},s.href=function(a){var b;for(var c=M.length;c--;)b=M[c],b.X==a.x&&b.Y==a.y&&b.value==a.value&&b.attr({href:a.href})},s},define("vendor/g.raphael/g.dot",function(){}),Raphael.fn.g.linechart=function(a,b,c,d,e,f,g){function h(a,b){var c=a.length/b,d=0,e=c,f=0,g=[];while(d<a.length)e--,e<0?(f+=a[d]*(1+e),g.push(f/c),f=a[d++]*-e,e+=c):f+=a[d++];return g}function P(g){var h=[];for(var i=0,j=e.length;i<j;i++)h=h.concat(e[i]);h.sort();var k=[],m=[];for(var i=0,j=h.length;i<j;i++)h[i]!=h[i-1]&&k.push(h[i])&&m.push(a+n+(h[i]-l)*o);h=k,j=h.length;var p=g||w.set();for(var i=0;i<j;i++){var r=m[i]-(m[i]-(m[i-1]||a))/2,t=((m[i+1]||a+c)-m[i])/2+(m[i]-(m[i-1]||a))/2,u;g?u={}:p.push(u=w.rect(r-1,b,Math.max(t+1,1),d).attr({stroke:"none",fill:"#000",opacity:0})),u.values=[],u.symbols=w.set(),u.y=[],u.x=m[i],u.axis=h[i];for(var v=0,y=f.length;v<y;v++){k=e[v]||e[0];for(var A=0,B=k.length;A<B;A++)k[A]==h[i]&&(u.values.push(f[v][A]),u.y.push(b+d-n-(f[v][A]-q)*s),u.symbols.push(z.symbols[v][A]))}g&&g.call(u)}!g&&(x=p)}function Q(c){var g=c||w.set(),h;for(var i=0,j=f.length;i<j;i++)for(var k=0,m=f[i].length;k<m;k++){var p=a+n+((e[i]||e[0])[k]-l)*o,r=a+n+((e[i]||e[0])[k?k-1:1]-l)*o,t=b+d-n-(f[i][k]-q)*s;c?h={}:g.push(h=w.circle(p,t,Math.abs(r-p)/2).attr({stroke:"none",fill:"#000",opacity:0})),h.x=p,h.y=t,h.value=f[i][k],h.line=z.lines[i],h.shade=z.shades[i],h.symbol=z.symbols[i][k],h.symbols=z.symbols[i],h.axis=(e[i]||e[0])[k],c&&c.call(h)}!c&&(y=g)}g=g||{},this.raphael.is(e[0],"array")||(e=[e]),this.raphael.is(f[0],"array")||(f=[f]);var i=Array.prototype.concat.apply([],e),j=Array.prototype.concat.apply([],f),k=this.g.snapEnds(Math.min.apply(Math,i),Math.max.apply(Math,i),e[0].length-1),l=k.from,m=k.to,n=g.gutter||10,o=(c-n*2)/(m-l),p=this.g.snapEnds(Math.min.apply(Math,j),Math.max.apply(Math,j),f[0].length-1),q=p.from,r=p.to,s=(d-n*2)/(r-q),t=Math.max(e[0].length,f[0].length),u=g.symbol||"",v=g.colors||Raphael.fn.g.colors,w=this,x=null,y=null,z=this.set(),A=[];for(var B=0,C=f.length;B<C;B++)t=Math.max(t,f[B].length);var D=this.set();for(var B=0,C=f.length;B<C;B++)g.shade&&D.push(this.path().attr({stroke:"none",fill:v[B],opacity:g.nostroke?1:.3})),f[B].length>c-2*n&&(f[B]=h(f[B],c-2*n),t=c-2*n),e[B]&&e[B].length>c-2*n&&(e[B]=h(e[B],c-2*n));var E=this.set();if(g.axis){var F=(g.axis+"").split(/[,\s]+/);+F[0]&&E.push(this.g.axis(a+n,b+n,c-2*n,l,m,g.axisxstep||Math.floor((c-2*n)/20),2)),+F[1]&&E.push(this.g.axis(a+c-n,b+d-n,d-2*n,q,r,g.axisystep||Math.floor((d-2*n)/20),3)),+F[2]&&E.push(this.g.axis(a+n,b+d-n,c-2*n,l,m,g.axisxstep||Math.floor((c-2*n)/20),0)),+F[3]&&E.push(this.g.axis(a+n,b+d-n,d-2*n,q,r,g.axisystep||Math.floor((d-2*n)/20),1))}var G=this.set(),H=this.set(),I;for(var B=0,C=f.length;B<C;B++){g.nostroke||G.push(I=this.path().attr({stroke:v[B],"stroke-width":g.width||2,"stroke-linejoin":"round","stroke-linecap":"round","stroke-dasharray":g.dash||""}));var J=this.raphael.is(u,"array")?u[B]:u,K=this.set();A=[];for(var L=0,M=f[B].length;L<M;L++){var N=a+n+((e[B]||e[0])[L]-l)*o,O=b+d-n-(f[B][L]-q)*s;(Raphael.is(J,"array")?J[L]:J)&&K.push(this.g[Raphael.fn.g.markers[this.raphael.is(J,"array")?J[L]:J]](N,O,(g.width||2)*3).attr({fill:v[B],stroke:"none"})),A=A.concat([L?"L":"M",N,O])}H.push(K),g.shade&&D[B].attr({path:A.concat(["L",N,b+d-n,"L",a+n+((e[B]||e[0])[0]-l)*o,b+d-n,"z"]).join(",")}),!g.nostroke&&I.attr({path:A.join(",")})}return z.push(G,D,H,E,x,y),z.lines=G,z.shades=D,z.symbols=H,z.axis=E,z.hoverColumn=function(a,b){return!x&&P(),x.mouseover(a).mouseout(b),this},z.clickColumn=function(a){return!x&&P(),x.click(a),this},z.hrefColumn=function(a){var b=w.raphael.is(arguments[0],"array")?arguments[0]:arguments;if(!(arguments.length-1)&&typeof a=="object")for(var c in a)for(var d=0,e=x.length;d<e;d++)x[d].axis==c&&x[d].attr("href",a[c]);!x&&P();for(var d=0,e=b.length;d<e;d++)x[d]&&x[d].attr("href",b[d]);return this},z.hover=function(a,b){return!y&&Q(),y.mouseover(a).mouseout(b),this},z.click=function(a){return!y&&Q(),y.click(a),this},z.each=function(a){return Q(a),this},z.eachColumn=function(a){return P(a),this},z},define("vendor/g.raphael/g.line",function(){}),define("vendor/graphael",["vendor/raphael","order!vendor/g.raphael/g.raphael","order!vendor/g.raphael/g.pie","order!vendor/g.raphael/g.bar","order!vendor/g.raphael/g.dot","order!vendor/g.raphael/g.line"],function(){return Raphael}),define("vendor/jquery.scrollTo",["jquery"],function(a){function c(a){return typeof a=="object"?a:{top:a,left:a}}var b=a.scrollTo=function(b,c,d){a(window).scrollTo(b,c,d)};b.defaults={axis:"xy",duration:parseFloat(a.fn.jquery)<1.3?1:0},b.window=function(b){return a(window)._scrollable()},a.fn._scrollable=function(){return this.map(function(){var b=this,c=!b.nodeName||a.inArray(b.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!c)return b;var d=(b.contentWindow||b).document||b.ownerDocument||b;return a.browser.safari||d.compatMode=="BackCompat"?d.body:d.documentElement})},a.fn.scrollTo=function(d,e,f){return typeof e=="object"&&(f=e,e=0),typeof f=="function"&&(f={onAfter:f}),d=="max"&&(d=9e9),f=a.extend({},b.defaults,f),e=e||f.speed||f.duration,f.queue=f.queue&&f.axis.length>1,f.queue&&(e/=2),f.offset=c(f.offset),f.over=c(f.over),this._scrollable().each(function(){function m(a){h.animate(k,e,f.easing,a&&function(){a.call(this,d,f)})}var g=this,h=a(g),i=d,j,k={},l=h.is("html,body");switch(typeof i){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(i)){i=c(i);break}i=a(i,this);case"object":if(i.is||i.style)j=(i=a(i)).offset()}a.each(f.axis.split(""),function(a,c){var d=c=="x"?"Left":"Top",e=d.toLowerCase(),n="scroll"+d,o=g[n],p=b.max(g,c);if(j)k[n]=j[e]+(l?0:o-h.offset()[e]),f.margin&&(k[n]-=parseInt(i.css("margin"+d))||0,k[n]-=parseInt(i.css("border"+d+"Width"))||0),k[n]+=f.offset[e]||0,f.over[e]&&(k[n]+=i[c=="x"?"width":"height"]()*f.over[e]);else{var q=i[e];k[n]=q&&q.slice&&q.slice(-1)=="%"?parseFloat(q)/100*p:q}/^\d+$/.test(k[n])&&(k[n]=k[n]>0?Math.min(k[n],p):0),!a&&f.queue&&(o!=k[n]&&m(f.onAfterFirst),delete k[n])}),m(f.onAfter)}).end()},b.max=function(b,c){var d=c=="x"?"Width":"Height",e="scroll"+d;if(!a(b).is("html,body"))return b[e]-a(b)[d.toLowerCase()]();var f="client"+d,g=b.ownerDocument.documentElement,h=b.ownerDocument.body;return Math.max(g[e],h[e])-Math.min(g[f],h[f])}}),define("jqueryui/button",["jquery","jqueryui/core","jqueryui/widget","jquery.instructure_jquery_patches"],function(a,b,c,d){var e,f,g,h,i="ui-button ui-widget ui-state-default ui-corner-all",j="ui-state-hover ui-state-active ",k="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var b=a(this).find(":ui-button");setTimeout(function(){b.button("refresh")},1)},m=function(b){var c=b.name,d=b.form,e=a([]);return c&&(d?e=a(d).find("[name='"+c+"']"):e=a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form})),e};a.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",l),typeof this.options.disabled!="boolean"&&(this.options.disabled=this.element.propAttr("disabled")),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var b=this,c=this.options,d=this.type==="checkbox"||this.type==="radio",j="ui-state-hover"+(d?"":" ui-state-active"),k="ui-state-focus";c.label===null&&(c.label=this.buttonElement.html()),this.element.is(":disabled")&&(c.disabled=!0),this.buttonElement.addClass(i).attr("role","button").bind("mouseenter.button",function(){if(c.disabled)return;a(this).addClass("ui-state-hover"),this===e&&a(this).addClass("ui-state-active")}).bind("mouseleave.button",function(){if(c.disabled)return;a(this).removeClass(j)}).bind("click.button",function(a){c.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}),this.element.bind("focus.button",function(){b.buttonElement.addClass(k)}).bind("blur.button",function(){b.buttonElement.removeClass(k)}),d&&(this.element.bind("change.button",function(){if(h)return;b.refresh()}),this.buttonElement.bind("mousedown.button",function(a){if(c.disabled)return;h=!1,f=a.pageX,g=a.pageY}).bind("mouseup.button",function(a){if(c.disabled)return;if(f!==a.pageX||g!==a.pageY)h=!0})),this.type==="checkbox"?this.buttonElement.bind("click.button",function(){if(c.disabled||h)return!1;a(this).toggleClass("ui-state-active"),b.buttonElement.attr("aria-pressed",b.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click.button",function(){if(c.disabled||h)return!1;a(this).addClass("ui-state-active"),b.buttonElement.attr("aria-pressed","true");var d=b.element[0];m(d).not(d).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){if(c.disabled)return!1;a(this).addClass("ui-state-active"),e=this,a(document).one("mouseup",function(){e=null})}).bind("mouseup.button",function(){if(c.disabled)return!1;a(this).removeClass("ui-state-active")}).bind("keydown.button",function(b){if(c.disabled)return!1;(b.keyCode==a.ui.keyCode.SPACE||b.keyCode==a.ui.keyCode.ENTER)&&a(this).addClass("ui-state-active")}).bind("keyup.button",function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",c.disabled),this._resetButton()},_determineButtonType:function(){this.element.is(":checkbox")?this.type="checkbox":this.element.is(":radio")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";if(this.type==="checkbox"||this.type==="radio"){var a=this.element.parents().filter(":last"),b="label[for='"+this.element.attr("id")+"']";this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible");var c=this.element.is(":checked");c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",c)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(i+" "+j+" "+k).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments);if(b==="disabled"){c?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1);return}this._resetButton()},refresh:function(){var b=this.element.is(":disabled");b!==this.options.disabled&&this._setOption("disabled",b),this.type==="radio"?m(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var b=this.buttonElement.removeClass(k),c=a("<span></span>").addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,f=[];d.primary||d.secondary?(this.options.text&&f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||b.attr("title",c))):f.push("ui-button-text-only"),b.addClass(f.join(" "))}}),a.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(b,c){b==="disabled"&&this.buttons.button("option",b,c),a.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var b=this.element.css("direction")==="ltr";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-left":"ui-corner-right").end().filter(":last").addClass(b?"ui-corner-right":"ui-corner-left").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),a.Widget.prototype.destroy.call(this)}})}),define("jqueryui/draggable",["jquery","jqueryui/core","jqueryui/mouse","jqueryui/widget","jquery.instructure_jquery_patches"],function(a,b,c,d,e){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable"))return;return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(b),this.handle?(c.iframeFix&&a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),c.containment&&this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute");if(!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,b)),this.dropped&&(c=this.dropped,this.dropped=!1);if((!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original")return!1;if(this.options.revert=="invalid"&&!c||this.options.revert=="valid"&&c||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var d=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){d._trigger("stop",b)!==!1&&d._clear()})}else this._trigger("stop",b)!==!1&&this._clear();return!1},_mouseUp:function(b){return this.options.iframeFix===!0&&a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){var c=!this.options.handle||!a(this.options.handle,this.element).length?!0:!1;return a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(c=!0)}),c},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):c.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo(c.appendTo=="parent"?this.element[0].parentNode:c.appendTo),d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){typeof b=="string"&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;b.containment=="parent"&&(b.containment=this.helper[0].parentNode);if(b.containment=="document"||b.containment=="window")this.containment=[b.containment=="document"?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,b.containment=="document"?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(b.containment=="document"?0:a(window).scrollLeft())+a(b.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(b.containment=="document"?0:a(window).scrollTop())+(a(b.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)&&b.containment.constructor!=Array){var c=a(b.containment),d=c[0];if(!d)return;var e=c.offset(),f=a(d).css("overflow")!="hidden";this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(f?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c}else b.containment.constructor==Array&&(this.containment=b.containment)},_convertPositionTo:function(b,c){c||(c=this.position);var d=b=="absolute"?1:-1,e=this.options,f=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(d[0].tagName),f=b.pageX,g=b.pageY;if(this.originalPosition){var h;if(this.containment){if(this.relative_container){var i=this.relative_container.offset();h=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else h=this.containment;b.pageX-this.offset.click.left<h[0]&&(f=h[0]+this.offset.click.left),b.pageY-this.offset.click.top<h[1]&&(g=h[1]+this.offset.click.top),b.pageX-this.offset.click.left>h[2]&&(f=h[2]+this.offset.click.left),b.pageY-this.offset.click.top>h[3]&&(g=h[3]+this.offset.click.top)}if(c.grid){var j=c.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY;g=h?j-this.offset.click.top<h[1]||j-this.offset.click.top>h[3]?j-this.offset.click.top<h[1]?j+c.grid[1]:j-c.grid[1]:j:j;var k=c.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX;f=h?k-this.offset.click.left<h[0]||k-this.offset.click.left>h[2]?k-this.offset.click.left<h[0]?k+c.grid[0]:k-c.grid[0]:k:k}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),b=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(a){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.extend(a.ui.draggable,{version:"@VERSION"}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,d.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("draggable"),e=this,f=function(b){var c=this.offset.click.top,d=this.offset.click.left,e=this.positionAbs.top,f=this.positionAbs.left,g=b.height,h=b.width,i=b.top,j=b.left;return a.ui.isOver(e+c,f+d,i,j,g,h)};a.each(d.sortables,function(f){this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(b,c){var d=a("body"),e=a(this).data("draggable").options;d.css("cursor")&&(e._cursor=d.css("cursor")),d.css("cursor",e.cursor)},stop:function(b,c){var d=a(this).data("draggable").options;d._cursor&&a("body").css("cursor",d._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(b,c){var d=a(this).data("draggable");d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"&&(d.overflowOffset=d.scrollParent.offset())},drag:function(b,c){var d=a(this).data("draggable"),e=d.options,f=!1;if(d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"){if(!e.axis||e.axis!="x")d.overflowOffset.top+d.scrollParent[0].offsetHeight-b.pageY<e.scrollSensitivity?d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<e.scrollSensitivity&&(d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop-e.scrollSpeed);if(!e.axis||e.axis!="y")d.overflowOffset.left+d.scrollParent[0].offsetWidth-b.pageX<e.scrollSensitivity?d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&(d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft-e.scrollSpeed)}else{if(!e.axis||e.axis!="x")b.pageY-a(document).scrollTop()<e.scrollSensitivity?f=a(document).scrollTop(a(document).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<e.scrollSensitivity&&(f=a(document).scrollTop(a(document).scrollTop()+e.scrollSpeed));if(!e.axis||e.axis!="y")b.pageX-a(document).scrollLeft()<e.scrollSensitivity?f=a(document).scrollLeft(a(document).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<e.scrollSensitivity&&(f=a(document).scrollLeft(a(document).scrollLeft()+e.scrollSpeed))}f!==!1&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}}),a.ui.plugin.add("draggable","snap",{start:function(b,c){var d=a(this).data("draggable"),e=d.options;d.snapElements=[],a(e.snap.constructor!=String?e.snap.items||":data(draggable)":e.snap).each(function(){var b=a(this),c=b.offset();this!=d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c){var d=a(this).data("draggable"),e=d.options,f=e.snapTolerance,g=c.offset.left,h=g+d.helperProportions.width,i=c.offset.top,j=i+d.helperProportions.height;for(var k=d.snapElements.length-1;k>=0;k--){var l=d.snapElements[k].left,m=l+d.snapElements[k].width,n=d.snapElements[k].top,o=n+d.snapElements[k].height;if(!(l-f<g&&g<m+f&&n-f<i&&i<o+f||l-f<g&&g<m+f&&n-f<j&&j<o+f||l-f<h&&h<m+f&&n-f<i&&i<o+f||l-f<h&&h<m+f&&n-f<j&&j<o+f)){d.snapElements[k].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=!1;continue}if(e.snapMode!="inner"){var p=Math.abs(n-j)<=f,q=Math.abs(o-i)<=f,r=Math.abs(l-h)<=f,s=Math.abs(m-g)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n-d.helperProportions.height,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l-d.helperProportions.width}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m}).left-d.margins.left)}var t=p||q||r||s;if(e.snapMode!="outer"){var p=Math.abs(n-i)<=f,q=Math.abs(o-j)<=f,r=Math.abs(l-g)<=f,s=Math.abs(m-h)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o-d.helperProportions.height,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m-d.helperProportions.width}).left-d.margins.left)}!d.snapElements[k].snapping&&(p||q||r||s||t)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=p||q||r||s||t}}}),a.ui.plugin.add("draggable","stack",{start:function(b,c){var d=a(this).data("draggable").options,e=a.makeArray(a(d.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(!e.length)return;var f=parseInt(e[0].style.zIndex)||0;a(e).each(function(a){this.style.zIndex=f+a}),this[0].style.zIndex=f+e.length}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})}),define("instructure-jquery.ui.draggable-patch",["jquery","jqueryui/draggable"],function(a,b){a.widget("instructure.draggable",a.ui.draggable,{_mouseDrag:function(a,b){this.position=this._generatePosition(a),this.positionAbs=this._convertPositionTo("absolute");if(!b){var c=this._uiHash();if(this._trigger("drag",a,c)===!1)return this._mouseUp({}),!1;this.position=c.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x"&&!this.options.instructureHackToNotAutoSizeTop)this.helper[0].style.top=this.position.top+"px";return $.ui.ddmanager&&$.ui.ddmanager.drag(this,a),!1}})}),define("jqueryui/droppable",["jquery","jqueryui/core","jqueryui/widget","jqueryui/mouse","jqueryui/draggable","instructure-jquery.ui.draggable-patch"],function(a,b,c,d,e,f){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,c=b.accept;this.isover=0,this.isout=1,this.accept=a.isFunction(c)?c:function(a){return a.is(c)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[],a.ui.ddmanager.droppables[b.scope].push(this),b.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){var b=a.ui.ddmanager.droppables[this.options.scope];for(var c=0;c<b.length;c++)b[c]==this&&b.splice(c,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(b,c){b=="accept"&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)}),a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0])return;this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0])return;this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]==this.element[0])return!1;var e=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"droppable");if(b.options.greedy&&!b.options.disabled&&b.options.scope==d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance))return e=!0,!1}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.extend(a.ui.droppable,{version:"@VERSION"}),a.ui.intersect=function(b,c,d){if(!c.offset)return!1;var e=(b.positionAbs||b.position.absolute).left,f=e+b.helperProportions.width,g=(b.positionAbs||b.position.absolute).top,h=g+b.helperProportions.height,i=c.offset.left,j=i+c.proportions.width,k=c.offset.top,l=k+c.proportions.height;switch(d){case"fit":return i<=e&&f<=j&&k<=g&&h<=l;case"intersect":return i<e+b.helperProportions.width/2&&f-b.helperProportions.width/2<j&&k<g+b.helperProportions.height/2&&h-b.helperProportions.height/2<l;case"pointer":var m=(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,n=(b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,o=a.ui.isOver(n,m,k,i,c.proportions.height,c.proportions.width);return o;case"touch":return(g>=k&&g<=l||h>=k&&h<=l||g<k&&h>l)&&(e>=i&&e<=j||f>=i&&f<=j||e<i&&f>j);default:return!1}},a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d=a.ui.ddmanager.droppables[b.options.scope]||[],e=c?c.type:null,f=(b.currentItem||b.element).find(":data(droppable)").andSelf();g:for(var h=0;h<d.length;h++){if(d[h].options.disabled||b&&!d[h].accept.call(d[h].element[0],b.currentItem||b.element))continue;for(var i=0;i<f.length;i++)if(f[i]==d[h].element[0]){d[h].proportions.height=0;continue g}d[h].visible=d[h].element.css("display")!="none";if(!d[h].visible)continue;e=="mousedown"&&d[h]._activate.call(d[h],c),d[h].offset=d[h].element.offset(),d[h].proportions={width:d[h].element[0].offsetWidth,height:d[h].element[0].offsetHeight}}},drop:function(b,c){var d=!1;return a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options)return;!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=d||this._drop.call(this,c)),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,c))}),d},dragStart:function(b,c){b.element.parents(":not(body,html)").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var d=a.ui.intersect(b,this,this.options.tolerance),e=!d&&this.isover==1?"isout":d&&this.isover==0?"isover":null;if(!e)return;var f;if(this.options.greedy){var g=this.element.parents(":data(droppable):eq(0)");g.length&&(f=a.data(g[0],"droppable"),f.greedyChild=e=="isover"?1:0)}f&&e=="isover"&&(f.isover=0,f.isout=1,f._out.call(f,c)),this[e]=1,this[e=="isout"?"isover":"isout"]=0,this[e=="isover"?"_over":"_out"].call(this,c),f&&e=="isout"&&(f.isout=0,f.isover=1,f._over.call(f,c))})},dragStop:function(b,c){b.element.parents(":not(body,html)").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}}}),define("jquery.inst_tree",["jquery","instructure-jquery.ui.draggable-patch","jqueryui/droppable"],function(a){a.fn.instTree=function(b){return a(this).each(function(){var c=!1,d=a(this),e=this,f=null;e.options={autoclose:!0,overrideEvents:!1,multi:!0,dragdrop:!0,onClick:!1,onDblClick:!1,onExpand:!1,onCollapse:!1,onAddNode:!1,onEditNode:!1,onDeleteNode:!1,onDrag:!1,onDrop:!1},e.opts=a.extend({},e.options,b),a.fn.instTree.InitInstTree=function(b){d=a(b);var f='<li class="separator"></li>';d.find("li:not(.separator)").filter(function(){return!a(this).prev("li.separator").get(0)&&!a(this).parents("ul.non-instTree").get(0)}).each(function(){a(this).before(f)}),d.find("li > span").not(".sign").not(".clr").addClass("text").attr("unselectable","on"),d.find("li:not(.separator)").filter(function(){return!a(this).parents("ul.non-instTree").get(0)}).filter(":has(ul)").addClass("node").end().filter(":not(.node)").addClass("leaf"),e.IeSetStyles(),e.Clean(),e.AddSigns(),c||e.BindEvents(b),e.opts.dragdrop&&(e.CancelDragDrop(b),e.InitDragDrop(b))},e.InitDragDrop=function(b){d=a(b),d.find("span.text").draggable({cursor:a.browser.msie?"default":"move",distance:3,helper:function(){return a('<div id="instTree-drag"><span>'+a(this).text()+"</span></div>")},appendTo:d}),d.find("li.separator").droppable({accept:"span.text",hoverClass:"dd-hover"}),d.find("span.text").bind("dragstart",function(b,c){d=a(this).parents("ul.instTree:first");var f=a(this).parent("li"),g=a("div#instTree-drag");a.browser.msie&&d.find("li.separator").removeClass("dd-hover"),a.browser.opera&&g.css("margin-top","10px"),f.is(".leaf")?(g.addClass("leaf"),a.browser.msie&&g.css("background","#C3E1FF url("+e.opts.imgFolder+"leaf-drag.gif) left 3px no-repeat")):f.is(".node")&&g.addClass("node"),f.prev("li.separator").addClass("alt").end().addClass("alt"),typeof e.opts.onDrag=="function"&&e.opts.onDrag(b,f)}),d.find("li.separator").bind("dropover",function(b,c){f=a(this)}),d.find("li.separator").bind("dropout",function(a,b){f=null}),d.find("span.text").bind("dragstop",function(c,g){var h=!0;if(f){var i=d.find("li.alt:not(.separator):eq(0)"),j=f.parents("li.node:eq(0)");i.is(".node")&&j.is(".fixedLevel")&&(h=!1)}f&&h?(f.before(d.find("li.alt").remove().removeClass("alt")),f=null,typeof e.opts.onDrop=="function"&&e.opts.onDrop(c,i),a.fn.instTree.InitInstTree(b)):d.find("li.alt").removeClass("alt")})},e.CancelDragDrop=function(b){d=a(b),d.find("span.text").draggable("destroy"),d.find("li.separator").droppable("destroy"),d.find("li.separator").unbind(),d.find("span.text").unbind()},a.fn.instTree.AddNode=function(b,c){d=a(b);var f=d.find("span.active").get(0);if(f){var g=a(f).parents("li:first"),h=a(f).parents("li.node:first");if(!h.is(".fixedLevel")||c!="node"){var i=c=="leaf"?"":' class="node"',j='<li class="separator"></li>',k="<li"+i+'><span class="text">&nbsp;</span><input type="text" value="New item" /></li>',l=j+k,m=!1,n,o,p;g.is(".leaf")?(g.after(l),n=g.nextAll("li:not(.separator):first"),p=g.parent(),m=!0):g.is(".node")&&(o=g.children("ul").get(0),o?(a(o).append(l),n=a(o).children("li:not(.separator):last")):(g.append("<ul>"+l+"</ul>"),o=g.children("ul").get(0),n=a(o).children("li:not(.separator):last")),e.ExpandNode(b,g),p=g,m=!0),m&&(a(f).removeClass("active"),p.find("input:text").focus().select().blur(function(){e.SaveInput(b,a(this))})),a.fn.instTree.InitInstTree(b),typeof e.opts.onAddNode=="function"&&e.opts.onAddNode(n)}}},a.fn.instTree.EditNode=function(b){d=a(b);var c=d.find("span.active").get(0);if(c){var f=a(c).parents("li:first");a(c).replaceWith('<span class="text">&nbsp;</span><input type="text" value="'+a(c).text()+'" />'),f.find("input:text").focus().select().blur(function(){e.SaveInput(b,a(this))}),typeof e.opts.onEditNode=="function"&&e.opts.onEditNode(f)}},a.fn.instTree.DeleteNode=function(b){d=a(b);var c=d.find("span.active").get(0);if(c){var f=a(c).parents("li:first"),g=f.parents("li.node:first");f.prev("li.separator").remove().end().remove(),a.fn.instTree.InitInstTree(b),typeof e.opts.onDeleteNode=="function"&&e.opts.onDeleteNode(f,g)}},e.SaveInput=function(b,c){c.prev("span.text").remove();var d=a.trim(c.get(0).value)!==""?c.get(0).value:"_____";c.replaceWith('<span class="active text">'+d+"</span>"),a.fn.instTree.InitInstTree(b)},e.IeSetStyles=function(){a.browser.msie&&(d.find("li.node:not(.open) > ul").hide(),d.find("li.node.open > ul").css("margin-bottom","1px"))},e.Clean=function(){d.find("li:not(.separator)").each(function(){a(this).removeClass("last"),(!a(this).next("li").length||a(this).find("ul").length)&&a(this).addClass("last")})},e.AddSigns=function(){d.find("li.node").each(function(){a(this).hasClass("open")?a(this).find("span.sign").remove().end().append('<span class="sign minus"></span>'):a(this).find("span.sign").remove().end().append('<span class="sign plus"></span>')})},e.BindEvents=function(b){d.click(function(c){var d=a(this).closest(".instTree"),f=a(c.target),g;f.is("span.sign")?(g=f.parents("li:eq(0)"),e.ToggleNode(b,g)):f.is("span.text")&&(g=f.closest("li"),typeof e.opts.onClick=="function"?(e.opts.overrideEvents||((!e.opts.multi||!c.ctrlKey)&&d.find(".active").removeClass("active").end().find(".active-leaf").removeClass("active-leaf").end().find(".active-node").removeClass("active-node"),f.addClass("active"),g.hasClass("leaf")?g.addClass("active-leaf"):g.addClass("active-node")),e.opts.onClick.call(g,c,g)):((!e.opts.multi||!c.ctrlKey)&&d.find(".active").removeClass("active").end().find(".active-leaf").removeClass("active-leaf").end().find(".active-node").removeClass("active-node"),f.addClass("active"),g.hasClass("leaf")?g.addClass("active-leaf"):g.addClass("active-node")))}),d.dblclick(function(c){var d=a(c.target);if(d.is("span.text")){var f=d.parents("li:eq(0)");typeof e.opts.onDblClick=="function"?(!e.opts.overrideEvents&&f.is(".node")&&e.ToggleNode(b,f),e.opts.onDblClick.call(f,c,f)):f.is(".node")&&e.ToggleNode(b,f)}}),c=!0},e.ToggleNode=function(a,b){b.hasClass("open")?e.CollapseNode(b):e.ExpandNode(a,b),e.Clean()},e.ExpandNode=function(b,c){c.addClass("open"),e.opts.autoclose&&c.siblings(".open").each(function(){e.CollapseNode(a(this))}),a.browser.msie&&(c.children("ul").show().css({"margin-bottom":"1px",visibility:"visible"}),c.children("ul").find("li.node:not(.open) > ul").each(function(){a(this).css("visibility","hidden")}));var d=c.find("span.sign:last");d.removeClass("plus").addClass("minus"),e.opts.multi&&a.fn.instTree.InitInstTree(b),typeof e.opts.onExpand=="function"&&e.opts.onExpand(c)},e.CollapseNode=function(b){b.removeClass("open"),a.browser.msie&&b.children("ul").hide();var c=b.find("span.sign:last");c.removeClass("minus").addClass("plus"),typeof e.opts.onCollapse=="function"&&e.opts.onCollapse(b)},a(this).is("ul")&&(d=a(this),d.addClass("instTree"),a.fn.instTree.InitInstTree(e))})}}),define("jqueryui/resizable",["jquery","jqueryui/core","jqueryui/mouse","jqueryui/widget","jquery.instructure_jquery_patches"],function(a,b,c,d,e){a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var b=this,c=this.options;this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!c.aspectRatio,aspectRatio:c.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:c.helper||c.ghost||c.animate?c.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(/relative/.test(this.element.css("position"))&&a.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"}),this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=c.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var d=this.handles.split(",");this.handles={};for(var e=0;e<d.length;e++){var f=a.trim(d[e]),g="ui-resizable-"+f,h=a('<div class="ui-resizable-handle '+g+'"></div>');/sw|se|ne|nw/.test(f)&&h.css({zIndex:++c.zIndex}),"se"==f&&h.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[f]=".ui-resizable-"+f,this.element.append(h)}}this._renderAxis=function(b){b=b||this.element;for(var c in this.handles){this.handles[c].constructor==String&&(this.handles[c]=a(this.handles[c],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=a(this.handles[c],this.element),e=0;e=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth();var f=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join("");b.css(f,e),this._proportionallyResize()}if(!a(this.handles[c]).length)continue}},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!b.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=a&&a[1]?a[1]:"se"}}),c.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").hover(function(){if(c.disabled)return;a(this).removeClass("ui-resizable-autohide"),b._handles.show()},function(){if(c.disabled)return;b.resizing||(a(this).addClass("ui-resizable-autohide"),b._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var b=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){b(this.element);var c=this.element;c.after(this.originalElement.css({position:c.css("position"),width:c.outerWidth(),height:c.outerHeight(),top:c.css("top"),left:c.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),b(this.originalElement),this},_mouseCapture:function(b){var c=!1;for(var d in this.handles)a(this.handles[d])[0]==b.target&&(c=!0);return!this.options.disabled&&c},_mouseStart:function(b){var c=this.options,d=this.element.position(),e=this.element;this.resizing=!0,this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()},(e.is(".ui-draggable")||/absolute/.test(e.css("position")))&&e.css({position:"absolute",top:d.top,left:d.left}),a.browser.opera&&/relative/.test(e.css("position"))&&e.css({position:"relative",top:"auto",left:"auto"}),this._renderProxy();var g=f(this.helper.css("left")),h=f(this.helper.css("top"));c.containment&&(g+=a(c.containment).scrollLeft()||0,h+=a(c.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:g,top:h},this.size=this._helper?{width:e.outerWidth(),height:e.outerHeight()}:{width:e.width(),height:e.height()},this.originalSize=this._helper?{width:e.outerWidth(),height:e.outerHeight()}:{width:e.width(),height:e.height()},this.originalPosition={left:g,top:h},this.sizeDiff={width:e.outerWidth()-e.width(),height:e.outerHeight()-e.height()},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio=typeof c.aspectRatio=="number"?c.aspectRatio:this.originalSize.width/this.originalSize.height||1;var i=a(".ui-resizable-"+this.axis).css("cursor");return a("body").css("cursor",i=="auto"?this.axis+"-resize":i),e.addClass("ui-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(b){var c=this.helper,d=this.options,e={},f=this,g=this.originalMousePosition,h=this.axis,i=b.pageX-g.left||0,j=b.pageY-g.top||0,k=this._change[h];if(!k)return!1;var l=k.apply(this,[b,i,j]),m=a.browser.msie&&a.browser.version<7,n=this.sizeDiff;this._updateVirtualBoundaries(b.shiftKey);if(this._aspectRatio||b.shiftKey)l=this._updateRatio(l,b);return l=this._respectSize(l,b),this._propagate("resize",b),c.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",b,this.ui()),!1},_mouseStop:function(b){this.resizing=!1;var c=this.options,d=this;if(this._helper){var e=this._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:d.sizeDiff.height,h=f?0:d.sizeDiff.width,i={width:d.helper.width()-h,height:d.helper.height()-g},j=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,k=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;c.animate||this.element.css(a.extend(i,{top:k,left:j})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!c.animate&&this._proportionallyResize()}return a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var b=this.options,c,d,e,f,h;h={minWidth:g(b.minWidth)?b.minWidth:0,maxWidth:g(b.maxWidth)?b.maxWidth:Infinity,minHeight:g(b.minHeight)?b.minHeight:0,maxHeight:g(b.maxHeight)?b.maxHeight:Infinity};if(this._aspectRatio||a)c=h.minHeight*this.aspectRatio,e=h.minWidth/this.aspectRatio,d=h.maxHeight*this.aspectRatio,f=h.maxWidth/this.aspectRatio,c>h.minWidth&&(h.minWidth=c),e>h.minHeight&&(h.minHeight=e),d<h.maxWidth&&(h.maxWidth=d),f<h.maxHeight&&(h.maxHeight=f);this._vBoundaries=h},_updateCache:function(a){var b=this.options;this.offset=this.helper.offset(),g(a.left)&&(this.position.left=a.left),g(a.top)&&(this.position.top=a.top),g(a.height)&&(this.size.height=a.height),g(a.width)&&(this.size.width=a.width)},_updateRatio:function(a,b){var c=this.options,d=this.position,e=this.size,f=this.axis;return g(a.height)?a.width=a.height*this.aspectRatio:g(a.width)&&(a.height=a.width/this.aspectRatio),f=="sw"&&(a.left=d.left+(e.width-a.width),a.top=null),f=="nw"&&(a.top=d.top+(e.height-a.height),a.left=d.left+(e.width-a.width)),a},_respectSize:function(a,b){var c=this.helper,d=this._vBoundaries,e=this._aspectRatio||b.shiftKey,f=this.axis,h=g(a.width)&&d.maxWidth&&d.maxWidth<a.width,i=g(a.height)&&d.maxHeight&&d.maxHeight<a.height,j=g(a.width)&&d.minWidth&&d.minWidth>a.width,k=g(a.height)&&d.minHeight&&d.minHeight>a.height;j&&(a.width=d.minWidth),k&&(a.height=d.minHeight),h&&(a.width=d.maxWidth),i&&(a.height=d.maxHeight);var l=this.originalPosition.left+this.originalSize.width,m=this.position.top+this.size.height,n=/sw|nw|w/.test(f),o=/nw|ne|n/.test(f);j&&n&&(a.left=l-d.minWidth),h&&n&&(a.left=l-d.maxWidth),k&&o&&(a.top=m-d.minHeight),i&&o&&(a.top=m-d.maxHeight);var p=!a.width&&!a.height;return p&&!a.left&&a.top?a.top=null:p&&!a.top&&a.left&&(a.left=null),a},_proportionallyResize:function(){var b=this.options;if(!this._proportionallyResizeElements.length)return;var c=this.helper||this.element;for(var d=0;d<this._proportionallyResizeElements.length;d++){var e=this._proportionallyResizeElements[d];if(!this.borderDif){var f=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],g=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];this.borderDif=a.map(f,function(a,b){var c=parseInt(a,10)||0,d=parseInt(g[b],10)||0;return c+d})}if(!a.browser.msie||!a(c).is(":hidden")&&!a(c).parents(":hidden").length)e.css({height:c.height()-this.borderDif[0]-this.borderDif[2]||0,width:c.width()-this.borderDif[1]-this.borderDif[3]||0});else continue}},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset();if(this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var d=a.browser.msie&&a.browser.version<7,e=d?1:0,f=d?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+f,height:this.element.outerHeight()+f,position:"absolute",left:this.elementOffset.left-e+"px",top:this.elementOffset.top-e+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(a,b,c){return{width:this.originalSize.width+b}},w:function(a,b,c){var d=this.options,e=this.originalSize,f=this.originalPosition;return{left:f.left+b,width:e.width-b}},n:function(a,b,c){var d=this.options,e=this.originalSize,f=this.originalPosition;return{top:f.top+c,height:e.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),b!="resize"&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.extend(a.ui.resizable,{version:"@VERSION"}),a.ui.plugin.add("resizable","alsoResize",{start:function(b,c){var d=a(this).data("resizable"),e=d.options,f=function(b){a(b).each(function(){var b=a(this);b.data("resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10),position:b.css("position")})})};typeof e.alsoResize=="object"&&!e.alsoResize.parentNode?e.alsoResize.length?(e.alsoResize=e.alsoResize[0],f(e.alsoResize)):a.each(e.alsoResize,function(a){f(a)}):f(e.alsoResize)},resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,e){a(b).each(function(){var b=a(this),f=a(this).data("resizable-alsoresize"),g={},i=e&&e.length?e:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(i,function(a,b){var c=(f[b]||0)+(h[b]||0);c&&c>=0&&(g[b]=c||null)}),a.browser.opera&&/relative/.test(b.css("position"))&&(d._revertToRelativePosition=!0,b.css({position:"absolute",top:"auto",left:"auto"})),b.css(g)})};typeof e.alsoResize=="object"&&!e.alsoResize.nodeType?a.each(e.alsoResize,function(a,b){i(a,b)}):i(e.alsoResize)},stop:function(b,c){var d=a(this).data("resizable"),e=d.options,f=function(b){a(b).each(function(){var b=a(this);b.css({position:b.data("resizable-alsoresize").position})})};d._revertToRelativePosition&&(d._revertToRelativePosition=!1,typeof e.alsoResize=="object"&&!e.alsoResize.nodeType?a.each(e.alsoResize,function(a){f(a)}):f(e.alsoResize)),a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","animate",{stop:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d._proportionallyResizeElements,g=f.length&&/textarea/i.test(f[0].nodeName),h=g&&a.ui.hasScroll(f[0],"left")?0:d.sizeDiff.height,i=g?0:d.sizeDiff.width,j={width:d.size.width-i,height:d.size.height-h},k=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,l=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;d.element.animate(a.extend(j,l&&k?{top:l,left:k}:{}),{duration:e.animateDuration,easing:e.animateEasing,step:function(){var c={width:parseInt(d.element.css("width"),10),height:parseInt(d.element.css("height"),10),top:parseInt(d.element.css("top"),10),left:parseInt(d.element.css("left"),10)};f&&f.length&&a(f[0]).css({width:c.width,height:c.height}),d._updateCache(c),d._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(b,c){var d=a(this).data("resizable"),e=d.options,g=d.element,h=e.containment,i=h instanceof a?h.get(0):/parent/.test(h)?g.parent().get(0):h;if(!i)return;d.containerElement=a(i);if(/document/.test(h)||h==document)d.containerOffset={left:0,top:0},d.containerPosition={left:0,top:0},d.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight};else{var j=a(i),k=[];a(["Top","Right","Left","Bottom"]).each(function(a,b){k[a]=f(j.css("padding"+b))}),d.containerOffset=j.offset(),d.containerPosition=j.position(),d.containerSize={height:j.innerHeight()-k[3],width:j.innerWidth()-k[1]};var l=d.containerOffset,m=d.containerSize.height,n=d.containerSize.width,o=a.ui.hasScroll(i,"left")?i.scrollWidth:n,p=a.ui.hasScroll(i)?i.scrollHeight:m;d.parentData={element:i,left:l.left,top:l.top,width:o,height:p}}},resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.containerSize,g=d.containerOffset,h=d.size,i=d.position,j=d._aspectRatio||b.shiftKey,k={top:0,left:0},l=d.containerElement;l[0]!=document&&/static/.test(l.css("position"))&&(k=g),i.left<(d._helper?g.left:0)&&(d.size.width=d.size.width+(d._helper?d.position.left-g.left:d.position.left-k.left),j&&(d.size.height=d.size.width/e.aspectRatio),d.position.left=e.helper?g.left:0),i.top<(d._helper?g.top:0)&&(d.size.height=d.size.height+(d._helper?d.position.top-g.top:d.position.top),j&&(d.size.width=d.size.height*e.aspectRatio),d.position.top=d._helper?g.top:0),d.offset.left=d.parentData.left+d.position.left,d.offset.top=d.parentData.top+d.position.top;var m=Math.abs((d._helper?d.offset.left-k.left:d.offset.left-k.left)+d.sizeDiff.width),n=Math.abs((d._helper?d.offset.top-k.top:d.offset.top-g.top)+d.sizeDiff.height),o=d.containerElement.get(0)==d.element.parent().get(0),p=/relative|absolute/.test(d.containerElement.css("position"));o&&p&&(m-=d.parentData.left),m+d.size.width>=d.parentData.width&&(d.size.width=d.parentData.width-m,j&&(d.size.height=d.size.width/d.aspectRatio)),n+d.size.height>=d.parentData.height&&(d.size.height=d.parentData.height-n,j&&(d.size.width=d.size.height*d.aspectRatio))},stop:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.position,g=d.containerOffset,h=d.containerPosition,i=d.containerElement,j=a(d.helper),k=j.offset(),l=j.outerWidth()-d.sizeDiff.width,m=j.outerHeight()-d.sizeDiff.height;d._helper&&!e.animate&&/relative/.test(i.css("position"))&&a(this).css({left:k.left-h.left-g.left,width:l,height:m}),d._helper&&!e.animate&&/static/.test(i.css("position"))&&a(this).css({left:k.left-h.left-g.left,width:l,height:m})}}),a.ui.plugin.add("resizable","ghost",{start:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.size;d.ghost=d.originalElement.clone(),d.ghost.css({opacity:.25,display:"block",position:"relative",height:f.height,width:f.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof e.ghost=="string"?e.ghost:""),d.ghost.appendTo(d.helper)},resize:function(b,c){var d=a(this).data("resizable"),e=d.options;d.ghost&&d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})},stop:function(b,c){var d=a(this).data("resizable"),e=d.options;d.ghost&&d.helper&&d.helper.get(0).removeChild(d.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.size,g=d.originalSize,h=d.originalPosition,i=d.axis,j=e._aspectRatio||b.shiftKey;e.grid=typeof e.grid=="number"?[e.grid,e.grid]:e.grid;var k=Math.round((f.width-g.width)/(e.grid[0]||1))*(e.grid[0]||1),l=Math.round((f.height-g.height)/(e.grid[1]||1))*(e.grid[1]||1);/^(se|s|e)$/.test(i)?(d.size.width=g.width+k,d.size.height=g.height+l):/^(ne)$/.test(i)?(d.size.width=g.width+k,d.size.height=g.height+l,d.position.top=h.top-l):/^(sw)$/.test(i)?(d.size.width=g.width+k,d.size.height=g.height+l,d.position.left=h.left-k):(d.size.width=g.width+k,d.size.height=g.height+l,d.position.top=h.top-l,d.position.left=h.left-k)}});var f=function(a){return parseInt(a,10)||0},g=function(a){return!isNaN(parseInt(a,10))}}),define("jqueryui/dialog",["jquery","jqueryui/core","jqueryui/widget","jqueryui/button","jqueryui/draggable","jqueryui/mouse","jqueryui/position","jqueryui/resizable","instructure-jquery.ui.draggable-patch"],function(a,b,c,d,e,f,g,h,i){var j="ui-dialog ui-widget ui-widget-content ui-corner-all ",k={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},l={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},m=a.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};a.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(b){var c=a(this).css(b).offset().top;c<0&&a(this).css("top",b.top-c)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var b=this,c=b.options,d=c.title||a("<span>&#160;</span>"),e=a.ui.dialog.getTitleId(b.element),f=(b.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass(j+c.dialogClass).css({zIndex:c.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(d){c.closeOnEscape&&!d.isDefaultPrevented()&&d.keyCode&&d.keyCode===a.ui.keyCode.ESCAPE&&(b.close(d),d.preventDefault())}).attr({role:"dialog","aria-labelledby":e}).mousedown(function(a){b.moveToTop(!1,a)}),g=b.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(f),h=(b.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(f),i=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){i.addClass("ui-state-hover")},function(){i.removeClass("ui-state-hover")}).focus(function(){i.addClass("ui-state-focus")}).blur(function(){i.removeClass("ui-state-focus")}).click(function(a){return b.close(a),!1}).appendTo(h),k=(b.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(c.closeText).appendTo(i),l=a("<span></span>").addClass("ui-dialog-title").attr("id",e).prependTo(h);d.jquery?l.append(d):l.text(d),a.isFunction(c.beforeclose)&&!a.isFunction(c.beforeClose)&&(c.beforeClose=c.beforeclose),h.find("*").add(h).disableSelection(),c.draggable&&a.fn.draggable&&b._makeDraggable(),c.resizable&&a.fn.resizable&&b._makeResizable(),b._createButtons(c.buttons),b._isOpen=!1,a.fn.bgiframe&&f.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var a=this;return a.overlay&&a.overlay.destroy(),a.uiDialog.hide(),a.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),a.uiDialog.remove(),a.originalTitle&&a.element.attr("title",a.originalTitle),a},widget:function(){return this.uiDialog},close:function(b){var c=this,d,e;if(!1===c._trigger("beforeClose",b))return;return c.overlay&&c.overlay.destroy(),c.uiDialog.unbind("keypress.ui-dialog"),c._isOpen=!1,c.options.hide?c.uiDialog.hide(c.options.hide,function(){c._trigger("close",b)}):(c.uiDialog.hide(),c._trigger("close",b)),a.ui.dialog.overlay.resize(),c.options.modal&&(d=0,a(".ui-dialog").each(function(){this!==c.uiDialog[0]&&(e=a(this).css("z-index"),isNaN(e)||(d=Math.max(d,e)))}),a.ui.dialog.maxZ=d),c},isOpen:function(){return this._isOpen},moveToTop:function(b,c){var d=this,e=d.options,f;return e.modal&&!b||!e.stack&&!e.modal?d._trigger("focus",c):(e.zIndex>a.ui.dialog.maxZ&&(a.ui.dialog.maxZ=e.zIndex),d.overlay&&(a.ui.dialog.maxZ+=1,d.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ)),f={scrollTop:d.element.scrollTop(),scrollLeft:d.element.scrollLeft()},a.ui.dialog.maxZ+=1,d.uiDialog.css("z-index",a.ui.dialog.maxZ),d.element.attr(f),d._trigger("focus",c),d)},open:function(){if(this._isOpen)return;var b=this,c=b.options,d=b.uiDialog;return b.overlay=c.modal?new a.ui.dialog.overlay(b):null,b._size(),b._position(c.position),d.show(c.show),b.moveToTop(!0),c.modal&&d.bind("keypress.ui-dialog",function(b){if(b.keyCode!==a.ui.keyCode.TAB)return;var c=a(":tabbable",this),d=c.filter(":first"),e=c.filter(":last");if(b.target===e[0]&&!b.shiftKey)return d.focus(1),!1;if(b.target===d[0]&&b.shiftKey)return e.focus(1),!1}),a(b.element.find(":tabbable").get().concat(d.find(".ui-dialog-buttonpane :tabbable").get().concat(d.get()))).eq(0).focus(),b._isOpen=!0,b._trigger("open"),b},_createButtons:function(b){var c=this,d=!1,e=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),f=a("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);c.uiDialog.find(".ui-dialog-buttonpane").remove(),typeof b=="object"&&b!==null&&a.each(b,function(){return!(d=!0)}),d&&(a.each(b,function(b,d){d=a.isFunction(d)?{click:d,text:b}:d;var e=a('<button type="button"></button>').click(function(){d.click.apply(c.element[0],arguments)}).appendTo(f);a.each(d,function(a,b){if(a==="click")return;a in m?e[a](b):e.attr(a,b)}),a.fn.button&&e.button()}),e.appendTo(c.uiDialog))},_makeDraggable:function(){function f(a){return{position:a.position,offset:a.offset}}var b=this,c=b.options,d=a(document),e;b.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(d,g){e=c.height==="auto"?"auto":a(this).height(),a(this).height(a(this).height()).addClass("ui-dialog-dragging"),b._trigger("dragStart",d,f(g))},drag:function(a,c){b._trigger("drag",a,f(c))},stop:function(g,h){c.position=[h.position.left-d.scrollLeft(),h.position.top-d.scrollTop()],a(this).removeClass("ui-dialog-dragging").height(e),b._trigger("dragStop",g,f(h)),a.ui.dialog.overlay.resize()}})},_makeResizable:function(b){function g(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}b=b===i?this.options.resizable:b;var c=this,d=c.options,e=c.uiDialog.css("position"),f=typeof b=="string"?b:"n,e,s,w,se,sw,ne,nw";c.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:c.element,maxWidth:d.maxWidth,maxHeight:d.maxHeight,minWidth:d.minWidth,minHeight:c._minHeight(),handles:f,start:function(b,d){a(this).addClass("ui-dialog-resizing"),c._trigger("resizeStart",b,g(d))},resize:function(a,b){c._trigger("resize",a,g(b))},stop:function(b,e){a(this).removeClass("ui-dialog-resizing"),d.height=a(this).height(),d.width=a(this).width(),c._trigger("resizeStop",b,g(e)),a.ui.dialog.overlay.resize()}}).css("position",e).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return a.height==="auto"?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(b){var c=[],d=[0,0],e;if(b){if(typeof b=="string"||typeof b=="object"&&"0"in b)c=b.split?b.split(" "):[b[0],b[1]],c.length===1&&(c[1]=c[0]),a.each(["left","top"],function(a,b){+c[a]===c[a]&&(d[a]=c[a],c[a]=b)}),b={my:c.join(" "),at:c.join(" "),offset:d.join(" ")};b=a.extend({},a.ui.dialog.prototype.options.position,b)}else b=a.ui.dialog.prototype.options.position;e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(a.extend({of:window},b)),e||this.uiDialog.hide()},_setOptions:function(b){var c=this,d={},e=!1;a.each(b,function(a,b){c._setOption(a,b),a in k&&(e=!0),a in l&&(d[a]=b)}),e&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",d)},_setOption:function(b,c){var d=this,e=d.uiDialog;switch(b){case"beforeclose":b="beforeClose";break;case"buttons":d._createButtons(c);break;case"closeText":d.uiDialogTitlebarCloseText.text(""+c);break;case"dialogClass":e.removeClass(d.options.dialogClass).addClass(j+c);break;case"disabled":c?e.addClass("ui-dialog-disabled"):e.removeClass("ui-dialog-disabled");break;case"draggable":var f=e.is(":data(draggable)");f&&!c&&e.draggable("destroy"),!f&&c&&d._makeDraggable();break;case"position":d._position(c);break;case"resizable":var g=e.is(":data(resizable)");g&&!c&&e.resizable("destroy"),g&&typeof c=="string"&&e.resizable("option","handles",c),!g&&c!==!1&&d._makeResizable(c);break;case"title":c||(c=a("<span>&#160;</span>")),c.jquery?a(".ui-dialog-title",d.uiDialogTitlebar).html("").append(c):a(".ui-dialog-title",d.uiDialogTitlebar).text(""+c)}a.Widget.prototype._setOption.apply(d,arguments)},_size:function(){var b=this.options,c,d,e=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),b.minWidth>b.width&&(b.width=b.minWidth),c=this.uiDialog.css({height:"auto",width:b.width}).height(),d=Math.max(0,b.minHeight-c);if(b.height==="auto")if(a.support.minHeight)this.element.css({minHeight:d,height:"auto"});else{this.uiDialog.show();var f=this.element.css("height","auto").height();e||this.uiDialog.hide(),this.element.height(Math.max(f,d))}else this.element.height(Math.max(b.height-c,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),a.extend(a.ui.dialog,{version:"@VERSION",uuid:0,maxZ:0,getTitleId:function(a){var b=a.attr("id");return b||(this.uuid+=1,b=this.uuid),"ui-dialog-title-"+b},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}}),a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"}).join(" "),create:function(b){this.instances.length===0&&(setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(b){if(a(b.target).zIndex()<a.ui.dialog.overlay.maxZ)return!1})},1),a(document).bind("keydown.dialog-overlay",function(c){b.options.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));var c=(this.oldInstances.pop()||a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return a.fn.bgiframe&&c.bgiframe(),this.instances.push(c),c},destroy:function(b){var c=a.inArray(b,this.instances);c!=-1&&this.oldInstances.push(this.instances.splice(c,1)[0]),this.instances.length===0&&a([document,window]).unbind(".dialog-overlay"),b.remove();var d=0;a.each(this.instances,function(){d=Math.max(d,this.css("z-index"))}),this.maxZ=d},height:function(){var b,c;return a.browser.msie&&a.browser.version<7?(b=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),b<c?a(window).height()+"px":b+"px"):a(document).height()+"px"},width:function(){var b,c;return a.browser.msie?(b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),b<c?a(window).width()+"px":b+"px"):a(document).width()+"px"},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)}),b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}}),a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})}),define("jquery.instructure_jquery_patches",["jquery","vendor/jquery.scrollTo","jqueryui/dialog"],function(a){a.widget("instructure.dialog",a.ui.dialog,{options:{modal:!0}}),a.each(["prop","attr"],function(b,c){a[c+"Hooks"].disabled=a.extend(a[c+"Hooks"].disabled,{set:function(b,c,d){return a(b).toggleClass("disabled",!!c),b[c?"setAttribute":"removeAttribute"]("disabled","disabled"),"disabled"in b&&(b.disabled=!!c),c}})});var b=a.parseJSON;a.parseJSON=function(){if(arguments[0])try{var c=arguments[0].replace(/^while\(1\);/,"");arguments[0]=c}catch(d){}return b.apply(a,arguments)},a.ajaxSettings.converters["text json"]=a.parseJSON,a.attrHooks.method=a.extend(a.attrHooks.method,{set:function(b,c){var d=c;c=c.toUpperCase()==="GET"?"GET":"POST";if(c==="POST"){var e=a(b).find("input[name='_method']");e.length||(e=a("<input type='hidden' name='_method'/>").prependTo(b)),e.val(d)}return b.setAttribute("method",c),c}}),a.fn.originalScrollTop=a.fn.scrollTop,a.fn.scrollTop=function(){return this.selector=="html,body"&&arguments.length===0&&console.error("$('html,body').scrollTop() is not cross-browser compatible... use $.windowScrollTop() instead"),a.fn.originalScrollTop.apply(this,arguments)},a.windowScrollTop=function(){return(a.browser.safari?a("body"):a("html")).scrollTop()}}),define("jqueryui/datepicker",["jquery","jquery.instructure_jquery_patches"],function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(a){var b="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return a.bind("mouseout",function(a){var c=$(a.target).closest(b);if(!c.length)return;c.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(c){var d=$(c.target).closest(b);if($.datepicker._isDisabledDatepicker(instActive.inline?a.parent()[0]:instActive.input[0])||!d.length)return;d.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),d.addClass("ui-state-hover"),d.hasClass("ui-datepicker-prev")&&d.addClass("ui-datepicker-prev-hover"),d.hasClass("ui-datepicker-next")&&d.addClass("ui-datepicker-next-hover")})}function extendRemove(a,b){$.extend(a,b);for(var c in b)if(b[c]==null||b[c]==undefined)a[c]=b[c];return a}function isArray(a){return a&&($.browser.safari&&typeof a=="object"&&a.length||a.constructor&&a.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"@VERSION"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return extendRemove(this._defaults,a||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(a,b){var c=a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:c,input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:b?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(a,b){var c=$(a);b.append=$([]),b.trigger=$([]);if(c.hasClass(this.markerClassName))return;this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),$.data(a,PROP_NAME,b),b.settings.disabled&&this._disableDatepicker(a)},_attachments:function(a,b){var c=this._get(b,"appendText"),d=this._get(b,"isRTL");b.append&&b.append.remove(),c&&(b.append=$('<span class="'+this._appendClass+'">'+c+"</span>"),a[d?"before":"after"](b.append)),a.unbind("focus",this._showDatepicker),b.trigger&&b.trigger.remove();var e=this._get(b,"showOn");(e=="focus"||e=="both")&&a.focus(this._showDatepicker);if(e=="button"||e=="both"){var f=this._get(b,"buttonText"),g=this._get(b,"buttonImage");b.trigger=$(this._get(b,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:g,alt:f,title:f}):$('<button type="button"></button>').addClass(this._triggerClass).html(g==""?f:$("<img/>").attr({src:g,alt:f,title:f}))),a[d?"before":"after"](b.trigger),b.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==a[0]?$.datepicker._hideDatepicker():$.datepicker._showDatepicker(a[0]),!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){var b=0,c=0;for(var d=0;d<a.length;d++)a[d].length>b&&(b=a[d].length,c=d);return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort"))),b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=$(a);if(c.hasClass(this.markerClassName))return;c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),$.data(a,PROP_NAME,b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),b.dpDiv.css("display","block")},_dialogDatepicker:function(a,b,c,d,e){var f=this._dialogInst;if(!f){this.uuid+=1;var g="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+g+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),f=this._dialogInst=this._newInst(this._dialogInput,!1),f.settings={},$.data(this._dialogInput[0],PROP_NAME,f)}extendRemove(f.settings,d||{}),b=b&&b.constructor==Date?this._formatDate(f,b):b,this._dialogInput.val(b),this._pos=e?e.length?e:[e.pageX,e.pageY]:null;if(!this._pos){var h=document.documentElement.clientWidth,i=document.documentElement.clientHeight,j=document.documentElement.scrollLeft||document.body.scrollLeft,k=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[h/2-100+j,i/2-150+k]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),f.settings.onSelect=c,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,f),this},_destroyDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName))return;var d=a.nodeName.toLowerCase();$.removeData(a,PROP_NAME),d=="input"?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(d=="div"||d=="span")&&b.removeClass(this.markerClassName).empty()},_enableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName))return;var d=a.nodeName.toLowerCase();if(d=="input")a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().removeClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b})},_disableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName))return;var d=a.nodeName.toLowerCase();if(d=="input")a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().addClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b}),this._disabledInputs[this._disabledInputs.length]=a},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(a){try{return $.data(a,PROP_NAME)}catch(b){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(a,b,c){var d=this._getInst(a);if(arguments.length==2&&typeof b=="string")return b=="defaults"?$.extend({},$.datepicker._defaults):d?b=="all"?$.extend({},d.settings):this._get(d,b):null;var e=b||{};typeof b=="string"&&(e={},e[b]=c);if(d){this._curInst==d&&this._hideDatepicker();var f=this._getDateDatepicker(a,!0),g=this._getMinMaxDate(d,"min"),h=this._getMinMaxDate(d,"max");extendRemove(d.settings,e),g!==null&&e.dateFormat!==undefined&&e.minDate===undefined&&(d.settings.minDate=this._formatDate(d,g)),h!==null&&e.dateFormat!==undefined&&e.maxDate===undefined&&(d.settings.maxDate=this._formatDate(d,h)),this._attachments($(a),d),this._autoSize(d),this._setDate(d,f),this._updateAlternate(d),this._updateDatepicker(d)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(a){var b=$.datepicker._getInst(a.target),c=!0,d=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=!0;if($.datepicker._datepickerShowing)switch(a.keyCode){case 9:$.datepicker._hideDatepicker(),c=!1;break;case 13:var e=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",b.dpDiv);e[0]&&$.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,e[0]);var f=$.datepicker._get(b,"onSelect");if(f){var g=$.datepicker._formatDate(b);f.apply(b.input?b.input[0]:null,[g,b])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&$.datepicker._clearDate(a.target),c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&$.datepicker._gotoToday(a.target),c=a.ctrlKey||a.metaKey;break;case 37:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?1:-1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,-7,"D"),c=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?-1:1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,7,"D"),c=a.ctrlKey||a.metaKey;break;default:c=!1}else a.keyCode==36&&a.ctrlKey?$.datepicker._showDatepicker(this):c=!1;c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=$.datepicker._getInst(a.target);if($.datepicker._get(b,"constrainInput")){var c=$.datepicker._possibleChars($.datepicker._get(b,"dateFormat")),d=String.fromCharCode(a.charCode==undefined?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||d<" "||!c||c.indexOf(d)>-1}},_doKeyUp:function(a){var b=$.datepicker._getInst(a.target);if(b.input.val()!=b.lastVal)try{var c=$.datepicker.parseDate($.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,$.datepicker._getFormatConfig(b));c&&($.datepicker._setDateFromField(b),$.datepicker._updateAlternate(b),$.datepicker._updateDatepicker(b))}catch(a){$.datepicker.log(a)}return!0},_showDatepicker:function(a){a=a.target||a,a.nodeName.toLowerCase()!="input"&&(a=$("input",a.parentNode)[0]);if($.datepicker._isDisabledDatepicker(a)||$.datepicker._lastInput==a)return;var b=$.datepicker._getInst(a);$.datepicker._curInst&&$.datepicker._curInst!=b&&($.datepicker._datepickerShowing&&$.datepicker._triggerOnClose($.datepicker._curInst),$.datepicker._curInst.dpDiv.stop(!0,!0));var c=$.datepicker._get(b,"beforeShow"),d=c?c.apply(a,[a,b]):{};if(d===!1)return;extendRemove(b.settings,d),b.lastVal=null,$.datepicker._lastInput=a,$.datepicker._setDateFromField(b),$.datepicker._inDialog&&(a.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(a),$.datepicker._pos[1]+=a.offsetHeight);var e=!1;$(a).parents().each(function(){return e|=$(this).css("position")=="fixed",!e}),e&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var f={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,b.dpDiv.empty(),b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(b),f=$.datepicker._checkOffset(b,f,e),b.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":e?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"});if(!b.inline){var g=$.datepicker._get(b,"showAnim"),h=$.datepicker._get(b,"duration"),i=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(!!a.length){var c=$.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex($(a).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[g]?b.dpDiv.show(g,$.datepicker._get(b,"showOptions"),h,i):b.dpDiv[g||"show"](g?h:null,i),(!g||!h)&&i(),b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus(),$.datepicker._curInst=b}},_updateDatepicker:function(a){var b=this;b.maxRows=4;var c=$.datepicker._getBorders(a.dpDiv);instActive=a,a.dpDiv.empty().append(this._generateHTML(a));var d=a.dpDiv.find("iframe.ui-datepicker-cover");!d.length||d.css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()}),a.dpDiv.find("."+this._dayOverClass+" a").mouseover();var e=this._getNumberOfMonths(a),f=e[1],g=17;a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),f>1&&a.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",g*f+"em"),a.dpDiv[(e[0]!=1||e[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),a==$.datepicker._curInst&&$.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement&&a.input.focus();if(a.yearshtml){var h=a.yearshtml;setTimeout(function(){h===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml),h=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var d=a.dpDiv.outerWidth(),e=a.dpDiv.outerHeight(),f=a.input?a.input.outerWidth():0,g=a.input?a.input.outerHeight():0,h=document.documentElement.clientWidth+$(document).scrollLeft(),i=document.documentElement.clientHeight+$(document).scrollTop();return b.left-=this._get(a,"isRTL")?d-f:0,b.left-=c&&b.left==a.input.offset().left?$(document).scrollLeft():0,b.top-=c&&b.top==a.input.offset().top+g?$(document).scrollTop():0,b.left-=Math.min(b.left,b.left+d>h&&h>d?Math.abs(b.left+d-h):0),b.top-=Math.min(b.top,b.top+e>i&&i>e?Math.abs(e+g):0),b},_findPos:function(a){var b=this._getInst(a),c=this._get(b,"isRTL");while(a&&(a.type=="hidden"||a.nodeType!=1||$.expr.filters.hidden(a)))a=a[c?"previousSibling":"nextSibling"];var d=$(a).offset();return[d.left,d.top]},_triggerOnClose:function(a){var b=this._get(a,"onClose");b&&b.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a])},_hideDatepicker:function(a){var b=this._curInst;if(!b||a&&b!=$.data(a,PROP_NAME))return;if(this._datepickerShowing){var c=this._get(b,"showAnim"),d=this._get(b,"duration"),e=function(){$.datepicker._tidyDialog(b),this._curInst=null};$.effects&&$.effects[c]?b.dpDiv.hide(c,$.datepicker._get(b,"showOptions"),d,e):b.dpDiv[c=="slideDown"?"slideUp":c=="fadeIn"?"fadeOut":"hide"](c?d:null,e),c||e(),$.datepicker._triggerOnClose(b),this._datepickerShowing=!1,this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if(!$.datepicker._curInst)return;var b=$(a.target);b[0].id!=$.datepicker._mainDivId&&b.parents("#"+$.datepicker._mainDivId).length==0&&!b.hasClass($.datepicker.markerClassName)&&!b.hasClass($.datepicker._triggerClass)&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)&&$.datepicker._hideDatepicker()},_adjustDate:function(a,b,c){var d=$(a),e=this._getInst(d[0]);if(this._isDisabledDatepicker(d[0]))return;this._adjustInstDate(e,b+(c=="M"?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e)},_gotoToday:function(a){var b=$(a),c=this._getInst(b[0]);if(this._get(c,"gotoCurrent")&&c.currentDay)c.selectedDay=c.currentDay,c.drawMonth=c.selectedMonth=c.currentMonth,c.drawYear=c.selectedYear=c.currentYear;else{var d=new Date;c.selectedDay=d.getDate(),c.drawMonth=c.selectedMonth=d.getMonth(),c.drawYear=c.selectedYear=d.getFullYear()}this._notifyChange(c),this._adjustDate(b)},_selectMonthYear:function(a,b,c){var d=$(a),e=this._getInst(d[0]);e["selected"+(c=="M"?"Month":"Year")]=e["draw"+(c=="M"?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(d)},_selectDay:function(a,b,c,d){var e=$(a);if($(d).hasClass(this._unselectableClass)||this._isDisabledDatepicker(e[0]))return;var f=this._getInst(e[0]);f.selectedDay=f.currentDay=$("a",d).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))},_clearDate:function(a){var b=$(a),c=this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(a,b){var c=$(a),d=this._getInst(c[0]);b=b!=null?b:this._formatDate(d),d.input&&d.input.val(b),this._updateAlternate(d);var e=this._get(d,"onSelect");e?e.apply(d.input?d.input[0]:null,[b,d]):d.input&&d.input.trigger("change"),d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],typeof d.input[0]!="object"&&d.input.focus(),this._lastInput=null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),d=this._getDate(a),e=this.formatDate(c,d,this._getFormatConfig(a));$(b).each(function(){$(this).val(e)})}},noWeekends:function(a){var b=a.getDay();return[b>0&&b<6,""]},iso8601Week:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1},parseDate:function(a,b,c){if(a==null||b==null)throw"Invalid arguments";b=typeof b=="object"?b.toString():b+"";if(b=="")return null;var d=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;d=typeof d!="string"?d:(new Date).getFullYear()%100+parseInt(d,10);var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=-1,j=-1,k=-1,l=-1,m=!1,n=function(b){var c=s+1<a.length&&a.charAt(s+1)==b;return c&&s++,c},o=function(a){var c=n(a),d=a=="@"?14:a=="!"?20:a=="y"&&c?4:a=="o"?3:2,e=new RegExp("^\\d{1,"+d+"}"),f=b.substring(r).match(e);if(!f)throw"Missing number at position "+r;return r+=f[0].length,parseInt(f[0],10)},p=function(a,c,d){var e=$.map(n(a)?d:c,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)}),f=-1;$.each(e,function(a,c){var d=c[1];if(b.substr(r,d.length).toLowerCase()==d.toLowerCase())return f=c[0],r+=d.length,!1});if(f!=-1)return f+1;throw"Unknown name at position "+r},q=function(){if(b.charAt(r)!=a.charAt(s))throw"Unexpected literal at position "+r;r++},r=0;for(var s=0;s<a.length;s++)if(m)a.charAt(s)=="'"&&!n("'")?m=!1:q();else switch(a.charAt(s)){case"d":k=o("d");break;case"D":p("D",e,f);break;case"o":l=o("o");break;case"m":j=o("m");break;case"M":j=p("M",g,h);break;case"y":i=o("y");break;case"@":var t=new Date(o("@"));i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"!":var t=new Date((o("!")-this._ticksTo1970)/1e4);i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"'":n("'")?q():m=!0;break;default:q()}if(r<b.length)throw"Extra/unparsed characters found in date: "+b.substring(r);i==-1?i=(new Date).getFullYear():i<100&&(i+=(new Date).getFullYear()-(new Date).getFullYear()%100+(i>d?-100:0));if(l>-1){j=1,k=l;do{var u=this._getDaysInMonth(i,j-1);if(k>u)j++,k-=u;else break}while(!0)}var t=this._daylightSavingAdjust(new Date(i,j-1,k));if(t.getFullYear()!=i||t.getMonth()+1!=j||t.getDate()!=k)throw"Invalid date";return t},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(a,b,c){if(!b)return"";var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,h=function(b){var c=m+1<a.length&&a.charAt(m+1)==b;return c&&m++,c},i=function(a,b,c){var d=""+b;if(h(a))while(d.length<c)d="0"+d;return d},j=function(a,b,c,d){return h(a)?d[b]:c[b]},k="",l=!1;if(b)for(var m=0;m<a.length;m++)if(l)a.charAt(m)=="'"&&!h("'")?l=!1:k+=a.charAt(m);else switch(a.charAt(m)){case"d":k+=i("d",b.getDate(),2);break;case"D":k+=j("D",b.getDay(),d,e);break;case"o":k+=i("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":k+=i("m",b.getMonth()+1,2);break;case"M":k+=j("M",b.getMonth(),f,g);break;case"y":k+=h("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":k+=b.getTime();break;case"!":k+=b.getTime()*1e4+this._ticksTo1970;break;case"'":h("'")?k+="'":l=!0;break;default:k+=a.charAt(m)}return k},_possibleChars:function(a){var b="",c=!1,d=function(b){var c=e+1<a.length&&a.charAt(e+1)==b;return c&&e++,c};for(var e=0;e<a.length;e++)if(c)a.charAt(e)=="'"&&!d("'")?c=!1:b+=a.charAt(e);else switch(a.charAt(e)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(e)}return b},_get:function(a,b){return a.settings[b]!==undefined?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()==a.lastVal)return;var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e,f;e=f=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{e=this.parseDate(c,d,g)||f}catch(h){this.log(h),d=b?"":d}a.selectedDay=e.getDate(),a.drawMonth=a.selectedMonth=e.getMonth(),a.drawYear=a.selectedYear=e.getFullYear(),a.currentDay=d?e.getDate():0,a.currentMonth=d?e.getMonth():0,a.currentYear=d?e.getFullYear():0,this._adjustInstDate(a)},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var d=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},e=function(b){try{return $.datepicker.parseDate($.datepicker._get(a,"dateFormat"),b,$.datepicker._getFormatConfig(a))}catch(c){}var d=(b.toLowerCase().match(/^c/)?$.datepicker._getDate(a):null)||new Date,e=d.getFullYear(),f=d.getMonth(),g=d.getDate(),h=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,i=h.exec(b);while(i){switch(i[2]||"d"){case"d":case"D":g+=parseInt(i[1],10);break;case"w":case"W":g+=parseInt(i[1],10)*7;break;case"m":case"M":f+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f));break;case"y":case"Y":e+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f))}i=h.exec(b)}return new Date(e,f,g)},f=b==null||b===""?c:typeof b=="string"?e(b):typeof b=="number"?isNaN(b)?c:d(b):new Date(b.getTime());return f=f&&f.toString()=="Invalid Date"?c:f,f&&(f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0)),this._daylightSavingAdjust(f)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),(e!=a.selectedMonth||f!=a.selectedYear)&&!c&&this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),d=this._get(a,"showButtonPanel"),e=this._get(a,"hideIfNoPrevNext"),f=this._get(a,"navigationAsDateFormat"),g=this._getNumberOfMonths(a),h=this._get(a,"showCurrentAtPos"),i=this._get(a,"stepMonths"),j=g[0]!=1||g[1]!=1,k=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),l=this._getMinMaxDate(a,"min"),m=this._getMinMaxDate(a,"max"),n=a.drawMonth-h,o=a.drawYear;n<0&&(n+=12,o--);if(m){var p=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth()-g[0]*g[1]+1,m.getDate()));p=l&&p<l?l:p;while(this._daylightSavingAdjust(new Date(o,n,1))>p)n--,n<0&&(n=11,o--)}a.drawMonth=n,a.drawYear=o;var q=this._get(a,"prevText");q=f?this.formatDate(q,this._daylightSavingAdjust(new Date(o,n-i,1)),this._getFormatConfig(a)):q;var r=this._canAdjustMonth(a,-1,o,n)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+a.id+"', -"+i+", 'M');\""+' title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>":e?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>",s=this._get(a,"nextText");s=f?this.formatDate(s,this._daylightSavingAdjust(new Date(o,n+i,1)),this._getFormatConfig(a)):s;var t=this._canAdjustMonth(a,1,o,n)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+a.id+"', +"+i+", 'M');\""+' title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":e?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>",u=this._get(a,"currentText"),v=this._get(a,"gotoCurrent")&&a.currentDay?k:b;u=f?this.formatDate(u,v,this._getFormatConfig(a)):u;var w=a.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+dpuuid+'.datepicker._hideDatepicker();">'+this._get(a,"closeText")+"</button>",x=d?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?w:"")+(this._isInRange(a,v)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._gotoToday('#"+a.id+"');\""+">"+u+"</button>":"")+(c?"":w)+"</div>":"",y=parseInt(this._get(a,"firstDay"),10);y=isNaN(y)?0:y;var z=this._get(a,"showWeek"),A=this._get(a,"dayNames"),B=this._get(a,"dayNamesShort"),C=this._get(a,"dayNamesMin"),D=this._get(a,"monthNames"),E=this._get(a,"monthNamesShort"),F=this._get(a,"beforeShowDay"),G=this._get(a,"showOtherMonths"),H=this._get(a,"selectOtherMonths"),I=this._get(a,"calculateWeek")||this.iso8601Week,J=this._getDefaultDate(a),K="";for(var L=0;L<g[0];L++){var M="";this.maxRows=4;for(var N=0;N<g[1];N++){var O=this._daylightSavingAdjust(new Date(o,n,a.selectedDay)),P=" ui-corner-all",Q="";if(j){Q+='<div class="ui-datepicker-group';if(g[1]>1)switch(N){case 0:Q+=" ui-datepicker-group-first",P=" ui-corner-"+(c?"right":"left");break;case g[1]-1:Q+=" ui-datepicker-group-last",P=" ui-corner-"+(c?"left":"right");break;default:Q+=" ui-datepicker-group-middle",P=""}Q+='">'}Q+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+P+'">'+(/all|left/.test(P)&&L==0?c?t:r:"")+(/all|right/.test(P)&&L==0?c?r:t:"")+this._generateMonthYearHeader(a,n,o,l,m,L>0||N>0,D,E)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";var R=z?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"";for(var S=0;S<7;S++){var T=(S+y)%7;R+="<th"+((S+y+6)%7<5?"":' class="ui-datepicker-week-end"')+">"+'<span title="'+A[T]+'">'+C[T]+"</span></th>"}Q+=R+"</tr></thead><tbody>";var U=this._getDaysInMonth(o,n);o==a.selectedYear&&n==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,U));var V=(this._getFirstDayOfMonth(o,n)-y+7)%7,W=Math.ceil((V+U)/7),X=j?this.maxRows>W?this.maxRows:W:W;this.maxRows=X;var Y=this._daylightSavingAdjust(new Date(o,n,1-V));for(var Z=0;Z<X;Z++){Q+="<tr>";var _=z?'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(Y)+"</td>":"";for(var S=0;S<7;S++){var ba=F?F.apply(a.input?a.input[0]:null,[Y]):[!0,""],bb=Y.getMonth()!=n,bc=bb&&!H||!ba[0]||l&&Y<l||m&&Y>m;_+='<td class="'+((S+y+6)%7<5?"":" ui-datepicker-week-end")+(bb?" ui-datepicker-other-month":"")+(Y.getTime()==O.getTime()&&n==a.selectedMonth&&a._keyEvent||J.getTime()==Y.getTime()&&J.getTime()==O.getTime()?" "+this._dayOverClass:"")+(bc?" "+this._unselectableClass+" ui-state-disabled":"")+(bb&&!G?"":" "+ba[1]+(Y.getTime()==k.getTime()?" "+this._currentClass:"")+(Y.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!bb||G)&&ba[2]?' title="'+ba[2]+'"':"")+(bc?"":' onclick="DP_jQuery_'+dpuuid+".datepicker._selectDay('#"+a.id+"',"+Y.getMonth()+","+Y.getFullYear()+', this);return false;"')+">"+(bb&&!G?"&#xa0;":bc?'<span class="ui-state-default">'+Y.getDate()+"</span>":'<a class="ui-state-default'+(Y.getTime()==b.getTime()?" ui-state-highlight":"")+(Y.getTime()==k.getTime()?" ui-state-active":"")+(bb?" ui-priority-secondary":"")+'" href="#">'+Y.getDate()+"</a>")+"</td>",Y.setDate(Y.getDate()+1),Y=this._daylightSavingAdjust(Y)}Q+=_+"</tr>"}n++,n>11&&(n=0,o++),Q+="</tbody></table>"+(j?"</div>"+(g[0]>0&&N==g[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),M+=Q}K+=M}return K+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),a._keyEvent=!1,K},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i=this._get(a,"changeMonth"),j=this._get(a,"changeYear"),k=this._get(a,"showMonthAfterYear"),l='<div class="ui-datepicker-title">',m="";if(f||!i)m+='<span class="ui-datepicker-month">'+g[b]+"</span>";else{var n=d&&d.getFullYear()==c,o=e&&e.getFullYear()==c;m+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" "+">";for(var p=0;p<12;p++)(!n||p>=d.getMonth())&&(!o||p<=e.getMonth())&&(m+='<option value="'+p+'"'+(p==b?' selected="selected"':"")+">"+h[p]+"</option>");m+="</select>"}k||(l+=m+(f||!i||!j?"&#xa0;":""));if(!a.yearshtml){a.yearshtml="";if(f||!j)l+='<span class="ui-datepicker-year">'+c+"</span>";else{var q=this._get(a,"yearRange").split(":"),r=(new Date).getFullYear(),s=function(a){var b=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?r+parseInt(a,10):parseInt(a,10);return isNaN(b)?r:b},t=s(q[0]),u=Math.max(t,s(q[1]||""));t=d?Math.max(t,d.getFullYear()):t,u=e?Math.min(u,e.getFullYear()):u,a.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+a.id+"', this, 'Y');\" "+">";for(;t<=u;t++)a.yearshtml+='<option value="'+t+'"'+(t==c?' selected="selected"':"")+">"+t+"</option>";a.yearshtml+="</select>",l+=a.yearshtml,a.yearshtml=null}}return l+=this._get(a,"yearSuffix"),k&&(l+=(f||!i||!j?"&#xa0;":"")+m),l+="</div>",l},_adjustInstDate:function(a,b,c){var d=a.drawYear+(c=="Y"?b:0),e=a.drawMonth+(c=="M"?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+(c=="D"?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),(c=="M"||c=="Y")&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&b<c?c:b;return e=d&&e>d?d:e,e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return b==null?[1,1]:typeof b=="number"?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(b<0?b:e[0]*e[1]),1));return b<0&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),$.fn.datepicker=function(a){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return typeof a!="string"||a!="isDisabled"&&a!="getDate"&&a!="widget"?a=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b)):this.each(function(){typeof a=="string"?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this].concat(b)):$.datepicker._attachDatepicker(this,a)}):$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="@VERSION",window["DP_jQuery_"+dpuuid]=$}),define("jqueryui/sortable",["jquery","jqueryui/core","jqueryui/mouse","jqueryui/widget","jquery.instructure_jquery_patches"],function(a,b,c,d,e){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?a.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable"),this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData("sortable-item");return this},_setOption:function(b,c){b==="disabled"?(this.options[b]=c,this.widget()[c?"addClass":"removeClass"]("ui-sortable-disabled")):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,c){if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(b);var d=null,e=this,f=a(b.target).parents().each(function(){if(a.data(this,"sortable-item")==e)return d=a(this),!1});a.data(b.target,"sortable-item")==e&&(d=a(b.target));if(!d)return!1;if(this.options.handle&&!c){var g=!1;a(this.options.handle,d).find("*").andSelf().each(function(){this==b.target&&(g=!0)});if(!g)return!1}return this.currentItem=d,this._removeCurrentsFromItems(),!0},_mouseStart:function(b,c,d){var e=this.options,f=this;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),e.containment&&this._setContainment(),e.cursor&&(a("body").css("cursor")&&(this._storedCursor=a("body").css("cursor")),a("body").css("cursor",e.cursor)),e.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",e.opacity)),e.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",e.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!d)for(var g=this.containers.length-1;g>=0;g--)this.containers[g]._trigger("activate",b,f._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var c=this.options,d=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<c.scrollSensitivity?this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop+c.scrollSpeed:b.pageY-this.overflowOffset.top<c.scrollSensitivity&&(this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-c.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<c.scrollSensitivity?this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft+c.scrollSpeed:b.pageX-this.overflowOffset.left<c.scrollSensitivity&&(this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-c.scrollSpeed)):(b.pageY-a(document).scrollTop()<c.scrollSensitivity?d=a(document).scrollTop(a(document).scrollTop()-c.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<c.scrollSensitivity&&(d=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed)),b.pageX-a(document).scrollLeft()<c.scrollSensitivity?d=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<c.scrollSensitivity&&(d=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed))),d!==!1&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var e=this.items.length-1;e>=0;e--){var f=this.items[e],g=f.item[0],h=this._intersectsWithPointer(f);if(!h)continue;if(g!=this.currentItem[0]&&this.placeholder[h==1?"next":"prev"]()[0]!=g&&!a.ui.contains(this.placeholder[0],g)&&(this.options.type=="semi-dynamic"?!a.ui.contains(this.element[0],g):!0)){this.direction=h==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(f))this._rearrange(b,f);else break;this._trigger("change",b,this._uiHash());break}}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(!b)return;a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b);if(this.options.revert){var d=this,e=d.placeholder.offset();d.reverting=!0,a(this.helper).animate({left:e.left-this.offset.parent.left-d.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top-d.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1},cancel:function(){var b=this;if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var c=this.containers.length-1;c>=0;c--)this.containers[c]._trigger("deactivate",null,b._uiHash(this)),this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",null,b._uiHash(this)),this.containers[c].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l=d+j>h&&d+j<i&&b+k>f&&b+k<g;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?l:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i},_intersectsWithPointer:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height),d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width),e=c&&d,f=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return e?this.floating?g&&g=="right"||f=="down"?2:1:f&&(f=="down"?2:1):!1},_intersectsWithSides:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height),d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width),e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?f=="right"&&d||f=="left"&&!d:e&&(e=="down"&&c||e=="up"&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return a!=0&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return a!=0&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var c=this,d=[],e=[],f=this._connectWith();if(f&&b)for(var g=f.length-1;g>=0;g--){var h=a(f[g]);for(var i=h.length-1;i>=0;i--){var j=a.data(h[i],"sortable");j&&j!=this&&!j.options.disabled&&e.push([a.isFunction(j.options.items)?j.options.items.call(j.element):a(j.options.items,j.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),j])}}e.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var g=e.length-1;g>=0;g--)e[g][0].each(function(){d.push(this)});return a(d)},_removeCurrentsFromItems:function(){var a=this.currentItem.find(":data(sortable-item)");for(var b=0;b<this.items.length;b++)for(var c=0;c<a.length;c++)a[c]==this.items[b].item[0]&&this.items.splice(b,1)},_refreshItems:function(b){this.items=[],this.containers=[this];var c=this.items,d=this,e=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],f=this._connectWith();if(f)for(var g=f.length-1;g>=0;g--){var h=a(f[g]);for(var i=h.length-1;i>=0;i--){var j=a.data(h[i],"sortable");j&&j!=this&&!j.options.disabled&&(e.push([a.isFunction(j.options.items)?j.options.items.call(j.element[0],b,{item:this.currentItem}):a(j.options.items,j.element),j]),this.containers.push(j))}}for(var g=e.length-1;g>=0;g--){var k=e[g][1],l=e[g][0];for(var i=0,m=l.length;i<m;i++){var n=a(l[i]);n.data("sortable-item",k),c.push({item:n,instance:k,width:0,height:0,left:0,top:0})}}},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var c=this.items.length-1;c>=0;c--){var d=this.items[c];if(d.instance!=this.currentContainer&&this.currentContainer&&d.item[0]!=this.currentItem[0])continue;var e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item;b||(d.width=e.outerWidth(),d.height=e.outerHeight());var f=e.offset();d.left=f.left,d.top=f.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var c=this.containers.length-1;c>=0;c--){var f=this.containers[c].element.offset();this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight()}return this},_createPlaceholder:function(b){var c=b||this,d=c.options;if(!d.placeholder||d.placeholder.constructor==String){var e=d.placeholder;d.placeholder={element:function(){var b=a(document.createElement(c.currentItem[0].nodeName)).addClass(e||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return e||(b.style.visibility="hidden"),b},update:function(a,b){if(e&&!d.forcePlaceholderSize)return;b.height()||b.height(c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10)),b.width()||b.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||0,10))}}}c.placeholder=a(d.placeholder.element.call(c.element,c.currentItem)),c.currentItem.after(c.placeholder),d.placeholder.update(c,c.placeholder)},_contactContainers:function(b){var c=null,d=null;for(var e=this.containers.length-1;e>=0;e--){if(a.ui.contains(this.currentItem[0],this.containers[e].element[0]))continue;if(this._intersectsWith(this.containers[e].containerCache)){if(c&&a.ui.contains(this.containers[e].element[0],c.element[0]))continue;c=this.containers[e],d=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",b,this._uiHash(this)),this.containers[e].containerCache.over=0)}if(!c)return;if(this.containers.length===1)this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1;else if(this.currentContainer!=this.containers[d]){var f=1e4,g=null,h=this.positionAbs[this.containers[d].floating?"left":"top"];for(var i=this.items.length-1;i>=0;i--){if(!a.ui.contains(this.containers[d].element[0],this.items[i].item[0]))continue;var j=this.items[i][this.containers[d].floating?"left":"top"];Math.abs(j-h)<f&&(f=Math.abs(j-h),g=this.items[i])}if(!g&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[d],g?this._rearrange(b,g,null,!0):this._rearrange(b,null,this.containers[d].element,!0),this._trigger("change",b,this._uiHash()),this.containers[d]._trigger("change",b,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):c.helper=="clone"?this.currentItem.clone():this.currentItem;return d.parents("body").length||a(c.appendTo!="parent"?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(d[0].style.width==""||c.forceHelperSize)&&d.width(this.currentItem.width()),(d[0].style.height==""||c.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){typeof b=="string"&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;b.containment=="parent"&&(b.containment=this.helper[0].parentNode);if(b.containment=="document"||b.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(b.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(b.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)){var c=a(b.containment)[0],d=a(b.containment).offset(),e=a(c).css("overflow")!="hidden";this.containment=[d.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,d.left+(e?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(e?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,c){c||(c=this.position);var d=b=="absolute"?1:-1,e=this.options,f=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(d[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var f=b.pageX,g=b.pageY;if(this.originalPosition){this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top));if(c.grid){var h=this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1];g=this.containment?h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3]?h-this.offset.click.top<this.containment[1]?h+c.grid[1]:h-c.grid[1]:h:h;var i=this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0];f=this.containment?i-this.offset.click.left<this.containment[0]||i-this.offset.click.left>this.containment[2]?i-this.offset.click.left<this.containment[0]?i+c.grid[0]:i-c.grid[0]:i:i}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this,f=this.counter;window.setTimeout(function(){f==e.counter&&e.refreshPositions(!d)},0)},_clear:function(b,c){this.reverting=!1;var d=[],e=this;!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var f in this._storedCSS)if(this._storedCSS[f]=="auto"||this._storedCSS[f]=="static")this._storedCSS[f]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!c&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!c&&d.push(function(a){this._trigger("update",a,this._uiHash())});if(!a.ui.contains(this.element[0],this.currentItem[0])){c||d.push(function(a){this._trigger("remove",a,this._uiHash())});for(var f=this.containers.length-1;f>=0;f--)a.ui.contains(this.containers[f].element[0],this.currentItem[0])&&!c&&(d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.containers[f])),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.containers[f])))}for(var f=this.containers.length-1;f>=0;f--)c||d.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over&&(d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over=0);this._storedCursor&&a("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!c){this._trigger("beforeStop",b,this._uiHash());for(var f=0;f<d.length;f++)d[f].call(this,b);this._trigger("stop",b,this._uiHash())}return!1}c||this._trigger("beforeStop",b,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!c){for(var f=0;f<d.length;f++)d[f].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}}),a.extend(a.ui.sortable,{version:"@VERSION"})}),define("jquery.scrollToVisible",["jquery","jquery.instructure_jquery_patches","vendor/jquery.scrollTo"],function(a){a.fn.scrollToVisible=function(b){var c={},d=a(b),e=a("body").offset();this.each(function(){try{return e=a(this).offset(),!1}catch(b){}});if(d.length===0)return;var f=d.offset(),g=d.outerWidth(),h=d.outerHeight(),i=f.top-e.top,j=i+h,k=f.left-e.left,l=k+g,m=this.selector=="html,body"?a.windowScrollTop():this.scrollTop(),n=this.scrollLeft(),o=this.outerHeight(),p=this.outerWidth();if(this[0].tagName=="HTML"||this[0].tagName=="BODY")o=a(window).height(),a("#wizard_box:visible").length>0&&(o-=a("#wizard_box:visible").height()),p=a(window).width(),i-=m,k-=n,j-=m,l-=n;return i<0||o<h&&j>o?c.scrollTop=i+m:j>o&&(c.scrollTop=j+m-o+20),k<0?c.scrollLeft=k+n:l>p&&(c.scrollLeft=l+n-p+20),c.scrollTop==1&&(c.scrollTop=0),c.scrollLeft==1&&(c.scrollLeft=0),this.scrollTop(c.scrollTop),this.scrollLeft(c.scrollLeft),this}}),define("instructure_helper",["INST","i18n","jquery","jquery.instructure_jquery_patches"],function(a,b,c){function g(a){a=(a||"").split(":")[0];var b=a.split("."),c=b.length;return(c>1?[b[c-2],b[c-1]]:b).join("")}b=b.scoped("instructure");if(document.body.style.WebkitTransitionProperty!==undefined||document.body.style.MozTransitionProperty!==undefined||document.body.style.OTransitionProperty!==undefined){var d=".use-css-transitions-for-show-hide",e=.5,f="transitionend oTransitionEnd webkitTransitionEnd";c("<style>"+d+" {"+"    -webkit-transition: opacity "+e+"s;"+"    -moz-transition: opacity "+e+"s;"+"    -o-transition: opacity "+e+";"+"    transition: opacity "+e+"s;"+"  }"+"</style>").prependTo("head"),c.each(["show","hide","remove"],function(a,b){var g=c.fn[b];c.fn[b]=function(){return arguments.length?g.apply(this,arguments):this.each(function(){var a=c(this);this.parentNode&&a.is(d)?a.queue(function(){var c=this.style.opacity,d=a.css("opacity"),h=b==="hide"||b==="remove"?0:!d||d=="0"?1:d;b==="show"&&a.is(":hidden")&&(this.style.opacity=0,g.apply(a));var i=function(b){if(!b||b.originalEvent.propertyName==="opacity")g.apply(a),a[0].style.opacity=c,clearTimeout(j),a.unbind(f,i),a.dequeue()},j=setTimeout(i,e*1e3+100);a.bind(f,i),a.css("opacity",h)}):g.apply(a)})}})}var h=g(window.location.hostname);c.expr[":"].external=function(a){var b=c(a).attr("href");return!!(b&&b.length&&!b.match(/^(mailto\:|javascript\:)/)&&a.hostname&&g(a.hostname)!=h)},window.equella={ready:function(a){c(document).triggerHandler("equella_ready",a)},cancel:function(){c(document).triggerHandler("equella_cancel")}},c(document).bind("equella_ready",function(a,b){c("#equella_dialog").triggerHandler("equella_ready",b)}).bind("equella_cancel",function(){c("#equella_dialog").dialog("close")}),window.external_tool={ready:function(a){c("#external_tool_button_dialog:visible").triggerHandler("selection",a),c("#resource_selection_dialog:visible").triggerHandler("selection",a)},cancel:function(){c("#external_tool_button_dialog").dialog("close"),c("#resource_selection_dialog").dialog("close")}},window.jsonFlickrApi=function(a){c("#instructure_image_search").triggerHandler("search_results",a)}}),define("jqueryui/accordion",["jquery","jqueryui/core","jqueryui/widget","jquery.instructure_jquery_patches"],function(a,b){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var b=this,c=b.options;b.running=0,b.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),b.headers=b.element.find(c.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){if(c.disabled)return;a(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){if(c.disabled)return;a(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){if(c.disabled)return;a(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){if(c.disabled)return;a(this).removeClass("ui-state-focus")}),b.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(c.navigation){var d=b.element.find("a").filter(c.navigationFilter).eq(0);if(d.length){var e=d.closest(".ui-accordion-header");e.length?b.active=e:b.active=d.closest(".ui-accordion-content").prev()}}b.active=b._findActive(b.active||c.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),b.active.next().addClass("ui-accordion-content-active"),b._createIcons(),b.resize(),b.element.attr("role","tablist"),b.headers.attr("role","tab").bind("keydown.accordion",function(a){return b._keydown(a)}).next().attr("role","tabpanel"),b.headers.not(b.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),b.active.length?b.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):b.headers.eq(0).attr("tabIndex",0),a.browser.safari||b.headers.find("a").attr("tabIndex",-1),c.event&&b.headers.bind(c.event.split(" ").join(".accordion ")+".accordion",function(a){b._clickHandler.call(b,a,this),a.preventDefault()})},_createIcons:function(){var b=this.options;b.icons&&(a("<span></span>").addClass("ui-icon "+b.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(b.icons.header).toggleClass(b.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var b=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var c=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(b.autoHeight||b.fillHeight)&&c.css("height",""),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),b=="active"&&this.activate(c),b=="icons"&&(this._destroyIcons(),c&&this._createIcons()),b=="disabled"&&this.headers.add(this.headers.next())[c?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(b){if(this.options.disabled||b.altKey||b.ctrlKey)return;var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),f=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:f=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:f=this.headers[(e-1+d)%d];break;case c.SPACE:case c.ENTER:this._clickHandler({target:b.target},b.target),b.preventDefault()}return f?(a(b.target).attr("tabIndex",-1),a(f).attr("tabIndex",0),f.focus(),!1):!0},resize:function(){var b=this.options,c;if(b.fillSpace){if(a.browser.msie){var d=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}c=this.element.parent().height(),a.browser.msie&&this.element.parent().css("overflow",d),this.headers.each(function(){c-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else b.autoHeight&&(c=0,this.headers.next().each(function(){c=Math.max(c,a(this).height("").height())}).height(c));return this},activate:function(a){this.options.active=a;var b=this._findActive(a)[0];return this._clickHandler({target:b},b),this},_findActive:function(b){return b?typeof b=="number"?this.headers.filter(":eq("+b+")"):this.headers.not(this.headers.not(b)):b===!1?a([]):this.headers.filter(":eq(0)")},_clickHandler:function(b,c){var d=this.options;if(d.disabled)return;if(!b.target){if(!d.collapsible)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),this.active.next().addClass("ui-accordion-content-active");var e=this.active.next(),f={options:d,newHeader:a([]),oldHeader:d.active,newContent:a([]),oldContent:e},g=this.active=a([]);this._toggle(g,e,f);return}var h=a(b.currentTarget||c),i=h[0]===this.active[0];d.active=d.collapsible&&i?!1:this.headers.index(h);if(this.running||!d.collapsible&&i)return;var j=this.active,g=h.next(),e=this.active.next(),f={options:d,newHeader:i&&d.collapsible?a([]):h,oldHeader:this.active,newContent:i&&d.collapsible?a([]):g,oldContent:e},k=this.headers.index(this.active[0])>this.headers.index(h[0]);this.active=i?a([]):h,this._toggle(g,e,f,i,k),j.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),i||(h.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(d.icons.header).addClass(d.icons.headerSelected),h.next().addClass("ui-accordion-content-active"));return},_toggle:function(b,c,d,e,f){var g=this,h=g.options;g.toShow=b,g.toHide=c,g.data=d;var i=function(){if(!g)return;return g._completed.apply(g,arguments)};g._trigger("changestart",null,g.data),g.running=c.size()===0?b.size():c.size();if(h.animated){var j={};h.collapsible&&e?j={toShow:a([]),toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace}:j={toShow:b,toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace},h.proxied||(h.proxied=h.animated),h.proxiedDuration||(h.proxiedDuration=h.duration),h.animated=a.isFunction(h.proxied)?h.proxied(j):h.proxied,h.duration=a.isFunction(h.proxiedDuration)?h.proxiedDuration(j):h.proxiedDuration;var k=a.ui.accordion.animations,l=h.duration,m=h.animated;m&&!k[m]&&!a.easing[m]&&(m="slide"),k[m]||(k[m]=function(a){this.slide(a,{easing:m,duration:l||700})}),k[m](j)}else h.collapsible&&e?b.toggle():(c.hide(),b.show()),i(!0);c.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),b.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(a){this.running=a?0:--this.running;if(this.running)return;this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data)}}),a.extend(a.ui.accordion,{version:"@VERSION",animations:{slide:function(b,c){b=a.extend({easing:"swing",duration:300},b,c);if(!b.toHide.size()){b.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},b);return}if(!b.toShow.size()){b.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},b);return}var d=b.toShow.css("overflow"),e=0,f={},g={},h=["height","paddingTop","paddingBottom"],i,j=b.toShow;i=j[0].style.width,j.width(parseInt(j.parent().width(),10)-parseInt(j.css("paddingLeft"),10)-parseInt(j.css("paddingRight"),10)-(parseInt(j.css("borderLeftWidth"),10)||0)-(parseInt(j.css("borderRightWidth"),10)||0)),a.each(h,function(c,d){g[d]="hide";var e=(""+a.css(b.toShow[0],d)).match(/^([\d+-.]+)(.*)$/);f[d]={value:e[1],unit:e[2]||"px"}}),b.toShow.css({height:0,overflow:"hidden"}).show(),b.toHide.filter(":hidden").each(b.complete).end().filter(":visible").animate(g,{step:function(a,c){c.prop=="height"&&(e=c.end-c.start===0?0:(c.now-c.start)/(c.end-c.start)),b.toShow[0].style[c.prop]=e*f[c.prop].value+f[c.prop].unit},duration:b.duration,easing:b.easing,complete:function(){b.autoHeight||b.toShow.css("height",""),b.toShow.css({width:i,overflow:d}),b.complete()}})},bounceslide:function(a){this.slide(a,{easing:a.down?"easeOutBounce":"swing",duration:a.down?1e3:200})}}})}),define("jqueryui/tabs",["jquery","jqueryui/core","jqueryui/widget","jquery.instructure_jquery_patches"],function(a,b){function e(){return++c}function f(){return++d}var c=0,d=0;a.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(a,b){if(a=="selected"){if(this.options.collapsible&&b==this.options.selected)return;this.select(b)}else this.options[a]=b,this._tabify()},_tabId:function(a){return a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+e()},_sanitizeSelector:function(a){return a.replace(/:/g,"\\:")},_cookie:function(){var b=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+f());return a.cookie.apply(null,[b].concat(a.makeArray(arguments)))},_ui:function(a,b){return{tab:a,panel:b,index:this.anchors.index(a)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var b=a(this);b.html(b.data("label.tabs")).removeData("label.tabs")})},_tabify:function(c){function m(b,c){b.css("display",""),!a.support.opacity&&c.opacity&&b[0].style.removeAttribute("filter")}var d=this,e=this.options,f=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=a(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return a("a",this)[0]}),this.panels=a([]),this.anchors.each(function(b,c){var g=a(c).attr("href"),h=g.split("#")[0],i;h&&(h===location.toString().split("#")[0]||(i=a("base")[0])&&h===i.href)&&(g=c.hash,c.href=g);if(f.test(g))d.panels=d.panels.add(d.element.find(d._sanitizeSelector(g)));else if(g&&g!=="#"){a.data(c,"href.tabs",g),a.data(c,"load.tabs",g.replace(/#.*$/,""));var j=d._tabId(c);c.href="#"+j;var k=d.element.find("#"+j);k.length||(k=a(e.panelTemplate).attr("id",j).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(d.panels[b-1]||d.list),k.data("destroy.tabs",!0)),d.panels=d.panels.add(k)}else e.disabled.push(b)}),c?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),e.selected===b?(location.hash&&this.anchors.each(function(a,b){if(b.hash==location.hash)return e.selected=a,!1}),typeof e.selected!="number"&&e.cookie&&(e.selected=parseInt(d._cookie(),10)),typeof e.selected!="number"&&this.lis.filter(".ui-tabs-selected").length&&(e.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),e.selected=e.selected||(this.lis.length?0:-1)):e.selected===null&&(e.selected=-1),e.selected=e.selected>=0&&this.anchors[e.selected]||e.selected<0?e.selected:0,e.disabled=a.unique(e.disabled.concat(a.map(this.lis.filter(".ui-state-disabled"),function(a,b){return d.lis.index(a)}))).sort(),a.inArray(e.selected,e.disabled)!=-1&&e.disabled.splice(a.inArray(e.selected,e.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),e.selected>=0&&this.anchors.length&&(d.element.find(d._sanitizeSelector(d.anchors[e.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(e.selected).addClass("ui-tabs-selected ui-state-active"),d.element.queue("tabs",function(){d._trigger("show",null,d._ui(d.anchors[e.selected],d.element.find(d._sanitizeSelector(d.anchors[e.selected].hash))[0]))}),this.load(e.selected)),a(window).bind("unload",function(){d.lis.add(d.anchors).unbind(".tabs"),d.lis=d.anchors=d.panels=null})):e.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[e.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),e.cookie&&this._cookie(e.selected,e.cookie);for(var g=0,h;h=this.lis[g];g++)a(h)[a.inArray(g,e.disabled)!=-1&&!a(h).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");e.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs");if(e.event!=="mouseover"){var i=function(a,b){b.is(":not(.ui-state-disabled)")&&b.addClass("ui-state-"+a)},j=function(a,b){b.removeClass("ui-state-"+a)};this.lis.bind("mouseover.tabs",function(){i("hover",a(this))}),this.lis.bind("mouseout.tabs",function(){j("hover",a(this))}),this.anchors.bind("focus.tabs",function(){i("focus",a(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){j("focus",a(this).closest("li"))})}var k,l;e.fx&&(a.isArray(e.fx)?(k=e.fx[0],l=e.fx[1]):k=l=e.fx);var n=l?function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.hide().removeClass("ui-tabs-hide").animate(l,l.duration||"normal",function(){m(c,l),d._trigger("show",null,d._ui(b,c[0]))})}:function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.removeClass("ui-tabs-hide"),d._trigger("show",null,d._ui(b,c[0]))},o=k?function(a,b){b.animate(k,k.duration||"normal",function(){d.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),m(b,k),d.element.dequeue("tabs")})}:function(a,b,c){d.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),d.element.dequeue("tabs")};this.anchors.bind(e.event+".tabs",function(){var b=this,c=a(b).closest("li"),f=d.panels.filter(":not(.ui-tabs-hide)"),g=d.element.find(d._sanitizeSelector(b.hash));if(c.hasClass("ui-tabs-selected")&&!e.collapsible||c.hasClass("ui-state-disabled")||c.hasClass("ui-state-processing")||d.panels.filter(":animated").length||d._trigger("select",null,d._ui(this,g[0]))===!1)return this.blur(),!1;e.selected=d.anchors.index(this),d.abort();if(e.collapsible){if(c.hasClass("ui-tabs-selected"))return e.selected=-1,e.cookie&&d._cookie(e.selected,e.cookie),d.element.queue("tabs",function(){o(b,f)}).dequeue("tabs"),this.blur(),!1;if(!f.length)return e.cookie&&d._cookie(e.selected,e.cookie),d.element.queue("tabs",function(){n(b,g)}),d.load(d.anchors.index(this)),this.blur(),!1}e.cookie&&d._cookie(e.selected,e.cookie);if(g.length)f.length&&d.element.queue("tabs",function(){o(b,f)}),d.element.queue("tabs",function(){n(b,g)}),d.load(d.anchors.index(this));else throw"jQuery UI Tabs: Mismatching fragment identifier.";a.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(a){return typeof a=="string"&&(a=this.anchors.index(this.anchors.filter("[href$="+a+"]"))),a},destroy:function(){var b=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var b=a.data(this,"href.tabs");b&&(this.href=b);var c=a(this).unbind(".tabs");a.each(["href","load","cache"],function(a,b){c.removeData(b+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){a.data(this,"destroy.tabs")?a(this).remove():a(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),b.cookie&&this._cookie(null,b.cookie),this},add:function(c,d,e){e===b&&(e=this.anchors.length);var f=this,g=this.options,h=a(g.tabTemplate.replace(/#\{href\}/g,c).replace(/#\{label\}/g,d)),i=c.indexOf("#")?this._tabId(a("a",h)[0]):c.replace("#","");h.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var j=f.element.find("#"+i);return j.length||(j=a(g.panelTemplate).attr("id",i).data("destroy.tabs",!0)),j.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),e<this.lis.length?(h.insertBefore(this.lis[e]),j.insertBefore(this.panels[e])):(h.appendTo(this.list),j.appendTo(this.list[0].parentNode)),g.disabled=a.map(g.disabled,function(a,b){return a<e?a:++a}),this._tabify(),this.anchors.length==1&&(g.selected=0,h.addClass("ui-tabs-selected ui-state-active"),j.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){f._trigger("show",null,f._ui(f.anchors[0],f.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[e],this.panels[e])),this},remove:function(b){b=this._getIndex(b);var c=this.options,d=this.lis.eq(b).remove(),e=this.panels.eq(b).remove();return d.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(b+(b+1<this.anchors.length?1:-1)),c.disabled=a.map(a.grep(c.disabled,function(a,c){return a!=b}),function(a,c){return a<b?a:--a}),this._tabify(),this._trigger("remove",null,this._ui(d.find("a")[0],e[0])),this},enable:function(b){b=this._getIndex(b);var c=this.options;if(a.inArray(b,c.disabled)==-1)return;return this.lis.eq(b).removeClass("ui-state-disabled"),c.disabled=a.grep(c.disabled,function(a,c){return a!=b}),this._trigger("enable",null,this._ui(this.anchors[b],this.panels[b])),this},disable:function(a){a=this._getIndex(a);var b=this,c=this.options;return a!=c.selected&&(this.lis.eq(a).addClass("ui-state-disabled"),c.disabled.push(a),c.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[a],this.panels[a]))),this},select:function(a){a=this._getIndex(a);if(a==-1)if(this.options.collapsible&&this.options.selected!=-1)a=this.options.selected;else return this;return this.anchors.eq(a).trigger(this.options.event+".tabs"),this},load:function(b){b=this._getIndex(b);var c=this,d=this.options,e=this.anchors.eq(b)[0],f=a.data(e,"load.tabs");this.abort();if(!f||this.element.queue("tabs").length!==0&&a.data(e,"cache.tabs")){this.element.dequeue("tabs");return}this.lis.eq(b).addClass("ui-state-processing");if(d.spinner){var g=a("span",e);g.data("label.tabs",g.html()).html(d.spinner)}return this.xhr=a.ajax(a.extend({},d.ajaxOptions,{url:f,success:function(f,g){c.element.find(c._sanitizeSelector(e.hash)).html(f),c._cleanup(),d.cache&&a.data(e,"cache.tabs",!0),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.success(f,g)}catch(h){}},error:function(a,f,g){c._cleanup(),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.error(a,f,b,e)}catch(g){}}})),c.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(a,b){return this.anchors.eq(a).removeData("cache.tabs").data("load.tabs",b),this},length:function(){return this.anchors.length}}),a.extend(a.ui.tabs,{version:"@VERSION"}),a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(a,b){var c=this,d=this.options,e=c._rotate||(c._rotate=function(b){clearTimeout(c.rotation),c.rotation=setTimeout(function(){var a=d.selected;c.select(++a<c.anchors.length?a:0)},a),b&&b.stopPropagation()}),f=c._unrotate||(c._unrotate=b?function(a){t=d.selected,e()}:function(a){a.clientX&&c.rotate(null)});return a?(this.element.bind("tabsshow",e),this.anchors.bind(d.event+".tabs",f),e()):(clearTimeout(c.rotation),this.element.unbind("tabsshow",e),this.anchors.unbind(d.event+".tabs",f),delete this._rotate,delete this._unrotate),this}})}),define("jqueryui/autocomplete",["jquery","jqueryui/core","jqueryui/widget","jqueryui/position","jquery.instructure_jquery_patches"],function(a,b,c,d,e){var f=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var b=this,c=this.element[0].ownerDocument,d;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(c){if(b.options.disabled||b.element.propAttr("readOnly"))return;d=!1;var e=a.ui.keyCode;switch(c.keyCode){case e.PAGE_UP:b._move("previousPage",c);break;case e.PAGE_DOWN:b._move("nextPage",c);break;case e.UP:b._move("previous",c),c.preventDefault();break;case e.DOWN:b._move("next",c),c.preventDefault();break;case e.ENTER:case e.NUMPAD_ENTER:b.menu.active&&(d=!0,c.preventDefault());case e.TAB:if(!b.menu.active)return;b.menu.select(c);break;case e.ESCAPE:b.element.val(b.term),b.close(c);break;default:clearTimeout(b.searching),b.searching=setTimeout(function(){b.term!=b.element.val()&&(b.selectedItem=null,b.search(null,c))},b.options.delay)}}).bind("keypress.autocomplete",function(a){d&&(d=!1,a.preventDefault())}).bind("focus.autocomplete",function(){if(b.options.disabled)return;b.selectedItem=null,b.previous=b.element.val()}).bind("blur.autocomplete",function(a){if(b.options.disabled)return;clearTimeout(b.searching),b.closing=setTimeout(function(){b.close(a),b._change(a)},150)}),this._initSource(),this.response=function(){return b._response.apply(b,arguments)},this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",c)[0]).mousedown(function(c){var d=b.menu.element[0];a(c.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(c){c.target!==b.element[0]&&c.target!==d&&!a.ui.contains(d,c.target)&&b.close()})},1),setTimeout(function(){clearTimeout(b.closing)},13)}).menu({focus:function(a,c){var d=c.item.data("item.autocomplete");!1!==b._trigger("focus",a,{item:d})&&/^key/.test(a.originalEvent.type)&&b.element.val(d.value)},selected:function(a,d){var e=d.item.data("item.autocomplete"),f=b.previous;b.element[0]!==c.activeElement&&(b.element.focus(),b.previous=f,setTimeout(function(){b.previous=f,b.selectedItem=e},1)),!1!==b._trigger("select",a,{item:e})&&b.element.val(e.value),b.term=b.element.val(),b.close(a),b.selectedItem=e},blur:function(a,c){b.menu.element.is(":visible")&&b.element.val()!==b.term&&b.element.val(b.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),a.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),b==="source"&&this._initSource(),b==="appendTo"&&this.menu.element.appendTo(a(c||"body",this.element[0].ownerDocument)[0]),b==="disabled"&&c&&this.xhr&&this.xhr.abort()},_initSource:function(){var b=this,c,d;a.isArray(this.options.source)?(c=this.options.source,this.source=function(b,d){d(a.ui.autocomplete.filter(c,b.term))}):typeof this.options.source=="string"?(d=this.options.source,this.source=function(c,e){b.xhr&&b.xhr.abort(),b.xhr=a.ajax({url:d,data:c,dataType:"json",autocompleteRequest:++f,success:function(a,b){this.autocompleteRequest===f&&e(a)},error:function(){this.autocompleteRequest===f&&e([])}})}):this.source=this.options.source},search:function(a,b){a=a!=null?a:this.element.val(),this.term=this.element.val();if(a.length<this.options.minLength)return this.close(b);clearTimeout(this.closing);if(this._trigger("search",b)===!1)return;return this._search(a)},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:a},this.response)},_response:function(a){!this.options.disabled&&a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close(),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(a){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return typeof b=="string"?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,b),this.menu.deactivate(),this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItem(b,c)})},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>").text(c.label)).appendTo(b)},_move:function(a,b){if(!this.menu.element.is(":visible")){this.search(null,b);return}if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)){this.element.val(this.term),this.menu.deactivate();return}this.menu[a](b)},widget:function(){return this.menu.element}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}}),a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){if(!a(c.target).closest(".ui-menu-item a").length)return;c.preventDefault(),b.select(c)}),this.refresh()},refresh:function(){var b=this,c=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");c.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(c){b.activate(c,a(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(a,b){this.deactivate();if(this.hasScroll()){var c=b.offset().top-this.element.offset().top,d=this.element.scrollTop(),e=this.element.height();c<0?this.element.scrollTop(d+c):c>=e&&this.element.scrollTop(d+c-e+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",a,{item:b})},deactivate:function(){if(!this.active)return;this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(a,b,c){if(!this.active){this.activate(c,this.element.children(b));return}var d=this.active[a+"All"](".ui-menu-item").eq(0);d.length?this.activate(c,d):this.activate(c,this.element.children(b))},nextPage:function(b){if(this.hasScroll()){if(!this.active||this.last()){this.activate(b,this.element.children(".ui-menu-item:first"));return}var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c-d+a(this).height();return b<10&&b>-10});e.length||(e=this.element.children(".ui-menu-item:last")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(b){if(this.hasScroll()){if(!this.active||this.first()){this.activate(b,this.element.children(".ui-menu-item:last"));return}var c=this.active.offset().top,d=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c+d-a(this).height();return b<10&&b>-10}),result.length||(result=this.element.children(".ui-menu-item:first")),this.activate(b,result)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[a.fn.prop?"prop":"attr"]("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})}),define("vendor/jquery.pageless",["jquery","jquery.instructure_jquery_patches"],function(a){var b=!1,c=!b,d=".pageless",e="scroll"+d,f="resize"+d,g=null,h=function(g){var h,i=b,j,k={container:window,currentPage:1,distance:100,pagination:".pagination",params:{},url:location.href,loaderImage:"/images/load.gif",animate:!0},l,m,n=function(b){a.isFunction(b)?b.call():p(b)},o=function(){return k.loaderHtml||'<div id="pageless-loader" style="display:none;text-align:center;width:100%;">  <div class="msg" style="color:#e9e9e9;font-size:2em"></div>  <img src="'+k.loaderImage+'" alt="loading more results" style="margin:10px auto" /></div>'},p=function(b){b&&a.extend(k,b),l=k.container,m=a(l),k.pagination&&a(k.pagination).remove(),u()},q=function(b,c){var d=a(c.loader,b);h=b,c.loader&&d.length?j=d:(j=a(o()),b.append(j),c.loaderHtml||a("#pageless-loader .msg").html(c.loaderMsg)),r(i)},r=function(a){i=a;if(!j)return;i?j.parents().first().is(":visible")&&k.animate?j.fadeIn("normal"):j.show():j.parents().first().is(":visible")&&k.animate?j.fadeOut("normal"):j.hide()},s=function(){return l===window?a(document).height()-m.scrollTop()-m.height():m[0].scrollHeight-m.scrollTop()-m.height()},t=function(){m.unbind(d)},u=function(){m.bind(e+" "+f,v).trigger(e)},v=function(){if(k.totalPages>k.currentPage)!i&&s()<k.distance&&(r(c),k.currentPage++,a.extend(k.params,{page:k.currentPage}),a.get(k.url,k.params,function(c,d,e){var c=a.isFunction(k.scrape)?k.scrape(c,e):c;j?j.before(c):h.append(c),r(b),k.complete&&k.complete.call()},"html"));else{t(),k.end&&k.end.call();return}};return{activate:n,applyContext:q}};a.pageless=function(a){return g===null&&(g=h(a),g.activate(a)),g},a.fn.pageless=function(b){return this.hasOwnProperty("pagelessInstance")||(this.pagelessInstance=h(b),this.pagelessInstance.activate(b)),this.pagelessInstance.applyContext(a(this),b),this}}),define("vendor/slickgrid-googlecode/slick.grid",["jquery","jqueryui/sortable","jqueryui/resizable"],function(a,b,c){return function d(b,c,d,e){function M(){e=a.extend({},f,e),b.empty().attr("tabIndex",0).attr("hideFocus",!0).css("overflow","hidden").css("outline",0).css("position","relative").addClass(j),l=a("<div class='grid-header' style='overflow:hidden;position:relative;' />").appendTo(b),m=a("<div style='width:10000px' />").appendTo(l),n=a("<div tabIndex='0' hideFocus style='width:100%;overflow:scroll;outline:0;position:relative;outline:0px;'>").appendTo(b),o=a("<div class='grid-canvas' tabIndex='0' hideFocus />").appendTo(n),n.height(b.innerHeight()-l.outerHeight());for(var c=0;c<d.length;c++){var g=d[c];F[g.id]=c,g.width||(g.width=e.defaultColumnWidth),g.formatter||(g.formatter=V);var h=a("<div class='h c"+c+"' cell="+c+" id='"+g.id+"' />").html(g.name).width(g.width).appendTo(m);g.rerenderOnResize&&h.append(" <img src='images/help.png' align='absmiddle' title='This column has an adaptive formatter.  Resize to a smaller size to see alternative data representation.'>")}m.find(".h").each(function(){var b=parseInt(a(this).attr("cell")),c=d[b];if(c.resizable===!1)return;a(this).resizable({handles:"e",minWidth:c.minWidth?c.minWidth:null,maxWidth:c.maxWidth?c.maxWidth:null,stop:function(b,c){var e=a(this).attr("id"),f=F[e];d[f].width=a(this).width(),a("body").append("<style class='slick-style'> ."+j+" .grid-canvas .c"+f+"{width: "+d[f].width+"px;} </style>"),bd(),d[f].rerenderOnResize&&Z(),bg()}})}),e.enableColumnReorder&&m.sortable({axis:"x",cancel:".ui-resizable-handle",update:function(a,b){console.time("column reorder");var c=m.sortable("toArray"),e={};for(var f=0;f<d.length;f++)e[d[f].id]=d[f];for(var f=0;f<c.length;f++)F[c[f]]=f,d[f]=e[c[f]];Z(),O(),N(),bg(),k.onColumnsReordered&&k.onColumnsReordered(),a.stopPropagation(),console.timeEnd("column reorder")}}),m.bind("click",function(b){if(!a(b.target).hasClass(".h"))return;var c=a(b.target).attr("id");k.onColumnHeaderClick&&k.onColumnHeaderClick(d[F[c]])}),N(),bd(),bg(),e.manualScrolling||n.bind("scroll",bh),o.bind("keydown",bi),o.bind("click",bj),o.bind("dblclick",bk),a.browser.msie&&(n[0].onselectstart=function(){if(event.srcElement.tagName!="INPUT"&&event.srcElement.tagName!="TEXTAREA")return!1})}function N(){for(var b=0;b<d.length;b++)a("body").append("<style class='slick-style'> ."+j+" .grid-canvas .c"+b+" { width:"+d[b].width+"px } </style>")}function O(){a("body").find("style.slick_style").remove()}function P(){u&&bw(),m.sortable("destroy"),m.find(".h").resizable("destroy"),O(),b.empty().removeClass(j)}function Q(a,b,c){m.find(".h[id="+a+"]").removeClass(c).addClass(b)}function R(a){return F[a]}function S(){return D.concat()}function T(b){if(GlobalEditorLock.isEditing()&&!GlobalEditorLock.hasLock(k))throw"Grid : setSelectedRows : cannot set selected rows when somebody else has an edit lock";var c={};for(var d=0;d<b.length;d++)c[b[d]]=!0;for(var d=0;d<D.length;d++){var e=D[d];v[e]&&!c[e]&&a(v[e]).removeClass("selected")}for(var d=0;d<b.length;d++){var e=b[d];v[e]&&!E[e]&&a(v[e]).addClass("selected")}D=b.concat(),E=c}function U(b){if(u&&!bv())return;bm(null),e.enableAddRow!=b.enableAddRow&&_(c.length),e=a.extend(e,b),bg()}function V(a,b,c,d,e){return c==null||c==undefined?"":c}function W(a,b){var e=c[b],f=b<c.length&&!e,h="r"+(f?" loading":"")+(E[b]?" selected":"");a.push("<div class='"+h+"' row='"+b+"' style='top:"+g*b+"px'>");for(var i=0,j=d.length;i<j;i++){var k=d[i],l;!k.active||!e.active,a.push("<div "+(k.unselectable?"":"hideFocus tabIndex=0 ")+"class='c c"+i+(k.cssClass?" "+k.cssClass:"")+(k.active&&e.active?" active-col-and-row":"")+"' cell="+i+">"),e&&b<c.length&&a.push(k.formatter(b,i,e[k.field],k,e)),a.push("</div>")}a.push("</div>")}function X(a){var b=[];return W(b,a),b.join("")}function Y(a,b){console.time("cleanupRows");var c=w,d=o[0];for(var e in v)(e<a||e>b)&&e!=r&&(d.removeChild(v[e]),delete v[e],w--,J++);console.log("removed "+(c-w)+" rows"),console.timeEnd("cleanupRows")}function Z(){console.log("removeAllRows"),o[0].innerHTML="",v={},J+=w,w=0}function _(a){var b=v[a];if(!b)return;if(u&&r==a)throw"Grid : removeRow : Cannot remove a row that is currently in edit mode";B=0,b.parentNode.removeChild(b),b=null,delete v[a],w--,J++}function ba(a){console.time("removeRows");if(!a||!a.length)return;B=0;var b=[];for(var c=0,d=a.length;c<d;c++){if(u&&r==c)throw"Grid : removeRow : Cannot remove a row that is currently in edit mode";var e=v[a[c]];if(!e)continue;b.push(a[c])}if(w>10&&b.length==w)o[0].innerHTML="",v={},J+=w,w=0;else for(var c=0,f=b.length;c<f;c++){var e=v[b[c]];e.parentNode.removeChild(e),delete v[b[c]],w--,J++}console.timeEnd("removeRows")}function bb(b,e){if(!v[b])return;var f=a(v[b]).find(".c[cell="+e+"]");if(f.length===0)return;var g=d[e],h=c[b];u&&r==b&&s==e?u.setValue(h[g.field]):f[0].innerHTML=h?g.formatter(b,e,h[g.field],g,h):""}function bc(b){if(!v[b])return;a(v[b]).find(".c").each(function(a){var e=d[a];b==r&&a==s&&u?u.setValue(c[r][e.field]):c[b]?this.innerHTML=e.formatter(b,a,c[b][e.field],e,c[b]):this.innerHTML=""})}function bd(){q=n.innerWidth(),p=n.innerHeight(),i=x=Math.ceil(p/g),h=Math.max(h,x+2*i);var b=0;for(var f=0;f<d.length;f++)b+=d[f].width+5;o.width(b);var j=o[0],k=e.enableAddRow?c.length:c.length-1;for(var f in v)f>=k&&(j.removeChild(v[f]),delete v[f],w--,J++);var l=Math.max(g*(c.length+x-2),p-a.getScrollbarWidth());n.scrollTop()>l-n.height()+a.getScrollbarWidth()&&n.scrollTop(l-n.height()+a.getScrollbarWidth()),o.height(l)}function be(){return{top:Math.floor(z/g),bottom:Math.floor((z+p)/g)}}function bf(a,b){console.time("renderRows");var c=o[0],d=w,e=[],f=[],g=new Date;for(var h=a;h<=b;h++){if(v[h])continue;w++,f.push(h),W(e,h),I++}var i=document.createElement("div");i.innerHTML=e.join("");for(var h=0,j=i.childNodes.length;h<j;h++)v[f[h]]=c.appendChild(i.firstChild);w-d>5&&(C=(new Date-g)/(w-d)),console.log("rendered "+(w-d)+" rows"),console.timeEnd("renderRows")}function bg(){var a=be(),b=Math.max(0,a.top-(B<0?i:5)),d=Math.min(e.enableAddRow?c.length:c.length-1,a.bottom+(B>0?i:5));w>10&&Math.abs(y-z)>g*h?Z():Y(b,d),bf(b,d),y=z,H=null}function bh(){z=n[0].scrollTop;var a=Math.abs(y-z),b=n[0].scrollLeft;b!=A&&(l[0].scrollLeft=A=b);if(a<5*g)return;y==z?B=0:y<z?B=1:B=-1,H&&window.clearTimeout(H),a<x*g?bg():H=window.setTimeout(bg,50),k.onViewportChanged&&k.onViewportChanged()}function bi(a){switch(a.which){case 27:GlobalEditorLock.isEditing()&&GlobalEditorLock.hasLock(k)&&bw(k),t&&t.focus();break;case 9:a.shiftKey?bt(0,-1,!0):bt(0,1,!0);break;case 37:bt(0,-1);break;case 39:bt(0,1);break;case 38:bt(-1,0);break;case 40:case 13:bt(1,0);break;default:if(k.onKeyDown&&c[r]&&!u&&k.onKeyDown(a,r,s))return a.stopPropagation(),a.preventDefault(),!1;return}return a.stopPropagation(),a.preventDefault(),!1}function bj(b){var f=a(b.target).closest(".c");if(f.length===0)return;if(t==f[0]&&u!=null)return;var g=parseInt(f.parent().attr("row")),h=parseInt(f.attr("cell")),i=null;if(c[g]&&k.onClick&&(!u||(i=bv()))&&k.onClick(b,g,h))return b.stopPropagation(),b.preventDefault(),!1;e.enableCellNavigation&&!d[h].unselectable&&(i==1||i==null&&bv())&&bn(f[0])}function bk(b){var c=a(b.target).closest(".c");if(c.length===0)return;if(t==c[0]&&u!=null)return;e.editOnDoubleClick&&br()}function bl(a,b){var c=Math.floor(b/g),e=0,f=0;for(var h=0;h<d.length&&f<b;h++)f+=d[h].width,e++;return{row:c,cell:e-1}}function bm(b,d){t!=null&&(bq(),a(t).removeClass("selected")),t=b,t!=null?(r=parseInt(a(t).parent().attr("row")),s=parseInt(a(t).attr("cell")),a(t).addClass("selected"),bs(),e.editable&&!e.editOnDoubleClick&&(c[r]||r==c.length)&&(window.clearTimeout(G),d?G=window.setTimeout(br,100):br())):(r=null,s=null)}function bn(a,b){bm(a,b),a?T([r]):T([]),k.onSelectedRowsChanged&&k.onSelectedRowsChanged()}function bo(){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var a=window.getSelection();a&&a.removeAllRanges&&a.removeAllRanges()}}function bp(a,b){return a<c.length&&!c[a]?!1:d[b].cannotTriggerInsert&&a>=c.length?!1:d[b].editor?!0:!1}function bq(){if(!u)return;u.destroy(),a(t).removeClass("editable invalid"),c[r]&&(t.innerHTML=d[s].formatter(r,s,c[r][d[s].field],d[s],c[r])),u=null,a.browser.msie&&bo(),GlobalEditorLock.leaveEditMode(k)}function br(){if(!t)return;if(!e.editable)throw"Grid : makeSelectedCellEditable : should never get called when options.editable is false";window.clearTimeout(G);if(!bp(r,s))return;GlobalEditorLock.enterEditMode(k),a(t).addClass("editable");var b=null;c[r]&&(b=c[r][d[s].field]),t.innerHTML="",u=new d[s].editor(a(t),d[s],b,c[r])}function bs(){if(!t)return;var a=n[0].scrollTop;(r+2)*g>a+p?(n[0].scrollTop=r*g,bh()):r*g<a&&(n[0].scrollTop=(r+2)*g-p,bh())}function bt(b,c,d){if(!t)return;if(!e.enableCellNavigation)return;if(!GlobalEditorLock.commitCurrentEdit())return;var f=v[r+b],g=f?a(f).find(".c[cell="+(s+c)+"][tabIndex=0]"):null;d&&b==0&&!(f&&g&&g.length)&&(!g||!g.length)&&(c>0?(f=v[r+b+1],g=f?a(f).find(".c[cell][tabIndex=0]:first"):null):(f=v[r+b-1],g=f?a(f).find(".c[cell][tabIndex=0]:last"):null)),f&&g&&g.length?(bn(g[0],e.asyncEditorLoading),u||t.focus()):t.focus()}function bu(b,f){if(b>c.length||b<0||f>=d.length||f<0)return;if(!e.enableCellNavigation||d[f].unselectable)return;if(!GlobalEditorLock.commitCurrentEdit())return;v[b]||bf(b,b);var f=a(v[b]).find(".c[cell="+f+"][tabIndex=0]")[0];bn(f),u||t.focus()}function bv(){if(u){if(u.isValueChanged()){var b=u.validate();if(b.valid){var e=u.getValue();return r<c.length?d[s].setValueHandler?d[s].setValueHandler(e,d[s],c[r]):c[r][d[s].field]=e:k.onAddNewRow&&k.onAddNewRow(d[s],e),bq(),!0}return a(t).addClass("invalid"),a(t).stop(!0,!0).effect("highlight",{color:"red"},300),k.onValidationError&&k.onValidationError(t,b,r,s,d[s]),u.focus(),!1}bq()}return!0}function bw(){bq()}var f={enableAddRow:!0,manualScrolling:!1,editable:!0,editOnDoubleClick:!1,enableCellNavigation:!0,defaultColumnWidth:80,enableColumnReorder:!0,asyncEditorLoading:!0},g=24,h=50,i=5,j="slickgrid_"+Math.round(1e6*Math.random()),k=this,l,m,n,o,p,q,r,s,t=null,u=null,v={},w=0,x,y=0,z=0,A=0,B=1,C=10,D=[],E={},F={},G=null,H=null,I=0,J=0,K=document.createDocumentFragment(),L=!1;this.debug=function(){var a="";a+="\ncounter_rows_rendered:  "+I,a+="\ncounter_rows_removed:  "+J,a+="\nrenderedRows:  "+w,a+="\nnumVisibleRows:  "+x,a+="\nCAPACITY:  "+h,a+="\nBUFFER:  "+i,a+="\navgRowRenderTime:  "+C,alert(a)},this.benchmark_render_200=function(){Z(),bf(0,200),Y()},this.stressTest=function(){console.time("benchmark-stress"),bf(0,500),Y(),console.timeEnd("benchmark-stress"),window.setTimeout(k.stressTest,50)},this.benchmarkFn=function(a){var b=new Date,c=new Array(arguments);c.splice(0,1),k[a].call(this,c),alert("Grid : benchmarkFn : "+a+" : "+(new Date-b)+"ms")},M(),a.extend(this,{onColumnHeaderClick:null,onClick:null,onKeyDown:null,onAddNewRow:null,onValidationError:null,onViewportChanged:null,onSelectedRowsChanged:null,onColumnsReordered:null,destroy:P,getColumnIndex:R,updateCell:bb,updateRow:bc,removeRow:_,removeRows:ba,removeAllRows:Z,render:bg,getViewport:be,resizeCanvas:bd,scroll:scroll,getCellFromPoint:bl,gotoCell:bu,editCurrentCell:br,getSelectedRows:S,setSelectedRows:T,setColumnHeaderCssClass:Q,commitCurrentEdit:bv,cancelCurrentEdit:bw})}}),define("jquery.keycodes",["jquery","jquery.instructure_date_and_time"],function(a){a.fn.keycodes=function(b,c){var d={27:"esc",9:"tab",32:"space",13:"return",8:"backspace",145:"scroll",20:"capslock",144:"numlock",19:"pause",45:"insert",36:"home",46:"del",35:"end",33:"pageup",34:"pagedown",37:"left",38:"up",39:"right",40:"down",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",191:"/"};a.browser.mozilla&&(d=a.extend(d,{96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",0:"191"})),typeof b=="string"&&(b={keyCodes:b}),this.filter(":input,object,embed").length>0&&(b.ignore="");var b=a.extend({},a.fn.keycodes.defaults,b),e=[],f=[],g=b.keyCodes.split(" ");return a.each(g,function(a,b){f.push(b),b=b.split("+").sort().join("+").toLowerCase(),e.push(b)}),this.bind("keydown",function(g,h){g=h&&h.keyCode?h:g;if(b.ignore&&a(g.target).is(b.ignore))return;var i=[];g.shiftKey&&i.push("Shift"),g.ctrlKey&&i.push("Ctrl"),g.metaKey&&i.push("Meta"),g.altKey&&i.push("Alt");var j=d[g.keyCode];j=j||String.fromCharCode(g.keyCode),i.push(j),i=i.sort().join("+").toLowerCase(),g.keyMatches=function(a){return a=a.split("+").sort().join("+").toLowerCase(),a==i};var k=a.inArray(i,e),l=a(document).data("last_datepicker");if(l&&l[0]==this&&g.keyCode==27)return g.preventDefault(),!1;k!=-1&&(g.keyString=f[k],c.call(this,g))}),this},a.fn.keycodes.defaults={ignore:":input,object,embed",keyCodes:""}}),define("jquery.instructure_date_and_time",["i18n","jquery","str/htmlEscape","jquery.instructure_jquery_patches","jquery.keycodes","vendor/date","jqueryui/datepicker","jqueryui/sortable","jqueryui/widget"],function(a,b,c){a=a.scoped("instructure"),b.parseDateTime=function(a,c){var a=b.datepicker.parseDate("mm/dd/yy",a);if(c){var d=c.split(":"),e=parseInt(d[0],10);e==12&&(e=0),c.match(/pm/i)&&(e+=12);var f=0;d[1]&&(f=d[1].replace(/(am|pm)/gi,"")),a.setHours(e),a.setMinutes(f)}else a.setHours(0),a.setMinutes(0);return a.date=a,a},b.formatDateTime=function(a,b){var c="",d="";a&&(a.date=a.date||a),b.object_name&&(c+=b.object_name+"[",d="]"+d),b.property_name&&(c+=b.property_name);var e={};return a&&!isNaN(a.date.getFullYear())?(e[c+"(1i)"+d]=a.getFullYear(),e[c+"(2i)"+d]=a.getMonth()+1,e[c+"(3i)"+d]=a.getDate(),e[c+"(4i)"+d]=a.getHours(),e[c+"(5i)"+d]=a.getMinutes()):(e[c+"(1i)"+d]="",e[c+"(2i)"+d]="",e[c+"(3i)"+d]="",e[c+"(4i)"+d]="",e[c+"(5i)"+d]=""),e},b.parseFromISO=function(a,c){var d=parseInt(b("#time_zone_offset").text(),10)/-60,e=new Date;c=c||"event";try{var f={};if(!a)return b.parseFromISO.defaults;var g=a.substring(0,4),h=a.substring(5,7),i=a.substring(8,10),j=parseInt(a.substring(19),10)||0;f.date=new Date(g,h-1,i),f.date.getTimezoneOffset()!=e.getTimezoneOffset()&&(d-=(f.date.getTimezoneOffset()-e.getTimezoneOffset())/60);var k=d-j;f.date_sortable=a.substring(0,10),f.date_string=h+"/"+i+"/"+g,f.date_formatted=b.dateString(f.date);var l=a.substring(11,13),m=a.substring(14,16),n=a.substring(17,19),o=parseInt(l,10)*1e3*3600;k&&!isNaN(k)&&(o+=k*1e3*3600);var p=parseInt(m,10)*1e3*60,q=parseInt(n,10)*1e3,r=o+p+q||0,s=Date.UTC(g,h-1,i)||0;f.time_timestamp=r/1e3,f.date_timestamp=s/1e3;var t=f.date.getTimezoneOffset()*6e4,u=new Date(s+r+t),v="am";o=u.getHours(),o>12?(o-=12,v="pm"):o==12?v="pm":o===0&&(o=12);var w=o,x=":";u.getMinutes()<10&&(x+="0"),x+=u.getMinutes(),u.getMinutes()!==0&&(w+=x);var y=c=="due_date"?"by":"at",z=" "+y+" "+w+v;f.show_time=!0;var A=u.getHours();return A<10&&(A="0"+A),f.time_sortable=A+x,w+=v,f.time_formatted=w,f.time_string=o+x+v,f.time=u,f.datetime=u,f.date_formatted=b.dateString(f.datetime),f.datetime_formatted=f.date_formatted+z,f.timestamp=(r+s)/1e3,f.minute_timestamp=f.timestamp-f.timestamp%60,f}catch(B){return b.parseFromISO.defaults}},b.parseFromISO.ref_date=new Date,b.parseFromISO.offset=b.parseFromISO.ref_date.getTimezoneOffset()*6e4,b.parseFromISO.defaults={date:new Date(b.parseFromISO.offset),date_sortable:"0000-00-00",date_string:"",date_formatted:"",time_timestamp:0,date_timestamp:0,timestamp:0,time:new Date(b.parseFromISO.offset),time_formatted:"",time_string:""};var d=new Date;b.thisYear=function(a){return a&&a.getFullYear()==d.getFullYear()},b.dateString=function(a){return a&&a.toString(b.thisYear(a)?"MMM d":"MMM d, yyyy")||""},b.timeString=function(a){return a&&a.toString("h:mmtt").toLowerCase()||""},b.friendlyDatetime=function(c,d){var e=Date.today();return Date.equals(c.clone().clearTime(),e)?a.l("#time.formats.tiny",c):b.friendlyDate(c,d)},b.friendlyDate=function(b,c){c==null&&(c="past");var d=Date.today(),e=b.clone().clearTime();return Date.equals(e,d)?a.t("#date.days.today","Today"):Date.equals(e,d.add(-1).days())?a.t("#date.days.yesterday","Yesterday"):Date.equals(e,d.add(1).days())?a.t("#date.days.tomorrow","Tomorrow"):c=="past"&&e<d&&e>=d.add(-6).days()?a.l("#date.formats.weekday",e):c=="future"&&e<d.add(7).days()&&e>=d?a.l("#date.formats.weekday",e):a.l("#date.formats.medium",e)},b.fn.parseFromISO=b.parseFromISO,b.datepicker.oldParseDate=b.datepicker.parseDate,b.datepicker.parseDate=function(a,c,d){return Date.parse((c||"").toString().replace(/ (at|by)/,""))||b.datepicker.oldParseDate(a,c,d)},b.datepicker._generateDatepickerHTML=b.datepicker._generateHTML,b.datepicker._generateHTML=function(d){var e=b.datepicker._generateDatepickerHTML(d);if(d.settings.timePicker){var f=d.input.data("time-hour")||"";f=f.replace(/'/g,"");var g=d.input.data("time-minute")||"";g=g.replace(/'/g,"");var h=d.input.data("time-ampm")||"",i=h=="am"?"selected":"",j=h=="pm"?"selected":"";e+="<div class='datepicker-time'><label for='ui-datepicker-time-hour'>"+c(a.beforeLabel("datepicker.time","Time"))+"</label> <input id='ui-datepicker-time-hour' type='text' value='"+f+"' title='hr' class='ui-datepicker-time-hour' style='width: 20px;'/>:<input type='text' value='"+g+"' title='min' class='ui-datepicker-time-minute' style='width: 20px;'/> <select class='ui-datepicker-time-ampm' title='"+c(a.t("datepicker.titles.am_pm","am/pm"))+"'><option value=''>&nbsp;</option><option value='am' "+i+">"+c(a.t("#time.am","am"))+"</option><option value='pm' "+j+">"+c(a.t("#time.pm","pm"))+"</option></select>&nbsp;&nbsp;&nbsp;<button type='button' class='button small-button ui-datepicker-ok'>"+c(a.t("#buttons.done","Done"))+"</button></div>"}return e},b.fn.realDatepicker=b.fn.datepicker;var e=b.datepicker._selectDay;b.datepicker._selectDay=function(a,c,d,f){var g=b(a);if(b(f).hasClass(this._unselectableClass)||this._isDisabledDatepicker(g[0]))return;var h=this._getInst(g[0]);if(h.settings.timePicker&&!b.datepicker.okClicked&&!h._keyEvent){var i=h.inline;h.inline=!0,b.data(g,"datepicker",h),e.call(this,a,c,d,f),h.inline=i,b.data(g,"datepicker",h)}else e.call(this,a,c,d,f)},b.fn.datepicker=function(a){return a=b.extend({},a),a.prevOnSelect=a.onSelect,a.onSelect=function(c,d){a.prevOnSelect&&a.prevOnSelect.call(this,c,d);var e=d.dpDiv,f=e.find(".ui-datepicker-time-hour").val()||b(this).data("time-hour"),g=e.find(".ui-datepicker-time-minute").val()||b(this).data("time-minute"),h=e.find(".ui-datepicker-time-ampm").val()||b(this).data("time-ampm");if(f){g=g||"00",h=h||"pm";var i=f+":"+g+" "+h;c+=" "+i}d.input.val(c).change()},b.fn.datepicker.timepicker_initialized||(b(document).delegate(".ui-datepicker-ok","click",function(a){var c=b.datepicker._curInst,d=c,e=b("td."+b.datepicker._dayOverClass+", td."+b.datepicker._currentClass,d.dpDiv);e[0]?(b.datepicker.okClicked=!0,b.datepicker._selectDay(c.input[0],d.selectedMonth,d.selectedYear,e[0]),b.datepicker.okClicked=!1):b.datepicker._hideDatepicker(null,b.datepicker._get(d,"duration"))}),b(document).delegate(".ui-datepicker-time-hour","change keypress focus blur",function(a){var c=b.datepicker._curInst;if(c){var d=b(this).val();c.input.data("time-hour",d)}}).delegate(".ui-datepicker-time-minute","change keypress focus blur",function(a){var c=b.datepicker._curInst;if(c){var d=b(this).val();c.input.data("time-minute",d)}}).delegate(".ui-datepicker-time-ampm","change keypress focus blur",function(a){var c=b.datepicker._curInst;if(c){var d=b(this).val();c.input.data("time-ampm",d)}}),b(document).delegate(".ui-datepicker-time-hour,.ui-datepicker-time-minute,.ui-datepicker-time-ampm","mousedown",function(a){b(this).focus()}),b(document).delegate(".ui-datepicker-time-hour,.ui-datepicker-time-minute,.ui-datepicker-time-ampm","change keypress focus blur",function(a){if(a.keyCode&&a.keyCode==13){var c=b.datepicker._curInst,d=c,e=b("td."+b.datepicker._dayOverClass+", td."+b.datepicker._currentClass,d.dpDiv);e[0]?(b.datepicker.okClicked=!0,b.datepicker._selectDay(c.input[0],d.selectedMonth,d.selectedYear,e[0]),b.datepicker.okClicked=!1):b.datepicker._hideDatepicker(null,b.datepicker._get(d,"duration"))}else a.keyCode&&a.keyCode==27&&b.datepicker._hideDatepicker(null,"")}),b.fn.datepicker.timepicker_initialized=!0),this.realDatepicker(a),b(document).data("last_datepicker",this),this},b.fn.date_field=function(a){return a=b.extend({},a),a.dateOnly=!0,this.datetime_field(a),this},b.fn.time_field=function(a){return a=b.extend({},a),a.timeOnly=!0,this.datetime_field(a),this},b.fn.datetime_field=function(c){return c=b.extend({},c),this.each(function(){var d=b(this);if(d.hasClass("datetime_field_enabled"))return;d.addClass("datetime_field_enabled"),c.timeOnly||d.datepicker({timePicker:!c.dateOnly,constrainInput:!1,dateFormat:"M d, yy",showOn:"button",buttonImage:"/images/datepicker.gif?1234",buttonImageOnly:!0});var e=b(this);d.next(".ui-datepicker-trigger").length>0&&(e=d.next());var f=b(document.createElement("div")).addClass("datetime_suggest");e.after(f),f=e.next(),d.bind("change focus blur keyup",function(){var d=b(this).val();c.timeOnly&&d&&parseInt(d,10)==d&&(d<8?d+="pm":d+="am");var e=Date.parse((d||"").toString().replace(/ (at|by)/,"")),f=a.t("errors.not_a_date","That's not a date!"),g=f;b(this).val()||(g=""),e&&(b(this).data("date",e),!c.timeOnly&&!c.dateOnly&&(e.getHours()||e.getMinutes()||c.alwaysShowTime)?(g=e.toString("ddd MMM d, yyyy h:mmtt"),b(this).data("time-hour",e.toString("h")).data("time-minute",e.toString("mm")).data("time-ampm",e.toString("tt").toLowerCase())):c.timeOnly?g=e.toString("h:mmtt").toLowerCase():g=e.toString("ddd MMM d, yyyy"));var h=b(this).parent().children(".datetime_suggest");h&&(h.toggleClass("invalid_datetime",g==f),h.text(g))}).triggerHandler("change")}),this},b.datetime={},b.datetime.shortFormat="MMM d, yyyy",b.datetime.defaultFormat="MMM d, yyyy h:mmtt",b.datetime.sortableFormat="yyyy-MM-ddTHH:mm:ss",b.datetime.clean=function(a){var c=Date.parse((a||"").toString("yyyy-MM-ddTHH:mm:ss").replace(/ (at|by)/,""))||a,d="";return c&&(c.getHours()||c.getMinutes()?d=c.toString(b.datetime.defaultFormat):d=c.toString(b.datetime.shortFormat)),d},b.datetime.process=function(a){var c=a;typeof a=="string"&&(c=Date.parse((a||"").toString().replace(/ (at|by)/,"")));var d="";return c&&(d=c.toString(b.datetime.sortableFormat)),d},b.fn.timepicker=function(){var a=b("#time_picker");return a.length===0&&(a=b._initializeTimepicker()),this.each(function(){b(this).focus(function(){var a=b(this).offset(),c=b(this).outerHeight(),d=b(this).outerWidth(),e=b("#time_picker");e.css({left:-1e3,height:"auto",width:"auto"}).show();var f=e.offset(),g=e.outerHeight(),h=e.outerWidth();e.css({top:a.top+c,left:a.left}).end(),b("#time_picker .time_slot").removeClass("ui-state-highlight").removeClass("ui-state-active"),e.data("attached_to",b(this)[0]);var i=b(window).height(),j=b(window).width(),k=b.windowScrollTop();a.top+c-k+g>i&&e.css({top:a.top-g}),a.left+h>j&&e.css({left:a.left+d-h}),b("#time_picker").hide().slideDown()}).blur(function(){b("#time_picker").data("attached_to")==b(this)[0]&&(b("#time_picker").data("attached_to",null),b("#time_picker").hide().find(".time_slot.ui-state-highlight").removeClass("ui-state-highlight"))}).keycodes("esc return",function(a){b(this).triggerHandler("blur")}).keycodes("ctrl+up ctrl+right ctrl+left ctrl+down",function(a){if(b("#time_picker").data("attached_to")!=b(this)[0])return;a.preventDefault();var c=b("#time_picker .time_slot.ui-state-highlight:first"),d=b(b("#time_picker").data("attached_to")).val(),e=12,f="00",g="pm",h;d&&d.length>=7&&(e=d.substring(0,2),f=d.substring(3,5),g=d.substring(5,7));if(c.length===0){h=parseInt(d,10)-1,isNaN(h)&&(h=0),b("#time_picker .time_slot").eq(h).triggerHandler("mouseover");return}if(a.keyString=="ctrl+up"){var i=c.parent(".widget_group");h=i.children(".time_slot").index(c),i.hasClass("ampm_group")?h=f/15:i.hasClass("minute_group")&&(h=parseInt(e,10)-1),i.prev(".widget_group").find(".time_slot").eq(h).triggerHandler("mouseover")}else if(a.keyString=="ctrl+right")c.next(".time_slot").triggerHandler("mouseover");else if(a.keyString=="ctrl+left")c.prev(".time_slot").triggerHandler("mouseover");else if(a.keyString=="ctrl+down"){i=c.parent(".widget_group"),h=i.children(".time_slot").index(c);var j=i.next(".widget_group").find(".time_slot");h=Math.min(h,j.length-1),i.hasClass("hour_group")?h=f/15:i.hasClass("minute_group")&&(h=g=="am"?0:1),j.eq(h).triggerHandler("mouseover")}})}),this},b._initializeTimepicker=function(){var d=b(document.createElement("div"));d.attr("id","time_picker").css({position:"absolute",display:"none"});var e="<div class='widget_group hour_group'>";return e+="<div class='ui-widget ui-state-default time_slot'>01</div>",e+="<div class='ui-widget ui-state-default time_slot'>02</div>",e+="<div class='ui-widget ui-state-default time_slot'>03</div>",e+="<div class='ui-widget ui-state-default time_slot'>04</div>",e+="<div class='ui-widget ui-state-default time_slot'>05</div>",e+="<div class='ui-widget ui-state-default time_slot'>06</div>",e+="<div class='ui-widget ui-state-default time_slot'>07</div>",e+="<div class='ui-widget ui-state-default time_slot'>08</div>",e+="<div class='ui-widget ui-state-default time_slot'>09</div>",e+="<div class='ui-widget ui-state-default time_slot'>10</div>",e+="<div class='ui-widget ui-state-default time_slot'>11</div>",e+="<div class='ui-widget ui-state-default time_slot'>12</div>",e+="<div class='clear'></div>",e+="</div>",e+="<div class='widget_group minute_group'>",e+="<div class='ui-widget ui-state-default time_slot'>00</div>",e+="<div class='ui-widget ui-state-default time_slot'>15</div>",e+="<div class='ui-widget ui-state-default time_slot'>30</div>",e+="<div class='ui-widget ui-state-default time_slot'>45</div>",e+="<div class='clear'></div>",e+="</div>",e+="<div class='widget_group ampm_group'>",e+="<div class='ui-widget ui-state-default time_slot'>"+c(a.t("#time.am","am"))+"</div>",e+="<div class='ui-widget ui-state-default time_slot'>"+c(a.t("#time.pm","pm"))+"</div>",e+="<div class='clear'></div>",e+="</div>",d.html(e),b("body").append(d),d.find(".time_slot").mouseover(function(){d.find(".time_slot.ui-state-highlight").removeClass("ui-state-highlight"),b(this).addClass("ui-state-highlight");var a=b(d.data("attached_to")||"none"),c=a.val(),e=12,f="00",g="pm";c&&c.length>=7&&(e=c.substring(0,2),f=c.substring(3,5),g=c.substring(5,7));var h=b(this).text();h>0&&h<=12?e=h:h=="am"||h=="pm"?g=h:f=h,a.val(e+":"+f+g)}).mouseout(function(){b(this).removeClass("ui-state-highlight")}).mousedown(function(a){a.preventDefault(),b(this).triggerHandler("mouseover"),b(this).removeClass("ui-state-highlight").addClass("ui-state-active")}).mouseup(function(){b(this).removeClass("ui-state-active")}).click(function(a){a.preventDefault(),b(this).triggerHandler("mouseover"),d.data("attached_to")&&b(d.data("attached_to")).focus(),d.stop().hide().data("attached_to",null)}),d}}),define("jquery.disableWhileLoading",["i18n","jquery","jquery.ajaxJSON","vendor/jquery.spin"],function(a,b){a=a.scoped("instructure"),b.fn.disableWhileLoading=function(c,d){return this.each(function(){var e=b.extend(!0,{},b.fn.disableWhileLoading.defaults,d),f=b(this),g="disabled_"+b.guid++,h=f.add(f.next(".ui-dialog-buttonpane")),i=h.find("*").andSelf().filter(":input").not(":disabled").prop("disabled",!0);f.spin(d),h.css("opacity",function(a,c){return b(this).data(g+"opacityBefore",this.style.opacity),e.opacity}),b.each(e.buttons,function(c,d){b.isArray(e.buttons)&&(c=d,d=null),h.find(c).text(function(c,e){return b(this).data(g,e),d||b(this).data("textWhileLoading")||b(this).is(".ui-button-text")&&b(this).closest(".ui-button").data("textWhileLoading")||a.t("loading","Loading...")})}),b.when(c).always(function(){f.spin(!1),h.css("opacity",function(){return b(this).data(g+"opacityBefore")}),i.prop("disabled",!1),b.each(e.buttons,function(){h.find(""+this).text(function(){return b(this).data(g)})})})})},b.fn.disableWhileLoading.defaults={opacity:.5,buttons:['button[type="submit"], .ui-dialog-buttonpane .ui-button .ui-button-text']}}),define("jquery.instructure_misc_plugins",["i18n","jquery","jquery.ajaxJSON","jquery.instructure_jquery_patches","jquery.scrollToVisible","vendor/jquery.ba-hashchange","vendor/jquery.scrollTo"],function(a,b){return a=a.scoped("instructure"),b.fn.ifExists=function(a){return this.length&&a.call(this,this),this},b.fn.scrollbarWidth=function(){var a=b('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div>').appendTo(this),c=a.find("div"),d=c.innerWidth();a.css("overflow-y","scroll");var e=c.innerWidth();return a.remove(),d-e},b.fn.dim=function(a){return this.animate({opacity:.4},a)},b.fn.undim=function(a){return this.animate({opacity:1},a)},b.fn.confirmDelete=function(a){var a=b.extend({},b.fn.confirmDelete.defaults,a),c=this,d=!0;a.noMessage=a.noMessage||a.no_message,a.message&&!a.noMessage&&(b.skipConfirmations||(d=confirm(a.message)));if(!d){a.cancelled&&b.isFunction(a.cancelled)&&a.cancelled.call(c);return}a.confirmed||(a.confirmed=function(){c.dim()}),a.confirmed.call(c);if(a.url){a.success||(a.success=function(a){c.fadeOut("slow",function(){c.remove()})});var e={};a.token&&(e.authenticity_token=a.token),e.authenticity_token||(e.authenticity_token=b("#ajax_authenticity_token").text()),b.ajaxJSON(a.url,"DELETE",e,function(b){a.success.call(c,b)},function(d,e,f,g){a.error&&b.isFunction(a.error)?a.error.call(c,d,e,f,g):b.ajaxJSON.unhandledXHRs.push(e)})}else a.success||(a.success=function(){c.fadeOut("slow",function(){c.remove()})}),a.success.call(c)},b.fn.confirmDelete.defaults={message:a.t("confirms.default_delete_thing","Are you sure you want to delete this?")},b.fn.fragmentChange=function(a){if(a&&a!==!0){var c=(window.location.search||"").replace(/^\?/,"").split("&"),d,e=null;for(d in c){var f=c[d];f&&f.indexOf("hash=")===0&&(e="#"+f.substring(5))}this.bind("document_fragment_change",a);var g=this,h=!1;for(d in b._checkFragments.fragmentList){var i=b._checkFragments.fragmentList[d];i.doc[0]==g[0]&&(h=!0)}h||b._checkFragments.fragmentList.push({doc:g,fragment:""}),b(window).bind("hashchange",b._checkFragments),setTimeout(function(){e&&e.length>0?g.triggerHandler("document_fragment_change",e):g&&g[0]&&g[0].location&&g[0].location.hash.length>0&&g.triggerHandler("document_fragment_change",g[0].location.hash)},500)}else this.triggerHandler("document_fragment_change",this[0].location.hash);return this},b._checkFragments=function(){var a=b._checkFragments.fragmentList;for(var c in a){var d=a[c],e=d.doc;e[0].location.hash!=d.fragment&&(e.triggerHandler("document_fragment_change",e[0].location.hash),d.fragment=e[0].location.hash,b._checkFragments.fragmentList[c]=d)}},b._checkFragments.fragmentList=[],b.fn.clickLink=function(){var a=this.eq(0);a.hasClass("disabled_link")||a.click()},b.fn.showIf=function(a){return b.isFunction(a)?this.each(function(c){b(this).showIf(a.call(this))}):(a?this.show():this.hide(),this)},b.fn.disableIf=function(a){return b.isFunction(a)&&(a=a.call(this)),this.prop("disabled",!!a),this},b.fn.indicate=function(a){a=a||{};var c;if(a=="remove"){c=this.data("indicator"),c&&c.remove();return}b(".indicator_box").remove();var d=this.offset();a&&a.offset&&(d=a.offset);var e=this.width(),f=this.height(),g=(a.container||this).zIndex();c=b(document.createElement("div")),c.css({width:e+6,height:f+6,top:d.top-3,left:d.left-3,zIndex:g+1,position:"absolute",display:"block","-moz-border-radius":5,opacity:.8,border:"2px solid #870",backgroundColor:"#fd0"}),c.addClass("indicator_box"),c.mouseover(function(){b(this).stop().fadeOut("fast",function(){b(this).remove()})}),this.data("indicator")&&this.indicate("remove"),this.data("indicator",c),b("body").append(c),a&&a.singleFlash?c.hide().fadeIn().animate({opacity:.8},500).fadeOut("slow",function(){b(this).remove()}):c.hide().fadeIn().animate({opacity:.8},500).fadeOut("slow").fadeIn("slow").animate({opacity:.8},2500).fadeOut("slow",function(){b(this).remove()}),a&&a.scroll&&b("html,body").scrollToVisible(c)},b.fn.hasScrollbar=function(){return this.length&&this[0].clientHeight<this[0].scrollHeight},b.fn.log=function(a){return console.log("%s: %o",a,this),this},b.fn.chevronCrumbs=function(a){return this.each(function(){b(this).show().addClass("chevron-crumbs").children().not("#hide-scratch").addClass("chevron-crumb").append('<span class="chevron-outer"><span class="chevron-inner"></span></span>').filter(".active").prev().addClass("before-active")})},b.fn.fillWindowWithMe=function(a){function j(){i.height(0);var a=h.height()-(e.offset().top+e.height())+(f.height()-g.height()),j=Math.max(400,a);i.height(j),b.isFunction(c.onResize)&&c.onResize.call(d,j)}var c=b.extend({minHeight:400},a),d=b(this),e=b("#wrapper-container"),f=b("#main"),g=b("#not_right_side"),h=b(window),i=b(this).add(c.alsoResize);return j(),h.unbind("resize.fillWindowWithMe").bind("resize.fillWindowWithMe",j),this},b.fn.autoGrowInput=function(a){return a=b.extend({maxWidth:1e3,minWidth:0,comfortZone:70},a),this.filter("input:text").each(function(){var c=a.minWidth||b(this).width(),d="",e=b(this),f=b("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:e.css("fontSize"),fontFamily:e.css("fontFamily"),fontWeight:e.css("fontWeight"),letterSpacing:e.css("letterSpacing"),whiteSpace:"nowrap"}),g=function(){setTimeout(function(){if(d===(d=e.val()))return;var b=d.replace(/&/g,"&amp;").replace(/\s/g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");f.html(b);var g=f.width(),h=g+a.comfortZone<c?c:g+a.comfortZone,i=e.width(),j=h<i&&h>=c||h>c&&h<a.maxWidth;j&&e.width(h)})};f.insertAfter(e),b(this).bind("keyup keydown blur update change",g)}),this},b.fn.fixDialogButtons=function(){return this.each(function(){var a=b(this);a.find(".button-container:last .button, button[type=submit]").ifExists(function(c){a.find(".button-container:last, button[type=submit]").hide();var d=c.map(function(){var a=b(this);return{text:a.text(),"data-text-while-loading":a.data("textWhileLoading"),click:function(){a.click()}}}).get();d.length&&a.dialog("option","buttons",d)})})},b}),define("reminders",["jquery","instructure-jquery.ui.draggable-patch","jquery.instructure_misc_plugins"],function(a){a(document).ready(function(){a("#floating_reminders").draggable(),a(".show_reminders_link").click(function(b){b.preventDefault(),a(this).blur();var c=a("#floating_reminders"),d=c.clone();d.children().css("visibility","hidden");var e=a("#reminders_icon").offset(),f=a("#floating_reminders").offset().top;c.after(d),d.css({width:20,height:20,left:e.left,top:e.top-f,opacity:0}),c.css("visibility","hidden").css("left",""),d.animate({top:c.css("top"),left:c.css("left"),width:c.width(),height:c.height(),opacity:1},"slow",function(){a(this).remove(),c.css("visibility","visible"),c.find("a:not(.hide_reminders_link):visible:first").focus(),a("#reminders_icon").hide()});var g=c.find(".update_session_url").attr("href")}),a(".hide_reminders_link").click(function(b){b.preventDefault();var c=a(this).parents("#floating_reminders"),d=c.clone();c.after(d).css("left",-2e3),d.children().css("visibility","hidden");var e=a("#reminders_icon").show().offset(),f=d.offset().top;d.animate({width:20,height:20,left:e.left,top:e.top-f,opacity:0},"slow",function(){a(this).remove()});var g=c.find(".update_session_url").attr("href")}),a(".drop_held_context_link").click(function(b){b.preventDefault();var c=a(this).parents(".reminder");c.confirmDelete({url:a(this).attr("href"),message:"Are you sure you want to drop this "+c.find(".item_type").text()+"?",success:function(b){a(this).fadeOut("fast",function(){a(this).remove(),a("#floating_reminders .reminder").length===0&&a("#floating_reminders").fadeOut("fast",function(){a(this).remove(),a("#reminders_icon").remove()})})}})})})}),function(){require(["i18n","jquery","jquery.instructure_jquery_patches","jquery.instructure_misc_plugins","jquery.loadingImg"],function(a,b){var c,d,e,f;return a=a.scoped("license_help"),d=["by","nc","nd","sa"],e=function(a,c){return b(a).toggleClass("selected",!!c).attr("aria-checked",!!c)},c=function(a){return e(a,!0)},f=function(a){return e(a,!1)},b(".license_help_link").live("click",function(g){var h,i;return g.preventDefault(),h=b("#license_help_dialog"),i=b(this).prev("select"),h.length===0&&(h=b("<div/>").attr("id","license_help_dialog").hide().loadingImage().appendTo("body").delegate(".option","click",function(a){var d;a.preventDefault(),d=!b(this).is(".selected"),e(this,d),d?(c(h.find(".option.by")),b(this).hasClass("sa")?f(h.find(".option.nd")):b(this).hasClass("nd")&&f(h.find(".option.sa"))):b(this).hasClass("by")&&f(h.find(".option")),h.triggerHandler("option_change")}).delegate(".select_license","click",function(){return h.data("select")&&h.data("select").val(h.data("current_license")||"private"),h.dialog("close")}).bind("license_change",function(a,b){var e,g,i,j;h.find(".license").removeClass("active").filter("."+b).addClass("active"),f(h.find(".option")),h.find(".license.active").length===0&&(b="private",h.find(".license.private").addClass("active")),h.data("current_license",b);if(b.match(/^cc/)){j=[];for(g=0,i=d.length;g<i;g++)e=d[g],(e==="by"||b.match("_"+e))&&j.push(c(h.find(".option."+e)));return j}}).bind("option_change",function(){var a,b,c,e,f;a=["cc"];for(e=0,f=d.length;e<f;e++)c=d[e],h.find(".option."+c).is(".selected")&&a.push(c);return b=a.length===1?"private":a.join("_"),h.triggerHandler("license_change",b)}).dialog({autoOpen:!1,title:a.t("content_license_help","Content Licensing Help"),width:700}),b.get("/partials/_license_help.html",function(a){return h.loadingImage("remove").html(a).triggerHandler("license_change",i.val()||"private")})),h.find(".select_license").showIf(i.length),h.data("select",i),h.triggerHandler("license_change",i.val()||"private"),h.dialog("open")})})}.call(this),define("compiled/license_help",function(){}),define("tinymce.editor_box",["require","INST","jquery","instructure-jquery.ui.draggable-patch","jquery.instructure_jquery_patches","jquery.instructure_misc_helpers","jquery.instructure_misc_plugins","vendor/jquery.scrollTo","vendor/scribd.view"],function(a,b,c){function e(){this._textareas={},this._editors={},this._editor_boxes={}}function g(a,b){var d=c("#"+a+"_ifr");if(d.length){var e=c(window).height()-(d.offset().top+b.height()+1);d.height(e)}c("#"+a+"_tbl").css("height","")}function h(a,e,h,i,j){j=c.extend({},j),j.fullHeight&&c(window).resize(function(){g(a,j.elementToLeaveInViewport)}).triggerHandler("resize");var k=c("#"+a);k.data("enable_bookmarking",d);var l=c("#"+a).width();l==0&&(l=c("#"+a).closest(":visible").width());var m=",instructure_embed,instructure_equation";for(var n in b.editorButtons)b.editorButtons.length<=b.maxVisibleEditorButtons||n<b.maxVisibleEditorButtons-1?m=m+",instructure_external_button_"+b.editorButtons[n].id:m.match(/instructure_external_button_clump/)||(m+=",instructure_external_button_clump");b&&b.allowMediaComments&&(m+=",instructure_record");var o=b&&b.equellaEnabled?",instructure_equella":"";m+=o;var p="bold,italic,underline,forecolor,backcolor,removeformat,sepleft,separator,justifyleft,justifycenter,justifyright,sepleft,separator,bullist,outdent,indent,numlist,sepleft,separator,table,instructure_links,unlink"+m+",|,fontsizeselect,formatselect",q="",r="";l<460&&l>0?(p="bold,italic,underline,forecolor,backcolor,removeformat,sepleft,separator,justifyleft,justifycenter,justifyright",q="outdent,indent,bullist,numlist,sepleft,separator,table,instructure_links,unlink"+m,r="fontsizeselect,formatselect"):l<860&&(p="bold,italic,underline,forecolor,backcolor,removeformat,sepleft,separator,justifyleft,justifycenter,justifyright,sepleft,separator,outdent,indent,bullist,numlist",q="table,instructure_links,unlink"+m+",|,fontsizeselect,formatselect");var s=!0,t="/javascripts/tinymce/jscripts/tiny_mce/themes/advanced/skins/default/ui.css";s&&(t+=",/stylesheets/compiled/tiny_like_ck.css"),tinyMCE.init({mode:"exact",elements:a,theme:"advanced",plugins:"instructure_external_tools,instructure_contextmenu,instructure_links,instructure_embed,instructure_equation,instructure_record,instructure_equella,media,paste,table,inlinepopups",dialog_type:"modal",relative_urls:!1,remove_script_host:!0,theme_advanced_buttons1:p,theme_advanced_toolbar_location:"top",theme_advanced_buttons2:q,theme_advanced_buttons3:r,theme_advanced_resize_horizontal:!1,theme_advanced_resizing:!0,theme_advanced_fonts:'Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Myriad="Myriad Pro",Myriad,Arial,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats;',theme_advanced_blockformats:"p,h2,h3,h4,pre",theme_advanced_more_colors:!1,extended_valid_elements:"iframe[src|width|height|name|align|style|class]",content_css:"/stylesheets/compiled/instructure_style.css,/stylesheets/compiled/tinymce.editor_box.css",editor_css:t,handle_event_callback:function(b){if(b.type.indexOf("keydown")===0||b.type.indexOf("keypress")===0)if(b.keyCode===9){if(b.shiftKey){b.preventDefault();var d=c("#"+a),e=d.closest("form,#main").find(":tabbable,#"+a);n=e.index(d),d.filter(":visible").length>0?c(e.eq(n-1)).focus():c(e.eq(n+1)).focus()}}else c("#"+a).triggerHandler(b.type,c.event.fix(b))},onchange_callback:function(b){c("#"+a).trigger("change")},setup:function(b){var e=function(){c(document).triggerHandler("editor_box_focus",c("#"+b.editorId))};b.onClick.add(e),b.onKeyPress.add(e),b.onActivate.add(e),b.onEvent.add(function(){d&&b.selection&&k.data("last_bookmark",b.selection.getBookmark(1))}),b.onInit.add(function(){c(window).triggerHandler("resize"),c(b.contentDocument).bind("DOMNodeInserted",function(a){var b=a.target,d;b.nodeType===1&&b.nodeName==="IMG"&&(d=c(b).data("url"))&&c(b).attr("src",tinyMCE.activeEditor.documentBaseURI.toAbsolute(d))}),s&&c("#"+b.editorId+"_tbl").find("td.mceToolbar span.mceSeparator").parent().each(function(){c(this).after("<td class='mceSeparatorLeft'><span/></td>").after("<td class='mceSeparatorMiddle'><span/></td>").after("<td class='mceSeparatorRight'><span/></td>").remove()});if(!j.unresizable)var d=c("#"+a+"_ifr"),e=d.closest(".mceEditor"),f,g,h,i=j.minHeight||200,k=c('<div class="editor_box_resizer" unselectable="on"><div class="ui-icon ui-icon-grip-diagonal-se" unselectable="on"></div></div>').appendTo(d.parent()).draggable({axis:"y",instructureHackToNotAutoSizeTop:!0,containment:[0,d.offset().top+i,9999999,9999999],start:function(){h=e.css("overflow"),e.css("overflow","hidden"),f=d.offset().top,k.draggable("option","containment",[0,f+i,9999999,9999999]),g=c('<div style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;"></div>').appendTo(k.parent())},drag:function(a,b){k.removeAttr("style"),d.height(b.offset.top-f)},stop:function(a,b){g.remove(),e.css("overflow",h),k.removeAttr("style"),d.height(b.offset.top-f)}})})}}),this._textarea=c("#"+a),this._editor=null,this._id=a,this._searchURL=e,this._submitURL=h,this._contentURL=i,f._addEditorBox(a,this),c("#"+a).bind("blur change",function(){f._getEditor(a)&&f._getEditor(a).isHidden()&&c(this).editorBox("set_code",f._getTextArea(a).val())})}function l(){c(window).blur(function(a){document.activeElement&&window==a.target&&!k&&(k=!0,c(document.activeElement).filter(":input").blur().change(),k=!1)}).focus(function(a){document.activeElement&&window==a.target&&!j&&(j=!0,c(document.activeElement).filter(":input").focus(),j=!1)})}var d=c("body").hasClass("ie");c(document).ready(function(){d=c("body").hasClass("ie")}),c.extend(e.prototype,{_addEditorBox:function(a,b){this._editor_boxes[a]=b,this._editors[a]=tinyMCE.get(a),this._textareas[a]=c("textarea#"+a)},_removeEditorBox:function(a){delete this._editor_boxes[a],delete this._editors[a],delete this._textareas[a]},_getTextArea:function(a){return this._textareas[a]||(this._textareas[a]=c("textarea#"+a)),this._textareas[a]},_getEditor:function(a){return this._editors[a]||(this._editors[a]=tinyMCE.get(a)),this._editors[a]},_getEditorBox:function(a){return this._editor_boxes[a]}});var f=new e,i={getSelection:function(){var a=this.jquery?this[0]:this;return("selectionStart"in a&&function(){var b=a.selectionEnd-a.selectionStart;return{start:a.selectionStart,end:a.selectionEnd,length:b,text:a.value.substr(a.selectionStart,b)}}||document.selection&&function(){a.focus();var b=document.selection.createRange();if(b==null)return{start:0,end:a.value.length,length:0};var c=a.createTextRange(),d=c.duplicate();return c.moveToBookmark(b.getBookmark()),d.setEndPoint("EndToStart",c),{start:d.text.length,end:d.text.length+b.text.length,length:b.text.length,text:b.text}}||function(){return{start:0,end:a.value.length,length:0}})()},replaceSelection:function(){var a=this.jquery?this[0]:this,b=arguments[0]||"";return("selectionStart"in a&&function(){return a.value=a.value.substr(0,a.selectionStart)+b+a.value.substr(a.selectionEnd,a.value.length),this}||document.selection&&function(){return a.focus(),document.selection.createRange().text=b,this}||function(){return a.value+=b,this})()}};jQuery.each(i,function(a){jQuery.fn[a]=this});var j=!1,k=!1,m=1;c.fn.editorBox=function(a,b){var d=arguments;if(this.length>1)return this.each(function(){var a=c(this);a.editorBox.apply(a,d)});m===1&&l();var e=this.attr("id");if(typeof a=="string"&&a!="create"){if(a=="get_code")return this._getContentCode(b);if(a=="set_code")this._setContentCode(b);else if(a=="insert_code")this._insertHTML(b);else{if(a=="selection_offset")return this._getSelectionOffset();if(a=="selection_link")return this._getSelectionLink();if(a=="create_link")this._linkSelection(b);else{if(a=="focus")return this._editorFocus(b);if(a=="toggle")this._toggleView();else{if(a=="execute"){var g=[];for(var i=1;i<arguments.length;i++)g.push(arguments[i]);return c.fn._execCommand.apply(this,g)}a=="destroy"&&this._removeEditor(b)}}}return this}this.data("rich_text",!0),e||(e="editor_box_unique_id_"+m++,this.attr("id",e));if(f._getEditor(e))return this._setContentCode(this.val()),this;var j="";a&&a.search_url&&(j=a.search_url);var k=new h(e,j,"","",a);return this},c.fn._execCommand=function(){var a=c(this).attr("id"),b=f._getEditor(a);b&&b.execCommand&&b.execCommand.apply(b,arguments)},c.fn._justGetCode=function(){var a=this.attr("id")||"",b="";try{f._getEditor(a).isHidden()?b=f._getTextArea(a).val():b=f._getEditor(a).getContent()}catch(c){tinyMCE&&tinyMCE.getInstanceById(a)?b=tinyMCE.getInstanceById(a).getContent():b=this.val()||""}return b},c.fn._getContentCode=function(a){if(a==1){var b=this._justGetCode();this._setContentCode(b)}return this._justGetCode()},c.fn._getSearchURL=function(){return f._getEditorBox(this.attr("id"))._searchURL},c.fn._getSubmitURL=function(){return f._getEditorBox(this.attr("id"))._submitURL},c.fn._getContentURL=function(){return f._getEditorBox(this.attr("id"))._contentURL},c.fn._getSelectionOffset=function(){var a=this.attr("id"),b=f._getEditor(a).getContainer(),d=c(b).find("iframe").offset(),e=f._getEditor(a).selection.getNode(),g=c(e).offset(),h=c(b).scrollTop(),i={left:d.left+g.left+10,top:d.top+g.top+10-h};return i},c.fn._getSelectionNode=function(){var a=this.attr("id"),b=f._getEditor(a).getContainer(),c=f._getEditor(a).selection.getNode();return c},c.fn._getSelectionLink=function(){var a=this.attr("id"),b=tinyMCE.get(a).selection.getNode();while(b.nodeName!="A"&&b.nodeName!="BODY"&&b.parentNode)b=b.parentNode;if(b.nodeName=="A"){var d=c(b).attr("href"),e=c(b).attr("title");if(!e||e=="")e=d;var f={url:d,title:e};return f}return null},c.fn._toggleView=function(){var a=this.attr("id");this._setContentCode(this._getContentCode()),tinyMCE.execCommand("mceToggleEditor",!1,a)},c.fn._removeEditor=function(){var a=this.attr("id");this.data("rich_text",!1),tinyMCE&&tinyMCE.execCommand&&(tinyMCE.execCommand("mceRemoveControl",!1,a),f._removeEditorBox(a))},c.fn._setContentCode=function(a){var b=this.attr("id");f._getTextArea(b).val(a),tinyMCE.get(b)&&c.isFunction(tinyMCE.get(b).execCommand)&&tinyMCE.get(b).execCommand("mceSetContent",!1,a)},c.fn._insertHTML=function(a){var b=this.attr("id");f._getEditor(b).isHidden()?this.replaceSelection(a):tinyMCE.get(b).execCommand("mceInsertContent",!1,a)},c.fn._editorFocus=function(a){var b=this,c=b.attr("id"),d=f._getEditor(c);return a&&(!d||!d.dom.doc.hasFocus())&&setTimeout(function(){b.editorBox("focus",!0)},50),d?(f._getEditor(c).isHidden()?f._getTextArea(c).focus().select():tinyMCE.execCommand("mceFocus",!1,c),!0):!1},c.fn._linkSelection=function(a){typeof a=="string"&&(a={url:a});var b=a.title,e=a.url||"";e.match(/@/)&&!e.match(/\//)&&!e.match(/^mailto:/)?e="mailto:"+e:!e.match(/^\w+:\/\//)&&!e.match(/^mailto:/)&&!e.match(/^\//)&&(e="http://"+e);var g=a.classes||"",h=a.text||a.title||"Link",i=a.target||null,j=c(this).attr("id");e.indexOf("@")!=-1?(a.file=!1,a.image=!1,e.indexOf("mailto:")!=0&&(e="mailto:"+e)):e.indexOf("/")==-1&&(b=e,e=e.replace(/\s/g,""),e=location.href+e),a.file&&(g+="instructure_file_link "),a.scribdable&&(g+="instructure_scribd_file ");var k="";a.kaltura_entry_id&&a.kaltura_media_type&&(k="media_comment_"+a.kaltura_entry_id,a.kaltura_media_type=="video"?g+="instructure_video_link ":g+="instructure_audio_link "),a.image&&(g+="instructure_image_thumbnail "),g=c.uniq(g.split(/\s+/)).join(" ");var l="";d&&this.data("last_bookmark")&&tinyMCE.get(j).selection.moveToBookmark(this.data("last_bookmark"));var m=tinyMCE.get(j).selection,n=m.getNode();while(n.nodeName!="A"&&n.nodeName!="BODY"&&n.parentNode)n=n.parentNode;n.nodeName!="A"&&(n=null);var o=m.getContent();if(f._getEditor(j).isHidden()){l=h;var p=c("<div><a/></div>");p.find("a")[k?"attr":"removeAttr"]("id",k).attr({title:b,href:e,target:i})[g?"attr":"removeAttr"]("class",g).text(l);var q=p.html();c(this).replaceSelection(q)}else if(!o||o=="")if(n)c(n).attr({href:e,_mce_href:e,title:b||"",id:k,"class":g,target:i});else{l=h;var p=c("<div/>");p.append(c("<a/>",{id:k,target:i,title:b,href:e,"class":g}).text(l)),tinyMCE.get(j).execCommand("mceInsertContent",!1,p.html())}else tinyMCE.get(j).execCommand("mceInsertLink",!1,{target:i||"",title:b||"",href:e,"class":g,id:k});var r=tinyMCE.get(j),s=r.selection.getNode();s.nodeName!="A"&&(s=c(s).children("a:last")[0]);if(s){var t={top:s.offsetTop,left:s.offsetLeft},u=s;while((u=u.offsetParent)&&u.tagName!="BODY")t.top=t.top+u.offsetTop||0,t.left=t.left+u.offsetLeft||0;var v=r.getContainer(),w=c(v).find("iframe").offset(),x=c(r.dom.doc).find("html").scrollTop()||c(r.dom.doc).find("body").scrollTop(),y={left:w.left+t.left,top:w.top+t.top-x};c(s).indicate({offset:y,singleFlash:!0,scroll:!0,container:c(v).find("iframe")})}}}),define("jquery.instructure_forms",["INST","i18n","jquery","jquery.ajaxJSON","jquery.disableWhileLoading","jquery.google-analytics","jquery.instructure_date_and_time","jquery.instructure_jquery_patches","jquery.instructure_misc_helpers","jquery.instructure_misc_plugins","jquery.rails_flash_notifications","tinymce.editor_box","vendor/jquery.scrollTo"],function(a,b,c){b=b.scoped("instructure"),c.fn.formSubmit=function(b){return this.submit(function(d){var e=c(this);if(e.data("submitting"))return;e.data("trigger_event",d),e.hideErrors();var f=!1,g=e.validateForm(b);if(!g)return!1;var h=e.getFormData(b);if(b.processData&&c.isFunction(b.processData)){var i=null;try{i=b.processData.call(e,h)}catch(j){f=j}if(i===!1)return!1;i&&(h=i)}var k=e.data("method")||e.find("input[name='_method']").val()||e.attr("method"),l=e.attr("id"),m=e.attr("action"),n=null;if(c.isFunction(b.beforeSubmit)){n=null;try{n=b.beforeSubmit.call(e,h)}catch(j){f=j}if(n===!1)return!1}if(b.disableWhileLoading){var o=c.Deferred(),p={};e.disableWhileLoading(o),c.each(["success","error"],function(a,d){p[d]=b[d],b[d]=function(){o[d==="success"?"resolve":"reject"]();if(c.isFunction(p[d]))return p[d].apply(this,arguments)}})}var q=b.fileUpload;if(c.isFunction(b.fileUpload))try{q=b.fileUpload.call(e,h)}catch(j){f=j}q&&b.fileUploadOptions&&c.extend(b,b.fileUploadOptions),e.attr("action")&&(m=e.attr("action"));if(f&&!b.preventDegradeToFormSubmit){o&&o.reject(),a&&a.environment=="development"&&c.flashError("formSubmit error, trying to gracefully degrade. See console for details");return}d.preventDefault(),d.stopPropagation();if(b.noSubmit)c.isFunction(b.success)&&(o.resolve(),b.success.call(e,h,n));else if(q&&b.preparedFileUpload&&b.context_code)c.ajaxJSONPreparedFiles.call(this,{handle_files:b.upload_only?b.success:b.handle_files,single_file:b.singleFile,context_code:c.isFunction(b.context_code)?b.context_code.call(e):b.context_code,asset_string:b.asset_string,intent:b.intent,folder_id:c.isFunction(b.folder_id)?b.folder_id.call(e):b.folder_id,file_elements:e.find("input[type='file']"),url:b.upload_only?null:m,uploadDataUrl:b.uploadDataUrl,formData:b.postFormData?h:null,success:b.success,error:b.error});else if(q&&c.handlesHTML5Files&&e.hasClass("handlingHTML5Files")){var r=c.extend({},h);e.find("input[type='file']").each(function(){var a=c(this),b=a.data("file_list");b&&b instanceof FileList&&(r[a.attr("name")]=b)}),c.toMultipartForm(r,function(a){c.sendFormAsBinary({url:m,body:a.body,content_type:a.content_type,form_data:a.form_data,method:k,success:function(a){b.success&&c.isFunction(b.success)&&b.success.call(e,a,n)},error:function(a,d){var f=e,g=!0;if(b.error&&c.isFunction(b.error)){a=a||{};var h=b.error.call(e,a.errors||a,n);h&&(f=h),g=!1}else g=!0;f.parents("html").get(0)==c("html").get(0)&&b.formErrors!==!1?f.formErrors(a,b):g&&c.ajaxJSON.unhandledXHRs.push(d)}})})}else if(q){var s=c.uniqueId(l+"_"),t=c("<div style='display: none;' id='box_"+s+"'><form id='form_"+s+"'></form><iframe id='frame_"+s+"' name='frame_"+s+"' src='about:blank' onload='$(\"#frame_"+s+'").triggerHandler("form_response_loaded");\'></iframe>').appendTo("body").find("#frame_"+s),u=c(this),v=k,w=u.attr("target"),x=u.attr("ENCTYPE"),y=new c.fakeXHR(0,""),z=e;u.attr({method:k,action:m,ENCTYPE:"multipart/form-data",encoding:"multipart/form-data",target:"frame_"+s}),b.onlyGivenParameters&&(u.find("input[name='_method']").remove(),u.find("input[name='authenticity_token']").remove()),c.ajaxJSON.storeRequest(y,m,k,h),t.bind("form_response_loaded",function(){var a=z,d=t[0],e,f;d.contentDocument?e=d.contentDocument:d.contentWindow?e=d.contentWindow.document:e=window.frames[s].document;var g="",h=null,f=null;try{if(e.location.href=="about:blank")return;g=c(e).text();var i=c.parseJSON(g);b.success&&c.isFunction(b.success)&&i&&!i.errors&&b.success.call(a,i,n)}catch(j){i={},f=j}if(f||i.errors){var k=a,l=!0;y.responseText=g;if(b.error&&c.isFunction(b.error)){var m=b.error.call(a,i.errors||g,n);m&&(k=m),l=!1}else c.fn.formSubmit.defaultAjaxErrorObject&&c.isFunction(c.fn.formSubmit.defaultAjaxErrorFunction)&&(l=!0);k.parents("html").get(0)==c("html").get(0)&&b.formErrors!==!1?k.formErrors(i.errrors||i,b):l&&c.ajaxJSON.unhandledXHRs.push(y),c.fn.defaultAjaxError.func.call(c.fn.defaultAjaxError.object,null,y,"0",f)}setTimeout(function(){a.attr({ENCTYPE:x,encoding:x,target:w}),c("#box_"+s).remove()},5e3)}),u.data("submitting",!0).submit().data("submitting",!1)}else c.ajaxJSON(m,k,h,function(a){c.isFunction(b.success)&&b.success.call(e,a,n)},function(a,d,f,g){a=a||{};var h=e,i=!0;if(c.isFunction(b.error)){var j=b.error.call(e,a.errors||a,n);j&&(h=j),i=!1}else i=!0;h.parents("html").get(0)==c("html").get(0)&&b.formErrors!==!1?h.formErrors(a,b):i&&c.ajaxJSON.unhandledXHRs.push(d)})}),this},c.handlesHTML5Files=!!(window.File&&window.FileReader&&window.FileList&&XMLHttpRequest),c.handlesHTML5Files&&c("input[type='file']").live("change",function(a){var b=this.files;b&&(c(this).data("file_list",b),c(this).parents("form").addClass("handlingHTML5Files"))}),c.ajaxFileUpload=function(a){a.data.authenticity_token||(a.data.authenticity_token=c("#ajax_authenticity_token").text()),c.toMultipartForm(a.data,function(b){c.sendFormAsBinary({url:a.url,body:b.body,content_type:b.content_type,form_data:b.form_data,method:a.method,success:function(b){a.success&&c.isFunction(a.success)&&a.success.call(this,b)},progress:function(b){a.progress&&c.isFunction(a.progress)&&a.progress.call(this,b)},error:function(b,d){if(a.error&&c.isFunction(a.error)){b=b||{};var e=a.error.call(this,b.errors||b)}else c.ajaxJSON.unhandledXHRs.push(d)}},a.binary===!1)})},c.httpSuccess=function(a){try{return!a.status&&location.protocol=="file:"||a.status>=200&&a.status<300||a.status==304||jQuery.browser.safari&&a.status==undefined}catch(b){}return!1},c.sendFormAsBinary=function(a,b){var d=a.body,e=a.url,f=a.method,g=new XMLHttpRequest;g.upload&&(g.upload.addEventListener("progress",function(b){a.progress&&c.isFunction(a.progress)&&a.progress.call(this,b)},!1),g.upload.addEventListener("error",function(b){a.error&&c.isFunction(a.error)&&a.error.call(this,"uploading error",g,b)},!1),g.upload.addEventListener("abort",function(b){a.error&&c.isFunction(a.error)&&a.error.call(this,"aborted by the user",g,b)},!1),g.onreadystatechange=function(b){if(g.readyState==4){var d=null;try{d=c.parseJSON(g.responseText)}catch(e){}c.httpSuccess(g)?d&&!d.errors?a.success&&c.isFunction(a.success)&&a.success.call(this,d,g,b):a.error&&c.isFunction(a.error)&&a.error.call(this,d||g.responseText,g,b):a.error&&c.isFunction(a.error)&&a.error.call(this,d||g.responseText,g,b)}}),g.open(f,e),g.setRequestHeader("Accept","application/json, text/javascript, */*"),g.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.form_data?g.send(a.form_data):(g.overrideMimeType(a.content_type||"multipart/form-data"),g.setRequestHeader("Content-Type",a.content_type||"multipart/form-data"),g.setRequestHeader("Content-Length",d.length),b?g.send(d):g.sendAsBinary?g.sendAsBinary(d):console.log("xhr.sendAsBinary not supported"))},c.fileData=function(a){return{name:a.name||a.fileName,size:a.size||a.fileSize,type:a.type,forced_type:a.type||"application/octet-stream"}},c.toMultipartForm=function(a,b){function m(a){return a.replace(/\"/g,"")}function n(){e.body=f.substring(0,f.length-2)+"--",b(e)}function o(){if(g.length===0){n();return}var a=g.shift(),b=a[0],e=a[1];window.FileList&&e instanceof FileList&&(e=e[0]);if(window.FileList&&e instanceof FileList){var h="-----BbC04y"+c.uniqueId(),i=[];f+='Content-Disposition: form-data; name="'+m(b)+"\r\n"+"Content-Type: multipart/mixed; boundary="+h+"\r\n\r\n";for(var j in e)i.push(e);function k(){f+="--"+h+"--\r\n"+"--"+d+"\r\n",o()}function l(){if(i.length===0){k();return}var a=i.shift(),b=c.fileData(a),d=new FileReader;d.onloadend=function(){f+="--"+h+"\r\n"+'Content-Disposition: file; filename="'+m(b.name)+'"\r\n'+"Content-Type: "+b.forced_type+"\r\n"+"Content-Transfer-Encoding: binary\r\n"+"\r\n"+d.result,l()},d.readAsBinaryString(a)}l()}else if(window.File&&e instanceof File){var p=c.fileData(e),q=new FileReader;q.onloadend=function(){f+='Content-Disposition: file; name="'+m(b)+'"; filename="'+p.name+'"\r\n'+"Content-Type: "+p.forced_type+"\r\n"+"Content-Transfer-Encoding: binary\r\n"+"\r\n"+q.result+"\r\n--"+d+"\r\n",o()},q.readAsBinaryString(e)}else e&&e.fake_file?(f+='Content-Disposition: file; name="'+m(b)+'"; filename="'+e.name+'"\r\n'+"Content-Type: "+e.content_type+"\r\n"+"Content-Transfer-Encoding: binary\r\n"+"\r\n"+e.content+"\r\n--"+d+"\r\n",o()):(f+='Content-Disposition: form-data; name="'+m(b)+'"\r\n'+"\r\n"+(e||"").toString()+"\r\n"+"--"+d+"\r\n",o())}var d="-----AaB03x"+c.uniqueId(),e={content_type:"multipart/form-data; boundary="+d},f="--"+d+"\r\n",g=[],h=!1;for(var i in a)g.push([i,a[i]]),a[i]&&a[i].fake_file&&(h=!0);if(window.FormData&&!h){var j=new FormData;for(var i in a){var k=a[i];window.FileList&&k instanceof FileList&&(k=k[0]);if(k instanceof Array)for(var l=0;l<k.length;l++)j.append(i,k[l]);else j.append(i,k)}e.form_data=j,b(e);return}o()},c.fakeXHR=function(a,b){this.status=a,this.responseText=b},c.fn.defaultAjaxError=function(b){c.fn.defaultAjaxError.object=this,c.fn.defaultAjaxError.func=function(d,e,f,g){var h=a.environment=="production",i=c.inArray(e,c.ajaxJSON.unhandledXHRs)!=-1,j=c.inArray(e,c.ajaxJSON.ignoredXHRs)!=-1;if((!h||i)&&!j){c.ajaxJSON.unhandledXHRs=c.grep(c.ajaxJSON.unhandledXHRs,function(a,b){return a!=e});var k=!1;i||(k=!0),b.call(this,d,e,f,g,k)}},this.ajaxError(c.fn.defaultAjaxError.func)},c.fn.fillFormData=function(a,b){if(this.length){a=a||[];var d=c.extend({},c.fn.fillFormData.defaults,b);d.object_name&&(a=c._addObjectName(a,d.object_name,!0)),this.find(":input").each(function(){var b=c(this),e=b.attr("name"),f=b.attr("type");if(e in a&&e){if(f!="hidden"||b.next("input:checkbox").attr("name")!=e)if(f!="checkbox"&&f!="radio"){var g=a[e];if(typeof g=="undefined"||g===null)g="";b.val(g.toString())}else b.val()==a[e]?b.attr("checked",!0):b.attr("checked",!1);b&&b.change&&d.call_change&&b.change()}})}return this},c.fn.fillFormData.defaults={object_name:null,call_change:!0},c.fn.getFormData=function(a){var a=c.extend({},c.fn.getFormData.defaults,a),b={},d=this;return d.find(":input").not(":button").each(function(){var e=c(this),f=c(this).attr("type");if((f=="radio"||f=="checkbox")&&!e.attr("checked"))return;var g=e.val();e.hasClass("suggestion_title")&&e.attr("title")==g?g="":e.hasClass("datetime_field_enabled")&&e.parent().children(".datetime_suggest").text()&&(e.parent().children(".datetime_suggest").hasClass("invalid_datetime")?g=e.parent().children(".datetime_suggest").text():g=e.parent().children(".datetime_suggest").text());try{e.data("rich_text")&&(g=e.editorBox("get_code",!1))}catch(h){}var i=e.prop("name")||"",j=i.match(/\[\]$/);if(f=="hidden"&&!j&&d.find("[name='"+i+"']").filter("textarea,:radio:checked,:checkbox:checked,:text,:password,select,:hidden")[0]!=e[0])return;i&&i!==""&&(f=="checkbox"||typeof b[i]=="undefined"||j)&&(!a.values||c.inArray(i,a.values)!=-1)&&(j?(b[i]=b[i]||[],b[i].push(g)):b[i]=g);var k=i}),a.object_name&&(b=c._stripObjectName(b,a.object_name,!0)),b},c.fn.getFormData.defaults={object_name:null},c._addObjectName=function(a,b,c){if(!a)return a;var d={};a instanceof Array&&(d=[]);var e,f,g;for(var h in a)a instanceof Array?e=a[h]:e=h,g=e.indexOf("["),g<0?f=b+"["+e+"]":f=b+"["+e.substring(0,g)+"]"+e.substring(g),typeof e=="string"&&e.indexOf("=")===0&&(f=e.substring(1),e=f),a instanceof Array?(d.push(f),c&&d.push(e)):(d[f]=a[h],c&&(d[e]=a[h]));return d},c._stripObjectName=function(a,b,c){var d={},e;a instanceof Array&&(d=[]);for(var f in a){var g,h;a instanceof Array?g=a[f]:g=f;if(h=g.indexOf(b+"[")===0)e=g.replace(b+"[",""),closing=e.indexOf("]"),e=e.substring(0,closing)+e.substring(closing+1),a instanceof Array?d.push(e):d[e]=a[f];if(!h||c)a instanceof Array?d.push(a[f]):d[f]=a[f]}return d},c.fn.validateForm=function(a){if(this.length===0)return!1;var a=c.extend({},c.fn.validateForm.defaults,a),d=this,e={},f=a.data||d.getFormData(a);a.object_name&&(a.required=c._addObjectName(a.required,a.object_name),a.date_fields=c._addObjectName(a.date_fields,a.object_name),a.dates=c._addObjectName(a.dates,a.object_name),a.times=c._addObjectName(a.times,a.object_name),a.numbers=c._addObjectName(a.numbers,a.object_name),a.property_validations=c._addObjectName(a.property_validations,a.object_name)),a.required&&c.each(a.required,function(a,c){f[c]||(e[c]||(e[c]=[]),e[c].push(b.t("errors.field_is_required","This field is required")))}),a.date_fields&&c.each(a.date_fields,function(a,c){var f=d.find("input[name='"+c+"']").filter(".datetime_field_enabled");f.length&&f.parent().children(".datetime_suggest").hasClass("invalid_datetime")&&(e[c]||(e[c]=[]),e[c].push(b.t("errors.invalid_datetime","Invalid date/time value")))}),a.numbers&&c.each(a.numbers,function(a,c){var d=parseFloat(f[c]);isNaN(d)&&(e[c]||(e[c]=[]),e[c].push(b.t("errors.invalid_number","This should be a number.")))}),a.property_validations&&c.each(a.property_validations,function(a,g){if(c.isFunction(g)){var h=g.call(d,f[a],f);h&&(typeof h!="string"&&(h=b.t("errors.invalid_entry_for_field","Invalid entry: %{field}",{field:a})),e[a]||(e[a]=[]),e[a].push(h))}});var g=!1;for(var h in e){g=!0;break}return g?(d.formErrors(e,a),c.trackEvent("Form Errors",this.attr("id")||this.attr("class")||document.title,JSON.stringify(e)),!1):!0},c.fn.validateForm.defaults={object_name:null,required:null,dates:null,times:null},c.fn.formErrors=function(a,b){if(this.length===0)return;var d=this,e={},f=[];a&&a.errors&&(a=a.errors),typeof a=="string"&&(a={base:a}),c.each(a,function(a,b){if(typeof b=="string"){var g=[];g.push(b),b=g}else{if(typeof a=="number"&&b.length==2&&b[0]instanceof jQuery&&typeof b[1]=="string"){f.push(b);return}if(typeof a=="number"&&b.length==2&&typeof b[1]=="string")g=[],g.push(b[1]),a=b[0],b=g;else try{g=[];for(var h in b)typeof b[h]=="object"&&b[h].message?g.push(b[h].message.toString()):g.push(b[h].toString());b=g}catch(i){b=b.toString()}}d.find(":input[name='"+a+"'],:input[name*='["+a+"]']").length>0?c.each(b,function(b,c){e[a]?e[a]+="<br/>"+c:e[a]=c}):c.each(b,function(a,b){e.general?e.general+="<br/>"+b:e.general=b})});var g=!1,h=0,i=c(document).scrollTop(),j={};c.each(e,function(a,b){var c=d.find(":input[name='"+a+"'],:input[name*='["+a+"]']").filter(":first");if(!c||c.length===0||a=="general")c=d;c[0].tagName=="TEXTAREA"&&c.next(".mceEditor").length&&(c=c.next().find(".mceIframeContainer")),j[a]={object:c,message:b},g=!0;var e=c.errorBox(b).offset();e.top>h&&(h=e.top)});for(var k in f){var l=f[k][0],m=f[k][1];g=!0;var n=l.errorBox(m).offset();n.top>h&&(h=n.top)}return g&&(b&&b.onFormError&&b.onFormError.call(d,j),c("html,body").scrollTo({top:h,left:0})),this},c.fn.errorBox=function(a,b){if(this.length){var d=this,e=d.data("associated_error_box");e&&e.remove();var f=c("#error_box_template");f.length||(f=c("<div id='error_box_template' class='error_box errorBox' style=''><div class='error_text' style=''></div><img src='/images/error_bottom.png' class='error_bottom'/></div>").appendTo("body"));var g=f.clone(!0).attr("id","").css("zIndex",d.zIndex()+1).appendTo("body");g.find(".error_text").html(a);var h=d.offset(),i=g.outerHeight(),j=Math.round(d.outerWidth()/5);return d[0].tagName=="FORM"&&(j=Math.min(j,50)),g.hide().css({top:h.top-i+2,left:h.left+j}).fadeIn("fast"),d.data({associated_error_box:g,associated_error_object:d}).focus(function(){g.fadeOut("slow",function(){g.remove()})}),g.click(function(){c(this).fadeOut("fast",function(){c(this).remove()})}),c.fn.errorBox.errorBoxes.push(d),c.fn.errorBox.isBeingAdjusted||c.moveErrorBoxes(),b&&c("html,body").scrollTo(g),g}},c.fn.errorBox.errorBoxes=[],c.moveErrorBoxes=function(){var a=[],b=c.fn.errorBox.errorBoxes;for(var d in b){var e=b[d],f=e.data("associated_error_box");if(f.length&&f[0].parentNode){a.push(e);if(e.filter(":visible").length){var g=e.offset(),h=f.outerHeight(),i=Math.round(e.outerWidth()/5);e[0].tagName=="FORM"&&(i=Math.min(i,50)),f.css({top:g.top-h+2,left:g.left+i}).show()}else f.hide()}}c.fn.errorBox.errorBoxes=a,a.length?c.fn.errorBox.isBeingAdjusted=setTimeout(c.moveErrorBoxes,500):delete c.fn.errorBox.isBeingAdjusted},c.fn.hideErrors=function(a){if(this.length){var b=this.data("associated_error_box");b&&(b.remove(),this.data("associated_error_box",null)),this.find(":input").each(function(){var a=c(this),b=a.data("associated_error_box");b&&(b.remove(),a.data("associated_error_box",null))})}return this},c.fn.formSuggestion=function(){return this.each(function(){var a=c(this);a.focus(function(a){var b=c(this),d=b.attr("title");b.addClass("suggestionFocus");if(!d||d==="")return;b.val()==d&&b.select(),b.removeClass("form_text_hint")}).blur(function(a){var b=c(this),d=b.attr("title");b.removeClass("suggestionFocus");if(!d||d==="")return;b.val()===""&&b.val(d),b.val()==d&&b.addClass("form_text_hint")}).mouseup(!1).change(function(a){var b=c(this),d;!b.hasClass("suggestionFocus")&&(d=c(this).attr("title"))&&(b.removeClass("suggestionFocus"),b.val()===""&&b.val(d),b.toggleClass("form_text_hint",b.val()==d))}).addClass("suggestion_title");var b=a.attr("title"),d=a.val();b&&(d===""||d==b)&&a.addClass("form_text_hint").val(b)})},c.fn.formSuggestion.suggestions=[]}),define("jquery.ajaxJSON",["jquery","jquery.instructure_forms"],function($){$.originalGetJSON=$.getJSON,$.getJSON=function(a,b,c){var d=$.originalGetJSON(a,b,c);return $.ajaxJSON.storeRequest(d,a,"GET",b),d};var assert_option=function(a,b){if(!a[b])throw b+" option is required"};$.ajaxJSONPreparedFiles=function(a){assert_option(a,"context_code");var b=[],c=this,d=a.files||a.file_elements||[];for(var e=0;e<d.length;e++){var f=d[e];f.name=(f.value||f.name).split(/(\/|\\)/).pop(),b.push(f)}var g=[],h=function(){var b=a.data;if(a.handle_files){var c=g;a.single_file&&(c=g[0]),b=a.handle_files.call(this,c,b)}a.url&&a.success&&b!==!1&&$.ajaxJSON(a.url,a.method,b,a.success,a.error)},i=function(b,d){$.ajaxJSON(a.uploadDataUrl||"/files/pending","POST",b,function(b){try{if(b&&b.upload_url){var e=b.upload_params,f=$(d).attr("name");$(d).attr("name",b.file_param),$.ajaxJSONFiles(b.upload_url,"POST",e,$(d),function(a){g.push(a),$(d).attr("name",f),j.call(c)},function(b){$(d).attr("name",f),(a.upload_error||a.error).call(c,b)},{onlyGivenParameters:b.remote_url})}else(a.upload_error||a.error).call(c,b)}catch(h){var i=h}},function(){return(a.upload_error||a.error).apply(this,arguments)})},j=function(){var d=b.shift();d?i.call(c,$.extend({"attachment[folder_id]":a.folder_id,"attachment[intent]":a.intent,"attachment[asset_string]":a.asset_string,"attachment[filename]":d.name,"attachment[context_code]":a.context_code},a.formData||{}),d):h.call(c)};j.call(c)},$.ajaxJSONFiles=function(a,b,c,d,e,f,g){var h=$(document.createElement("form"));h.attr("action",a).attr("method",b),c.authenticity_token||(c.authenticity_token=$("#ajax_authenticity_token").text());var i={};d.each(function(){i[$(this).attr("name")]=!0});for(var j in c)if(!i[j]){var k=$(document.createElement("input"));k.attr("type","hidden").attr("name",j).attr("value",c[j]),h.append(k)}d.each(function(){var a=$(this).clone(!0);$(this).after(a),h.append($(this)),$(this).removeAttr("id")}),$("body").append(h.hide()),h.formSubmit({fileUpload:!0,success:e,onlyGivenParameters:g?g.onlyGivenParameters:!1,error:f}),function(){h.submit()}.call(h)},$.ajaxJSON=function(url,submit_type,data,success,error,options){data=data||{};if(!url&&error){error(null,null,"URL required for requests",null);return}url=url||".",submit_type!="GET"&&(data._method=submit_type,submit_type="POST",data.authenticity_token||(data.authenticity_token=$("#ajax_authenticity_token").text())),$("#page_view_id").length>0&&!data.page_view_id&&(!options||!options.skipPageViewLog)&&(data.page_view_id=$("#page_view_id").text());var ajaxError=function(xhr,textStatus,errorThrown){var data=xhr;if(xhr.responseText){var text=xhr.responseText.replace(/(<([^>]+)>)/ig,"");data={message:text};try{data=eval("("+xhr.responseText+")")}catch(e){}}options&&options.skipDefaultError&&$.ajaxJSON.ignoredXHRs.push(xhr),error&&$.isFunction(error)?error(data,xhr,textStatus,errorThrown):$.ajaxJSON.unhandledXHRs.push(xhr)},params={url:url,dataType:"json",type:submit_type,success:function(a){a=a||{};var b=null;xhr&&xhr.getResponseHeader&&(b=xhr.getResponseHeader("X-Canvas-Page-View-Id"))&&setTimeout(function(){$(document).triggerHandler("page_view_id_received",b)},50),!a.length&&a.errors?(ajaxError(a.errors,null,""),!options||!options.skipDefaultError?$.fn.defaultAjaxError.func.call($.fn.defaultAjaxError.object,null,a,"0",a.errors):$.ajaxJSON.ignoredXHRs.push(xhr)):success&&$.isFunction(success)&&success(a,xhr)},error:function(){ajaxError.apply(this,arguments)},data:data};options&&options.timeout&&(params.timeout=options.timeout);var xhr=$.ajax(params);return $.ajaxJSON.storeRequest(xhr,url,submit_type,data),xhr},$.ajaxJSON.unhandledXHRs=[],$.ajaxJSON.ignoredXHRs=[],$.ajaxJSON.passedRequests=[],$.ajaxJSON.storeRequest=function(a,b,c,d){$.ajaxJSON.passedRequests.push({xhr:a,url:b,submit_type:c,data:d})},$.ajaxJSON.findRequest=function(a){var b=$.ajaxJSON.passedRequests;for(var c in b)if(b[c]&&b[c].xhr==a)return b[c];return null}}),define("page_views",["INST","i18n","jquery","jquery.ajaxJSON"],function(a,b,c){b=b.scoped("page_views"),c(document).ready(function(){var b=0,d=c("#page_view_id"),e=c("#page_view_update_path").attr("href"),f=!1;a.interaction_contexts={};if(document.cookie&&document.cookie.match(/last_page_view/)){var g=document.cookie.match(/last_page_view=([^;]+)/);if(g&&g[1])try{var h=c.parseJSON(unescape(g[1]));h&&h.url&&h.seconds&&setTimeout(function(){c.ajaxJSON(h.url,"PUT",{interaction_seconds:h.seconds},function(){},function(){},3e3)})}catch(i){}document.cookie="last_page_view=;expires=Thu, 01-Jan-1970 00:00:01 GMT"}if(d.length>0){var j=0,k=300;c(document).bind("page_view_id_received",function(a,b){c("#page_view_id").text(b),e="/page_views/"+b}),c(document).bind("page_view_update",function(a,f){var g={};d.hasClass("contributed")&&(g.contributed=!0);if(f||b>10&&j<k)g.interaction_seconds=b,c.ajaxJSON(e,"PUT",g,function(a){a&&a.id&&c(document).triggerHandler("page_view_id_receved",a.id)},function(){}),b=0}),setInterval(function(){c(document).triggerHandler("page_view_update")},1e3*k),window.onbeforeunload=function(){if(b>30){var a=new Date;a.setDate(a.getDate()+1);var c=JSON.stringify({url:e,seconds:b});document.cookie="last_page_view="+escape(c)}};var f=!1;c(document).bind("mousemove keypress mousedown focus",function(){f=!0}),setInterval(function(){f?(b++,a&&a.interaction_context&&a.interaction_contexts&&(a.interaction_contexts[a.interaction_context]=(a.interaction_contexts[a.interaction_context]||0)+1),f=!1,j>=k&&(j=0,c(document).triggerHandler("page_view_update")),j=0):j++},1e3)}})}),define("jquery.instructure_misc_helpers",["INST","i18n","jquery","str/htmlEscape","jquery.ajaxJSON","jquery.instructure_forms","jquery.instructure_jquery_patches","vendor/jquery.ba-throttle-debounce","vendor/jquery.scrollTo","vendor/jquery.store"],function(a,b,c,d){function i(){return h||(h=c.trim(c("#identity .user_id").text())),h}b=b.scoped("instructure");var e=10001;c.uniqueId=function(a){do var b=(a||"")+e++;while(a&&c("#"+b).length);return b},c.detect=function(a,b){var d;return c.each(a,function(c,e){if(b.call(e,e,c,a))return d=e,!1}),d},c.mimeClass=function(a){return{"video/mp4":"video","application/x-rar-compressed":"zip","application/vnd.oasis.opendocument.spreadsheet":"xls","application/x-docx":"doc","application/x-shockwave-flash":"flash","audio/x-mpegurl":"audio","image/png":"image","text/xml":"code","video/x-ms-asf":"video","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xls","text/html":"html","video/x-msvideo":"video","audio/x-pn-realaudio":"audio","application/x-zip-compressed":"zip","text/css":"code","video/x-sgi-movie":"video","audio/x-aiff":"audio","application/zip":"zip","application/xml":"code","application/x-zip":"zip","text/rtf":"doc",text:"text","video/mpeg":"video","video/quicktime":"video","audio/3gpp":"audio","audio/mid":"audio","application/x-rar":"zip","image/x-psd":"image","application/vnd.ms-excel":"xls","application/msword":"doc","video/x-la-asf":"video","image/gif":"image","application/rtf":"doc","video/3gpp":"video","image/pjpeg":"image","image/jpeg":"image","application/vnd.oasis.opendocument.text":"doc","audio/x-wav":"audio","audio/basic":"audio","audio/mpeg":"audio","application/vnd.openxmlformats-officedocument.presentationml.presentation":"ppt","application/vnd.ms-powerpoint":"ppt","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"doc","application/pdf":"pdf","text/plain":"text","text/x-csharp":"code"}[a]||"file"},c.encodeToHex=function(a){var b="",c=a.length,d=0,e;for(var f=0;f<a.length;f++){part=a.charCodeAt(f).toString(16);while(part.length<2)part="0"+part;b+=part}return b},c.decodeFromHex=function(a){var b="",c=0;while(c<a.length)b+=unescape("%"+a.substring(c,c+2)),c+=2;return b},c.raw=function(a){return a=new String(a),a.htmlSafe=!0,a},c.replaceOneTag=function(a,b,c){if(!a)return a;b=(b||"").toString(),c=(c||"").toString().replace(/\s/g,"+");var d=new RegExp("(%7B|{){2}[\\s|%20|+]*"+b+"[\\s|%20|+]*(%7D|}){2}","g");return a.replace(d,c)},c.replaceTags=function(a,b,d){if(typeof b=="object"){for(var e in b)a=c.replaceOneTag(a,e,b[e]);return a}return c.replaceOneTag(a,b,d)};var f=!1;c.scrollSidebar=function(){if(!f){var a=c("#right-side"),b=c("body"),d=c("#main"),e=c("#not_right_side"),g=c(window),h=a.offset().top,i=c("#right-side-wrapper").height()-a.outerHeight();function j(){var c=g.scrollTop(),f=c>h;if(f)var j=e.height(),k=a.height(),l=j>k,m=h+d.height()-c<=k+i;(f&&l&&!m)^b.hasClass("with-scrolling-right-side")&&b.toggleClass("with-scrolling-right-side"),(f&&l&&m)^b.hasClass("with-sidebar-pinned-to-bottom")&&b.toggleClass("with-sidebar-pinned-to-bottom")}var k=c.throttle(50,j);k(),g.scroll(k),setInterval(k,1e3),f=!0}},c.keys=function(a){var b=[];for(var c in a)b.push(c);return b},c.underscore=function(a){return(a||"").replace(/([A-Z])/g,"_$1").replace(/^_/,"").toLowerCase()},c.titleize=function(a){var b=(a||"").replace(/([A-Z])/g," $1").replace(/_/g," ").replace(/\s+/," ").replace(/^\s/,"");return c.map(b.split(/\s/),function(a){return(a[0]||"").toUpperCase()+a.substring(1)}).join(" ")},c.parseUserAgentString=function(a){a=(a||"").toLowerCase();var c={version:(a.match(/.+(?:me|ox|it|ra|ie|er)[\/: ]([\d.]+)/)||[0,null])[1],chrome:/chrome/.test(a),safari:/webkit/.test(a),opera:/opera/.test(a),msie:/msie/.test(a)&&!/opera/.test(a),firefox:/firefox/.test(a),mozilla:/mozilla/.test(a)&&!/(compatible|webkit)/.test(a),speedgrader:/speedgrader/.test(a)},d=null;return c.chrome?d="Chrome":c.safari?d="Safari":c.opera?d="Opera":c.msie?d="Internet Explorer":c.firefox?d="Firefox":c.mozilla?d="Mozilla":c.speedgrader&&(d="SpeedGrader for iPad"),d?c.version&&(c.version=c.version.split(/\./).slice(0,2).join("."),d=d+" "+c.version):d=b.t("browsers.unrecognized","Unrecognized Browser"),d},c.fileSize=function(a){var b=1024;return a<b?parseInt(a,10)+" bytes":a<b*b?parseInt(a/b,10)+"KB":Math.round(10*a/b/b)/10+"MB"},c.uniq=function(a){var b=[],c={};for(var d in a)c[a[d]]||(c[a[d]]=!0,b.push(a[d]));return b},c.getUserServices=function(a,b,d){c.isArray(a)||(a=[a]);var e="/services?service_types="+a.join(",");c.ajaxJSON(e,"GET",{},function(a){b&&b(a)},function(a){d&&d(a)})};var g;c.findLinkForService=function(a,e){var f=c("#instructure_bookmark_search");f.length||(f=c("<div id='instructure_bookmark_search'/>"),f.append("<form id='bookmark_search_form' style='margin-bottom: 5px;'><img src='/images/blank.png'/>&nbsp;&nbsp;<input type='text' class='query' style='width: 230px;'/><button class='button search_button' type='submit'>"+d(b.t("buttons.search","Search"))+"</button></form>"),f.append("<div class='results' style='max-height: 200px; overflow: auto;'/>"),f.find("form").submit(function(e){e.preventDefault(),e.stopPropagation();var h=new Date;if(a=="diigo"&&g&&h-g<15e3){setTimeout(function(){f.find("form").submit()},15e3-(h-g)),f.find(".results").empty().append(d(b.t("status.diigo_search_throttling","Diigo limits users to one search every ten seconds.  Please wait...")));return}f.find(".results").empty().append(d(b.t("status.searching","Searching..."))),g=new Date;var i=f.find(".query").val(),j=c.replaceTags(f.data("reference_url"),"query",i);c.ajaxJSON(j,"GET",{},function(a){f.find(".results").empty(),a.length||f.find(".results").append(d(b.t("no_results_found","No Results Found")));for(var e in a)a[e].short_title=a[e].title,a[e].title==a[e].description&&(a[e].short_title=c.truncateText(a[e].description,30)),c("<div class='bookmark'/>").appendTo(f.find(".results")).append(c('<a class="bookmark_link" style="font-weight: bold;"/>').attr({href:a[e].url,title:a[e].title}).text(a[e].short_title)).append(c("<div style='margin: 5px 10px; font-size: 0.8em;'/>").text(a[e].description||b.t("no_description","No description")))},function(){f.find(".results").empty().append(d(b.t("errors.search_failed","Search failed, please try again.")))})}),f.delegate(".bookmark_link","click",function(a){a.preventDefault();var b=c(this).attr("href"),d=c(this).attr("title")||c(this).text();f.dialog("close"),e({url:b,title:d})})),f.find(".search_button").text(a=="delicious"?b.t("buttons.search_by_tag","Search by Tag"):b.t("buttons.search","Search")),f.find("form img").attr("src","/images/"+a+"_small_icon.png");var h="/search/bookmarks?q=%7B%7B+query+%7D%7D&service_type=%7B%7B+service_type+%7D%7D";h=c.replaceTags(h,"service_type",a),f.data("reference_url",h),f.find(".results").empty().end().find(".query").val(""),f.dialog("close").dialog({autoOpen:!1,title:b.t("titles.bookmark_search","Bookmark Search: %{service_name}",{service_name:c.titleize(a)}),open:function(){f.find("input:visible:first").focus().select()},width:400}).dialog("open")},c.findImageForService=function(a,e){var f=c("#instructure_image_search");f.find("button").attr("disabled",!1),f.length||(f=c("<div id='instructure_image_search'/>").append("<form id='image_search_form' style='margin-bottom: 5px;'><img src='/images/flickr_creative_commons_small_icon.png'/>&nbsp;&nbsp;<input type='text' class='query' style='width: 250px;' title='"+d(b.t("tooltips.enter_search_terms","enter search terms"))+"'/>"+"<button class='button' type='submit'>"+d(b.t("buttons.search","Search"))+"</button></form>").append("<div class='results' style='max-height: 240px; overflow: auto;'/>"),f.find("form .query").formSuggestion(),f.find("form").submit(function(a){a.preventDefault(),a.stopPropagation();var e=new Date;f.find("button").attr("disabled",!0),f.find(".results").empty().append(b.t("status.searching","Searching...")),f.bind("search_results",function(a,e){f.find("button").attr("disabled",!1);if(e&&e.photos&&e.photos.photo){f.find(".results").empty();for(var g in e.photos.photo){var h=e.photos.photo[g],i="http://farm"+h.farm+".static.flickr.com/"+h.server+"/"+h.id+"_"+h.secret+"_s.jpg",j="http://farm"+h.farm+".static.flickr.com/"+h.server+"/"+h.id+"_"+h.secret+".jpg",k="http://www.flickr.com/photos/"+h.owner+"/"+h.id;f.find(".results").append(c('<div class="image" style="float: left; padding: 2px; cursor: pointer;"/>').append(c("<img/>",{data:{source:k,big_image_url:j},"class":"image_link",src:i,title:"embed "+(h.title||""),alt:h.title||""})))}}else f.find(".results").empty().append(d(b.t("errors.search_failed","Search failed, please try again.")))});var g=encodeURIComponent(f.find(".query").val());c.getScript("http://www.flickr.com/services/rest/?method=flickr.photos.search&format=json&api_key=734839aadcaa224c4e043eaf74391e50&per_page=25&license=1,2,3,4,5,6&sort=relevance&text="+g)}),f.delegate(".image_link","click",function(a){a.preventDefault(),f.dialog("close"),e({image_url:c(this).data("big_image_url")||c(this).attr("src"),link_url:c(this).data("source"),title:c(this).attr("alt")})})),f.find("form img").attr("src","/images/"+a+"_small_icon.png");var g=c("#editor_tabs .bookmark_search_url").attr("href");g=c.replaceTags(g,"service_type",a),f.data("reference_url",g).find(".results").empty().end().find(".query").val("").end().dialog("close").dialog({autoOpen:!1,title:b.t("titles.image_search","Image Search: %{service_name}",{service_name:c.titleize(a)}),width:440,open:function(){f.find("input:visible:first").focus().select()},height:320}).dialog("open")},c.truncateText=function(a,b){b=b||30;if(!a)return"";var c=(a||"").split(/\s/),d="",e=!1;for(var f in c){var g=c[f];e||(g&&d.length<b?(d.length>0&&(d+=" "),d+=g):(e=!0,d+="..."))}return d},c.toSentence=function(a,d){typeof d=="undefined"?d={}:d=="or"&&(d={two_words_connector:b.t("#support.array.or.two_words_connector"),last_word_connector:b.t("#support.array.or.last_word_connector")}),d=c.extend({words_connector:b.t("#support.array.words_connector"),two_words_connector:b.t("#support.array.two_words_connector"),last_word_connector:b.t("#support.array.last_word_connector")},d);switch(a.length){case 0:return"";case 1:return""+a[0];case 2:return a[0]+d.two_words_connector+a[1];default:return a.slice(0,-1).join(d.words_connector)+d.last_word_connector+a[a.length-1]}},c.queryParam=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(window.location.search);return c==null?c:decodeURIComponent(c[1].replace(/\+/g," "))},c.size=function(a){var b=0;return c.each(a,function(){b++}),b},c.capitalize=function(a){return a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()};var h;c.store.userGet=function(a){return c.store.get("_"+i()+"_"+a)},c.store.userSet=function(a,b){return c.store.set("_"+i()+"_"+a,b)},c.store.userRemove=function(a,b){return c.store.remove("_"+i()+"_"+a,b)},a.youTubeRegEx=/^https?:\/\/(www\.youtube\.com\/watch.*v(=|\/)|youtu\.be\/)([^&#]*)/,c.youTubeID=function(b){var c=b.match(a.youTubeRegEx);return c&&c[c.length-1]?c[c.length-1]:null}}),function(){define("compiled/handlebars_helpers",["vendor/handlebars.vm","i18n","jquery","str/htmlEscape","jquery.instructure_date_and_time","jquery.instructure_misc_helpers","jquery.instructure_misc_plugins"],function(a,b,c,d){var e,f,g;g={t:function(a,d,e){var f,g,h;g={},e=(h=e!=null?e.hash:void 0)!=null?h:{};for(a in e)f=e[a],a.match(/^w\d+$/)&&(g[(new Array(parseInt(a.replace("w",""))+2)).join("*")]=f,delete e[a]);return g["*"]&&(e.wrapper=g),this instanceof String||typeof this=="string"||(e=c.extend(e,this)),b.scoped(e.scope).t(a,d,e)},hiddenIf:function(a){if(a)return" display:none; "},hiddenUnless:function(a){if(!a)return" display:none; "},friendlyDatetime:function(b){return b=new Date(b),new a.SafeString("<time title='"+b+"' datetime='"+b.toISOString()+"'>"+c.friendlyDatetime(b)+"</time>")},datetimeFormatted:function(a){return a.datetime||(a=c.parseFromISO(a)),a.datetime_formatted},mimeClass:function(a){return c.mimeClass(a)},newlinesToBreak:function(b){return new a.SafeString(d(b).replace(/\n/g,"<br />"))},eachWithIndex:function(a,b){var c,d,f,g;e=b.fn,f=b.inverse,g="";if(a&&a.length>0)for(d in a)c=a[d],c._index=d,g+=e(c);else g=f(this);return g}};for(f in g)e=g[f],a.registerHelper(f,e);return a})}.call(this),define("jst/courseList/wrapper",["compiled/handlebars_helpers"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["courseList/wrapper"]=b(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0;f+='<div class="customListWrapper">\n  <a class="customListClose" title=\'',g="close",h="close_course_menu_title",i={},j="courseList.wrapper",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='\'></a>\n  <button class="button small-button customListRestore">',g="Reset",h="reset_course_menu",i={},j="courseList.wrapper",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;return f+='</button>\n  <ul class="customListContent menu-item-drop-column-list"></ul>\n</div>',f}),c["courseList/wrapper"]}),define("jst/courseList/content",["compiled/handlebars_helpers"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["courseList/content"]=b(function(a,b,c,d,e){function o(a,b){var d="",e,f;d+='\n  <li class="customListItem" data-id="',e=c.id||a.id,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"id",{hash:{}})),d+=n(e)+'">\n    <a href="',e=c.href||a.href,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"href",{hash:{}})),d+=n(e)+'">\n      <span class="name ellipsis" title="',e=c.longName||a.longName,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"longName",{hash:{}})),d+=n(e)+'">',e=c.shortName||a.shortName,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"shortName",{hash:{}})),d+=n(e)+"</span>\n      ",e=c.term||a.term,f=c["if"],i=j.program(2,p,b),i.hash={},i.fn=i,i.inverse=j.noop,e=f.call(a,e,i);if(e||e===0)d+=e;return d+='\n      <span class="subtitle ellipsis">',e=c.subtitle||a.subtitle,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"subtitle",{hash:{}})),d+=n(e)+"</span>\n    </a>\n  </li>\n",d}function p(a,b){var d="",e;return d+='\n        <span class="subtitle ellipsis enrollment_term menu-item-drop-float-right">',e=c.term||a.term,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"term",{hash:{}})),d+=n(e)+"</span>\n      ",d}c=c||a.helpers;var f="",g,h,i,j=this,k="function",l=c.helperMissing,m=void 0,n=this.escapeExpression;g=c.items||b.items,h=c.each,i=j.program(1,o,e),i.hash={},i.fn=i,i.inverse=j.noop,g=h.call(b,g,i);if(g||g===0)f+=g;return f+="\n",f}),c["courseList/content"]}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/widget/CustomList",["jquery","compiled/util/objectCollection","jst/courseList/wrapper","jst/courseList/content","jquery.ajaxJSON"],function(b,c,d,e){var f;return f=function(){function f(a,c,d){this.options=b.extend({},this.options,d),this.appendTarget=b(this.options.appendTarget),this.element=b(a),this.targetList=this.element.find("> ul"),this.wrapper=b(this.options.wrapper({})),this.sourceList=this.wrapper.find("> ul"),this.contentTemplate=this.options.content,this.ghost=b("<ul/>").addClass("customListGhost"),this.requests={add:{},remove:{}},this.doc=b(document.body),this.attach(),this.setItems(c),this.options.autoOpen&&this.open()}return f.prototype.options={animationDuration:200,model:"Course",dataAttribute:"id",wrapper:d,content:e,url:"/favorites",appendTarget:"body",resetCount:12,onToggle:!1},f.prototype.open=function(){return this.wrapper.appendTo(this.appendTarget).show(),setTimeout(a(function(){var a;return this.element.addClass("customListEditing"),typeof (a=this.options).onToggle=="function"?a.onToggle(!0):void 0},this),1)},f.prototype.close=function(){var b;this.wrapper.hide(0,a(function(){return this.teardown()},this)),this.element.removeClass("customListEditing"),typeof (b=this.options).onToggle=="function"&&b.onToggle(!1);if(this.pinned.length===0)return this.resetList()},f.prototype.attach=function(){return this.element.delegate(".customListOpen","click",b.proxy(this,"open")),this.wrapper.delegate(".customListClose","click",b.proxy(this,"close")),this.wrapper.delegate(".customListRestore","click",b.proxy(this,"reset")),this.wrapper.delegate("a","click.customListTeardown",function(a){return a.preventDefault()}),this.wrapper.delegate(".customListItem","click.customListTeardown",b.proxy(this,"sourceClickHandler"))},f.prototype.teardown=function(){return this.wrapper.detach()},f.prototype.add=function(a,b){var c,d,e,f;return e=this.items.findBy("id",a),c=b.clone().hide(),e.element=c,b.addClass("on"),this.pinned.push(e),this.pinned.sortBy("shortName"),d=this.pinned.indexOf(e)+1,f=this.targetList.find("li:nth-child("+d+")"),f.length!==0?c.insertBefore(f):c.appendTo(this.targetList),c.slideDown(this.options.animationDuration),this.animateGhost(b,c),this.onAdd(e)},f.prototype.animateGhost=function(b,c){var d,e,f;return e=b.offset(),f=c.offset(),d=b.clone(),e.position="absolute",this.ghost.append(d),this.ghost.appendTo(this.doc).css(e).animate(f,this.options.animationDuration,a(function(){return this.ghost.detach().empty()},this))},f.prototype.remove=function(b,c){return c.removeClass("on"),this.animating=!0,this.onRemove(b),b.element.slideUp(this.options.animationDuration,a(function(){return b.element.remove(),this.pinned.eraseBy("id",b.id),this.animating=!1},this))},f.prototype.abortAll=function(){var a,b,c,d,e;c=this.requests.add;for(a in c)b=c[a],b.abort();d=this.requests.remove,e=[];for(a in d)b=d[a],e.push(b.abort());return e},f.prototype.reset=function(){var c;return this.abortAll(),c=a(function(){return delete this.requests.reset},this),this.requests.reset=b.ajaxJSON(this.options.url+"/"+this.options.model,"DELETE",{},c,c),this.resetList()},f.prototype.resetList=function(){var a,b;return a=this.items.slice(0,this.options.resetCount),b=this.contentTemplate({items:a}),this.targetList.empty().html(b),this.setPinned()},f.prototype.onAdd=function(c){var d,e,f,g;if(this.requests.remove[c.id]){this.requests.remove[c.id].abort();return}return g=a(function(){var a;return a=[].slice.call(arguments),a.unshift(c.id),this.addSuccess.apply(this,a)},this),e=a(function(){var a;return a=[].slice.call(arguments),a.unshift(c.id),this.addError.apply(this,a)},this),d={favorite:{context_type:this.options.model,context_id:c.id}},f=b.ajaxJSON(this.options.url,"POST",d,g,e),this.requests.add[c.id]=f},f.prototype.onRemove=function(c){var d,e,f,g;if(this.requests.add[c.id]){this.requests.add[c.id].abort();return}return f=a(function(){var a;return a=[].slice.call(arguments),a.unshift(c.id),this.removeSuccess.apply(this,a)},this),d=a(function(){var a;return a=[].slice.call(arguments),a.unshift(c.id),this.removeError.apply(this,a)},this),g=this.options.url+"/"+c.id,e=b.ajaxJSON(g,"DELETE",{context_type:this.options.model},f,d),this.requests.remove[c.id]=e},f.prototype.addSuccess=function(a){return delete this.requests.add[a]},f.prototype.addError=function(a){return delete this.requests.add[a]},f.prototype.removeSuccess=function(a){return delete this.requests.remove[a]},f.prototype.removeError=function(a){return delete this.requests.remove[a]},f.prototype.setItems=function(a){var b;return this.items=c(a),this.items.sortBy("shortName"),b=this.contentTemplate({items:this.items}),this.sourceList.html(b),this.setPinned()},f.prototype.setPinned=function(){var d,e,f,g,h,i;this.pinned=c([]),this.element.find("> ul > li").each(a(function(a,c){var d,e;c=b(c),d=c.data("id"),e=this.items.findBy("id",d);if(!e)return;return e.element=c,this.pinned.push(e)},this)),this.wrapper.find("ul > li").removeClass("on"),h=this.pinned,i=[];for(f=0,g=h.length;f<g;f++)d=h[f],e=this.wrapper.find("ul > li[data-id="+d.id+"]"),i.push(e.addClass("on"));return i},f.prototype.sourceClickHandler=function(a){return this.checkElement(b(a.currentTarget))},f.prototype.checkElement=function(a){var b,c;if(this.animating||this.requests.reset)return;return b=a.data("id"),c=this.pinned.findBy("id",b),c?this.remove(c,a):this.add(b,a)},f}()})}.call(this),function(){define("compiled/widget/courseList",["jquery","compiled/widget/CustomList","jst/courseList/wrapper","jst/courseList/content","vendor/jquery.ba-tinypubsub"],function(a,b,c,d){return{init:function(){return a(function(){var e,f,g;e=a("#menu_enrollments"),f=e.closest(".menu-item-drop");if(e.length===0)return;return a.subscribe("menu/hovered",g=function(h){var i;if(!$(h).find(e).find(".customListOpen").length)return;return a.unsubscribe("menu/hovered",g),i=!1,e.delegate(".customListOpen","click",function(){return i=!0}),a.getJSON("/all_menu_courses",function(a){var e;return e=new b("#menu_enrollments",a,{appendTarget:"#menu_enrollments",autoOpen:i,wrapper:c,content:d,onToggle:function(a){return f.toggleClass("menuCustomListEditing",a)}})})})})}}})}.call(this),define("jst/helpDialog",["compiled/handlebars_helpers"],function(a){var b=a.template,c=a.templates=a.templates||{};return c.helpDialog=b(function(a,b,c,d,e){function q(a,b){var d="",e,f;d+='\n      <li>\n        <a href="',e=c.url||a.url,f=c["if"],k=l.program(2,r,b),k.hash={},k.fn=k,k.inverse=l.program(4,s,b),e=f.call(a,e,k);if(e||e===0)d+=e;return d+='" target="_blank">\n          <span class="text">',e=c.text||a.text,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"text",{hash:{}})),d+=p(e)+'</span>\n          <span class="subtext">',e=c.subtext||a.subtext,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"subtext",{hash:{}})),d+=p(e)+"</span>\n        </a>\n      </li>\n    ",d}function r(a,b){var d;return d=c.url||a.url,typeof d===m?d=d.call(a,{hash:{}}):d===o&&(d=n.call(a,"url",{hash:{}})),p(d)}function s(a,b){return"#"}function t(a,b){var d="",e,f,g,h;d+='\n      <div class="ui-state-error">\n        <span class="ui-icon ui-icon-alert"></span>\n        <strong>',e="Wait! A *better browser* may help solve the problem.",f="wait_a_better_browser_may_help_solve_the_problem",g={},h="helpDialog",g.scope=h,h='<a target="_blank" href="http://guides.instructure.com/s/2204/m/4214/l/41056-Which-browsers-does-Canvas-support-">$1</a>',g.w0=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;d+="</strong>\n        <div>",e="You are using Internet Explorer version %{browserVersion}, Try again using the latest version of *Chrome* or **Firefox**",f="you_are_using_browser_version_version_try_again_using_the_latest_version_of_chrome_or_firefox",g={},h="helpDialog",g.scope=h,h='<a href="http://getfirefox.com">$1</a>',g.w1=h,h='<a href="http://google.com/chrome">$1</a>',g.w0=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;return d+="</div>\n      </div>\n    ",d}function u(a,b){var d="",e,f,g,h;d+='\n      <div class="ui-state-highlight">\n        <span class="ui-icon ui-icon-info"></span>\n        <strong>',e="For an instant answer:",f="for_an_instant_answer",g={},h="helpDialog",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;d+="</strong>\n        <div>",e="See if your issue is addressed in the *Canvas Guides*.",f="see_if_your_issue_is_addressed_in_the_canvas_guides",g={},h="helpDialog",g.scope=h,h='<a href="http://guides.instructure.com/">$1</a>',g.w0=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;return d+="</div>\n      </div>\n    ",d}function v(a,b){var d="",e,f,g,h;d+='\n      <label for="error-email">',e="Your email address",f="your_email_address",g={},h="helpDialog",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;return d+='</label>\n      <input type="email" name="error[email]" id="error-email">\n    ',d}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0,p=this.escapeExpression;f+='<div id="help-dialog">\n  <ul id="help-dialog-options" class="help-dialog-pane">\n    ',g=c.helpLinks||b.helpLinks,h=c.each,k=l.program(1,q,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+='\n  </ul>\n  <form class="help-dialog-pane" id="teacher_feedback" style="display:none" action="/api/v1/conversations" method="POST">\n    <label for="teacher-feedback-recipients">\n      ',g="Which course is this question about?",h="which_course_is_this_question_about",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+="\n      <small>",g="Message will be sent to all the Teachers / TA's in the course.",h="message_will_be_sent_to_all_the_teachers_tas_in_the_course",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</small>\n    </label>\n    <select name="recipients[]" id="teacher-feedback-recipients"></select>\n    <label for="teacher-feedback-body">',g="Message",h="message",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</label>\n    <textarea id="teacher-feedback-body" name="body"></textarea>\n    <div class="button-container">\n      <button type="submit" class="button" data-text-while-loading="',g="Sending...",h="sending",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='">',g="Send Message",h="send_message",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</button>\n    </div>\n  </form>\n  <form class="help-dialog-pane" id="create_ticket" style="display:none" action="/errors" method="POST">\n    <h4>',g="File a ticket for a personal response from our support team",h="file_a_ticket_for_a_personal_response_from_our_support_team",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+="</h4>\n    ",g=c.showBadBrowserMessage||b.showBadBrowserMessage,h=c["if"],k=l.program(6,t,e),k.hash={},k.fn=k,k.inverse=l.program(8,u,e),g=h.call(b,g,k);if(g||g===0)f+=g;f+='\n    <div>\n      <label for="error_subject">',g="Subject",h="subject",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</label>\n      <input id="error_subject" name="error[subject]" />\n    </div>\n    <div>\n      <label for="error-comments">\n        ',g="Description",h="description",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+="\n        <small>",g="Include a link to a screencast/screenshot using something like *Jing*.",h="include_a_link_to_a_screencast_or_screenshot_using_something_like_jing",i={},j="helpDialog",i.scope=j,j='<a href="http://www.techsmith.com/download/jing">$1</a>',i.w0=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</small>\n      </label>\n      <textarea id="error-comments" name="error[comments]"></textarea>\n    </div>\n    <label for="severity">',g="How is this affecting you?",h="how_is_this_affecting_you",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</label>\n    <select name="error[user_perceived_severity]" id="severity">\n      <option value="">',g="Please select one...",h="please_select_one",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</option>\n      <option value="just_a_comment">',g="Just a casual question, comment, idea, suggestion",h="just_a_casual_question_comment_idea_suggestion",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</option>\n      <option value="not_urgent">',g="I need some help but it's not urgent",h="i_need_some_help_but_its_not_urgent",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</option>\n      <option value="workaround_possible">',g="Something's broken but I can work around it for now",h="somethings_broken_but_i_can_work_around_it_for_now",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</option>\n      <option value="blocks_what_i_need_to_do">',g="I can't get things done until I hear back from you",h="i_cant_get_things_done_until_i_hear_back_from_you",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</option>\n      <option value="extreme_critical_emergency">',g="EXTREME CRITICAL EMERGENCY!!",h="extreme_critical_emergency",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+="</option>\n    </select>\n    ",g=c.showEmail||b.showEmail,h=c["if"],k=l.program(10,v,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+='\n    <div class="button-container">\n      <button type="submit" data-text-while-loading="',g="Submitting Ticket...",h="Submitting_Ticket",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='" class="button submit_button"><img src="/images/email.png" alt=""/>',g="Submit Ticket",h="submit_this_support_request",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;return f+="</button>\n    </div>\n  </form>\n</div>\n",f}),c.helpDialog}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1};define("compiled/helpDialog",["i18n","jst/helpDialog","INST","jquery.instructure_misc_helpers","jquery.instructure_jquery_patches","jquery.disableWhileLoading"],function(c,d,e){var f;return c=c.scoped("HelpDialog"),f={defaultLinks:[{available_to:["student"],text:c.t("instructor_question","Ask your instructor a question"),subtext:c.t("instructor_question_sub","Questions are submitted to your instructor"),url:"#teacher_feedback"},{available_to:["student","teacher","admin"],text:c.t("search_the_canvas_guides","Search the Canvas Guides"),subtext:c.t("canvas_help_sub","Find answers to common questions"),url:"http://guides.instructure.com"},{available_to:["user","student","teacher","admin"],text:c.t("report_problem","Report a problem"),subtext:c.t("report_problem_sub","If Canvas misbehaves, tell us about it"),url:"#create_ticket"}],defaultTitle:c.t("Help","Help"),initDialog:function(){return this.$dialog=$('<div style="padding:0; overflow: visible;" />').dialog({resizable:!1,width:400,title:this.defaultTitle,close:a(function(){return this.switchTo("#help-dialog-options")},this)}),this.$dialog.dialog("widget").delegate('a[href="#teacher_feedback"],                                          a[href="#create_ticket"],                                          a[href="#help-dialog-options"]',"click",a(function(a){return a.preventDefault(),this.switchTo($(a.currentTarget).attr("href"))},this)),this.helpLinksDfd=$.getJSON("/help_links").done(a(function(a){var c;return a=$.grep(this.defaultLinks.concat(a),function(a){return $.detect(a.available_to,function(a){return b.call(ENV.current_user_roles,a)>=0})}),c={showEmail:!ENV.current_user_id,helpLinks:a,showBadBrowserMessage:e.browser.ie,browserVersion:e.browser.version},this.$dialog.html(d(c)),this.initTicketForm(),$(this).trigger("ready")},this)),this.$dialog.disableWhileLoading(this.helpLinksDfd),this.dialogInited=!0},initTicketForm:function(){var b;return b=this.$dialog.find("#create_ticket").formSubmit({disableWhileLoading:!0,required:["error[subject]","error[comments]","error[user_perceived_severity]"],success:a(function(){return this.$dialog.dialog("close"),b.find(":input").val("")},this)})},switchTo:function(b){var d,e,f;return f="#teacher_feedback, #create_ticket",this.$dialog.find(f).hide(),d=this.$dialog.find(b).show().outerHeight(),this.$dialog.animate({left:f.match(b)?-400:0,height:d},{step:a(function(){return this.$dialog.dialog("option","position","center")},this),duration:100}),(e=this.$dialog.find("a[href='"+b+"'] .text").text())?e=$("          <a class='ui-dialog-header-backlink' href='#help-dialog-options'>            "+c.t("Back","Back")+"          </a>          <span>"+e+"</span>        "):e=this.defaultTitle,this.$dialog.dialog("option","title",e)},open:function(){return this.dialogInited||this.initDialog(),this.$dialog.dialog("open"),this.initTeacherFeedback()},initTeacherFeedback:function(){var c,d;if(!this.teacherFeedbackInited&&b.call(ENV.current_user_roles,"student")>=0)return this.teacherFeedbackInited=!0,d=$.getJSON("/api/v1/courses.json"),c=null,this.helpLinksDfd.done(a(function(){return c=this.$dialog.find("#teacher_feedback").disableWhileLoading(d).formSubmit({disableWhileLoading:!0,required:["recipients[]","body"],success:a(function(){return this.$dialog.dialog("close")},this)})},this)),$.when(d,this.helpLinksDfd).done(function(a){var b,d;return d=function(){var c,d,e,f;e=a[0],f=[];for(c=0,d=e.length;c<d;c++)b=e[c],f.push("<option value='course_"+b.id+"_admins' "+(ENV.context_id===b.id?"selected":"")+">                      "+$.htmlEscape(b.name)+"                    </option>");return f}(),c.find('[name="recipients[]"]').html(d.join(""))})},initTriggers:function(){return $(".help_dialog_trigger").click(a(function(a){return a.preventDefault(),this.open()},this))}}})}.call(this),require(["INST","i18n","jquery","vendor/scribd.view","jquery.ajaxJSON","jquery.google-analytics","jquery.instructure_misc_helpers","jquery.loadingImg"],function(a,b,c,d){b=b.scoped("instructure");var e={"application/vnd.openxmlformats-officedocument.wordprocessingml.template":[1,1],"application/vnd.oasis.opendocument.spreadsheet":[1,1],"application/vnd.sun.xml.writer":[1,1],"application/excel":[1,1],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[1,1],"text/rtf":[1,!1],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":[1,1],"application/vnd.sun.xml.impress":[1,1],"application/vnd.sun.xml.calc":[1,1],"application/vnd.ms-excel":[1,1],"application/msword":[1,1],"application/mspowerpoint":[1,1],"application/rtf":[1,1],"application/vnd.oasis.opendocument.presentation":[1,1],"application/vnd.oasis.opendocument.text":[1,1],"application/vnd.openxmlformats-officedocument.presentationml.template":[1,1],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":[1,1],"text/plain":[1,!1],"application/vnd.openxmlformats-officedocument.presentationml.presentation":[1,1],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[1,1],"application/postscript":[1,1],"application/pdf":[1,1],"application/vnd.ms-powerpoint":[1,1]};c.filePreviewsEnabled=function(){return!a.disableScribdPreviews||!a.disableGooglePreviews},c.isPreviewable=function(b,d){return c.filePreviewsEnabled()&&e[b]&&(!d||!a["disable"+c.capitalize(d)+"Previews"]&&e[b][{scribd:0,google:1}[d]])},c.fn.loadDocPreview=function(e){var f=swfobject.getFlashPlayerVersion(),g=f&&f.major>9;return this.each(function(){function i(a){h.attachment_view_inline_ping_url&&(c.ajaxJSON(h.attachment_view_inline_ping_url,"POST",{},function(){},function(){}),c.trackEvent("Doc Previews",a,JSON.stringify(h)))}var f=c(this),h=c.extend({height:"400px"},f.data(),e);if(!a.disableScribdPreviews&&h.scribd_doc_id&&h.scribd_access_key&&g&&d){var j=d.Document.getDoc(h.scribd_doc_id,h.scribd_access_key),k=f.attr("id"),l=c.extend({jsapi_version:1,disable_related_docs:!0,auto_size:!1,height:h.height,use_ssl:"https:"==document.location.protocol},h.scribdParams);k||(k=c.uniqueId("scribd_preview_"),f.attr("id",k)),c.each(l,function(a,b){j.addParam(a,b)}),c.isFunction(h.ready)&&j.addEventListener("iPaperReady",h.ready),j.write(k),this.childNodes[0].keyboardShortcutDown=this.childNodes[0].keyboardShortcutUp=function(){},i("scribd")}else if(!a.disableGooglePreviews&&(!h.mimeType||c.isPreviewable(h.mimeType,"google"))&&h.attachment_id||h.public_url){function m(){var a="//docs.google.com/viewer?"+c.param({embedded:!0,url:h.public_url});c('<iframe src="'+a+'" height="'+h.height+'" width="100%" />').appendTo(f).load(function(){i("google"),c.isFunction(h.ready)&&h.ready()})}if(h.public_url)m();else if(h.attachment_id){var n="/files/"+h.attachment_id+"/public_url.json";h.submission_id&&(n+="?"+c.param({submission_id:h.submission_id})),f.loadingImage(),c.ajaxJSON(n,"GET",{},function(a){f.loadingImage("remove"),a&&a.public_url&&(c.extend(h,a),m())})}}else f.html("<p>"+htmlEscape(b.t("errors.cannot_view_document_inline","This document cannot be viewed inline, you might not have permission to view it or it might have been deleted."))+"</p>")})}}),define("jquery.doc_previews",function(){}),define("jquery.templateData",["jquery","str/htmlEscape","jquery.instructure_misc_helpers"],function(a,b){a.fn.fillTemplateData=function(c){if(this.length&&c){c.iterator&&this.find("*").andSelf().each(function(){var b=a(this);a.each(["name","id","class"],function(a,d){b.attr(d)&&b.attr(d,b.attr(d).replace(/-iterator-/,c.iterator))})}),c.id&&this.attr("id",c.id);var d=!1;if(c.data)for(var e in c.data){if(c.except&&a.inArray(e,c.except)!=-1)continue;c.data[e]&&c.dataValues&&a.inArray(e,c.dataValues)!=-1&&this.data(e,c.data[e].toString());var f=this.find("."+e),g=c.avoid||"";f.each(function(){var f=a(this);if(f.length>0&&f.closest(g).length===0){if(typeof c.data[e]=="undefined"||c.data[e]===null)c.data[e]="";if(c.htmlValues&&a.inArray(e,c.htmlValues)!=-1)f.html(c.data[e].toString()),f.hasClass("user_content")&&(d=!0,f.removeClass("enhanced"),f.data("unenhanced_content_html",c.data[e].toString()));else if(f[0].tagName.toUpperCase()=="INPUT")f.val(c.data[e]);else try{var h=c.data[e].toString();f.html(b(h))}catch(i){}}})}c.hrefValues&&c.data&&this.find("a,span[rel]").each(function(){var b=a(this),d,e,f;for(var g in c.hrefValues){var h=c.hrefValues[g];if(d=b.attr("href")){var i=a.replaceTags(d,h,encodeURIComponent(c.data[h])),j=b.text()==b.html()?b.text():null;d!=i&&(b.attr("href",i),j&&b.text(j))}(e=b.attr("rel"))&&b.attr("rel",a.replaceTags(e,h,c.data[h])),(f=b.attr("name"))&&b.attr("name",a.replaceTags(f,h,c.data[h]))}}),d&&a(document).triggerHandler("user_content_change")}return this},a.fn.fillTemplateData.defaults={htmlValues:null,hrefValues:null},a.fn.getTemplateData=function(b){if(!this.length||!b)return{};var c={},d,e;if(b.textValues)for(d in b.textValues){var f=this.find("."+b.textValues[d].replace(/\[/g,"\\[").replace(/\]/g,"\\]")+":first");e=a.trim(f.text()),f.html()=="&nbsp;"&&(e=""),e.length==1&&e.charCodeAt(0)==160&&(e=""),c[b.textValues[d]]=e}if(b.dataValues)for(d in b.dataValues){var e=this.data(b.dataValues[d]);e&&(c[b.dataValues[d]]=e)}if(b.htmlValues)for(d in b.htmlValues){var g=this.find("."+b.htmlValues[d].replace(/\[/g,"\\[").replace(/\]/g,"\\]")+":first");e=null,g.hasClass("user_content")&&g.data("unenhanced_content_html")?e=g.data("unenhanced_content_html"):e=a.trim(g.html()),c[b.htmlValues[d]]=e}return c},a.fn.getTemplateValue=function(b,c){var d=a.extend({},c,{textValues:[b]});return this.getTemplateData(d)[b]}}),define("media_comments",["INST","i18n","jquery","str/htmlEscape","jquery.ajaxJSON","jquery.instructure_jquery_patches","jquery.instructure_misc_helpers","jquery.instructure_misc_plugins","jqueryui/progressbar","jqueryui/tabs"],function(a,b,c,d){b=b.scoped("media_comments"),function(a,c){var e=null;try{e=swfobject.getFlashPlayerVersion().major+"."+swfobject.getFlashPlayerVersion().minor,e=" (you have "+e+" installed)"}catch(f){}var g="<div>"+d(b.t("messages.flash_required","This video requires Flash version 9 or higher (you have %{version} installed).",{version:e}))+"<br/><a target='_blank' href='http://get.adobe.com/flashplayer/'>"+d(b.t("links.upgrade_flash","Click here to upgrade"))+"</a></div>";a.fn.mediaComment=function(d,e,f,h,i,j){var k=e,l=f,m=h;if(!c.kalturaSettings){console.log("Kaltura has not been enabled for this account");return}if(d=="create"){l=e;var n=f,o=h,p=i,q=j;a("#media_recorder_container").removeAttr("id").addClass("old_recorder_container"),this.attr("id","media_recorder_container").removeClass("old_recorder_container"),this.unbind("media_comment_created");var r=this;this.bind("media_comment_created",function(a,b){n.call(this,b.id,b.mediaType)}),a.mediaComment.init(l,{modal:p,close:function(){o&&a.isFunction(o)&&o.call(r)},defaultTitle:q})}else if(d=="show_inline"){var s=a("<span/>");l!="video"&&l!="audio"&&(a(this).hasClass("audio_playback")?l="audio":l="video"),s.attr("id","media_comment_holder_"+Math.round(Math.random()*1e4));var t=a(this);a(this).parent(".instructure_file_link_holder").length>0&&(t=a(this).parent(".instructure_file_link_holder"));var u=function(a){t.append(s);var b=t.width(),c={},d={allowScriptAccess:"always",allowNetworking:"all",allowFullScreen:!0,bgcolor:"#000000",wmode:"opaque"},e="/media_objects/"+a+"/redirect",b=Math.min(t.closest("div,p,table").width()||550,550),f=b/550*448;l=="audio"&&(f=125,b=Math.min(b,350)),swfobject.embedSWF(e,s.attr("id"),b.toString(),f.toString(),"9.0.0",!1,c,d)};if(k=="maybe"){var v=m.replace(/\/download.*/,"");t.text("Loading..."),a.ajaxJSON(v,"GET",{},function(a){a.attachment&&a.attachment.media_entry_id&&a.attachment.media_entry_id!="maybe"?(t.text(""),u(a.attachment.media_entry_id)):t.text(b.t("messages.file_failed_to_load","This media file failed to load"))},function(){t.text(b.t("messages.file_failed_to_load","This media file failed to load"))})}else u(k)}else if(d=="show"){var w={},x={allowScriptAccess:"always",allowNetworking:"all",allowFullScreen:!0,bgcolor:"#000000",wmode:"opaque"},y="/media_objects/"+k+"/redirect",z=a("#media_comment_player_dialog");z.length||(z=a("<div id='media_comment_player_dialog'/>").appendTo("body")),z.dialog("close").dialog({autoOpen:!1,title:b.t("titles.play_comment","Play Media Comment"),width:575,height:493,modal:!0,draggable:!1}).dialog("open").empty().css({padding:0,overflow:"hidden"}).append(a('<div id="media_comment_play" />').html(g)),swfobject.embedSWF(y,"media_comment_play","100%","100%","9.0.0",!1,w,x)}return this};var h=[],i=!1,j=function(){i=!0;for(var a=0;a<30;a++){var b=h.shift();if(b){var c=b.elem,d=b.size;c.createMediaCommentThumbnail(b)}}h.length>0?setTimeout(j,500):i=!1};a.fn.mediaCommentThumbnail=function(b,c){return a(this).each(function(){h.push({size:b,elem:a(this),keepOriginalText:c})}),i||(i=!0,setTimeout(j,500)),this},a.fn.createMediaCommentThumbnail=function(d){if(!c.kalturaSettings){console.log("Kaltura has not been enabled for this account");return}var e=d.size||"normal",f=d.only_show_icon,g=d.keepOriginalText,h=a.fn.mediaCommentThumbnail.sizes[e]||a.fn.mediaCommentThumbnail.sizes.normal;return this.each(function(){var d=a.trim(a(this).find(".media_comment_id:first").text());!d&&a(this).attr("id")&&a(this).attr("id").match(/^media_comment_/)&&(d=a(this).attr("id").substring(14)),d=d||a.trim(a(this).parent().find(".media_comment_id:first").text());if(d){var i="http://"+c.kalturaSettings.resource_domain;location.protocol==="https:"&&(i="https://"+(c.kalturaSettings.secure_resource_domain||c.kalturaSettings.domain)),i=i+"/p/"+c.kalturaSettings.partner_id+"/thumbnail/entry_id/",i+=d,i=i+"/width/"+h.width+"/height/"+h.height+"/bgcolor/000000/type/2/vid_sec/5";var j=a("<img/>");j.addClass("media_comment_thumbnail"),j.addClass("media_comment_thumbnail-"+e),f?j.attr("src","/images/media_comment.png"):(j.attr("src","/images/blank.png"),a(this).addClass("no-hover").addClass("no-underline"),j.hover(function(){j.attr("src","/images/play_overlay.png")},function(){j.attr("src","/images/blank.png")})),j.css("backgroundImage","url("+i+")"),j.attr("title",b.t("titles.click_to_view","Click to View"));var k=a(this);if(!g)a(this).empty();else{var k=a(this).clone().empty().removeClass("instructure_file_link");a(this).parent(".instructure_file_link_holder").length>0?a(this).parent(".instructure_file_link_holder").append(k):a(this).after(k)}k.addClass("instructure_inline_media_comment"),k.append(j).css({backgroundImage:"",padding:0}),a(this).append("<span class='media_comment_id' style='display: none;'>"+d+"</span>")}}),this},a.fn.mediaCommentThumbnail.sizes={normal:{width:140,height:100},small:{width:70,height:50}},a.mediaComment=function(b,c,d){var e=a("<div/>");a("body").append(e.hide()),a.fn.mediaComment.apply(e,arguments)},a.mediaComment.partnerData=function(b){return b=b||{},b.context_code=a.mediaComment.contextCode(),b.root_account_id=parseInt(a("#domain_root_account_id").text(),10)||0,JSON.stringify(b)},a.mediaComment.contextCode=function(){var b="";try{b=a.trim(a("#current_context_code").text())||a.trim("user_"+a("#identity .user_id").text())}catch(c){}return b};var k={};a.mediaComment.entryAdded=function(b,c,d,e){if(!b||k[b])return;k[b]=!0;var f={mediaType:c,entryId:b,title:d,userTitle:e},g=a.mediaComment.contextCode();if(f.mediaType==1||f.mediaType==2||f.mediaType==5||!0){var h="video";f.mediaType==2?h="image":f.mediaType==5&&(h="audio"),g&&a.ajaxJSON("/media_objects","POST",{id:f.entryId,type:h,context_code:g,title:f.title,user_entered_title:f.userTitle},function(b){a(document).triggerHandler("media_object_created",b)},function(a){}),a("#media_recorder_container").triggerHandler("media_comment_created",{id:f.entryId,mediaType:h})}},a.mediaComment.audio_delegate={readyHandler:function(){a("#audio_upload")[0].setMediaType("audio")},selectHandler:function(){a.mediaComment.upload_delegate.selectHandler("audio")},singleUploadCompleteHandler:function(b){a.mediaComment.upload_delegate.singleUploadCompleteHandler("audio",b)},allUploadsCompleteHandler:function(){a.mediaComment.upload_delegate.allUploadsCompleteHandler("audio")},entriesAddedHandler:function(b){a.mediaComment.upload_delegate.entriesAddedHandler("audio",b)},progressHandler:function(b){a.mediaComment.upload_delegate.progressHandler("audio",b[0],b[1],b[2])},uploadErrorHandler:function(){a.mediaComment.upload_delegate.uploadErrorHandler("audio")}},a.mediaComment.video_delegate={readyHandler:function(){a("#video_upload")[0].setMediaType("video")},selectHandler:function(){a.mediaComment.upload_delegate.selectHandler("video")},singleUploadCompleteHandler:function(b){a.mediaComment.upload_delegate.singleUploadCompleteHandler("video",b)},allUploadsCompleteHandler:function(){a.mediaComment.upload_delegate.allUploadsCompleteHandler("video")},entriesAddedHandler:function(b){a.mediaComment.upload_delegate.entriesAddedHandler("video",b)},progressHandler:function(b){a.mediaComment.upload_delegate.progressHandler("video",b[0],b[1],b[2])},uploadErrorHandler:function(){a.mediaComment.upload_delegate.uploadErrorHandler("video")}},a.mediaComment.upload_delegate={currentType:"audio",submit:function(){var c=a.mediaComment.upload_delegate.currentType,d=a("#"+c+"_upload")[0].getFiles();d.length>1&&a("#"+c+"_upload")[0].removeFiles(0,d.length-2),d=a("#"+c+"_upload")[0].getFiles();if(d.length==0)return;a("#media_upload_progress").css("visibility","visible").progressbar({value:1}),a("#media_upload_submit").attr("disabled",!0).text(b.t("messages.submitting","Submitting Media File...")),a("#"+c+"_upload")[0].upload()},selectHandler:function(d){a.mediaComment.upload_delegate.currentType=d;var e=a("#"+d+"_upload")[0].getFiles();e.length>1&&a("#"+d+"_upload")[0].removeFiles(0,e.length-2);var f=a("#"+d+"_upload")[0].getFiles()[0];a("#media_upload_settings .icon").attr("src","/images/file-"+d+".png"),a("#media_upload_submit").show(),a("#media_upload_submit").attr("disabled",f?!1:!0),a("#media_upload_settings").css("visibility",f?"visible":"hidden"),a("#media_upload_title").val(f.title),a("#media_upload_display_title").text(f.title),a("#media_upload_file_size").text(a.fileSize(f.bytesTotal)),a("#media_upload_feedback_text").html(""),a("#media_upload_feedback").css("visibility","hidden");if(f.bytesTotal>c.kalturaSettings.max_file_size_bytes){a("#media_upload_feedback_text").html(b.t("errors.file_too_large","*This file is too large.* The maximum size is %{size}MB.",{size:c.kalturaSettings.max_file_size_bytes/1048576,wrapper:"<b>$1</b>"})),a("#media_upload_feedback").css("visibility","visible"),a("#media_upload_submit").hide();return}a("#media_upload_submit").click()},singleUploadCompleteHandler:function(b,c){a("#media_upload_progress").progressbar("option","value",100)},allUploadsCompleteHandler:function(b){a("#media_upload_progress").progressbar("option","value",100),a("#"+b+"_upload")[0].addEntries()},entriesAddedHandler:function(c,d){a("#media_upload_progress").progressbar("option","value",100);var e=d[0];a("#media_upload_submit").text(b.t("messages.submitted","Submitted Media File!")),setTimeout(function(){a("#media_comment_dialog").dialog("close")},1500),c=="audio"?e.entryType=5:c=="video"&&(e.entryType=1),a.mediaComment.entryAdded(e.entryId,e.entryType,e.title)},progressHandler:function(b,c,d,e){var f=100*c/d;a("#media_upload_progress").progressbar("option","value",f)},uploadErrorHandler:function(c){var d=a("#"+c+"_upload")[0].getError();a("#media_upload_errors").text(b.t("errors.upload_failed","Upload failed with error:")+" "+d),a("#media_upload_progress").hide()}};var l=!1,m=null;a.mediaComment.init=function(d,e){m=m||new Date,d=d||"any",e=e||{};var f=a.trim(a("#identity .user_name").text()||"");f&&(f=f+": "+(new Date).toString("ddd MMM d, yyyy"));var g=e.defaultTitle||f||b.t("titles.media_contribution","Media Contribution"),h=function(){a("#video_record_title,#audio_record_title").val(g),j.dialog("close").dialog({autoOpen:!1,title:b.t("titles.record_upload_media_comment","Record/Upload Media Comment"),width:560,height:460,modal:e.modal==0?!1:!0}).dialog("open"),j.dialog("option","close",function(){a("#audio_record").before("<div id='audio_record'/>").remove(),a("#video_record").before("<div id='video_record'/>").remove(),e&&e.close&&a.isFunction(e.close)&&e.close.call(j)}),a("#audio_record").before("<div id='audio_record'/>").remove(),a("#video_record").before("<div id='video_record'/>").remove();var f=j.data("ks");d=="video"?(a("#video_record_option").click(),a("#media_record_option_holder").hide(),a("#audio_upload_holder").hide(),a("#video_upload_holder").show()):d=="audio"?(a("#audio_record_option").click(),a("#media_record_option_holder").hide(),a("#audio_upload_holder").show(),a("#video_upload_holder").hide()):(a("#video_record_option").click(),a("#audio_upload_holder").show(),a("#video_upload_holder").show()),a(document).triggerHandler("reset_media_comment_forms");var h=a.trim(a("#identity .user_name").text())+" "+(new Date).toISOString();setTimeout(function(){var d={host:location.protocol+"//"+c.kalturaSettings.domain,rtmpHost:"rtmp://"+(c.kalturaSettings.rtmp_domain||c.kalturaSettings.domain),kshowId:"-1",pid:c.kalturaSettings.partner_id,subpid:c.kalturaSettings.subpartner_id,uid:j.data("uid")||"ANONYMOUS",ks:f,themeUrl:"/media_record/skin.swf",localeUrl:"/media_record/locale.xml",thumbOffset:"1",licenseType:"CC-0.1",showUi:"true",useCamera:"0",maxFileSize:c.kalturaSettings.max_file_size_bytes/1048576,maxUploads:1,partnerData:a.mediaComment.partnerData(),partner_data:a.mediaComment.partnerData(),entryName:h},e={align:"middle",quality:"high",bgcolor:"#ffffff",name:"KRecordAudio",allowScriptAccess:"sameDomain",type:"application/x-shockwave-flash",pluginspage:"http://www.adobe.com/go/getflashplayer",wmode:"opaque"};a("#audio_record").text(b.t("messages.flash_required_record_audio","Flash required for recording audio.")),swfobject.embedSWF("/media_record/KRecord.swf","audio_record","400","300","9.0.0",!1,d,e);var e=a.extend({},e,{name:"KRecordVideo"}),d=a.extend({},d,{useCamera:"1"});a("#video_record").html("Flash required for recording video."),swfobject.embedSWF("/media_record/KRecord.swf","video_record","400","300","9.0.0",!1,d,e)},c.browser.ie?500:10);var i={host:location.protocol+"//"+c.kalturaSettings.domain,partnerId:c.kalturaSettings.partner_id,subPId:c.kalturaSettings.subpartner_id,uid:j.data("uid")||"ANONYMOUS",entryId:"-1",ks:f,thumbOffset:"1",licenseType:"CC-0.1",maxFileSize:c.kalturaSettings.max_file_size_bytes/1048576,maxUploads:1,uiConfId:c.kalturaSettings.upload_ui_conf,jsDelegate:"$.mediaComment.audio_delegate"},k={align:"middle",quality:"high",bgcolor:"#ffffff",name:"KUpload",allowScriptAccess:"always",type:"application/x-shockwave-flash",pluginspage:"http://www.adobe.com/go/getflashplayer",wmode:"transparent"};a("#audio_upload").text(b.t("messages.flash_required_upload_audio","Flash required for uploading audio."));var m="180",n="50";swfobject.embedSWF("//"+c.kalturaSettings.domain+"/kupload/ui_conf_id/"+c.kalturaSettings.upload_ui_conf,"audio_upload",m,n,"9.0.0",!1,i,k),i=a.extend({},i,{jsDelegate:"$.mediaComment.video_delegate"}),a("#video_upload").text(b.t("messages.flash_required_upload_video","Flash required for uploading video."));var m="180",n="50";swfobject.embedSWF("//"+c.kalturaSettings.domain+"/kupload/ui_conf_id/"+c.kalturaSettings.upload_ui_conf,"video_upload",m,n,"9.0.0",!1,i,k);var o,p,q,r,s,t,u,v,w,x,y,z=!1;l=!0,setInterval(function(){l&&(o=a("#audio_record_holder"),p=a("#audio_record"),q=a("#audio_record_meter"),r=0,s=0,u=a("#video_record_holder"),v=a("#video_record"),w=a("#video_record_meter"),x=0,y=0,l=!1),r++,x++;var b=null,c=null;p&&p[0]&&p[0].getMicophoneActivityLevel&&p.parent().length?b=p[0].getMicophoneActivityLevel():p=a("#audio_record"),v&&v[0]&&v[0].getMicophoneActivityLevel&&v.parent().length?c=v[0].getMicophoneActivityLevel():v=a("#video_record");if(b!=null){b=Math.max(b,s),b>-1&&!o.hasClass("with_volume")&&(q.css("display","none"),a("#audio_record_holder").addClass("with_volume").animate({width:420},function(){q.css("display","")}));if(r>4){s=0,r=0;var d=(b-b%10)/10;q.attr("class","volume_meter band_"+d)}else s=b}if(c!=null){c=Math.max(c,y),c>-1&&!u.hasClass("with_volume")&&(w.css("display","none"),a("#video_record_holder").addClass("with_volume").animate({width:420},function(){w.css("display","")}));if(x>4){y=0,x=0;var d=(c-c%10)/10;w.attr("class","volume_meter band_"+d)}else y=c}},20)},i=new Date;i-m>3e5&&a("#media_comment_dialog").dialog("close").remove(),m=i;var j=a("#media_comment_dialog");if(j.length==0){var k=a("<div/>").attr("id","media_comment_dialog");k.text(b.t("messages.loading","Loading...")),k.dialog("close").dialog({autoOpen:!1,title:b.t("titles.record_upload_media_comment","Record/Upload Media Comment"),resizable:!1,width:470,height:300}).dialog("open"),a.ajaxJSON("/api/v1/services/kaltura_session","POST",{},function(a){k.data("ks",a.ks),k.data("uid",a.uid)},function(a){a.logged_in==0?k.data("ks-error",b.t("errors.must_be_logged_in","You must be logged in to record media.")):k.data("ks-error",b.t("errors.load_failed","Media Comment Application failed to load.  Please try again."))}),a.get("/partials/_media_comments.html",function(b){var c=function(){k.data("ks")?(k.html(b),k.find("#media_record_tabs").tabs({select:function(){a(document).triggerHandler("reset_media_comment_forms")}}),h()):k.data("ks-error")?k.html(k.data("ks-error")):setTimeout(c,500)};c(),j=a("#media_comment_dialog")}),j=k}else h()},a(document).ready(function(){a(document).bind("reset_media_comment_forms",function(){a("#audio_record_holder_message,#video_record_holder_message").removeClass("saving").find(".recorder_message").html("Saving Recording...<img src='/images/media-saving.gif'/>"),a("#audio_record_holder").stop(!0,!0).clearQueue().css("width","").removeClass("with_volume"),a("#video_record_holder").stop(!0,!0).clearQueue().css("width","").removeClass("with_volume"),a("#media_upload_submit").text(b.t("buttons.submit","Submit Media File")).attr("disabled",!0),a("#media_upload_settings").css("visibility","hidden"),a("#media_upload_progress").css("visibility","hidden").progressbar().progressbar("option","value",1),a("#media_upload_title").val("");var c=a("#audio_upload")[0]&&a("#audio_upload")[0].getFiles&&a("#audio_upload")[0].getFiles();c&&a("#audio_upload")[0].removeFiles&&c.length>0&&a("#audio_upload")[0].removeFiles(0,c.length-1),c=a("#video_upload")[0]&&a("#video_upload")[0].getFiles&&a("#video_upload")[0].getFiles(),c&&a("#video_upload")[0].removeFiles&&c.length>0&&a("#video_upload")[0].removeFiles(0,c.length-1)}),a("#media_upload_submit").live("click",function(b){a.mediaComment.upload_delegate.submit()}),a("#video_record_option,#audio_record_option").live("click",function(b){b.preventDefault(),a("#video_record_option,#audio_record_option").removeClass("selected_option"),a(this).addClass("selected_option"),a("#audio_record_holder").stop(!0,!0).clearQueue().css("width","").removeClass("with_volume"),a("#video_record_holder").stop(!0,!0).clearQueue().css("width","").removeClass("with_volume"),a(this).attr("id")=="audio_record_option"?(a("#video_record_holder_holder").hide(),a("#audio_record_holder_holder").show()):(a("#video_record_holder_holder").show(),a("#audio_record_holder_holder").hide())})}),a(document).bind("media_recording_error",function(){a("#audio_record_holder_message,#video_record_holder_message").find(".recorder_message").html(d(b.t("errors.save_failed","Saving appears to have failed.  Please close this popup to try again."))+"<div style='font-size: 0.8em; margin-top: 20px;'>"+d(b.t("errors.persistent_problem","If this problem keeps happening, you may want to try recording your media locally and then uploading the saved file instead."))+"</div>")})}(c,a),window.mediaCommentCallback=function(a){var b=c.trim(c("#current_context_code").text())||c.trim("user_"+c("#identity .user_id").text());for(var d in a){var e=a[d];if(e.mediaType==1||e.mediaType==2||e.mediaType==5||!0){var f="video";e.mediaType==2?f="image":e.mediaType==5&&(f="audio"),b&&c.ajaxJSON("/media_objects","POST",{id:e.entryId,type:f,context_code:b,title:e.name},function(a){c(document).triggerHandler("media_object_created",a)},function(a){}),c("#media_recorder_container").triggerHandler("media_comment_created",{id:e.entryId,mediaType:f})}}c("#media_comment_create_dialog").empty().dialog("close")},window.beforeAddEntry=function(){var a=Math.random();c.mediaComment.lastAddAttemptId=a,setTimeout(function(){c.mediaComment.lastAddAttemptId==a&&c(document).triggerHandler("media_recording_error")},3e4),c("#audio_record_holder_message,#video_record_holder_message").addClass("saving")},window.addEntryFail=function(){c(document).triggerHandler("media_recording_error")},window.addEntryFailed=function(){c(document).triggerHandler("media_recording_error")},window.addEntryComplete=function(a){c.mediaComment.lastAddAttemptId=null,c("#audio_record_holder_message,#video_record_holder_message").removeClass("saving");try{var d=null;c.isArray(a)||(a=[a]);for(var e=0;e<a.length;e++){var f=a[e];c("#media_record_tabs").tabs("option","selected")==0?d=c("#video_record_title,#audio_record_title").filter(":visible:first").val():c("#media_record_tabs").tabs("option","selected")!=1,f.entryType==1&&c("#audio_record_option").hasClass("selected_option")&&(f.entryType=5),c.mediaComment.entryAdded(f.entryId,f.entryType,f.entryName,d),c("#media_comment_dialog").dialog("close")}}catch(g){console.log(g),alert(b.t("errors.save_failed_try_again","Entry failed to save.  Please try again."))}}}),require(["INST","i18n","jquery","str/htmlEscape","jquery.ajaxJSON","jquery.instructure_forms","jquery.instructure_misc_helpers","jquery.rails_flash_notifications","jqueryui/effects/drop"],function(a,b,c,d){b=b.scoped("ajax_errors");var e=window.iTest;a.errorURL="/record_js_error",a.errorCount=0,a.errorLastHandledTimes={},a.log_error=function(b){b=b||{};var d=+(new Date);if(a.errorLastHandledTimes[b.message]>d-5e3)return;a.errorLastHandledTimes[b.message]=d;var e="";try{e=c&&c.fn&&c.fn.text&&c("#identity .user_name").text()}catch(f){}var g="?";b.url=b.url||location.href,b.platform=b.platform||navigator.platform,b.action=b.action||location.href,b.user_name=e,b.user_agent=navigator.userAgent,b.parentPage=window.location;for(var h in b)g=g+"error["+h+"]="+escape(b[h])+"&";a.errorCount+=1;var i=document.createElement("img");i.src=a.errorURL+g.substring(0,2e3),i.style.position="absolute",i.style.left="-10000px",i.style.top=0,document.body.appendChild(i)},window.onerror=function(b,c,d){var f=["webkitSafeEl","NPMethod called on non-NPObject wrapped JSObject!"];for(var g in f)if(f[g]&&b&&b.match&&b.match(f[g]))return!0;if(c&&c.match&&!c.match(window.location.hostname))return!0;a.log_error({message:b,line:d,url:c});if(a.environment=="production")return!0;e&&e.ok(!1,"unexpected error: "+b)},c(document).ready(function(){c("#instructure_ajax_error_result").defaultAjaxError(function(e,f,g,h,i){var j="0",k=b.t("no_text","No text"),l={};try{j=f.status,k=f.responseText,l=c.parseJSON(k)}catch(m){}c.ajaxJSON(location.protocol+"//"+location.host+"/simple_response.json?rnd="+Math.round(Math.random()*9999999),"GET",{},function(){l&&l.status=="AUT"?o(b.t("errors.timeout","There was a problem with your request, possibly due to a long period of inactivity.  Please reload the page and try again."),f):o(b.t("errors.unhandled","Oops! The last request didn't work out."),f)},function(){o(b.t("errors.connection_lost","Connection to %{host} was lost.  Please make sure you're connected to the Internet and try again.",{host:location.host}),f)},{skipDefaultError:!0});var n=c(this),o=function(e,f){var g=n[0];if(!g)return;var h=g.contentDocument||g.contentWindow&&g.contentWindow.document||window.frames[n.attr("id")].document,l=c(h).find("body");l.html(c("<h1 />").text(b.t("error_heading","Ajax Error: %{status_code}",{status_code:j}))),l.append(k),c("#instructure_ajax_error_box").hide();var m="";i&&(e+="<br/><span style='font-size: 0.7em;'>(Development Only)</span>");if(i||a.environment!="production")e+="<br/><a href='#' class='last_error_details_link'>"+d(b.t("links.details","details..."))+"</a>";c.flashError(e)};window.ajaxErrorFlash=o;var p=c.ajaxJSON.findRequest(f);p=p||{};if(p.data){p.params="";for(var q in p.data)p.params+="&"+q+"="+p.data[q]}var r="";try{r=c("#identity .user_name").text()}catch(m){}if(a.ajaxErrorURL){var s="&Msg="+escape(k)+"&StatusCode="+escape(j)+"&URL="+escape(p.url||"unknown")+"&Page="+escape(location.href)+"&Method="+escape(p.submit_type||"unknown")+"&UserName="+escape(r)+"&Platform="+escape(navigator.platform)+"&UserAgent="+escape(navigator.userAgent)+"&Params="+escape(p.params||"unknown");c("body").append("<img style='position: absolute; left: -1000px; top: 0;' src='"+a.ajaxErrorURL+s.substring(0,2e3)+"' />")}}),c(".last_error_details_link").live("click",function(a){a.preventDefault(),a.stopPropagation(),c("#instructure_ajax_error_box").show()}),c(".close_instructure_ajax_error_box_link").click(function(a){a.preventDefault(),c("#instructure_ajax_error_box").hide()}),c("#flash_notice_message,#flash_error_message").each(function(){var a=c(this);if(a.css("display")!="none"){var b=c("#flash_notice_message").hasClass("long_show")?3e4:7e3;c("#flash_notice_message").removeClass("long_show"),a.delay(b).hide("drop",{direction:"up"},2e3,function(){a.empty().hide()})}a.click(function(){a.stop(!0,!0).hide("drop",{direction:"up"},"fast",function(){a.empty().hide()})})})})}),define("ajax_errors",function(){}),require(["i18n","jquery","str/htmlEscape","jquery.ajaxJSON","jquery.instructure_forms","jquery.instructure_jquery_patches","jquery.instructure_misc_plugins"],function(a,b,c){a=a.scoped("feedback"),b(document).ready(function(){function i(){j(function(){f.dialog("close").dialog({autoOpen:!1,resizable:!1}).dialog("open")})}function j(a){var c=!1;if(!h){var d=b("#identity_feedback"),e="user";d.hasClass("admin")?e="admin":d.hasClass("teacher")?e="teacher":d.hasClass("student")&&(e="student",c=!0),f.children("ul").addClass(e)}c?b.ajaxJSON("/courses","GET",{},function(b){g=b,a()}):a(),h=!0}var d=!1,e=b("#feedback_dialog"),f=b("#help_dialog"),g=[],h=!1,k=function(h){f.dialog("close");if(k.already_initialized){e.triggerHandler("feedback_click");return}k.already_initialized=!0;var i=function(a){a&&(e.find("#feedback_form_user_email").val(b("#feedback_user_email").text()).parent().showIf(!b("#identity .user_id").text()),e.find(".feedback-course-select").html(function(){return b.map(g,function(a){return'<option value="'+a.id+'">'+c(a.name)+"</option>"}).join("")}).showIf(g.length>0),e.find(".feedback-type-holder, .feedback-type-teacher").showIf(g.length>0),e.find(".feedback-type").change()),k.default_view=="message_teacher"?e.find("#feedback-type-teacher").attr("checked",!0):e.find("#feedback-type-instructure").attr("checked",!0),e.find(".feedback-type-holder").showIf(k.default_view=="message_teacher"),e.find(".feedback_message").showIf(k.default_view=="problem"),e.find(".feedback-course-select option[value="+b.trim(b("#identity .course_id").text())+"]").attr("selected",!0),e.find("#feedback_form_page_url").val(location.href),e.find("textarea, #feedback_form_subject").val(""),e.find("#feedback_form_subject").focus().select()},j={autoOpen:!1,title:a.t("titles.feedback","Canvas Feedback"),width:500,modal:!0,resizable:!1,overlay:{backgroundColor:"#000",opacity:.5},height:"auto",open:function(){d=!0,i()},close:function(){b("#submit_feedback_form .sending_text").text(a.t("buttons.send_feedback","Send Feedback")),b(this).find(".send_button").attr("disabled",!1)}};e.html("<h3>Loading Feedback Form...</h3>"),e.dialog("close").dialog(j).dialog("open"),b.get("/partials/_feedback.html",function(c){e.html(c),i(!0),b("#feedback_dialog .feedback-option").click(function(){b("#feedback_dialog .feedback-option-selected").removeClass("feedback-option-selected"),b(this).addClass("feedback-option-selected")}),b("#submit_feedback_form").formSubmit({formErrors:!1,object_name:"error",processData:function(a){var c=b(this).find(".feedback-option-selected");c.hasClass("idea")?a["error[backtrace]"]="Posted as an _IDEA_":c.hasClass("compliment")?a["error[backtrace]"]="Posted as a _COMPLIMENT_":a["error[backtrace]"]="Posted as a _PROBLEM_"},beforeSubmit:function(a){if(!a.comments)return!1;b(this).find(".sending_text").text("Sending...").end().find(".send_button").attr("disabled",!0)},success:function(a){b(this).find(".sending_text").text("Thank You!"),d=!1,setTimeout(function(){d||b("#feedback_dialog").dialog("close")},2500)},error:function(c){b(this).find(".sending_text").text(a.t("errors.send_failed","Send Failed, please try again")),b(this).find(".send_button").attr("disabled",!1)}}),e.bind("feedback_click",function(){e.dialog("close").dialog(j).dialog("open")})})};b("#feedback-dialog-select").live("change",function(){e.find(".feedback-course-select_holder").showIf(b(this).val()=="teacher")}),b(".feedback_link").click(function(a){a.preventDefault(),b("#feedback_link").click(),b("#feedback_dialog .feedback-option.idea").click()}),b("#feedback_link").click(function(a){a.preventDefault(),i()}),b("#help_dialog .message_teacher_link").click(function(a){a.preventDefault(),k.default_view="message_teacher",k(!0)}),b("#help_dialog .file_ticket_link").click(function(a){a.preventDefault(),k.default_view="problem",k(!0)})})}),define("feedback",function(){}),require(["i18n","jquery","str/htmlEscape","vendor/slickgrid-googlecode/slick.editors","vendor/slickgrid-googlecode/slick.grid","jquery.instructure_forms","jquery.instructure_misc_helpers","jquery.templateData","vendor/underscore"],function(a,b,c){return a=a.scoped("gradebook"),{init:function(){var d,e=b.extend(!0,{},originalGradebook),f=b("#gradebook_grid"),g={columns:[{id:"student",name:a.t("student","Student"),field:"student",width:250,cssClass:"cell-title",editor:StudentNameEditor,validator:requiredFieldValidator,formatter:StudentNameFormatter}],options:{enableAddRow:!1,enableColumnReorder:!1,asyncEditorLoading:!0},data:[]};b.each(e.assignments,function(){g.columns.push({id:this.id,name:c(this.title),field:this.id,width:200,editor:NullGradeEditor,formatter:simpleGradeCellFormatter,_original:this})}),b.each(e.students,function(){var a={student:this,id:this.id,_original:this};b.each(this.submissions,function(){a[this.assignment_id]=this,a[this.assignment_id]._original=b.extend({},this)}),g.data.push(a)}),b.each(uploadedGradebook.assignments,function(){var a,b=this;this.original_id?(a=_.detect(g.columns,function(a){return a._original&&a._original.id==b.original_id}),a.cssClass="active changed"):(a={id:b.id,name:c(b.title),field:b.id,formatter:simpleGradeCellFormatter,cssClass:"active new"},g.columns.push(a)),a.editor=GradeCellEditor,a.active=!0,a._uploaded=b,a.setValueHandler=function(a,b,c){if(c[b.id])c[b.id].grade=c[b.id]._uploaded.grade=a;else{var d={grade:a,assignment_id:b.id};d._uploaded=d;var e=c._uploaded.submissions.push(d);c[b.id]=c._uploaded.submissions[e-1]}}}),b.each(uploadedGradebook.students,function(){var a,c=this;c.original_id?a=_.detect(g.data,function(a){return a._original&&a._original.id==c.original_id}):(a={id:c.id,student:c},g.data.push(a)),b.each(c.submissions,function(){a[this.assignment_id]=a[this.assignment_id]?b.extend(a[this.assignment_id],this):this,!a[this.assignment_id]._original&&this.grade&&(a[this.assignment_id]._original={score:null}),a[this.assignment_id]._uploaded=this}),a.active=!0,a._uploaded=c});var h=g.columns.length;g.columns=_.select(g.columns,function(a){return a.id==="student"||_.detect(g.data,function(b){return b[a.id]&&b[a.id]._original&&b[a.id]._uploaded&&b[a.id]._original.score!=b[a.id]._uploaded.grade})}),g.columns.length>1?(g.columns.length<h&&b("#assignments_without_changes_alert").show(),b("#gradebook_grid_form").submit(function(a){var c=function(a,c){b.each(["_original","_uploaded"],function(a,d){if(c[d]){var e=b.extend({},c[d]);delete c[d],delete e[d],c[d]=e}})};b.each(uploadedGradebook.students,function(){b.each(this.submissions,c)}),b(this).find("input[name='json_data_to_submit']").val(JSON.stringify(uploadedGradebook))}).show(),b(window).resize(function(){f.height(b(window).height()-f.offset().top-50)}).triggerHandler("resize"),d=new SlickGrid(f,g.data,g.columns,g.options),d.onColumnHeaderClick=function(a){}):b("#no_changes_detected").show()},handleThingsNeedingToBeResolved:function(){var d={},e={};originalGradebook.assignments=originalGradebook.active_assignments,b.each(["student","assignment"],function(a,f){var g=b("#"+f+"_resolution_template").remove(),h=g.find("select");d[f]=[],b.each(uploadedGradebook[f+"s"],function(){this.original_id||d[f].push(this)}),d[f].length&&(h.change(function(){b(this).next(".points_possible_section").css({opacity:0}),b(this).val()>0?(b("#"+f+"_resolution_template select option").removeAttr("disabled"),b("#"+f+"_resolution_template select").each(function(){b("#"+f+"_resolution_template select").not(this).find("option[value='"+b(this).val()+"']").attr("disabled",!0)})):b(this).val()==="new"&&b(this).next(".points_possible_section").css({opacity:1})}),e[f]=_.reject(originalGradebook[f+"s"],function(a){return _.detect(uploadedGradebook[f+"s"],function(b){return b.original_id==a.id})}),b.each(e[f],function(){b('<option value="'+this.id+'" >'+c(this.name||this.title)+"</option>").appendTo(h)}),b.each(d[f],function(a,c){g.clone(!0).fillTemplateData({iterator:c.id,data:{name:c.name,title:c.title,points_possible:c.points_possible}}).appendTo("#gradebook_importer_resolution_section ."+f+"_section table tbody").show().find("input.points_possible").change(function(){c.points_possible=b(this).val()})}),b("#gradebook_importer_resolution_section, #gradebook_importer_resolution_section ."+f+"_section").show())}),d.student.length||d.assignment.length?b("#gradebook_importer_resolution_section").submit(function(c){var d=!1;c.preventDefault(),b(this).find("select").each(function(){if(!b(this).val())return d=!0,b(this).errorBox(a.t("errors.select_an_option","Please select an option")),!1});if(d)return!1;b(this).find("select").each(function(){var a=b(this),c=a.attr("name").split("_"),d=c[0],e=c[1],f=a.val();switch(f){case"new":break;case"ignore":for(var g in uploadedGradebook[d+"s"])if(e==uploadedGradebook[d+"s"][g].id){uploadedGradebook[d+"s"].splice(g,1);break}break;default:_.detect(uploadedGradebook[d+"s"],function(a){return e==a.id}).original_id=f}}),b(this).hide(),GradebookUploader.init()}):GradebookUploader.init()}}}),define("gradebook_uploads",function(){}),require(["i18n","jquery","jquery.ajaxJSON","jquery.instructure_forms","jquery.instructure_jquery_patches","jquery.instructure_misc_plugins","jquery.templateData"],function(a,b){a=a.scoped("link_enrollment"),window.link_enrollment=function(){return{choose:function(c,d,e,f){var g=b(this).parents(".user"),h=b("#link_student_dialog"),i={};i.short_name=c,h.fillTemplateData({data:i});if(!h.data("loaded")){h.find(".loading_message").text(a.t("messages.loading_students","Loading Students..."));var j=h.find(".student_url").attr("href");b.ajaxJSON(j,"GET",{},function(c){for(var g in c){var j=c[g],k=b("<option/>");j.id&&j.name&&(k.val(j.id).text(j.name),h.find(".student_options").append(k))}var k=b("<option/>");k.val("none").text(a.t("options.no_link","[ No Link ]")),h.data("loaded",!0),h.find(".student_options").append(k),h.find(".enrollment_id").val(d),h.find(".student_options").val("none").val(e),h.find(".loading_message").hide().end().find(".students_link").show(),h.find(".existing_user").showIf(e),h.data("callback",f),i.existing_user_name=h.find(".student_options option[value='"+e+"']").text(),h.fillTemplateData({data:i})},function(){h.find(".loading_message").text(a.t("errors.load_failed","Loading Students Failed, please try again")),h.data("callback",f)})}else h.find(".enrollment_id").val(d),h.find(".existing_user").showIf(e),h.find(".student_options").val("none").val(e),i.existing_user_name=h.find(".student_options option[value='"+e+"']").text(),h.fillTemplateData({data:i});h.find(".existing_user").showIf(e),h.find(".student_options option:not(.blank)").remove(),h.dialog("close").dialog({autoOpen:!1,title:a.t("titles.link_to_student","Link to Student"),width:400}).dialog("open")}}}(),b(document).ready(function(){b(document).bind("enrollment_added",function(){b("#link_student_dialog").data("loaded",!1)}),b("#link_student_dialog .cancel_button").click(function(){b("#link_student_dialog").dialog("close")}),b("#link_student_dialog_form").formSubmit({beforeSubmit:function(c){b(this).find("button").attr("disabled",!0).end().find(".save_button").text(a.t("messages.linking_to_student","Linking to Student..."))},success:function(c){b(this).find("button").attr("disabled",!1).end().find(".save_button").text(a.t("buttons.link","Link to Student"));var d=c.enrollment,e=b("#link_student_dialog").data("callback");b("#link_student_dialog").dialog("close"),b.isFunction(e)&&d&&e(d)},error:function(c){b(this).find("button").attr("disabled",!1).find(".save_button").text(a.t("errors.link_failed","Linking Failed, please try again"))}})})}),define("link_enrollment",function(){}),define("rubric_assessment",["i18n","jquery","jquery.instructure_forms","jquery.instructure_jquery_patches","jquery.instructure_misc_helpers","jquery.instructure_misc_plugins","jquery.templateData","vendor/jquery.scrollTo"],function(a,b){return a=a.scoped("rubric_assessment"),window.rubricAssessment={init:function(){var c=b("#rubric_criterion_comments_dialog");b(".rubric").delegate(".rating","click",function(a){b(this).parents(".criterion").find(".criterion_points").val(b(this).find(".points").text()).change()}).delegate(".long_description_link","click",function(c){c.preventDefault();if(!b(this).parents(".rubric").hasClass("editing")){var d=b(this).parents(".criterion").getTemplateData({textValues:["long_description","description"]}),e=b(this).parents(".criterion").hasClass("learning_outcome_criterion");b("#rubric_long_description_dialog").fillTemplateData({data:d,htmlValues:e?["long_description"]:[]}).find(".editing").hide().end().find(".displaying").show().end().dialog("close").dialog({autoOpen:!1,title:a.t("titles.criterion_long_description","Criterion Long Description"),width:400}).dialog("open")}}).delegate(".criterion .saved_custom_rating","change",function(){if(b(this).parents(".rubric").hasClass("assessing")){var a=b(this).val();a&&a.length>0&&b(this).parents(".custom_ratings_entry").find(".custom_rating_field").val(unescape(a))}}).delegate(".criterion_comments","click",function(d){d.preventDefault(),d.preventDefault();var e=b(this).parents(".criterion"),f=e.getTemplateData({textValues:["custom_rating"]}).custom_rating,g=b(this).closest(".displaying").parents(".criterion").length===0,h={criterion_comments:f,criterion_description:e.find(".description:first").text()};c.data("current_rating",e),c.fillTemplateData({data:h}),c.fillFormData(h),c.find(".editing").showIf(g),c.find(".displaying").showIf(!g),c.dialog("close").dialog({autoOpen:!1,title:a.t("titles.additional_comments","Additional Comments"),width:400}).dialog("open")}).find(".criterion_points").bind("keypress change blur",function(a){var c=b(a.target);if(c.parents(".rubric").hasClass("assessing")){var d=parseFloat(c.val(),10);isNaN(d)&&(d=null);var e=c.parents(".criterion");e.find(".rating.selected").removeClass("selected"),d||d===0?(e.find(".criterion_description").addClass("completed"),e.find(".rating").each(function(){var a=parseFloat(b(this).find(".points").text(),10);a==d&&b(this).addClass("selected")})):e.find(".criterion_description").removeClass("completed");var f=0;c.parents(".rubric").find(".criterion:visible:not(.ignore_criterion_for_scoring) .criterion_points").each(function(){var a=parseFloat(b(this).val(),10);isNaN(a)&&(a=0),f+=a}),c.parents(".rubric").find(".rubric_total").text(f)}}),b(".rubric_summary").delegate(".rating_comments_dialog_link","click",function(d){d.preventDefault();var e=b(this).parents(".criterion"),f=e.getTemplateData({textValues:["rating_custom"]}).rating_custom,g={criterion_comments:f,criterion_description:e.find(".criterion_description:first").text()};c.data("current_rating",e),c.fillTemplateData({data:g}),c.fillFormData(g),c.find(".editing").hide(),c.find(".displaying").show(),c.dialog("close").dialog({autoOpen:!1,title:a.t("titles.additional_comments","Additional Comments"),width:400}).dialog("open")}),c.find(".save_button").click(function(a){var b=c.find("textarea.criterion_comments").val(),d=c.data("current_rating");d&&(d.find(".custom_rating").text(b),d.find(".criterion_comments").toggleClass("empty",!b)),c.dialog("close")}),c.find(".cancel_button").click(function(a){c.dialog("close")}),setInterval(rubricAssessment.sizeRatings,2500)},sizeRatings:function(){var a=b(".rubric .criterion:visible");if(a.length){var c=b.windowScrollTop();b(".rubric .criterion:visible").each(function(){var a=b(this),c=a.find(".ratings:visible");if(c.length){var d=c.find(".rating .container").css("height",""),e=Math.max(c.height(),a.find(".criterion_description .container").height());d.css("height",e-10+"px")}}),b("html,body").scrollTop(c)}},assessmentData:function(a){a=rubricAssessment.findRubric(a);var c={};return c["rubric_assessment[user_id]"]=rubricAssessment.assessment_user_id||a.find(".user_id").text(),c["rubric_assessment[assessment_type]"]=rubricAssessment.assessment_type||a.find(".assessment_type").text(),a.find(".criterion:not(.blank)").each(function(){var a=b(this).attr("id"),d="rubric_assessment["+a+"]";c[d+"[points]"]=b(this).find(".criterion_points").val(),b(this).find(".rating.selected")&&(c[d+"[description]"]=b(this).find(".rating.selected .description").text(),c[d+"[comments]"]=b(this).find(".custom_rating").text()),b(this).find(".custom_rating_field:visible").length>0&&(c[d+"[comments]"]=b(this).find(".custom_rating_field:visible").val(),c[d+"[save_comment]"]=b(this).find(".save_custom_rating").attr("checked")?"1":"0")}),c},findRubric:function(a){return a.hasClass("rubric")||($new_rubric=a.closest(".rubric"),$new_rubric.length===0&&($new_rubric=a.find(".rubric:first")),a=$new_rubric),a},updateRubricAssociation:function(c,d){var e=d.summary_data;if(e&&e.saved_comments)for(var f in e.saved_comments){var g=e.saved_comments[f],h=c.find("#criterion_"+f).find(".saved_custom_rating_holder").hide(),i=h.find(".saved_custom_rating");i.find(".comment").remove(),i.empty().append('<option value="">'+a.t("options.select","[ Select ]")+"</option>");for(var j in g)g[j]&&(i.append('<option value="'+escape(g[j])+'">'+b.truncateText(g[j],50)+"</option>"),h.show())}},populateRubric:function(a,c){a=rubricAssessment.findRubric(a);var d=a.attr("id").substring(7);a.find(".user_id").text(rubricAssessment.assessment_user_id||c.user_id).end().find(".assessment_type").text(rubricAssessment.assessment_type||c.assessment_type),a.find(".criterion_description").removeClass("completed").removeClass("original_completed").end().find(".rating").removeClass("selected").removeClass("original_selected").end().find(".custom_rating_field").val("").end().find(".custom_rating_comments").text("").end().find(".criterion_points").val("").change().end().find(".criterion_rating_points").text("").end().find(".custom_rating").text("").end().find(".save_custom_rating").attr("checked",!1),a.find(".criterion_comments").addClass("empty");if(c){var e=c,f=0;for(var g in e.data){var h=e.data[g],i=h.comments_enabled?h.comments:h.description,j=a.find("#criterion_"+h.criterion_id);h.id||j.find(".rating").each(function(){var a=parseFloat(b(this).find(".points").text(),10);a==h.points&&(h.id=b(this).find(".rating_id").text())}),j.find(".criterion_description").addClass("original_completed").end().find("#rating_"+h.id).addClass("original_selected").addClass("selected").end().find(".custom_rating_field").val(i).end().find(".custom_rating_comments").text(i).end().find(".criterion_points").val(h.points).change().end().find(".criterion_rating_points_holder").showIf(h.points||h.points===0).end().find(".criterion_rating_points").text(h.points).end().find(".custom_rating").text(i).end().find(".criterion_comments").toggleClass("empty",!i).end().find(".save_custom_rating").attr("checked",!1),h.points&&(f+=h.points)}a.find(".rubric_total").text(f)}},populateRubricSummary:function(a,c){a.find(".criterion_points").text("").end().find(".rating_custom").text("");if(c){var d=c,e=0;for(var f in d.data){var g=d.data[f];a.find("#criterion_"+g.criterion_id).find(".rating").hide().end().find(".rating.description").showIf(!a.hasClass("free_form")).text(g.description).end().find(".rating_"+g.id).show().end().find(".criterion_points").text(g.points);if(g.comments_enabled&&g.comments){var h=b.truncateText(g.comments,50);a.find("#criterion_"+g.criterion_id).find(".rating_custom").show().text(h)}g.points&&(e+=g.points)}a.show().find(".rubric_total").text(e),a.closest(".edit").show()}else a.hide()}},b(rubricAssessment.init),rubricAssessment}),define("wikiSidebar",["i18n","jquery","str/htmlEscape","jquery.ajaxJSON","jquery.inst_tree","jquery.instructure_forms","jquery.instructure_jquery_patches","jquery.instructure_misc_helpers","jquery.instructure_misc_plugins","jquery.rails_flash_notifications","jquery.templateData","tinymce.editor_box","vendor/jquery.pageless","jqueryui/accordion","jqueryui/tabs","vendor/scribd.view"],function(a,b,c){a=a.scoped("wiki.sidebar");var d,e,f,g,h,i,j;b(function(){d=b("#editor_tabs"),e=d.find("ul#tree1"),f=d.find("#editor_tabs_3 .image_list"),g=b("#course_show_secondary"),h=b("form#sidebar_upload_image_form"),i=b("form#sidebar_upload_file_form"),j=b("#wiki_sidebar_select_folder_dialog")});var k={fileSelected:function(a){var b=a.find("span.text"),c=b.attr("rel"),d=b.text();k.editor.editorBox("create_link",{title:d,url:c,file:!0,image:a.hasClass("image"),scribdable:a.hasClass("scribdable"),kaltura_entry_id:a.attr("data-media-entry-id"),kaltura_media_type:a.hasClass("video_playback")?"video":"audio"})},imageSelected:function(a){var b=a.data("url")||a.attr("src"),c=a.attr("alt");k.editor.editorBox("insert_code",'<img alt="'+c+'" src="'+b+'"/>')},fileAdded:function(a,c,g){var h,i,j,k;b.isFunction(c)?(i=!0,j=c):typeof c=="object"?h=c:i=c,h==null&&(h=e.find(".initialized.folder_"+a.folder_id+">ul"));if(h.length||g){var l=a;k=e.find(".file_blank").clone(!0),k.attr("class","file").addClass(l.mime_class).toggleClass("scribdable",l["scribdable?"]),l.media_entry_id&&k.addClass("kalturable").attr("data-media-entry-id",l.media_entry_id).addClass(l.content_type&&l.content_type.match(/video/)?"video_playback":"audio_playback"),l.name=l.display_name,k.fillTemplateData({data:l,hrefValues:["id"]}),h&&(h.append(k),k.show(),e.instTree.InitInstTree(e)),g&&g(k)}if(i&&(a.mime_class=="image"||a.content_type.match(/^image/))&&f.hasClass("initialized")){var m=b.replaceTags(b("#editor_tabs_3 .file_url").attr("href"),"id",a.id),n=d.find("#wiki_sidebar_image_uploads .img_link").clone();n.find(".img").attr({src:a.thumbnail_url||m,alt:a.display_name}).data("url",m).end().fillTemplateData({data:a}).prependTo(f),j?n.slideDown(j):n.slideDown()}},show:function(){d.addClass("showing"),d.show(),g.hide()},hide:function(){d.removeClass("showing").hide(),g.show()},toggle:function(){d.hasClass("showing")?k.hide():k.show()},loadFolder:function(a){a.data("includes_files",!0);var c=b.replaceTags(b("#editor_tabs_2 #folder_url").attr("href"),"id",a.data("id"));$loading=e.find(">.loading").clone(),$loading.show(),a.append($loading),b.ajaxJSON(c,"GET",{},function(b){$loading.remove();var c=a.find("ul");for(var d in b.sub_folders){var f=b.sub_folders[d].folder,g=e.find(".folder_blank").clone(!0);g.attr("class","folder").data("id",f.id).addClass("folder_"+f.id),g.find(".name").text(f.name),c.append(g),g.show()}for(var d in b.files)k.fileAdded(b.files[d].attachment,c);a.addClass("initialized"),e.instTree.InitInstTree(e)},function(){$loading.remove()})},addFolder:function(a,d,e){var f=a[d];if(e!=0){var g=c(f.name);g="- "+g,g.length+e+1>38&&(g=g.substring(0,35)+"...");for(var l=0;l<e;l++)g="&nbsp;&nbsp;"+g;var m=b("<option />");m.val(f.id),m.html(g),i.find("#attachment_folder_id").append(m.clone()),h.find("#image_folder_id").append(m.clone()),j.find(".folder_id").append(m.clone())}for(var l in f.sub_folders)k.addFolder(a,f.sub_folders[l],e+1)},loadFolders:function(){if(!i.hasClass("initialized")){i.addClass("initialized");var a=i.find(".json_upload_url").attr("href");b.ajaxJSON(a,"GET",{},function(a){var b={},c;for(var d in a.folders){var e=a.folders[d].folder;b[e.id]=e;if(!e.parent_folder_id){c=e.id;continue}b[e.parent_folder_id]||(b[e.parent_folder_id]={}),b[e.parent_folder_id].sub_folders||(b[e.parent_folder_id].sub_folders=[]),b[e.parent_folder_id].sub_folders.push(e.id)}k.addFolder(b,c,0)})}},init:function(){d.find("#pages_accordion a.add").click(function(a){a.preventDefault(),d.find("#new_page_drop_down").slideToggle("fast",function(){b(this).find(":text:visible:first").focus().select()})}),d.find(".upload_new_image_link").click(function(a){a.preventDefault(),k.loadFolders(),h.slideToggle("fast")}),d.find(".find_new_image_link").click(function(a){a.preventDefault(),k.editor.editorBox("execute","instructureEmbed","flickr")}),d.find(".upload_new_file_link").click(function(a){a.preventDefault(),k.loadFolders(),i.slideToggle("fast")}),d.bind("tabsshow tagselect",function(b,c){c.index===1&&!e.hasClass("initialized")&&(e.addClass("initialized unstyled_list"),e.instTree({multi:!1,dragdrop:!1,onExpand:function(a){a.hasClass("folder")&&!a.data("includes_files")&&k.loadFolder(a)},onClick:function(a,b){b.hasClass("leaf")||b.hasClass("file")?k.fileSelected(b):b.hasClass("node")&&b.children(".sign").click()}})),c.index===2&&!f.hasClass("initialized")&&(f.addClass("initialized"),f.pageless({container:f,currentPage:0,totalPages:1,distance:500,url:f.data("url"),loaderMsg:a.t("loading_more_results","Loading more results"),scrape:function(a,b){return this.totalPages=parseInt(b.getResponseHeader("X-Total-Pages")),a}}))}),d.tabs(),b(".wiki_pages li a").live("click",function(a){a.preventDefault(),k.editor.editorBox("create_link",{title:b(this).text(),url:b(this).attr("href")})}),d.find("#pages_accordion").accordion({header:".header",autoHeight:!1}),b("#new_page_drop_down").submit(function(a){a.preventDefault();var c=b.trim(b("#new_page_name").val()).replace(/\s/g,"-").toLowerCase();k.editor.editorBox("create_link",{title:b("#new_page_name").val(),url:b("#new_page_url_prefix").val()+"/"+c}),b("#new_page_drop_down").slideUp("fast"),b("#new_page_name").val("")}),f.delegate(".img_link","click",function(a){a.preventDefault(),k.imageSelected(b(this).find(".img"))}),b.handlesHTML5Files&&(b("#editor_tabs_2 .file_list_holder").bind("dragenter dragover",function(a){if(!b(this).hasClass("file_drop"))return;a.preventDefault(),a.stopPropagation(),b(this).addClass("file_drag")},!1).bind("dragleave dragout",function(a){if(!b(this).hasClass("file_drop"))return;b(this).closest(".file_list_holder")||b(this).removeClass("file_drag")},!1).bind("drop",function(c){if(!b(this).hasClass("file_drop"))return;c.preventDefault(),c.stopPropagation(),b(this).removeClass("file_drag");var d=[],e=c.originalEvent.dataTransfer,f=e.files;for(var g=0;g<f.length;g++)f[g]&&d.push(f[g]);if(d.length===0){alert(a.t("errors.no_valid_files_selected","No valid files were selected"));return}var h=function(a){b("#wiki_sidebar_file_uploads").triggerHandler("files_added",{files:d,folder_id:a})};return j.data("folder_select",h),j.find(".file_count").text(d.length),j.find(".folder_id").empty(),k.loadFolders(),j.dialog("close").dialog({autoOpen:!1,title:a.t("titles.select_folder_for_uploads","Select folder for file uploads")}).dialog("open"),!1},!1),j.find(".select_button").click(function(a){var b=j.find(".folder_id").val();if(b){var c=j.data("folder_select");c&&c(b),j.dialog("close")}}),j.find(".cancel_button").click(function(a){j.data("folder_select",null),j.dialog("close")}),b("#editor_tabs_3 .image_list_holder").bind("dragenter dragover",function(a){if(!b(this).hasClass("file_drop"))return;a.preventDefault(),a.stopPropagation(),b(this).addClass("file_drag")},!1).bind("dragleave dragout",function(a){if(!b(this).hasClass("file_drop"))return;b(this).parents(".image_list_holder").length||b(this).removeClass("file_drag")},!1).bind("drop",function(c){if(!b(this).hasClass("file_drop"))return;c.preventDefault(),c.stopPropagation(),b(this).removeClass("file_drag");var d=[],e=c.originalEvent.dataTransfer,f=e.files;for(var g=0;g<f.length;g++)f[g]&&(!f[g].type||f[g].type.match(/^image/))&&d.push(f[g]);if(d.length===0){alert(a.t("errors.no_valid_image_files_selected","No valid image files were selected"));return}var h=function(a){b("#wiki_sidebar_image_uploads").triggerHandler("files_added",{files:d,folder_id:a})};return j.data("folder_select",h),j.find(".file_count").text(d.length),j.find(".folder_id").empty(),k.loadFolders(),j.dialog("close").dialog({autoOpen:!1,title:a.t("titles.select_folder_for_uploads","Select folder for file uploads")}).dialog("open"),!1},!1));var c=[],g=!0;b("#wiki_sidebar_file_uploads").bind("files_added",function(a,d){for(var e in d.files)c.push({file:d.files[e],folder_id:d.folder_id});b(this).triggerHandler("file_list_update")}).bind("file_list_update",function(a){c.length===0?b(this).slideUp():(b(this).triggerHandler("file_upload_check"),b(this).slideDown())}).bind("file_upload_check",function(d){var e=b(this);if(g){var f=c.shift(),h=b.fileData(f.file);e.fillTemplateData({data:{filename:h.name,files_remaining:c.length}}),g=!1,b.ajaxFileUpload({url:i.attr("action"),data:{"attachment[uploaded_data]":f.file,"attachment[display_name]":h.name,"attachment[folder_id]":f.folder_id},method:"POST",success:function(a){k.fileAdded(a.attachment,!0),g=!0,e.triggerHandler("file_list_update")},progress:function(a){console.log("progress!")},error:function(c){b.flashError(a.t("errors.unexpected_upload_problem","Unexpected problem uploading %{filename}.  Please try again.",{filename:h.name})),e.triggerHandler("file_list_update"),g=!0}}),c.length===0&&e.find(".remaining").slideUp()}else e.fillTemplateData({data:{files_remaining:c.length}})});var l=[],m=!0;b("#wiki_sidebar_image_uploads").bind("files_added",function(a,c){for(var d in c.files)l.push({file:c.files[d],folder_id:c.folder_id});b(this).triggerHandler("file_list_update")}).bind("file_list_update",function(a){l.length?(b(this).triggerHandler("file_upload_check"),b(this).slideDown()):b(this).slideUp()}).bind("file_upload_check",function(c){var d=b(this);if(m){var e=l.shift(),f=b.fileData(e.file);d.fillTemplateData({data:{filename:f.name,files_remaining:l.length}}),m=!1,b.ajaxFileUpload({url:h.attr("action"),data:{"attachment[uploaded_data]":e.file,"attachment[display_name]":f.name,"attachment[folder_id]":e.folder_id},method:"POST",success:function(a){k.fileAdded(a.attachment,!0),m=!0,d.triggerHandler("file_list_update")},progress:function(a){console.log("progress!")},error:function(c){b.flashError(a.t("errors.unexpected_upload_problem","Unexpected problem uploading %{filename}.  Please try again.",{filename:f.name})),d.triggerHandler("file_list_update"),m=!0}}),l.length===0&&d.find(".remaining").slideUp()}else d.fillTemplateData({data:{files_remaining:l.length}})}),h.formSubmit({fileUpload:!0,preparedFileUpload:!0,singleFile:!0,context_code:b("#editor_tabs .context_code").text(),folder_id:function(){return b(this).find("[name='attachment[folder_id]']").val()},upload_only:!0,object_name:"attachment",processData:function(a){return a["attachment[display_name]"]=b(this).find(".file_name").val(),a},beforeSubmit:function(a){h.find(".uploading").slideDown(),h.attr("action",h.find(".json_upload_url").attr("href"))},success:function(a){h.slideUp(function(){h.find(".uploading").hide()}),k.fileAdded(a.attachment,function(){k.imageSelected(b(this).find(".img"))})},error:function(a){h.find(".uploading").slideUp()}}),i.formSubmit({fileUpload:!0,preparedFileUpload:!0,singleFile:!0,object_name:"attachment",context_code:b("#editor_tabs .context_code").text(),folder_id:function(){return b(this).find("[name='attachment[folder_id]']").val()},upload_only:!0,processData:function(a){return a["attachment[display_name]"]=i.find(".file_name").val(),a},beforeSubmit:function(c){i.find(".uploading").slideDown(),i.attr("action",i.find(".json_upload_url").attr("href")),b(this).find("button").attr("disabled",!0).text(a.t("buttons.uploading","Uploading..."))},success:function(a){b(this).find("button").attr("disabled",!1).text("Upload"),i.slideUp(function(){i.find(".uploading").hide()}),k.fileAdded(a.attachment,!0,function(a){k.fileSelected(a)})},error:function(c){b(this).find("button").attr("disabled",!1).text(a.t("errors.upload_failed","Upload Failed, please try again")),i.find(".uploading").slideUp()}})},attachToEditor:function(a){k.editor=b(a)}};return k}),require(["INST","i18n","jquery","str/htmlEscape","wikiSidebar","instructure_helper","instructure-jquery.ui.draggable-patch","jquery.ajaxJSON","jquery.doc_previews","jquery.dropdownList","jquery.google-analytics","jquery.instructure_date_and_time","jquery.instructure_forms","jquery.instructure_jquery_patches","jquery.instructure_misc_helpers","jquery.instructure_misc_plugins","jquery.keycodes","jquery.loadingImg","jquery.rails_flash_notifications","jquery.templateData","media_comments","tinymce.editor_box","vendor/date","vendor/jquery.ba-tinypubsub","vendor/jquery.store","jqueryui/accordion","jqueryui/resizable","jqueryui/sortable","jqueryui/tabs","vendor/scribd.view"],function(a,b,c,d,e){b=b.scoped("instructure"),c.ajaxPrefilter(function(a,b,d){var e=a.url,f=(new Date).getTime();d.done(function(a,b,d){var g=(new Date).getTime()-f;if(g>1e3){var h='{"requestingPage": "'+window.location+'," "status": "'+b+'", "X-Request-Context-Id" : "'+d.getResponseHeader("X-Request-Context-Id")+'", "X-Runtime": '+d.getResponseHeader("X-Runtime")+"}";c.trackEvent("XHRs",e,h,g)}})}),c(function(){function i(){window.clearTimeout(h),g.find(".menu-item").removeClass("hover hover-pending")}function j(){return f.filter(".hover-pending").removeClass("hover-pending"),h=window.setTimeout(i,400),!1}function k(a){var b=f.filter(".hover").length>0;i();var d=c(this);return d.addClass("hover-pending"),b&&d.addClass("hover"),setTimeout(function(){d.hasClass("hover-pending")&&d.addClass("hover")},300),c.publish("menu/hovered",d),!1}function o(){var a=500,b=l.find("li:visible:first").height()*1.5;m=m||l.find(".ellipsible"),m.css("maxWidth",""),m.ifExists(function(){for(var c=0;l.height()>b&&c<20;c++)n||(n=!0,m.addClass("ellipsis")),m.css("maxWidth",a-=20)})}function p(){var a=c("#content");c(".user_content:not(.enhanced):visible").addClass("unenhanced"),c(".user_content.unenhanced:visible").each(function(){var b=c(this);b.find("img").css("maxWidth",Math.min(a.width(),b.width())),b.data("unenhanced_content_html",b.html())}).find(".enhanceable_content").show().filter(".dialog").each(function(){var a=c(this);a.hide(),a.closest(".user_content").find("a[href='#"+a.attr("id")+"']").click(function(b){b.preventDefault(),a.dialog()})}).end().filter(".draggable").draggable().end().filter(".resizable").resizable().end().filter(".sortable").sortable().end().filter(".accordion").accordion().end().filter(".tabs").each(function(){c(this).tabs()}).end().end().find("a:not(.not_external, .external):external").each(function(){c(this).not(":has(img)").addClass("external").html("<span>"+c(this).html()+"</span>").attr("target","_blank").append('<span class="ui-icon ui-icon-extlink ui-icon-inline" title="'+d(b.t("titles.external_link","Links to an external site."))+'"/>')}).end().find("a.instructure_file_link").each(function(){var a=c(this),e=c("<span class='instructure_file_link_holder link_holder'/>");a.removeClass("instructure_file_link").before(e).appendTo(e),a.attr("target")!="_blank"&&e.append("<a href='"+a.attr("href")+"' target='_blank' title='"+d(b.t("titles.view_in_new_window","View in a new window"))+"' style='padding-left: 5px;'><img src='/images/popout.png'/></a>")}),c.filePreviewsEnabled()&&c("a.instructure_scribd_file").not(".inline_disabled").each(function(){var a=c(this);if(c.trim(a.text())){var e=c("<span class='instructure_scribd_file_holder link_holder'/>"),f=c("<a class='scribd_file_preview_link' href='"+a.attr("href")+"' title='"+d(b.t("titles.preview_document","Preview the document"))+"' style='padding-left: 5px;'><img src='/images/preview.png'/></a>");a.removeClass("instructure_scribd_file").before(e).appendTo(e),e.append(f),a.hasClass("auto_open")&&f.click()}}),c(".user_content.unenhanced a").find("img.media_comment_thumbnail").each(function(){c(this).closest("a").addClass("instructure_inline_media_comment")}).end().filter(".instructure_inline_media_comment").removeClass("no-underline").mediaCommentThumbnail("normal").end().filter(".instructure_video_link, .instructure_audio_link").mediaCommentThumbnail("normal",!0).end().not(".youtubed").each(function(){var a=c(this),e=a.attr("href"),f=c.youTubeID(e||"");if(!a.hasClass("inline_disabled")&&f){var g=c('<a href="'+e+'" class="youtubed"><img src="/images/play_overlay.png" class="media_comment_thumbnail" style="background-image: url(//img.youtube.com/vi/'+f+'/2.jpg)"/></a>').click(function(a){a.preventDefault();var e=c("<span class='youtube_holder' style='display: block;'><object width='425' height='344'><param name='wmode' value='opaque'></param><param name='movie' value='//www.youtube.com/v/"+f+"&autoplay=1&hl=en_US&fs=1&'></param><param name='allowFullScreen' value='true'></param><param name='allowscriptaccess' value='always'></param><embed src='//www.youtube.com/v/"+f+"&autoplay=1&hl=en_US&fs=1&' type='application/x-shockwave-flash' allowscriptaccess='always' allowfullscreen='true' width='425' height='344' wmode='opaque'></embed></object><br/><a href='#' style='font-size: 0.8em;' class='hide_youtube_embed_link'>"+d(b.t("links.minimize_youtube_video","Minimize Video"))+"</a></span>");e.find(".hide_youtube_embed_link").click(function(a){a.preventDefault(),e.remove(),g.show(),c.trackEvent("hide_embedded_content","hide_you_tube")}),c(this).after(e).hide()});c.trackEvent("show_embedded_content","show_you_tube"),a.addClass("youtubed").after(g)}}),c(".user_content.unenhanced").removeClass("unenhanced").addClass("enhanced"),setTimeout(function(){c(".user_content form.user_content_post_form:not(.submitted)").submit().addClass("submitted")},10)}function s(){r=c(".time_ago_date:visible").toArray(),t()}function t(){var a=r.shift();if(a){var d=c(a),e=d.data("original_date")||"",f=d.data("parsed_date")||(e?Date.parse(e.replace(/ (at|by)/,"")):Date.parse((d.text()||"").replace(/ (at|by)/,"")));if(f){var g=new Date;g.setDate(g.getDate()+1);if(!e&&f>g&&f-g>36e5){var h=f.getUTCFullYear().toString();f>g&&f.getUTCFullYear()==g.getUTCFullYear()&&!d.text().match(h)&&f.setUTCFullYear(f.getUTCFullYear()-1)}var i=g.getTimezoneOffset()-q;isNaN(i)&&(i=0);var j=g-f+i*60*1e3;d.data("original_date",f.toString("MMM d, yyyy h:mmtt")),d.data("parsed_date",f);var k=f.toString("MMM d, yyyy")+f.toString(" h:mmtt").toLowerCase(),l=k;if(j<864e5)if(j<36e5)if(j<6e4)l=b.t("#time.less_than_a_minute_ago","less than a minute ago");else{var m=parseInt(j/6e4,10);l=b.t("#time.count_minutes_ago",{one:"1 minute ago",other:"%{count} minutes ago"},{count:m})}else{var n=parseInt(j/36e5,10);l=b.t("#time.count_hours_ago",{one:"1 hour ago",other:"%{count} hours ago"},{count:n})}d.text(l),d.attr("title",k)}setTimeout(t,1)}else setTimeout(s,6e4)}function w(a){c("#wizard_spacer_box").height(v.height()||0).showIf(a==="show")}window._earlyClick&&(document.removeEventListener?document.removeEventListener("click",_earlyClick,!1):document.detachEvent("onclick",_earlyClick),_earlyClick.clicks&&setTimeout(function(){c.each(c.uniq(_earlyClick.clicks),function(){var a=c.Event("click");a.preventDefault(),c(this).trigger(a)})},1)),c("#main:not(.already_sized)").css({minHeight:Math.max(c("#left_side").height(),parseInt((c("#main").css("minHeight")||"").replace("px",""),10))});var f=c(".menu-item"),g=c("#menu"),h;g.delegate(".menu-item","mouseenter focusin",k).delegate(".menu-item","mouseleave focusout",j),a.browser.ie7&&c(".menu-item-drop").width(function(){var a=c(this).find(".menu-item-drop-column");return a.length*a.css("width").replace("px","")}),f.live("touchstart",function(){if(!c(this).hasClass("hover"))return k.call(this,event)}),c(document).bind("touchstart",function(a){c(a.target).closest(".menu-item").length||j()});var l=c("#breadcrumbs"),m,n=!1;o(),c(window).resize(o),c("#ajax_authenticity_token").ifExists(function(){this.text()&&c("input[name='authenticity_token']").val(this.text())}),c(document).keycodes("shift+/",function(a){c("#keyboard_navigation").dialog("close").dialog({title:b.t("titles.keyboard_shortcuts","Keyboard Shortcuts"),width:400,height:"auto",autoOpen:!1}).dialog("open")}),c("#switched_role_type").ifExists(function(){var a=c(this).attr("class"),d=c("<img/>"),e=null;switch(c(this).data("role")){case"TeacherEnrollment":e=b.t("switched_roles_message.teacher","You have switched roles temporarily for this course, and are now viewing the course as a teacher.  You can restore your role and permissions from the course home page.");break;case"StudentEnrollment":e=b.t("switched_roles_message.student","You have switched roles temporarily for this course, and are now viewing the course as a student.  You can restore your role and permissions from the course home page.");break;case"TaEnrollment":e=b.t("switched_roles_message.ta","You have switched roles temporarily for this course, and are now viewing the course as a TA.  You can restore your role and permissions from the course home page.");break;case"ObserverEnrollment":e=b.t("switched_roles_message.observer","You have switched roles temporarily for this course, and are now viewing the course as an observer.  You can restore your role and permissions from the course home page.");break;case"DesignerEnrollment":e=b.t("switched_roles_message.designer","You have switched roles temporarily for this course, and are now viewing the course as a designer.  You can restore your role and permissions from the course home page.");break;default:e=b.t("switched_roles_message.student","You have switched roles temporarily for this course, and are now viewing the course as a student.  You can restore your role and permissions from the course home page.")}d.attr("src","/images/warning.png").attr("title",e).css({paddingRight:2,width:12,height:12}),c("#crumb_"+a).find("a").prepend(d)}),c("a.show_quoted_text_link").live("click",function(a){var b=c(this).parents(".quoted_text_holder").children(".quoted_text");b.length>0&&(a.preventDefault(),b.show(),c(this).hide())}),c(".custom_search_results_link").click(function(a){a.preventDefault();var d=c("#custom_search_results_dialog");d.dialog("close").dialog({autoOpen:!1,title:b.t("titles.search_for_open_resources","Search for Open Resources"),width:600,height:400}).dialog("open");var e=d.data("searchControl");e&&e.execute(c("title").text())}),c("a.instructure_inline_media_comment").live("click",function(d){d.preventDefault();if(a.kalturaSettings){var e=c(this),f=c("<span><span></span></span>"),g="video",h=e.data("media_comment_id")||e.find(".media_comment_id:first").text();f.css("display","block"),!h&&e.attr("id")&&e.attr("id").match(/^media_comment_/)&&(h=e.attr("id").substring(14)),e.after(f),e.hide();if(e.data("media_comment_type")==="audio"||e.is(".audio_playback, .audio_comment, .instructure_audio_link"))g="audio";f.children("span").mediaComment("show_inline",h,g,e.attr("href")),f.append("<br/><a href='#' style='font-size: 0.8em;' class='hide_flash_embed_link'>"+b.t("links.minimize_embedded_kaltura_content","Minimize Embedded Content")+"</a>"),f.find(".hide_flash_embed_link").click(function(a){a.preventDefault(),f.remove(),e.show(),c.trackEvent("hide_embedded_content","hide_media")}),c.trackEvent("show_embedded_content","show_media")}else alert(b.t("alerts.kaltura_disabled","Kaltura has been disabled for this Canvas site"))}),c("a.equella_content_link").live("click",function(a){a.preventDefault();var e=c("#equella_preview_dialog");if(!e.length){e=c("<div/>"),e.attr("id","equella_preview_dialog").hide(),e.html("<h2/><iframe style='background: url(/images/ajax-loader-medium-444.gif) no-repeat left top; width: 800px; height: 350px; border: 0;' src='about:blank' borderstyle='0'/><div style='text-align: right;'><a href='#' class='original_link external external_link' target='_blank'>"+d(b.t("links.view_equella_content_in_new_window","view the content in a new window"))+"</a>"),e.find("h2").text(c(this).attr("title")||c(this).text()||b.t("titles.equella_content_preview","Equella Content Preview"));var f=e.find("iframe");setTimeout(function(){f.css("background","#fff")},2500),c("body").append(e),e.dialog({autoOpen:!1,width:"auto",resizable:!1,title:b.t("titles.equella_content_preview","Equella Content Preview"),close:function(){e.find("iframe").attr("src","about:blank")}})}e.find(".original_link").attr("href",c(this).attr("href")),e.dialog("close").dialog("open"),e.find("iframe").attr("src",c(this).attr("href"))}),c(".dialog_opener[aria-controls]:not(.user_content *)").live("click",function(a){var b=this;c("#"+c(this).attr("aria-controls")).ifExists(function(d){a.preventDefault(),d.data("dialog")||d.dialog(c.extend({autoOpen:!1,modal:!0},c(b).data("dialogOpts"))),d.dialog("open")})}),c.filePreviewsEnabled()?c("a.scribd_file_preview_link").live("click",function(a){a.preventDefault();var e=c(this).loadingImage({image_size:"small"}).hide();c.ajaxJSON(e.attr("href").replace(/\/download.*/,""),"GET",{},function(a){var f=a&&a.attachment,g=f&&f.scribd_doc&&f.scribd_doc.attributes;e.loadingImage("remove");if(f&&(g||c.isPreviewable(f.content_type,"google"))){var h=c("<span><br /></span>").insertAfter(e.parents(".link_holder:last")).loadDocPreview({scribd_doc_id:g&&g.doc_id,scribd_access_key:g&&g.access_key,mimeType:f.content_type,public_url:f.authenticated_s3_url}).append(c('<a href="#" style="font-size: 0.8em;" class="hide_file_preview_link">'+d(b.t("links.minimize_file_preview","Minimize File Preview"))+"</a>").click(function(a){a.preventDefault(),e.show(),h.remove(),c.trackEvent("hide_embedded_content","hide_file_preview")}));c.trackEvent("show_embedded_content","show_file_preview")}},function(){e.loadingImage("remove").hide()})}):c("a.scribd_file_preview_link").live("click",function(a){a.preventDefault(),alert(b.t("alerts.file_previews_disabled","File previews have been disabled for this Canvas site"))}),c(document).bind("user_content_change",p),setInterval(p,15e3),setTimeout(p,1e3),c(".zone_cached_datetime").each(function(){if(c(this).attr("title")){var a=c.parseFromISO(c(this).attr("title"));a.timestamp&&c(this).text(a.datetime_formatted)}}),c(".show_sub_messages_link").click(function(a){a.preventDefault(),c(this).parents(".subcontent").find(".communication_sub_message.toggled_communication_sub_message").removeClass("toggled_communication_sub_message"),c(this).parents(".communication_sub_message").remove()}),c(".communication_message .message_short .read_more_link").click(function(a){a.preventDefault(),c(this).parents(".communication_message").find(".message_short").hide().end().find(".message").show()}),c(".communication_message .close_notification_link").live("click",function(a){a.preventDefault();var b=c(this).parents(".communication_message");b.confirmDelete({url:c(this).attr("rel"),noMessage:!0,success:function(){c(this).slideUp(function(){c(this).remove()})}})}),c(".communication_message .add_entry_link").click(function(a){a.preventDefault();var b=c(this).parents(".communication_message"),d=b.find(".reply_message").hide(),e=b.find(".communication_sub_message.blank").clone(!0).removeClass("blank");d.before(e.show());var f=c.uniqueId("textarea_");e.find("textarea.rich_text").attr("id",f),c(document).triggerHandler("richTextStart",c("#"+f)),e.find("textarea:first").focus().select()}),c(document).bind("richTextStart",function(a,b){if(!b||b.length===0)return;b=c(b);if(!b||b.length===0)return;b.editorBox(),b.editorBox("focus",!0),e&&(e.attachToEditor(b),c("#sidebar_content").hide(),e.show())}).bind("richTextEnd",function(a,b){if(!b||b.length===0)return;b=c(b);if(!b||b.length===0)return;b.editorBox("destroy"),e&&(c("#sidebar_content").show(),e.hide())}),c(".cant_record_link").click(function(a){a.preventDefault(),c("#cant_record_dialog").dialog("close").dialog({autoOpen:!1,modal:!0,title:b.t("titles.cant_create_recordings","Can't Create Recordings?"),width:400}).dialog("open")}),c(".communication_message .content .links .show_users_link,.communication_message .header .show_users_link").click(function(a){a.preventDefault(),c(this).parents(".communication_message").find(".content .users_list").slideToggle()}),c(".communication_message .delete_message_link").click(function(a){a.preventDefault(),c(this).parents(".communication_message").confirmDelete({noMessage:!0,url:c(this).attr("href"),success:function(){c(this).slideUp()}})}),c(".communication_sub_message .add_conversation_message_form").formSubmit({beforeSubmit:function(a){c(this).find("button").attr("disabled",!0),c(this).find(".submit_button").text(b.t("status.posting_message","Posting Message...")),c(this).loadingImage()},success:function(a){c(this).loadingImage("remove");var b=c(this).parents(".communication_sub_message"),d=b.parents(".communication_message");message_data=a.messages[0],b.fillTemplateData({data:{post_date:c.parseFromISO(message_data.created_at).datetime_formatted,message:message_data.body},htmlValues:["message"]}),b.find(".message").show(),c(this).remove(),d.find(".reply_message").show(),c.flashMessage("Message Sent!"),c(document).triggerHandler("user_content_change"),location.href.match(/dashboard/)&&c.trackEvent("dashboard_comment","create")},error:function(a){c(this).loadingImage("remove"),c(this).find("button").attr("disabled",!1),c(this).find(".submit_button").text("Post Failed, Try Again"),c(this).formErrors(a)}}),c(".communication_sub_message .add_sub_message_form").formSubmit({beforeSubmit:function(a){c(this).find("button").attr("disabled",!0),c(this).find(".submit_button").text(b.t("status.posting_message","Posting Message...")),c(this).loadingImage()},success:function(a){c(this).loadingImage("remove");var b=c(this).parents(".communication_sub_message");if(c(this).hasClass("submission_comment_form")){var d=c(this).getTemplateData({textValues:["submission_user_id"]}).submission_user_id,e=null;for(var f in a){var g=a[f].submission;g.user_id==d&&(e=g)}if(e){var h=e.submission_comments[e.submission_comments.length-1].submission_comment;h.post_date=c.parseFromISO(h.created_at).datetime_formatted,h.message=h.formatted_body||h.comment,b.fillTemplateData({data:h,htmlValues:["message"]})}}else{var i=a.discussion_entry;i.post_date=c.parseFromISO(i.created_at).datetime_formatted,b.find(".content > .message_html").val(i.message),b.fillTemplateData({data:i,htmlValues:["message"]})}b.find(".message").show(),b.find(".user_content").removeClass("enhanced"),b.parents(".communication_message").find(".reply_message").removeClass("lonely_behavior_message").show(),c(document).triggerHandler("richTextEnd",c(this).find("textarea.rich_text")),c(document).triggerHandler("user_content_change"),c(this).remove(),location.href.match(/dashboard/)&&c.trackEvent("dashboard_comment","create")},error:function(a){c(this).loadingImage("remove"),c(this).find("button").attr("disabled",!1),c(this).find(".submit_button").text(b.t("errors.posting_message_failed","Post Failed, Try Again")),c(this).formErrors(a)}}),c(".communication_sub_message form .cancel_button").click(function(){var a=c(this).parents(".communication_sub_message"),b=c(this).parents(".communication_message");c(document).triggerHandler("richTextEnd",a.find("textarea.rich_text")),a.remove(),b.find(".reply_message").show()}),c(".communication_message,.communication_sub_message").bind("focusin mouseenter",function(){c(this).addClass("communication_message_hover")}).bind("focusout mouseleave",function(){c(this).removeClass("communication_message_hover")}),c(".communication_sub_message .more_options_reply_link").click(function(a){a.preventDefault();var b=c(this).parents("form"),d=null;b.hasClass("submission_comment_form")?d={comment:b.find("textarea:visible:first").val()||""}:d={message:b.find("textarea:visible:first").val()||""},location.href=c(this).attr("href")+"?message="+encodeURIComponent(d.message)}),c(".communication_message.new_activity_message").ifExists(function(){this.find(".message_type img").click(function(){var a=c(this),b=c.trim(a.attr("class"));a.parents(".message_type").find("img").removeClass("selected"),a.addClass("selected").parents(".new_activity_message").find(".message_type_text").text(a.attr("title")).end().find(".activity_form").hide().end().find("textarea, :text").val("").end().find("."+b+"_form").show().find(".context_select").change()}),this.find(".context_select").change(function(){var a=c(this),b=a.val(),d=a.parents(".communication_message"),e=d.find("form");e.attr("action",d.find("."+b+"_form_url").attr("href")),e.data("context_name",this.options[this.selectedIndex].text),e.data("context_code",b),d.find(".roster_list").hide().find(":checkbox").each(function(){c(this).attr("checked",!1)}),d.find("."+b+"_roster_list").show()}).triggerHandler("change"),this.find(".cancel_button").click(function(a){c(this).parents(".communication_message").hide().prev(".new_activity_message").show()}),this.find(".new_activity_message_link").click(function(a){a.preventDefault(),c(this).parents(".communication_message").hide().next(".new_activity_message").find(".message_type img.selected").click().end().show().find(":text:visible:first").focus().select()}),this.find("form.message_form").formSubmit({beforeSubmit:function(a){c("button").attr("disabled",!0),c("button.submit_button").text(b.t("status.posting_message","Posting Message..."))},success:function(a){c("button").attr("disabled",!1),c("button.submit_button").text("Post Message");var b=c(this).data("context_code")||"",d=c(this).data("context_name")||"";if(c(this).hasClass("discussion_topic_form")){var e=a.discussion_topic;e.context_code=d,e.user_name=c("#identity .user_name").text(),e.post_date=c.parseFromISO(e.created_at).datetime_formatted,e.topic_id=e.id;var f=c(this).parents(".communication_message").find(".template"),g=f.find(".communication_message").clone(!0);g.find(".header .title,.behavior_content .less_important a").attr("href",f.find("."+b+"_topic_url").attr("href")),g.find(".add_entry_link").attr("href",f.find("."+b+"_topics_url").attr("href")),g.find(".user_name").attr("href",f.find("."+b+"_user_url").attr("href")),g.find(".topic_assignment_link,.topic_assignment_url").attr("href",f.find("."+b+"_assignment_url").attr("href")),g.find(".attachment_name,.topic_attachment_url").attr("href",f.find("."+b+"_attachment_url").attr("href"));var h={discussion_topic_id:e.id};g.fillTemplateData({data:e,hrefValues:["topic_id","user_id","assignment_id","attachment_id"],avoid:".subcontent"}),g.find(".subcontent").fillTemplateData({data:h,hrefValues:["topic_id","user_id"]}),g.find(".subcontent form").attr("action",f.find("."+b+"_entries_url").attr("href")),g.fillFormData(h,{object_name:"discussion_entry"}),c(this).parents(".communication_message").after(g.hide()),g.slideDown(),c(this).parents(".communication_message").slideUp(),c(this).parents(".communication_message").prev(".new_activity_message").slideDown()}else c(this).hasClass("announcement_form")||location.reload()},error:function(a){c("button").attr("disabled",!1),c("button.submit_button").text(b.t("errors.posting_message_failed","Post Failed, Try Again")),c(this).formErrors(a)}})}),c("#topic_list .show_all_messages_link").show().click(function(a){a.preventDefault(),c("#topic_list .topic_message").show(),c(this).hide()});var q=parseInt(c("#time_zone_offset").text(),10),r=[];setTimeout(s,100);var u=c("#sequence_footer .sequence_details_url").filter(":last").attr("href");u&&c.ajaxJSON(u,"GET",{},function(a){var d=c("#sequence_footer");a.current_item&&(c("#sequence_details .current").fillTemplateData({data:a.current_item.content_tag}),c.each({previous:".prev",next:".next"},function(e,f){var g=d.find(f);if(a[e+"_item"]||a[e+"_module"]){var h=a[e+"_item"]&&a[e+"_item"].content_tag||a[e+"_module"]&&a[e+"_module"].context_module;a[e+"_item"]||(h.title=h.title||h.name,h.text=e=="previous"?b.t("buttons.previous_module","Previous Module"):b.t("buttons.next_module","Next Module"),g.addClass("module_button")),g.fillTemplateData({data:h}),a[e+"_item"]?g.attr("href",c.replaceTags(d.find(".module_item_url").attr("href"),"id",h.id)):g.attr("href",c.replaceTags(d.find(".module_url").attr("href"),"id",h.id)+"/items/"+(e==="previous"?"last":"first"))}else g.hide()}),d.show(),c(window).resize())}),c(".module_legend_link").click(function(a){var b=c(this).parents(".module_legend");b.hide(),b.next(".module_legend").show()});var v=c("#wizard_box"),x=window.location.pathname;c(".close_wizard_link").click(function(a){a.preventDefault(),c.store.userSet("hide_wizard_"+x,!0),v.slideUp("fast",function(){c(".wizard_popup_link").slideDown("fast"),w("hide")})}),c(".wizard_popup_link").click(function(a){a.preventDefault(),c(".wizard_popup_link").slideUp("fast"),v.slideDown("fast",function(){v.triggerHandler("wizard_opened"),c([document,window]).triggerHandler("scroll")})}),v.ifExists(function(a){a.bind("wizard_opened",function(){var b=a.find(".wizard_options"),c=b.height();b.height(c),a.find(".wizard_details").css({maxHeight:c-5,overflow:"auto"}),w("show")}),a.find(".wizard_options_list .option").click(function(b){var d=c(this),e=c(b.target).closest("a");if(e.length>0&&e.attr("href")!="#")return;b.preventDefault(),d.parents(".wizard_options_list").find(".option.selected").removeClass("selected"),d.addClass("selected");var f=a.find(".wizard_details"),g=d.getTemplateData({textValues:["header"]});g.link=g.header,f.fillTemplateData({data:g}),f.find(".details").remove(),f.find(".header").after(d.find(".details").clone(!0).show());var h=d.find(".header").attr("href");h!="#"?f.find(".link").show().attr("href",h):f.find(".link").hide(),f.hide().fadeIn("fast")}),setTimeout(function(){c.store.userGet("hide_wizard_"+x)||c(".wizard_popup_link.auto_open:first").click()},500)}),c(".more_link").click(function(a){return c(this).closest("li").slideUp().parents("ul").children(":hidden").slideDown().first().find(":tabbable:first").focus(),!1}),c(".to-do-list, #topic_list").delegate(".disable_item_link","click",function(a){function g(a){e.confirmDelete({url:a,noMessage:!0,success:function(){c(this).slideUp(function(){c(this).remove()})}})}a.preventDefault();var e=c(this).parents("li, div.topic_message"),f=c(this).attr("href");c(this).hasClass("grading")?(options={},options['<span class="ui-icon ui-icon-trash">&nbsp;</span> '+d(b.t("ignore_forever","Ignore Forever"))]=function(){g(f+"?permanent=1")},options['<span class="ui-icon ui-icon-star">&nbsp;</span> '+d(b.t("ignore_until_new_submission","Ignore Until New Submission"))]=function(){g(f)},c(this).dropdownList({options:options})):g(f+"?permanent=1")}),c("h1").length||c('<h1 class="ui-helper-hidden-accessible" />').text(document.title).prependTo("#content");if(!c("h2").length&&c("#breadcrumbs li:last").text().length){var y=c('<h2 class="ui-helper-hidden-accessible" />').text(c("#breadcrumbs li:last").text()),z=c("#content h1");z.length?z.after(y):y.prependTo("#content")}setTimeout(function(){c("#content a:external,#content a.explicit_external_link").each(function(){c(this).not(":has(img)").not(".not_external").addClass("external").children("span.ui-icon-extlink").remove().end().html("<span>"+c(this).html()+"</span>").attr("target","_blank").append('<span class="ui-icon ui-icon-extlink ui-icon-inline" title="'+d(b.t("titles.external_link","Links to an external site."))+'"/>')})},2e3)})}),define("instructure",function(){}),function(){require(["compiled/widget/courseList","compiled/helpDialog","translations/_core_en","vendor/firebugx","jquery.google-analytics","vendor/swfobject/swfobject","reminders","jquery.instructure_forms","tinymce.editor_box","instructure","ajax_errors","page_views","feedback","compiled/license_help","gradebook_uploads","jquery.fancyplaceholder","jqueryui/autocomplete","link_enrollment","media_comments","rubric_assessment","tinymce.editor_box","vendor/graphael","vendor/jquery.pageless","vendor/jquery.scrollTo"],function(a,b){return a.init(),b.initTriggers()})}.call(this),define("common",function(){})